---
complexity_score: 27.5
converted_at: '2025-08-13T06:57:16.208402Z'
file_type: html
format: html
image_processing_enhanced: true
images_extracted: 4
images_saved: 3
original_path: 76_22104-LZA7016017_1Uen.DN33B.html
pictures_extracted: 4
processing_method: docling_multimodal
quality_score: 9.0
source_file: 76_22104-LZA7016017_1Uen.DN33B.html
source_zip: en_lzn7931071_r38f.zip
tables_extracted: 39
zip_image_types:
- .svg
- .png
- .gif
- .jpg
- .bmp
zip_images_total: 2796
---

# 

Shared NR RAN

Contents

![Image](../images/76_22104-LZA7016017_1Uen.DN33B/additional_3_CP.png)

![Image](../images/76_22104-LZA7016017_1Uen.DN33B/additional_3_CP.png)

- Overview
- Dependencies
- Feature Operation
    - PLMN Concepts and Network Identities Relations
    - Feature Operation Overview
        - Configuration Overview
        - Xn Connection Handling
        - X2 Connection Handling for EN-DC Support
        - X2 Connection Handling for NR Standalone Support
    - Mobility
        - HRL and Mobility Restriction List Concept and Procedures
        - EN-DC Specific Mobility
        - SA-Specific Mobility
    - Configuration
        - Supported Configuration Examples
        - Configuration for Shared NR Cells
        - Configuration for Non-Shared NR Cells with Shared gNodeB (MORAN Configuration)
        - Configuration for Non-Shared NR Cells with Shared gNodeB (MOCN as MORAN Configuration)
    - Transport Network Configuration for Shared NR RAN
        - Transport Network Configuration Overview for NR SA and EN-DC
        - Configuration Examples for Shared NR RAN
        - MOCN Configuration Rules for NR SA and EN-DC
        - Transport Network Configuration for MOCN in EN-DC
    - UE Connection Handling
    - NG Connection Handling
    - System Information Broadcast in NR Cell
    - Automated Neighbor Relations LTE to NR for EN-DC
- Network Impact
    - Privacy Implications of Shared NR RAN
- Parameters
- Performance
- Activate
- Deactivate
- Engineering Guidelines for Shared NR RAN
- Appendix: Feature Change History
    - Appendix: 22.Q3: Enhanced Emergency Call Handling
    - Appendix: 23.Q2: Automatic EN-DC X2 Setup Using X2 TNL Address Discovery to gNodeB with MORAN Configuration
    - Appendix: 24.Q4.0: Carrier Aggregation Support for MORAN

# 1 Shared NR RAN Overview

The Shared NR RAN feature enables the sharing of NR RAN between hosting and

participating operators. The feature uses the MOCN and MORAN sharing cases to provide

substantial CAPEX and OPEX savings, along with reduced environmental footprint.

| Feature Name           | Shared NR RAN                                                              |
|------------------------|----------------------------------------------------------------------------|
| Feature Identity       | FAJ 121 5211                                                               |
| Value Package Name     | Shared Networks                                                            |
| Value Package Identity | FAJ 801 4010                                                               |
| Node Type              | Baseband Radio Node                                                        |
| Access Type            | NR                                                                         |
| Licensing              | License-controlled feature. One license is required for each 								node. |

Summary

The Shared NR RAN feature supports the following sharing cases:

| MOCN          |    | The baseband units, the radio units, and the spectrum cell carriers 								are shared between the operators.            |
|---------------|----|--------------------------------------------------------------------------------------------------------------------------|
|               |    |                                                                                                                          |
| MORAN         |    | The baseband units and radio units are shared, while the spectrum 								cell carriers are dedicated for each operator. |
|               |    |                                                                                                                          |
| MOCN as MORAN |    | A special configuration of MORAN, where the dedicated spectrum cell 								carriers have the same first PLMN ID.        |

MOCN is the only 3GPP-specified network sharing solution. For more information see,

3GPP TS 23.501.

Shared NR RAN supports NR Standalone and EN-DC.

For possible sharing cases with eNodeBs, see Shared LTE RAN in the LTE

RAN library.

Figure 1   NR Standalone Sharing Cases

Figure 1 shows the possible sharing cases for NR

Standalone deployments.

The Shared NR RAN feature has the following benefits:

- MOCN, MORAN, and MOCN as MORAN configurations are enabled for both NR Standalone and EN-DC. Note: NR Standalone High-Band deployments only support MOCN configurations.
- In all sharing cases, hosting and participating operators can use a more flexible transport configuration with transport network separation for each operator.
- Spectrum sharing is possible, which allows multiple operators to use the same spectrum. This can increase network efficiency and utilize a higher peak rate if multiple operators contribute spectrum. This is applicable for all sharing cases.
- In an MOCN configuration, hosting and participating operators can define their own Tracking Area (TA) planning. This is done by allowing planning. Cells can have their own TACs dedicated to the operator, while a common NCI is shared.

Additional Information

The feature is based on the following standards:

- 3GPP TS 38.331: NR; Radio Resource Control (RRC); Protocol specification
- 3GPP TS 38.413: NG-RAN; NG Application Protocol (NGAP)
- 3GPP TS 38.423: NG-RAN; In Application Protocol (XnAP)
- 3GPP TS 38.463: NG-RAN; E1 Application Protocol (E1AP)
- 3GPP TS 38.473: NG-RAN; F1 Application Protocol (F1AP)
- 3GPP TS 36.423: Evolved Universal Terrestrial Radio Access Network (E-UTRAN); X2 Application Protocol (X2AP)
- 3GPP TS 38.300: NR; NR and NG-RAN Overall description; Stage-2
- 3GPP TS 23.501: System architecture for the 5G System (5GS)
- 3GPP TS 23.251: Network sharing; Architecture and functional description
- 3GPP TS 36.300: Evolved Universal Terrestrial Radio Access (E-UTRA) and Evolved Universal Terrestrial Radio Access Network (E-UTRAN); Overall description; Stage 2

# 2 Dependencies of Shared NR RAN

This feature has one prerequisite feature, the LTE-NR Dual Connectivity feature, has

several feature dependencies, limitations for EN-DC MOCN, and requires support from

5GC.

Features

Table 1   Feature Dependencies

![Image](../images/76_22104-LZA7016017_1Uen.DN33B/additional_3_CP.png)

![Image](../images/76_22104-LZA7016017_1Uen.DN33B/additional_3_CP.png)

| Feature Name                                                                              | Feature Identity   | Access Type   | Relationship   | Relationship Scope   | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
|-------------------------------------------------------------------------------------------|--------------------|---------------|----------------|----------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| LTE-NR Dual Connectivity                                                                  | FAJ 121 4908       | NR            | Prerequisite   |                      | The LTE-NR Dual Connectivity feature must be activated for the                                     EN-DC deployment. This feature is a prerequisite only if the                                     shared gNodeB is configured for EN-DC.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| Automated Neighbor Relations                                                              | FAJ 121 0497       | LTE           | Related        |                      | The automatic EN-DC X2 setup procedure, triggered by the Automated Neighbor Relations             feature, supports multiple IP address configuration by selecting local SCTP endpoint on             both the eNodeB and gNodeB in the same IP network.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| NR Automated Neighbor Relations                                                           | FAJ 121 5218       | NR            | Related        |                      | In MOCN and MOCN as MORAN cases, the NR Automated Neighbor                                     Relations feature uses the primary PLMN to select the SCTP                                     endpoint of the eNodeB for the neighbor gNodeB in the Shared NR RAN feature.  The NR Automated Neighbor Relations supports multiple IP address                                     configuration by selecting local SCTP endpoint on both the                                     eNodeB and gNodeB in the same IP network.  If the lightweight neighbor cell relation object is automatically                                     promoted without Xn connection setup, the primary PLMN is used                                     as the PLMN of the Global gNodeB ID. This can result in a faulty                                     configuration that is updated after the Xn setup is                                     complete.  In                                     MOCN                                     configurations,                                     a PLMN-specific gNodeB ID length supports maintaining consistent                                     NR neighbor                                     configurations                                     for the shared NR                                     network,                                     where different gNodeB ID length are available for each                                     operator. However, if two nodes have a different gNodeB ID                                     length for the same PLMN, such as MORAN                                     configurations,                                     the NR Automated Neighbor                                     Relations                                     feature cannot maintain the accurate neighbor                                     configuration. |
| NR Mobility                                                                               | FAJ 121 5041       | NR            | Related        |                      | The NR Mobility feature considers the following elements when the                                 Shared NR RAN feature is used:  PLMN     HRL     MRL      The MRL is also considered during a target selection and a handover                                 evaluation.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| NR Public Warning System                                                                  | FAJ 121 5221       | NR            | Related        |                      | In an MOCN, MOCN as MORAN, or MORAN Shared NR RAN configuration,                                     the PWS service is provided through a single common CBC or CBCF.                                     The CBC or CBCF handles all the cells with MOCN, MOCN as MORAN,                                     or MORAN Shared NR RAN configuration on the gNodeB.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| NR-NR Dual Connectivity                                                                   | FAJ 121 5380       | NR            | Related        |                      | The Shared NR RAN feature is not supported to be used with NR-DC.             Neither the MRL, nor the UE-selected PLMN is considered in PSCell selection.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| RRC Inactive State                                                                        | FAJ 121 5328       | NR            | Related        |                      | The RRC Inactive State feature configures the RAN             Notification Area (RNA) as a list of cells based on the information sent in the Core             Network Assistance Information. Cells are excluded according to the Mobility Restriction             List.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| NR Traffic Steering                                                                       | FAJ 121 5458       | NR            | Related        |                      | The NR Traffic Steering feature considers the following elements when the Shared NR RAN feature is used in NR:  MRL     PLMN      The MRL is also considered during target selection and handover evaluation.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| NR Emergency Procedures                                                                   | FAJ 121 5298       | NR            | Related        |                      | If the MRL is not sent and the PLMN ID cannot be detected             during handovers and RRC connection re-establishment procedures in MOCN sharing cases,             the PLMN ID from the GUAMI is used to avoid emergency call rejection.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| NR PIM Avoidance                                                                          | FAJ 121 5502       | NR            | Related        |                      | With shared spectrum configuration of Shared NR RAN, the spectrum                                     cell carriers are shared between the operators. If one operator                                     activates the NR PIM Avoidance feature, the feature also affects                                     the other operators.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| NR Standalone High-Band for Fixed Wireless                                         Access | FAJ 121 5592       | NR            | Related        |                      | If the NR Standalone High-Band for Fixed Wireless Access             feature and the Shared NR RAN feature are both active in the node, NR standalone             deployment on High-Band can be deployed in MOCN configurations.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| Outgoing NR IRAT Handover                                                                 | FAJ 121 5377       | LTE           | Related        |                      | If MOCN cells are targeted for handover, they are evaluated and prioritized according to             the serving PLMN of the UE. No MOCN evaluation is performed for blind mobility.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| User- and Service-Specific Carrier                                         Aggregation    | FAJ 121 5555       | NR            | Related        |                      | The User- and Service-Specific Carrier Aggregation feature can be used to       create a UE group based on PLMN and block specific frequencies from being used for SCells for       that group.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| LTE Service-Triggered Outgoing NR IRAT                                         Mobility   | FAJ 121 5744       | LTE           | Related        |                      | The eNodeB can select NR cells based on PLMN.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| Advanced RDS Location Support                                         for Dedicated RAN   | FAJ 121 5504       | NR            | Related        |                      | The Advanced RDS Location Support for Dedicated RAN feature can                                     be deployed in MOCN configurations. For more information, see                                         5G Indoor Positioning Deployment                                         Guideline.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| NR PIM Detection                                                                          | FAJ 121 5501       | NR            | Conflicting    | Cell-level conflict  | The NR PIM Detection feature does not support MORAN cells. If the             Shared NR RAN feature is activated and MORAN on single Baseband is configured on the             gNodeB, the NR PIM Detection feature does not support the                 NRCellCU.primaryPLMNId attribute.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |

Hardware

In NR

standalone

and EN-DC MORAN deployments, this

feature is supported on the following radio

units:

- Low-Band eCPRI FDD radio units
- Mid-Band eCPRI TDD radio units
- Low-Band CPRI FDD radio units
- Mid-Band CPRI TDD radio units

For more information on NR

standalone,

see NR Standalone.

Limitations

In EN-DC MOCN and EN-DC MORAN, up to six PLMNs are supported.

Network Requirements

To fully benefit from the feature, the node requires support from the following

network elements:

- 5GC is required to accept NG setup from NR RAN even with the Global RANNode ID IE having a PLMN not served by AMF if it serves at least one of the PLMNs supported by the NR RAN, as specified by 3GPP specifications.
- In NR standalone, the 5GC must send the Mobility Restriction List for every connected UE. The list is a requirement for proper handover in the sharing cases, especially at the sharing borders.

# 3 Feature Operation of Shared NR RAN

This feature allows resource sharing between hosting and participating

operators.

## 3.1 PLMN Concepts and Network Identities Relations

The Shared NR RAN feature

supports the configuration for the single cell Id broadcast, where all the configured PLMNs

share a single cell

Id

for an NR cell.

PLMN Concepts

The Shared NR RAN feature recognizes the following PLMN concepts:

| Active PLMN     |    | Configured PLMNs in the                                 cell                                 that are supported by at least one AMF.           |
|-----------------|----|------------------------------------------------------------------------------------------------------------------------------------------------|
|                 |    |                                                                                                                                                |
| Configured PLMN |    | PLMNs used by                                 the                                     GNBDUFunction MO, configured by the operator.            |
|                 |    |                                                                                                                                                |
| Equivalent PLMN |    | Allowed PLMNs in addition to                                 the                                 serving                                 PLMN. |
|                 |    |                                                                                                                                                |
| Serving PLMN    |    | Serving PLMNs are PLMNs allowed for a UE to be attached served.                                                                                |
|                 |    |                                                                                                                                                |
| Selected PLMN   |    | The PLMN selected by the UE from the                                 PLMNs                                 that are included in SIB1.          |

Network Identities Relations

The identities in

Figure 2 and Figure 3

are

used in relation with the feature.

Figure 2   Global gNodeB

ID and

NCGI

Figure 3   GUAMI and 5G-S-TMSI

The Globally

Unique AMF ID (GUAMI) and the 5G-TMSI are variable elements that constitue the

5G-GUTI,

where the GUAMI identifies one or more AMFs.

The

GUAMI

structure consists of the following variable elements:

- &lt;MCC&gt;
- &lt;MNC&gt;
- &lt;AMF Region ID&gt;, which identifies the region
- &lt;AMF Set ID&gt;, which identifies the AMF set in the AMF region
- &lt;AMF Pointer&gt;, which identifies one or more AMFs in the AMF set

The 5G-S-TMSI

is used

as the shortened form of the

Globally

Unique Temporary Identifiers

(GUTI)

to enable more efficient radio signaling procedures (for example, during Paging and

Service Request) and consists of the following variable elements:

- &lt;AMF Set ID&gt;
- &lt;AMF Pointer&gt;
- &lt;5G-TMSI&gt;

## 3.2 Feature Operation Overview

### 3.2.1 Configuration Overview

For Shared NR RAN, the configuration needs to be done in the way relevant to the intended

sharing configurations such as Shared NR Cells for MOCN or Dedicated NR Cells for

MORAN.

The parameters mainly concern the handling of the PLMNs of each operator and their

corresponding tracking areas.

For configuration of the transport network, there are additional parameters that may need

configuration and they are described in the chapters related to Transport Network

configuration.

The

configuration related parameters are shown in Figure 4.

Figure 4   Configuration Management Overview

Related concepts

EN-DC Specific Mobility

### 3.2.2 Xn Connection Handling

One Xn-C

connection connects gNodeBs shared by multiple operators. The information of the NR cells in

a gNodeB is transferred using XnAP messages.

There

is

one Xn-C connection between two gNodeBs shared by multiple operators. Each gNodeB is

identified by the PLMN ID in the

GNBCUCPFunction.pLMNId

attribute and the

gNodeB

ID in the GNBCUCPFunction.gNBId attribute.

In MOCN and MORAN configuration, one gNodeB can serve multiple PLMN IDs for different

operators. The PLMN identity part of the global gNodeB ID and PLMN ID served by the NR

Cells on the gNodeB can be different. To specify the PLMN ID of the target gNodeB, the

candidate PLMN IDs are collected from the external NR cells.

EPS TAC is sent as a private extension over the Xn interface, so forbidden TAI can be

considered at intra-gNodeB and inter-gNodeB carrier aggregation.

Served Cell Information

All the information of the NR cells in a gNodeB is transferred to a neighbor gNodeB

using the following XnAP messages:

- XN SETUP REQUEST
- XN SETUP RESPONSE
- NG-RAN NODE CONFIGURATION UPDATE

The

XnAP messages include all cells configured in the gNodeB. Cells used for EN-DC

only

are indicated with their TAC

value,

that is, the

5G

TAC,

set to

0.

For each cell, the gNodeBs send information about the served PLMNs over the Xn

connection to the neighbor gNodeBs. The served PLMNs and their corresponding TACs

are deduced from the NRCellCU.pLMNIdList attribute and the

AdditionalPLMNInfo.pLMNIdList attribute under the

NRCellCU MO.

The information

is

then

displayed in the following

attributes:

- ExternalNRCellCU.plmnIdList
- ExternalBroadcastPLMNInfo.pLMNIdList
- ExternalNRCellCU.nRTAC
- ExternalBroadcastPLMNInfo.nRTAC

The information is used for validation during PSCell change, SCell

configuration,

and SCell change

when

the

Carrier

Aggregation

feature

is used.

The candidate TAI list contains the NR TAC and the PLMN ID combination to which the

gNodeB can belong. When the NRCellRelation MO and the

ExternalNRCellCU MO referred by the

ExternalNRCellCU MO are created, the candidate TAI list from

the ExternalNRCellCU and its

ExternalBroadcastPlmnInfo objects are collected according to

the gNodeB ID of the

ExternalNRCellCU.nRCGI.

The combination of the PLMN ID and the NR TAC is chosen based on the following

properties:

- The NR TAC element is chosen from the ExternalNRCellCU.nRTAC and the ExternalBroadcastPlmnInfo.nRTAC attributes.
- Each PLMN ID of the NR TAC element corresponds with each entry of the ExternalNRCellCU.plmnIdList and the ExternalBroadcastPLMNInfo.pLMNIdList attributes.
- Each PLMN ID belongs to a pLMNIdList of any TermPointToAmf.
- Each PLMN ID belongs to an NRCellCU.pLMNIdList or an AdditionalPLMNInfo.pLMNIdList attribute.
- Each PLMN ID has a corresponding NR TAC value on the NRCellCU or the AdditionalPLMNInfo MOs.
- If the default TN configuration is not used, then the PLMN ID element is only valid for the configured PLMN ID in the dedicated TN configuration for Xn.

If a new NCGI measurement report with the additional TAIs for an existing

ExternalGNBCUCPFunction MO is received, the additional TAIs

are added to the candidate TAI list.

For the general description of the Xn configuration, see Xn Configuration.

### 3.2.3 X2 Connection Handling for EN-DC Support

The gNodeB sends the Served NR Cell Information IE to the eNodeBs over

the X2 interface to support deployments with EN-DC and the Shared NR RAN

feature.

The following subelements of the Served NR Cell Information IE are used

for UEs in EN-DC deployments that use the Shared NR RAN feature:

| Configured TAC                       |    | This IE contains the EPS TAC configured in the gNodeB that differs from the                         5GS TAC broadcast in the NR cell. The configured TAC enables the application                         of roaming and access restrictions for EN-DC.                                             |
|--------------------------------------|----|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|                                      |    |                                                                                                                                                                                                                                                                                                    |
| 5GS-TAC                              |    | This IE contains the 5GS TAC broadcast (not used).                                                                                                                                                                                                                                                 |
|                                      |    |                                                                                                                                                                                                                                                                                                    |
| Served PLMNs                         |    | This IE contains the served PLMNs. If more broadcast PLMNs are required for                         the NR cell than the value defined in the                             maxnoofBPLMNs, the additional PLMNs are                         provided by the Broadcast PLMN Identity Info List NR IE. |
|                                      |    |                                                                                                                                                                                                                                                                                                    |
| Broadcast PLMN Identity Info List NR |    | This IE contains the network identity information and the gNodeB version for                         the NR cell. This information is used to automatically update the neighbor                         cell relation in the eNodeB toward an NR cell in a shared configuration.                   |

The Served PLMNs and the Broadcast PLMN Identity Info List

NR IEs contain information from the NRCellCU.pLMNIdList

attribute and the AdditionalPLMNInfo.pLMNIdList attribute.

The Served NR Cell Information IE is sent in the following messages:

- EN-DC X2 SETUP RESPONSE
- EN-DC CONFIGURATION UPDATE from the gNodeB
- EN-DC CONFIGURATION UPDATE ACKNOWLEDGE

The information sent over the X2 interface is used for validation during EN-DC setup, and

PSCell change when the Carrier Aggregation feature is used.

When an EN-DC leg is set up, the eNodeB can send the SGNB ADDITION REQUEST

or the SGNB MODIFICATION REQUEST message. The SGNB ADDITION

REQUEST and the SGNB MODIFICATION REQUEST messages can

contain the following information:

| Selected PLMN                   |    | Contains the PLMN selected by the eNodeB.                                                                                                                                                                                                                                                                                                                                                       |
|---------------------------------|----|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|                                 |    |                                                                                                                                                                                                                                                                                                                                                                                                 |
| Handover Restriction List (HRL) |    | Contains mobility restrictions for the UE with EN-DC in the NR RAN. If                             the HRL is included in the SGNB ADDITION REQUEST or the                                 SGNB MODIFICATION REQUEST, it is used in the NR RAN. The HRL contains the following information:  Mobility restrictions for the UE with EN-DC in the NR RAN     Serving PLMN of the SCG in the nodes |

This information can be used for mobility control and observability in

the

Secondary

gNodeB.

For X2 connection handling in the eNodeB for EN-DC with shared RAN, see Shared LTE

RAN in the LTE RAN library.

### 3.2.4 X2 Connection Handling for NR Standalone Support

The gNodeB sends the Served NR Cell Information IE to the eNodeB over

the X2 interface to support deployments with the NR Standalone and Shared NR RAN

features.

The following IEs of the Served NR Cell Information IE are used for UEs in

NR

standalone

deployments that

use

the Shared NR RAN feature:

| Configured TAC                       |    | This IE contains the EPS TAC configured in the gNodeB that differs from the                         5GS TAC broadcast in the NR cell. The configured TAC enables the application                         of roaming and access restrictions for EN-DC.                                                                           |
|--------------------------------------|----|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|                                      |    |                                                                                                                                                                                                                                                                                                                                  |
| 5GS-TAC                              |    | This IE contains the 5GS TAC broadcast in the NR cell.                                                                                                                                                                                                                                                                           |
|                                      |    |                                                                                                                                                                                                                                                                                                                                  |
| Served PLMNs                         |    | This IE contains the PLMNs served by the NR cell. If more broadcast PLMNs are                         required for the NR cell than the value defined in the                             maxnoofBPLMNs, the additional PLMNs are                         provided by the Broadcast PLMN Identity Info List NR IE.                |
|                                      |    |                                                                                                                                                                                                                                                                                                                                  |
| Broadcast PLMN Identity Info List NR |    | This IE contains the network identity information and the gNodeB version for                         the NR cell. This information is used to                         automatically                         update the neighbor cell relation in the eNodeB toward an NR cell in a                         shared configuration. |

The Served PLMNs and the Broadcast PLMN Identity Info List

NR IEs contain information from the NRCellCU.pLMNIdList

attribute and the AdditionalPLMNInfo.pLMNIdList attribute.

The Served NR Cell Information IE is sent in the following messages:

- EN-DC X2 SETUP RESPONSE
- EN-DC CONFIGURATION UPDATE
- EN-DC CONFIGURATION UPDATE ACKNOWLEDGE

The Broadcast PLMN Identity Info List NR IE that is

included

in the Served NR Cell Information IE is used to update neighbor cell

information in the eNodeB for the shared NR cell.

The information sent over the

X2

interface is used for validation during setup with NR cells in NR standalone

deployments.

## 3.3 Mobility

### 3.3.1 HRL and Mobility Restriction List Concept and Procedures

The UE uses a mobility restriction list to select target cells in the  source gNodeB

and to manage handover requests in the target gNodeB.

A mobility restriction list is provided for a UE. The IE exists in the following NG

Application Protocol (NGAP) messages:

- NGAP: INITIAL CONTEXT SETUP REQUEST
- NGAP: DOWNLINK NAS TRANSPORT
- NGAP: HANDOVER REQUEST

The mobility restriction list is used to select target cells in the source gNodeB and to

accept or reject a handover request in the target gNodeB.

If a connected UE has a mobility restriction list received from AMF, when the TAC of the

target NR cell is changed and the new TAC is a Forbidden TAC in the mobility restriction

list of the UE, the UE is not able to perform handover to the target NR cell.

### 3.3.2 EN-DC Specific Mobility

The secondary gNodeB performs various validations for EN-DC with

or without

carrier aggregation.

For EN-DC with or without carrier aggregation, the secondary gNodeB performs the

following validations during PSCell change:

- For gNodeB internal PSCell change, it is validated that the NRCellCU.pLMNIdList or the AdditionalPLMNInfo.pLMNIdList attribute of the target cell contains the serving PLMN or an equivalent PLMN from the HRL.
- For gNodeB internal PSCell change, it is validated that, the NRCellDU.configuredEpsTAC attribute of the target cell contains a TAI that is not forbidden. Note: If the NRCellDU.configuredEpsTAC attribute is empty, there is no restriction. During inter-gNodeB PSCell change to an NR cell with MORAN configuration, the Master Node with the Automated Neighbor Relations feature activated supports the finding of the target gNodeB. For more information, see NR Mobility.
- During inter-gNodeB PSCell change, forbidden TAI is considered.

For EN-DC with carrier aggregation, the secondary gNodeB performs the following

validations at SCell configuration or SCell change:

- For internal gNodeB SCell configuration or SCell change, the target cell NRCellCU.pLMNIdList or the AdditionalPLMNInfo.pLMNIdList has to contain the serving PLMN or the equivalent PLMN from the HRL.
- For inter-gNodeB SCell configuration or SCell change, the target cell ExternalNRCellCU.pLMNIdList or the ExternalBroadcastPLMNInfo.pLMNIdList has to contain the serving PLMN or the equivalent PLMN from the HRL.
- During inter-gNodeB SCell selection, forbidden TAI is considered.

For validation performed at PSCell change

in

the master eNodeB, see Shared LTE RAN in the LTE RAN

library.

For more information, see NR

Mobility.

### 3.3.3 SA-Specific Mobility

NR standalone mobility is supported in standalone MOCN by taking PLMN and the MRL

into consideration.

The MRL is checked during each mobility action. However, if the

EmCall.mobilityRestrictionsApplied attribute is set to

false, the mobility restrictions listed in the MRL are not taken

into consideration for emergency calls.

In Shared NR RAN, the target selection is performed based on the following elements:

- The MRL, if the MRL is present.
- The serving PLMN, if the MRL is not present.

The source NR RAN builds the candidate list with all cells in the measurement report

serving the current serving PLMN or equivalent PLMN.

Figure 5   Target Selection in the Source gNodeB

For more information, see the Evaluation of PCI for Handover chapter in NR Mobility.

In the Shared NR RAN, admission control is performed based on the serving PLMN in the

MRL. If the serving PLMN is not found within the active PLMNs or the MRL is not

received, the handover is rejected.

Figure 6   Admission Control in the Target Cell

Related Information

NR Mobility

## 3.4 Configuration

### 3.4.1 Supported Configuration Examples

This feature supports MOCN, MORAN, and MOCN as MORAN configurations.

The MOCN configuration is used when the NR cells and the gNodeB are shared in NR

Standalone or EN-DC deployments. For NR Standalone, it is also possible to have separate

Tracking Areas (TAs) for each operator in a shared NR cell.

Only MOCN configurations are supported for NR Standalone

High-Band deployments. MORAN and MOCN as MORAN configurations are not supported.

For possible sharing cases with eNodeBs, see the Shared LTE RAN in the LTE

RAN library.

### 3.4.2 Configuration for Shared NR Cells

Shared

NR

cells

are

configured

with parameters.

An NR cell can be shared by up to 12 PLMNs. If each operator operates their own PLMN, the

NR cell can be shared by up to 12 operators.

Cells that are reserved for operator use can also be configured to be blocked for UEs in

RRC\_CONNECTED mode. In shared RAN cases, RAT Frequency Selection

Priority coordination must be done between the PLMNs to select reserved cells that are

also blocked for UEs in RRC\_CONNECTED mode.

Shared

NR cells

are configured

with

the following parameters:

- NRCellDU.pLMNIdList
- NRCellDU.nRTAC
- NRCellDU.cellReservedForOperator
- NRCellDU.configuredEpsTAC
- AdditionalPLMNInfo.pLMNIdList under the NRCellDU MO
- AdditionalPLMNInfo.nRTAC under the NRCellDU MO
- AdditionalPLMNInfo.cellReservedForOperator under the NRCellDU MO

Figure 7 shows a supported MOCN

configuration.

Figure 7   Supported MOCN Configuration Example

The shared NR cell can be configured in the following ways:

| Configuration of a Shared NR Cell with a Common TAC for NR SA                                    |    | When an operator has multiple PLMNs sharing a single common TAC, or multiple                         operators have their own PLMNs sharing a single common TAC, the PLMNs are                         specified in the NRCellDU.pLMNIdList attribute. The                         single common TAC is specified in the NRCellDU.nRTAC                         attribute.                                                                                                                                                                                                      |
|--------------------------------------------------------------------------------------------------|----|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|                                                                                                  |    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| Configuration of a Shared NR Cell with Dedicated TACs per Operator for NR                     SA |    | When operators share the NR cell with separate TAC, the first set of PLMN or                         PLMNs with the corresponding TAC need to be specified in the                             NRCellDU.pLMNIdList and the NRCellDU.nRTAC attribute. The next set of PLMN or PLMNs with a                         separate TAC need to be specified in the                             AdditionalPLMNInfo attribute under the                             NRCellDU MO class, and the AdditionalPLMNInfo.nRTAC attribute under the                             NRCellDU MO class. |
|                                                                                                  |    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| Configuration of a Shared NR Cell with PLMNs for EN-DC                                           |    | When an operator has PLMNs to be used only for EN-DC deployments, the PLMNs                         are specified in the NRCellDU.pLMNIdList attribute, or in                         an instance of the AdditionalPLMNInfo MOC with the nRTAC                         value set to 0 associated with the PLMN list. The                             NRCellDU.configuredEpsTAC must also be specified.                                                                                                                                                                          |
|                                                                                                  |    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| Configuration of a Shared NR Cell with PLMNs for SA and EN-DC                                    |    | An NR Cell can be used for both SA and EN-DC. PLMNs configured with an                         nRTAC                         value other than 0 are applicable for both SA and EN-DC, if                         the                         functionalities                         for both SA and EN-DC are available. PLMNs configured with                         an                         nRTAC value of 0 are only applicable for                         EN-DC.                                                                                                      |
|                                                                                                  |    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| NR CGI of a Shared NR Cell                                                                       |    | The NCGI consists of the PLMN ID and the NCI. The PLMN ID is used for E5                         setup and measurement reports. It is defined in the                             GNBDUFunction.dUpLMNId and                             GNBCUCPFunction.pLMNId attributes. The                             GNBCUCPFunction.pLMNId attribute can be set by the                         operator, and overwrites the GNBDUFunction.dUpLMNId                         attribute.                                                                                                    |

For more information on configuration examples, see Shared NR RAN Solution Guideline.

### 3.4.3 Configuration for Non-Shared NR Cells with Shared gNodeB (MORAN Configuration)

Non-shared

NR

cells

with

shared

gNodeB

are

configured

with parameters.

Shared

gNodeB with dedicated spectrum for

each operator

using non-shared NR

cell

is configured

with

the following parameters:

- NRCellDU.pLMNIdList
- NRCellDU.nRTAC
- NRCellDU.cellReservedForOperator
- NRCellDU.configuredEpsTAC
- NRCellCU.primaryPLMNId
- GNBCUCPFunction.pLMNId

Figure 8 shows a

supported

MORAN

configuration.

Figure 8   Supported MORAN Configuration Example

In a MORAN configuration, the operators share a gNodeB but have their own cells with

their own PLMNs specified in each cell. The PLMN and TAC are specified using

NRCellDU.pLMNIdList

and

NRCellDU.nRTAC

attributes.

If the cell is used for EN-DC, the NRCellDU.configuredEpsTAC is also

specified. If the cell is used for EN-DC only, NRCellDU.nRTAC is set

to 0.

The gNodeB is shared between the operators and the global gNodeB ID is constructed using

the PLMN that is configured

on the

GNBCUCPFunction

MO.

For the cells that have the same PLMN configured

in the

NRCellDU.pLMNIdList

attribute

as the PLMN in

GNBCUCPFunction

MO, no additional configuration is needed.

For the cells that have a different PLMN configured

in the

NRCellDU.pLMNIdList

attribute

than the PLMN in

GNBCUCPFunction

MO,

the

NRCellCU.primaryPLMNId

needs to be

configured

to the same PLMN as used in the

NRCellDU.pLMNIdList.

The PLMN used in the NR CGI of a MORAN

cell

is the first PLMN in SIB1 that is broadcast.

For more information, see Shared NR RAN Solution Guideline.

### 3.4.4 Configuration for Non-Shared NR Cells with Shared gNodeB (MOCN as MORAN Configuration)

Non-shared NR cells with shared gNodeB are configured with parameters.

Shared gNodeB with dedicated spectrum for each operator using non-shared NR cells in a

MOCN as MORAN configuration is configured with the following parameters:

- AdditionalPLMNInfo.cellReservedForOperator
- AdditionalPLMNInfo.nRTAC
- AdditionalPLMNInfo.pLMNIdList
- GNBCUCPFunction.pLMNId
- NRCellDU.cellReservedForOperator
- NRCellDU.configuredEpsTAC
- NRCellDU.nRTAC
- NRCellDU.pLMNIdList

In a MOCN as MORAN configuration, the operators share the same gNodeB. The same first

PLMN is defined in the cells. However, the cells are not shared between the

operators.

If the PLMN of the operator is in the GNBCUCPFunction MO, only one

PLMN must be configured with the NRCellDU.pLMNIdList attribute. In

this case, the same PLMN must be used as in the GNBCUCPFunction MO.

Also, the NRCellDU.cellReservedForOperator attribute must be set to

NOT\_RESERVED.

If the PLMN of the operator is not in the GNBCUCPFunction MO, multiple

PLMNs must be configured. The PLMN used in the GNBCUCPFunction MO

must be configured with the NRCellDU.pLMNIdList attribute. Also, the

NRCellDU.cellReservedForOperator attribute must be set to

RESERVED. The PLMN of the cell must be configured with the AdditionalPLMNInfo.pLMNIdList

attribute. Also, the AdditionalPLMNInfo.cellReservedForOperator

attribute must be set to NOT\_RESERVED.

In EN-DC deployments, the NRCellDU.configuredEpsTAC attribute must

also be configured. If the cell is used in EN-DC only, the

NRCellDU.nRTAC attribute must be set to 0.

The global gNodeB ID is constructed using the PLMN that is configured in the

GNBCUCPFunction MO.

In a MOCN as MORAN configuration, the PLMN used in the NR CGI of a cell is the first PLMN

in SIB1 that is broadcast. All cells in the shared gNodeB have the same PLMN in the NR

CGI.

For more information, see the following documents:

- 3GPP TS 38.304: NR; User Equipment (UE) procedures in idle mode and in RRC Inactive state
- Shared NR RAN Solution Guideline

## 3.5 Transport Network Configuration for Shared NR RAN

### 3.5.1 Transport Network Configuration Overview for NR SA and EN-DC

The transport network can be configured by the sharing operators using a

dedicated or default configuration.

The sharing operators can configure the transport network in the following ways:

Based on what the operator needs, it is possible to combine the

dedicated

configuration with the

default

configuration

in the following ways:

- Dedicated configuration for a separate transport network
- Default configuration for shared or common transport network
- Mixture of both dedicated and default configuration

The dedicated configuration for PLMN and S-NSSAI is expressed by the

ResourcePartitionMember and EndpointResource

MOs. In EN-DC, the ResourcePartitionMember.sNSSAIList attribute is empty. In this case, the

ResourcePartitionMember.endpointResourceRef attribute of each PLMN refers

to the EndpointResource MO.

The default configuration is a direct reference from the top layer MOC

to the

EndpointResource

MO, such as GNBCUCPFunction,

GNBCUUPFunction, and GNBDUFunction.

Figure 9   How to Express the Dedicated and Default Configuration in NR SA

In NR SA, it is possible to separate the

dedicated

and the

default

configuration transport networks by configuring the set of local IP

addresses

and SCTP endpoint for each PLMN and S-NSSAI in the following

ways:

1. Separate NG-U, Xn-U interface for each PLMN and S-NSSAI.
2. Separate NG-C, Xn-C interface for each PLMN and all list of S-NSSAI.
3. Share F1-C among PLMNs.
4. Add or remove S-NSSAI for the existing PLMN without service interruption. Note: This step is only valid for the configuration of the ResourcePartitionMember MO.

### 3.5.2 Configuration Examples for Shared NR RAN

Configuration rules help minimize the chance of misconfiguration and excessively

complex configuration.

For a better understanding of the MOCN configuration, this section describes a typical NR

SA MOCN configuration, where the following MOCN use cases are true:

- Operator A uses PLMN A1 defined SST1
- Operator B uses PLMN B1 defined SST1 and SST2
- In a shared gNodeB, signaling transport is based on the primary PLMN

Figure 10   NR SA MOCN Example

GNBCUCP

Figure 11 shows an example of the

NR SA MOCN

configuration with

the

ResourcePartitionMember

MOs

for NG-C and Xn-C, and the default configuration for

F1-C.

Figure 11   NR SA MOCN Example for GNBCUCP

GBNCUUP

Figure 12

shows

an example

of

the NR SA MOCN configuration with

the

ResourcePartitionMember

MOs

for NG-U and

Xn-U.

Figure 12   NR SA MOCN Example for GNBCUUP

GNBDU

Figure 13 shows

the

default configuration for

F1-C.

Figure 13   NR SA MOCN Example for GNBDU

### 3.5.3 MOCN Configuration Rules for NR SA and EN-DC

Configuration rules help minimize the chance of misconfiguration and excessively

complex configuration.

The ResourcePartitionMember.sNSSAIList attribute is only considered for NR

SA. In EN-DC, only those ResourcePartitionMember MO instances are

considered that are configured with an empty ResourcePartitionMember.sNSSAIList attribute. In this case, the ResourcePartitionMember.endpointResourceRef of each PLMN is used.

To minimize the chance of misconfiguration and excessively complex configuration, the

following configuration rules are to be enforced:

- Either the ResourcePartitionMember.pLMNIdList or the ResourcePartitionMember.sNSSAIList attribute can be listed with multiple values. These attributes are designed as a list to consider other features. To avoid unexpected misconfiguration, it is suggested to consider the following: Table 2 Suggested Attribute Configurations pLMNIdList sNSSAIList Allowed Reference Recognition A1, A2 SST1 Yes pLMNIdList is multi-value {A1, SST1} and {A2, SST1} B1 SST1, SST2 Yes sNSSAIList is multi-value {B1, SST1} and {B1, SST2} B1, B2 SST3, SST4 No Both are multi-value N/A
- It is not allowed to add or remove the ResourcePartitionMember.pLMNIdList attribute after the ResourcePartitionMember MO is created. The ResourcePartitionMember.pLMNIdList attribute for NR SA MOCN cannot be changed. If it is required to change the PLMN in the ResourcePartitionMember MO, it is recommended to add a new ResourcePartitionMember MO with the updated PLMN, and then remove the previous ResourcePartitionMember MO.
- No duplication is recommended for a pair of ResourcePartitionMember.pLMNIdList and ResourcePartitionMember.sNSSAIList, including parts of them, as shown in Figure 14. To prevent the ambiguity of selecting local IP addresses, only one pair of PLMN and S-NSSAI is recommended to exist when the list is expanded completely. Figure 14 Configuration Rule 3
- A LocalIpEndpoint can refer to the same TN MOC (AddressIPv4/v6) from the different EndpointResource MOs, as shown in Figure 15. Figure 15 Configuration Rule 4
- A LocalIpEndpoint cannot refer the same TN MOC (AddressIPv4/v6) within each EndpointResource MO, as shown in Figure 16. Note: If duplicated TN MOC references are required within the EndpointResource MO, it is recommended to add multiple values in LocalIpEndpoint.interfaceList. Figure 16 Configuration Rule 5
- A LocalSctpEndpoint MO for different LocalSctpEndpoint.interfaceUsed attributes cannot refer the same TN MOC of SctpEndpoint, regardless of EndpointResource MOs, as shown in Figure 17. Figure 17 Configuration Rule 6
- For the control plane, it is recommended to use a single ResourcePartitionMember for a specific PLMN. All slices are listed under the PLMN in EndpointResource. The combination of PLMN and interface is recommended to be unique for LocalSctpEndpoint, as shown in Figure 18. Figure 18 Configuration Rule 7
- If a dedicated transport network configuration is not specified, the default configuration is used as a fallback.
- The possible interfaces are limited according to the top layer MOC, as shown in Table 3. Table 3 Interface Limitations Top Layer MOC EN-DC NR SA Comment GNBCUCPFunction X2-C, F1-C NG-C, Xn-C, F1-C LocalSctpEndpoint GNBCUUPFunction F1-U, S1-U, X2-U NG-U, Xn-U LocalIpEndpoint GNBDUFunction F1-C F1-C LocalSctpEndpoint

### 3.5.4 Transport Network Configuration for MOCN in EN-DC

This feature supports

multiple

cases of transport network configuration.

The following configuration cases are supported:

- Single PLMN with single SCTP/IP endpoint for each interface Figure 19 Configuration Example for Single PLMN with Single SCTP/IP Endpoint
- Separate PLMNs with separate SCTP/IP endpoints for each interface Figure 20 Configuration Example for Separate PLMNs with Separate SCTP/IP Endpoints
- Separate PLMNs with single SCTP/IP endpoint for each interface Figure 21 Configuration Example for Separate PLMNs with Single SCTP/IP Endpoint

PLMN handling in EN-DC involves the following steps:

1. The gNodeB-CU-CP receives the selected PLMN of the UE from the eNodeB.
2. The gNodeB-CU-CP forwards the selected PLMN to the gNodeB-CU-UP and the gNodeB-DU.
3. To find the local IP address, the PLMN is matched with the ResourcePartitionMember MO instances that are configured with an empty ResourcePartitionMember.sNSSAIList attribute.
4. If a matching PLMN is found that references an EndpointResource MO with the LocalIpEndpoint child MO, the LocalIpEndpoint of the specific interface is used to set up the SCTP association and the IP endpoint.Note: If a matching PLMN is not found, the default configuration is used as a fallback.

## 3.6 UE Connection Handling

The feature supports the AMF selection by taking selected PLMN into

consideration.

The 5G Core Network is picked based on the selected PLMN by the UE.

AMF Selection Algorithm

Figure 22   AMF Selection from UE Registration Check to Emergency Call Check

Figure 23   AMF Selection from Emergency Call Check to AMF Selection Options

The selection process starts when the RRCSetupComplete message is

received.

1. A check is performed to see if the UE is registered. The following cases can occur: Based on the result, the algorithm checks further.
    - The UE is registered in the 5GC and has access to the NR network from a cell that is in the same tracking area as the one in which the UE is first registered. In this case, the UE sends the 5G-S-TMSI in the RRCSetupRequest and the RRCSetupComplete messages.
    - The UE is registered in the 5GC and has access to the NR network from a cell that is in a different tracking area than the one in which the UE is first registered. In this case, the UE sends the GUAMI with information on the registered AMFs in the RRCSetupComplete message.
    - The UE is not registered in the 5GC, but it is registered in the EPC. In this case the GUAMI of the UE is mapped from the GUMMEI, and the value of the guami-Type IE is set to mapped.
    - The UE is not registered in the 5GC or the EPC when accessing the NR network. In this case, the UE does not send the 5G-S-TMSI or the GUAMI.
2. A check is performed to see if any of the following IEs are available in the RRCSetupComplete message: If the 5G-S-TMSI IE is included, and the AMF is available for it, that AMF is selected for the UE. If the 5G-S-TMSI IE is not included, the RegisteredAMF IE is checked. If the RegisteredAMF IE is included, and the AMF is available for it, that AMF is selected for the UE. If it is not available, the guami-Type IE is checked, and the algorithm continues the selection process based on the value of guami-Type.
    - 5G-S-TMSI
    - RegisteredAMF
    - guami-Type
3. A check is performed to see if it is an emergency call. Note: If all AMFs supporting selected PLMNs are not available during this phase, then the other AMFs supporting non-selected PLMNs are also considered.
4. If a valid AMF exists, then an AMF with Relative AMF Capacity from the valid AMFs is selected, successfully completing the selection process. In other cases, the AMF selection process fails.

AMF Reselection Process

Figure 24   AMF Reselection Process

The AMF reselection process starts when the NGAP: REROUTE NAS REQUEST

message is received.

1. A check is performed to see if any AMFs with AMF Set ID are available.
2. An AMF with Relative AMF Capacity is selected from the Valid AMFs. In other cases, the reselection process fails.

## 3.7 NG Connection Handling

The feature introduces NG messages, such as the

NGAP AMF

Configuration

Update

procedure for the Served Globally Unique AMF ID (GUAMI) List, and the PLMN Support

List.

Global RAN Node ID Use

At NG connection establishment, the PLMN identifier of the

GNBCUCPFunction MO class is used as part of the global RAN

node identity.

PLMNs

All the PLMN information specified in the NRCellDU MOs and their

child AdditionalPLMNInfo MOs with a valid NR TAC value is sent to

the AMFs in the NGAP NG SETUP REQUEST messages. If the service state

of the Shared NR RAN is INOPERABLE, then only the PLMN specified in

the GNBCUCPFunction is valid to be used.

The feature also introduces the following new NGAP messages:

| NGAP RAN CONFIGURATION UPDATE   |    | If the PLMN information of the gNodeB is changed when a cell is unlocked                             or locked, the information is sent to the connected AMFs using the                                 NGAP RAN CONFIGURATION UPDATE                             messages.   |
|---------------------------------|----|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|                                 |    |                                                                                                                                                                                                                                                                               |
| NGAP AMF CONFIGURATION UPDATE   |    | If a connected AMF sends the NGAP AMF CONFIGURATION UPDATE                             message to change supported PLMNs and served GUAMIs, the information is                             used for the next UE connections onwards.                                          |

## 3.8 System Information Broadcast in NR Cell

Active and configured PLMNs in cells can be transmitted in SIB1 in case they adhere

to certain conditions.

Active PLMNs in a cell are all configured PLMNs for

SA

with an nRTAC value of not zero, which are served by at least one

AMF. The active PLMNs with the corresponding nRTAC are transmitted in

SIB1.

Configured PLMNs with an nRTAC value of not zero in a cell are

transmitted in SIB1 without the corresponding nRTAC when the PLMN is

not served by any AMF. Configured PLMNs with a configured

nRTAC

value of zero in a cell are transmitted in SIB1 without any

nRTAC.

## 3.9 Automated Neighbor Relations LTE to NR for EN-DC

The feature allows EN-DC in shared networks by enabling the Master Node to set up

EN-DC X2 automatically with a shared Secondary Node and maintain the correct neighbor

configuration of a shared Secondary Node.

When the Master Node finds a new neighbor NR cell with MORAN configuration, the Automatic

Neighbor Relations feature on the Master Node can find the host Secondary Node and make

the correct neighbor configuration as follows:

1. A new neighbor NR cell with MORAN configuration is found.
2. The UE sends the NCGI measurement report for the NR cell. The PLMN in the NCGI measurement report does not match with the PLMN in the global gNodeB ID of the host shared Secondary Node.
3. The Automated Neighbor Relations feature on the source Master Node creates the following MO instances using the PLMN from the NCGI measurement report: ExternalGNodeBFunction TermPointToGNB ExternalGUtranCell GUtranCellRelation
4. The X2 TNL Address Discovery procedure is executed with the help of a Master Node, acting as proxy. The Master Node can find the shared Secondary Node to forward the X2 TNL Address Discovery request.
5. The target Secondary Node sends the correct neighbor configuration information to the source Master Node during the EN-DC X2 Setup procedure. The source eNodeB detects the inconsistent neighbor configuration and corrects it based on the information the target Secondary Node sent to the source Master Node.Note: The Automated Neighbor Relations feature does not automatically correct inconsistent configurations during LTE-to-NR handover to NR standalone cells.

The source Master Node supports the automatic EN-DC X2 Setup procedure for the EN-DC X2-C

interface in the same IP network as the target Secondary Node with multiple IP

addresses. The source Master Node uses the X2 TNL Address Discovery procedure to

exchange information on PLMNs corresponding with the selected IP networks.

Related Information

Automated Neighbor Relations

Multiple IP Addresses for S1 and X2

NR Automated Neighbor Relations

# 4 Network Impact of Shared NR RAN

The feature

promotes a growing

number of UEs on the network, which impacts

the

capacity and performance

of the

system.

Capacity and Performance

No impact.

Interfaces

No impact.

Other Network Elements

No impact.

## 4.1 Privacy Implications of Shared NR RAN

The Shared NR

RAN feature has privacy

implications.

When the operators share the Baseband Radio Node using a

shared RAN feature, then the personal data of the subscribers of the participating

operators are processed by the Baseband Radio Node in plain text. All other features

with a privacy implication listed in the Manage Security document have an impact on the

subscribers of the participating operators.

For example, if the

SecurityHandling.personalDataProtectionEnabled

attribute is set to false, then the permanent subscriber

identifiers of the participating operators might be revealed in PM events.

For more information on related privacy implications, see

Manage Security.

# 5 Parameters for Shared NR RAN

The feature introduces a number

of attributes

for PLMN management, and has affecting and affected attributes related to the same

purpose.

Table 4   Parameters

| Parameter                                                                                                | Type       | Description                                                                                                                                                                                                         |
|----------------------------------------------------------------------------------------------------------|------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| NRCellDU.pLMNIdList                                                                                      | Introduced | See MOM description.                                                                                                                                                                                                |
| AdditionalPLMNInfo.pLMNIdList under the                                 NRCellDU MO                      | Introduced | See MOM description.                                                                                                                                                                                                |
| NRCellDU.nRTAC                                                                                           | Introduced | See MOM description.                                                                                                                                                                                                |
| AdditionalPLMNInfo.nRTAC under the                                 NRCellDU MO                           | Introduced | See MOM description.                                                                                                                                                                                                |
| AdditionalPLMNInfo.cellReservedForOperator under                             the NRCellDU MO             | Introduced | See MOM description.                                                                                                                                                                                                |
| NRCellDU.cellReservedForOperator                                                                         | Introduced | See MOM description.                                                                                                                                                                                                |
| ResourcePartitionMember.endpointResourceRef under the                                 GNBCUCPFunction MO | Introduced | See MOM description.                                                                                                                                                                                                |
| ResourcePartitionMember.endpointResourceRef under the                                 GNBCUUPFunction MO | Introduced | See MOM description.                                                                                                                                                                                                |
| ResourcePartitionMember.endpointResourceRef under the                                 GNBDUFunction MO   | Introduced | See MOM description.                                                                                                                                                                                                |
| ResourcePartitionMember.pLMNIdList under the                                 GNBCUCPFunction MO          | Introduced | See MOM description.                                                                                                                                                                                                |
| ResourcePartitionMember.pLMNIdList under the                                 GNBCUUPFunction MO          | Introduced | See MOM description.                                                                                                                                                                                                |
| ResourcePartitionMember.pLMNIdList under the                                 GNBDUFunction MO            | Introduced | See MOM description.                                                                                                                                                                                                |
| ResourcePartitionMember.sNSSAIList under the                                 GNBCUCPFunction MO          | Introduced | See MOM description.                                                                                                                                                                                                |
| ResourcePartitionMember.sNSSAIList under the                                 GNBCUUPFunction MO          | Introduced | See MOM description.                                                                                                                                                                                                |
| ResourcePartitionMember.sNSSAIList under the                                     GNBDUFunction MO        | Introduced | See MOM description.                                                                                                                                                                                                |
| NRCellCU.primaryPLMNId                                                                                   | Introduced | See MOM description.                                                                                                                                                                                                |
| NRCellCU.nRTAC                                                                                           | Introduced | See MOM description.                                                                                                                                                                                                |
| AdditionalPLMNInfo.pLMNIdList under the                                 NRCellCU MO                      | Introduced | See MOM description.                                                                                                                                                                                                |
| AdditionalPLMNInfo.nRTAC under the                                 NRCellCU MO                           | Introduced | See MOM description.                                                                                                                                                                                                |
| ExternalNRCellCU.primaryPLMNId                                                                           | Introduced | See MOM description.                                                                                                                                                                                                |
| GNBDUFunction.dUpLMNId                                                                                   | Affecting  | PLMN identifier used as part of PM events data.                                                                                                                                                                     |
| NRCellCU.pLMNIdList                                                                                      | Affecting  | Sent as part of the served cell information in the following X2AP                                     messages:  EN-DC X2 SETUP RESPONSE     EN-DC CONFIGURATION UPDATE      EN-DC CONFIGURATION UPDATE ACKNOWLEDGE |
| NRCellDU.configuredEpsTAC                                                                                | Affecting  | The EPS TAC is only sent over X2.                                                                                                                                                                                   |
| TermPointToAmf.operatorPLMNId                                                                            | Affecting  | Only used for IP addresses selection.                                                                                                                                                                               |
| ExternalBroadcastPLMNInfo.pLMNIdList under the                                     ExternalNRCellCU MO   | Affected   | See MOM description.                                                                                                                                                                                                |
| ExternalBroadcastPLMNInfo.nRTAC under the                                     ExternalNRCellCU MO        | Affected   | See MOM description.                                                                                                                                                                                                |
| ExternalNRCellCU.plmnIdList                                                                              | Affected   | See MOM description.                                                                                                                                                                                                |
| ExternalNRCellCU.nRTAC                                                                                   | Affected   | See MOM description.                                                                                                                                                                                                |

# 6 Performance of Shared NR RAN

The Shared NR RAN feature

introduces new PM events, and modifies existing PM events by introducing the

serving\_plmn\_id

parameter.

KPIs

This feature has no associated Key Performance Indicators.

Counters

The following PM counters can be used to measure the downlink MAC PDU volume

separately for the serving cells for each UE:

- The NRCellDU.pmMacPduVolDlUePCell PM counter is used for the PCell.
- The NRCellDU.pmMacPduVolDlUeSCell PM counter is used in any of the configured and activated SCells.

The following EBS counters can be used to measure the downlink MAC PDU volume

separately for the serving cells for each UE:

- The pmEbsnMacPduVolDlUePCell EBS counter is used in the PCell.
- The pmEbsnMacPduVolDlUeSCell EBS counter is used in any of the configured and activated SCells.

The EBS counters can be filtered on any combination of available filters, for

example, to show the downlink MAC PDU volume for each Serving PLMN in the cell. The

EBS counters are associated with the NRCellDU MO. For more

information on the EBS counters, see Lists and Delta Lists - Referral Document.

Events

The PM events are provided by the serving PLMN. The EBS-N framework of the ENM

supports filtering by PLMNs. The EBS-N counters can be filtered for each PLMN, and

indicate the PLMN accessibility.

Table 5   Introduced PM Events

| Event                                   | Event Parameter                                             | Description                                                                                      |
|-----------------------------------------|-------------------------------------------------------------|--------------------------------------------------------------------------------------------------|
| CuCpNgSetupRequest                      | Main_plmn_id     Gnb_id     Asn.1     Gnb_id_length     NCI | NG SETUP REQUEST message is sent.                                                                |
| CuCpNgSetupResponse                     | Main_plmn_id     Gnb_id     Asn.1     Gnb_id_length     NCI | NG SETUP RESPONSE message is received.                                                           |
| CuCpNgSetupFailure                      | Main_plmn_id     Gnb_id     Asn.1     Gnb_id_length     NCI | NG SETUP FAILURE message is received.                                                            |
| CuCpNgRanConfigurationUpdate            | Main_plmn_id     Gnb_id     Asn.1     Gnb_id_length     NCI | NG RAN CONFIGURATION UPDATE message is sent.                                                     |
| CuCpNgRanConfigurationUpdateAcknowledge | Main_plmn_id     Gnb_id     Asn.1     Gnb_id_length     NCI | NG RAN CONFIGURATION UPDATE ACKNOWLEDGE message is                                     received. |
| CuCpNgRanConfigurationUpdateFailure     | Main_plmn_id     Gnb_id     Asn.1     Gnb_id_length     NCI | NG RAN CONFIGURATION UPDATE FAILURE message is                                     received.     |
| CuCpNgAmfConfigurationUpdate            | Main_plmn_id     Gnb_id     Asn.1     Gnb_id_length     NCI | NG AMF CONFIGURATION UPDATE message is                                     received.             |
| CuCpNgAmfConfigurationUpdateAcknowledge | Main_plmn_id     Gnb_id     Asn.1     Gnb_id_length     NCI | NG AMF CONFIGURATION UPDATE ACKNOWLEDGE message is                                     sent.     |
| CuCpNgAmfConfigurationUpdateFailure     | Main_plmn_id     Gnb_id     Asn.1     Gnb_id_length     NCI | NG AMF CONFIGURATION UPDATE FAILURE message is                                     sent.         |

The Shared NR RAN feature introduces the serving\_plmn\_id

parameter for the following PM Events:

- CuCpNgDownlinkNasTransport
- CuCpNgDownlinkRanStatusTransfer
- CuCpNgErrorIndicationDedicated
- CuCpNgHandoverCancel
- CuCpNgHandoverCancelAcknowledge
- CuCpNgHandoverCommand
- CuCpNgHandoverFailure
- CuCpNgHandoverNotify
- CuCpNgHandoverPreparationFailure
- CuCpNgHandoverRequest
- CuCpNgHandoverRequestAcknowledge
- CuCpNgHandoverRequired
- CuCpNgInitialContextSetupFailure
- CuCpNgInitialContextSetupRequest
- CuCpNgInitialContextSetupResponse
- CuCpNgInitialUeMessage
- CuCpNgNasNonDeliveryIndication
- CuCpNgPduSessionResourceModifyRequest
- CuCpNgPduSessionResourceModifyResponse
- CuCpNgPduSessionResourceReleaseCommand
- CuCpNgPduSessionResourceReleaseResponse
- CuCpNgPduSessionResourceSetupRequest
- CuCpNgPduSessionResourceSetupResponse
- CuCpNgUeContextModificationFailure
- CuCpNgUeContextModificationRequest
- CuCpNgUeContextModificationResponse
- CuCpNgUeContextReleaseCommand
- CuCpNgUeContextReleaseComplete
- CuCpNgUeContextReleaseRequest
- CuCpNgUeRadioCapabilityCheckRequest
- CuCpNgUeRadioCapabilityCheckResponse
- CuCpNgUeRadioCapabilityInfoIndication
- CuCpNgUplinkRanStatusTransfer
- CuCpProcInitialCtxtEstab
- CuCpProcNgSigConnEstab
- CuCpProcNrHoExeOut
- CuCpProcNrHoPrepOut
- CuCpProcPduSessionResourceModify
- CuCpProcPduSessionResourceRelease
- CuCpProcPduSessionResourceSetup
- CuCpProcUeCtxtMod
- CuCpProcUeCtxtRel
- CuCpRrcDlInformationTransfer
- CuCpRrcMeasurementReport
- CuCpRrcReconfiguration
- CuCpRrcReconfigurationComplete
- CuCpRrcRelease
- CuCpRrcSecurityModeCommand
- CuCpRrcSecurityModeComplete
- CuCpRrcSecurityModeFailure
- CuCpRrcSetupComplete
- CuCpRrcUeCapabilityEnquiry
- CuCpRrcUeCapabilityInformation
- CuCpRrcUlInformationTransfer
- CuCpRwrMobilityDecision

For more information on events, see Lists and Delta Lists - Referral Document.

# 7 Activate Shared NR RAN

To use the feature, it must be activated following the usual feature activation

procedure.

Prerequisites

- The license key is installed in the node.
- CCTR is active for at least one week before this procedure to collect enough troubleshooting data.
- The prerequisite feature is activated.

Steps

1. Set the NRCellDU.administrativeState attribute to LOCKED.
2. Configure the following attributes:
    1. NRCellDU.pLMNIdList
    2. NRCellDU.nRTAC
    3. AdditionalPLMNInfo.pLMNIdList under the NRCellDU
    4. AdditionalPLMNInfo.nRTAC under the NRCellDU
3. Set the attribute featureState to ACTIVATED in the FeatureState=CXC4012479 MO instance.
4. Unlock the NRCellDU MO.

After This Task

Keep CCTR active for at least one week after this procedure for continued collection of troubleshooting data.

# 8 Deactivate Shared NR RAN

If the feature is no longer needed, it can be deactivated following the usual

feature deactivation procedure. It must also be deactivated before the activation of any

conflicting feature.

Prerequisites

- CCTR is active for at least one week before this procedure to collect enough troubleshooting data.

Steps

1. Set the NRCellDU.administrativeState attribute to LOCKED.
2. Configure the following attributes:
    1. NRCellDU.pLMNIdList
    2. NRCellDU.nRTAC
    3. AdditionalPLMNInfo.pLMNIdList under the NRCellDU
    4. AdditionalPLMNInfo.nRTAC under the NRCellDU
3. Set the attribute featureState to DEACTIVATED in the FeatureState=CXC4012479 MO instance.
4. Unlock the NRCellDU MO.

After This Task

Keep CCTR active for at least one week after this procedure for continued collection of troubleshooting data.

# 9 Engineering Guidelines for Shared NR RAN

For more information, see Shared NR RAN Solution Guideline.

# Appendix A: Feature Change History

This section lists changes that affected this feature and the impact it had on the

network.

## Appendix A.a: 22.Q3: Enhanced Emergency Call Handling

The feature enhancement updates the admission control to allow the admission of

emergency call handovers in MOCN sharing cases when the serving PLMN ID cannot be

detected.

| Feature Name           | Shared NR RAN       |
|------------------------|---------------------|
| Feature Identity       | FAJ 121 5211        |
| Value Package Name     | Shared Networks     |
| Value Package Identity | FAJ 801 4010        |
| Node Type              | Baseband Radio Node |
| Access Type            | NR                  |
| Impact at Upgrade      | Mandatory           |

Summary and Benefits

The feature enhancement allows the admission of emergency calls if the serving PLMN

ID cannot be detected. In these cases, the PLMN ID of the GUAMI is used as serving

PLMN ID.

Capacity and Performance

The NR Handover success rate captured in source gNodeB KPI can improve, because the

UEs that started an emergency call PDU session but do not have an associated MRL are

not rejected from handover. The feature enhancement updates admission control so

emergency calls are not rejected from handovers if no serving PLMN ID is present for

the UE. During an emergency call, if no serving PLMN ID is detected, the PLMN ID of

the GUAMI is used for handovers.

Operation

No impact.

Interfaces

No impact.

Hardware

No specific hardware requirements.

Other Network Elements

No impact.

Related Information

Shared NR RAN

## Appendix A.b: 23.Q2: Automatic EN-DC X2 Setup Using X2 TNL Address Discovery to gNodeB with MORAN Configuration

This feature enhancement allows to keep consistent neighbor configuration for a

gNodeB with MORAN configuration.

| Feature Name           | Shared NR RAN       |
|------------------------|---------------------|
| Feature Identity       | FAJ 121 5211        |
| Value Package Name     | Shared Networks     |
| Value Package Identity | FAJ 801 4010        |
| Node Type              | Baseband Radio Node |
| Access Type            | NR                  |
| Impact at Upgrade      | Mandatory           |

Summary and Benefits

The following functions are supported with the Automated Neighbor Relations

feature:

- Finding the correct NR neighbor configuration of a gNodeB with MORAN configuration.
- Automatic EN-DC X2 setup procedure to a gNodeB with MORAN configuration.

By using the correct neighbor configuration, termination points on gNodeBs with MORAN

configuration can be enabled for successful EN-DC setup in NR cells with MORAN

configuration.

This feature enhancement has the following benefits:

- The number of successful EN-DC setups to MORAN configured gNodeB increases.
- The need for manual configuration of LTE-to-NR cell relations is decreased.
- New NR cells with MORAN configuration can be introduced without specific neighbor cell relation planning.

Capacity and Performance

No impact.

Operation

No impact.

Interfaces

No impact.

Hardware

No specific hardware requirements.

Other Network Elements

This feature enhancement requires the following Network Elements:

- ENM It is recommended to use ENM version 23.2 or later to support the MOM changes introduced by this feature enhancement. If the Release Independence Manager application is used, the MOM changes are supported on earlier ENM versions also.
- MME The MME must be compliant with 3GPP TS 36.413 15.5.0 or above and support X2 TNL address discovery procedure for candidate gNodeB.
- UE The UE must be compliant with 3GPP TS 36.331 15.3.0 or above to support the RRC protocol and support the reporting of the CGI measurement on LTE and NR cells.

Related Information

Shared NR RAN

## Appendix A.c: 24.Q4.0: Carrier Aggregation Support for MORAN

The feature enhancement enables the configuration of carrier aggregation in a Shared

NR RAN MORAN setup. Forbidden TAI is considered in EN-DC setup.

| Feature Name           | Shared NR RAN       |
|------------------------|---------------------|
| Feature Identity       | FAJ 121 5211        |
| Value Package Name     | Shared Networks     |
| Value Package Identity | FAJ 801 4010        |
| Node Type              | Baseband Radio Node |
| Access Type            | NR                  |
| Impact at Upgrade      | Mandatory           |

Summary and Benefits

The feature enhancement makes it possible to configure carrier aggregation in a

Shared NR RAN MORAN setup.

For EN-DC, forbidden TAI is considered at inter-gNodeB PSCell change and at intra-

and inter-gNodeB Scell selection.

The PLMN Service Unavailable and the

Default AMF PLMN Service Unavailable alarms are

triggered on a PLMN level.

Capacity and Performance

No impact.

Operation

The feature enhancement updates every PM event of the

GNBDUFunction MO concerning the following:

- Distributed units
- NR cells
- UEs

The PM events are updated to use the GNBDUFunction.dUpLMNId

attribute for the global gNodeB ID and the main PLMN ID.

Interfaces

No impact.

Hardware

No specific hardware requirements.

Other Network Elements

No impact.

Related Information

Shared NR RAN