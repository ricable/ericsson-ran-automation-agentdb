---
complexity_score: 15.5
converted_at: '2025-08-13T06:58:23.205166Z'
file_type: html
format: html
image_processing_enhanced: true
images_extracted: 4
images_saved: 3
original_path: 44_22104-LZA7016014_1Uen.BE.html
pictures_extracted: 4
processing_method: docling_multimodal
quality_score: 9.0
source_file: 44_22104-LZA7016014_1Uen.BE.html
source_zip: en_lzn7931040_r50f.zip
tables_extracted: 15
zip_image_types:
- .svg
- .png
- .gif
- .jpg
- .bmp
zip_images_total: 1893
---

# 

TCP Optimization

Contents

![Image](../images/44_22104-LZA7016014_1Uen.BE/additional_3_CP.png)

![Image](../images/44_22104-LZA7016014_1Uen.BE/additional_3_CP.png)

- Overview
- Dependencies
- Feature Operation
- Parameters
- Network Impact
- Performance
- Activating the Feature
- Deactivating the Feature
- Appendix: Feature Change History
    - Appendix: 19.Q3: New MOM Attributes

# 1 TCP Optimization Overview

TCP Optimization feature provides low queuing delay with high link utilization and also

improves system responsiveness and cell throughput.

| Feature Name           | TCP Optimization                                                           |
|------------------------|----------------------------------------------------------------------------|
| Feature Identity       | FAJ 121 1713                                                               |
| Value Package Name     | LTE Base Package                                                           |
| Value Package Identity | FAJ 801 0400                                                               |
| Node Type              | Baseband Radio Node                                                        |
| Access Type            | LTE                                                                        |
| Licensing              | License-controlled feature. One license is required for each 								node. |

Summary

The TCP Optimization feature is useful to provide a low queuing delay while

maintaining high link utilization, and thereby improving the perceived end-user

performance in terms of system responsiveness without sacrificing throughput. The

feature is also capable of maintaining a more stable cell throughput under load.

Additional Information

More information about this feature and related topics can be found in the following

documentation:

- Quality of Service
- 3GPP TS 36.323: Packet Data Convergence Protocol (PDCP)
- 3GPP TS 36.331: Radio Resource Control (RRC); Protocol specification
- 3GPP TS 23.203: Policy and charging control architecture

# 2 Dependencies of TCP Optimization

Table 1   Feature Dependencies

| Feature                                                                                                    | Relationship   | Description                                                                                                                                                                                                                                                                                                                                                                          |
|------------------------------------------------------------------------------------------------------------|----------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Mission-Critical Push-to-Talk (FAJ 121                                 4929)                               | Related        | TCP Optimization applies to the predefined mission-critical QCIs used                                 when the Mission-Critical Push-to-Talk feature is active.                                                                                                                                                                                                                      |
| Basic Intelligent                                     Connectivity (FAJ 121 4843)                          | Related        | If the values of the age threshold in downlink for the             Buffer-Based EN-DC Setup function are set higher than the AQM minimum and maximum age             thresholds of the TCP Optimization feature, the user plane packets might be discarded             before configuring measurement events, and delay or even prevent meeting the monitoring             criteria. |
| EN-DC-Triggered Handover during                                     Connected Mode Mobility (FAJ 121 5243) | Related        | If the values of the age threshold in downlink for the             Buffer-Based EN-DC Setup function are set higher than the AQM minimum and maximum age             thresholds of the TCP Optimization feature, the user plane packets might be discarded             before configuring measurement events, and delay or even prevent meeting the monitoring             criteria. |
| EN-DC-Triggered Handover during                                     Setup (FAJ 121 5097)                   | Related        | If the values of the age threshold in downlink for the             Buffer-Based EN-DC Setup function are set higher than the AQM minimum and maximum age             thresholds of the TCP Optimization feature, the user plane packets might be discarded             before configuring measurement events, and delay or even prevent meeting the monitoring             criteria. |

Hardware

No specific hardware requirements.

Limitations

No limitations for this feature.

Network Requirements

No Network Requirements for this feature.

# 3 Feature Operation of TCP Optimization

The TCP Optimization feature uses a delay-based AQM algorithm.

Operational Process

The TCP Optimization feature uses a delay-based AQM algorithm discarding packets

before the buffer is full, and thus provides rapid feedback to the traffic sender

for TCP traffic.

Delay-based AQM has two active modes. Mode 1 is for TCP type traffic and mode 2 is

for GBR such as VoLTE. See Figure 1.

Figure 1   Delay-based AQM Algorithm Implemented in the RBS and UL PDCP SDU Timer

Discard in UE

1. The delay-based AQM algorithm makes use of the TCP congestion avoidance algorithm, see TCP Congestion Control. TCP assumes that a packet loss is due to congestion and therefore it reduces the number of bytes it has in flight (congestion window). By discarding a packet the feature reduces the TCP congestion window which results in a shorter queue. In LTE RAN, the AQM algorithm is implemented in the node for the downlink only. However, the UE is configured to use PDCP Service Data Unit (SDU) timer discard in the uplink.
2. The delay-based AQM algorithm makes use of parameters based on the type of traffic managed. For non-GBR data traffic, the algorithm discards a packet only once it reaches a threshold of age in the buffer, at the same time maintaining a minimum of packets in the buffer, ensuring that the link utilization is high while keeping the queueing delay low.
3. For GBR traffic, the timer threshold is given by the Packet Delay Budget (PDB) value, as defined in 3GPP TS 23.203.
4. The queues apply "drop from tail", which means that the incoming packets are dropped. This delays the congestion signal to the TCP sender which can lead to more packet loss.
5. There are two mechanisms for packet discard, regardless whether TCP Optimization is activated:
    1. Packet discard due to full buffer This could either be due to the maximum number of PDCP SDUs per bearer or per eNodeB. The maximum number of PDCP SDUs per radio bearer is dependent of the hardware and the UE category. The maximum number of PDCP SDUs per eNodeB is dependant on the memory. Incoming packets are discarded.
    2. Stale packets discard Packets older than the maximum age threshold are discarded, see Table 4. The threshold is 1 second in AQM Mode 0. The oldest, for example the first, packets are discarded.

Modes of Operation

The TCP Optimization feature introduces a new

qciProfilePredefined.aqmMode MO parameter in the QCI

table.

The internal configuration of the AQM algorithm depends on the AQM mode for the QCI

of the bearer in question. Configuration is done slightly different depending on the

AQM mode. There are two active AQM modes; the first mode is optimized for GBR

services and the second is optimized for non-GBR services assumed to use TCP. In

general, these map to the resource type with some exceptions for important

traffic.

The AQM Mode can be one of the following:

| AQM mode 0   |    | No AQM is used. Packets are discarded if the maximum number of packets                             for each radio bearer or per eNodeB has been reached. Packets may also                             be discarded if they become older than 1 second. The UE is configured to                             not use PDCP SDU timer discard.                                                                                                                                                                                                                                                                                                                                                                                                                    |
|--------------|----|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|              |    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| AQM mode 1   |    | Primarily for non-GBR bearers or bearers with TCP type traffic. The UE is                             configured to use PDCP SDU timer discard. A packet is discarded if it                             becomes older than the minimum age threshold. All packets older than the                             maximum age threshold are discarded. If there is packet in queue, there                             is a time between discards. Let minimumInterDropTime =                             2*minimumAgeThreshold. Recommended to keep lower drop threshold to 5                             packets in queue.  Packets are also discarded when the maximum number of packets is reached                             for each radio bearer or eNodeB. |
|              |    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| AQM mode 2   |    | Used for GBR bearers. Packets older than the PDB may be discarded.                             Packets older than twice the PDB are discarded. The UE is configured to                             use PDCP SDU timer discard. Recommended to keep lower drop threshold to                             5 packets in queue.  Packets are also discarded when the maximum number of packets is reached                             for each radio bearer or eNodeB.                                                                                                                                                                                                                                                                                             |

TCP Congestion Control

The congestion control in TCP comprises four intertwined algorithms:

- slow-start
- congestion avoidance
- fast-retransmit
- fast-recovery

TCP Congestion Control details the congestion avoidance phase, even though these

principles are equally applicable during the whole lifetime of a connection.

An end-point in the network cannot know the true pipe capacity for the connection.

Instead it has to probe for the PC and therefore the bottleneck rate. TCP uses three

types of signals:

- If an ACK is received, it is a signal that more bandwidth is available
- If a packet is dropped, it is a signal of light congestion
- If there are many packet drops or a time-out, it is a signal of serious congestion

TCP acts on these signals by changing its congestion window or by starting all over

with the initial settings.

Packets are lost for two reasons - they are lost in transit or the network is

congested. The TCP congestion control assumes that a packet was lost due to

congestion.

The congestion window is halved at a congestion event (or put in another way, the TCP

sender stops sending for one Roundtrip Time), the minimum age threshold is optimally

set to one PC, assuming a standard compliant TCP sender and TCP New Reno. This

ensures that the queue is not emptied after a packet discard.

Measured in time, the optimal threshold becomes one RTT. The estimated RTT is by

default 100 ms in order to prioritize throughput when PC changes suddenly.

Since TCP increases the congestion window slowly, and due to the high likelihood of

improved radio conditions in the target cell after handover, the minimum age

threshold is set to twice the estimated RTT. This has the benefit that the link

utilization will be high also after handover. The drawback is that the delay in

normal operation is slightly higher.

The TCP congestion control, with an IETF Standard compliant TCP sender and optimal

configuration of the eNodeB queue size is shown in Figure 2 The aim is to have a non-empty queue

after a packet discard..

Figure 2   TCP congestion control

PDCP SDU Timer Discard in the Uplink

If the AQM Mode is set to 1 or 2, the UE is configured to use PDCP SDU timer discard

through RRC signaling. If AQM Mode is set to 0 (effectively disabling the feature)

the PDCP SDU timer discard is configured with a value of

infinity.

The configured value depends on the downlink value. There are only 8 allowed values

for discardTimer in the IE PDCP-Config defined in 3GPP TS 36.331: Radio Resource Control (RRC); Protocol

specification, so the nearest value greater than or equal to the minimum

age threshold is chosen.

Table 2   PDCP SDU Timer Discard Values (discardTimer) in the Uplink

|   Enum | Name     | Description                    |
|--------|----------|--------------------------------|
|      0 | ms50     | Packet discarded after 50 ms   |
|      1 | ms100    | Packet discarded after 100 ms  |
|      2 | ms150    | Packet discarded after 150 ms  |
|      3 | ms300    | Packet discarded after 300 ms  |
|      4 | ms500    | Packet discarded after 500 ms  |
|      5 | ms750    | Packet discarded after 750 ms  |
|      6 | ms1500   | Packet discarded after 1500 ms |
|      7 | infinity | Packet never discarded         |

# 4 Parameters of TCP Optimization

This feature introduces new MOM parameters and affects existing parameters.

Table 3   Parameters

| Parameter                         | Description          |
|-----------------------------------|----------------------|
| QciProfilePredefined.aqmMode      | See MOM description. |
| QciProfileOperatorDefined.aqmMode | See MOM description. |
| EUtranCellFDD.estimatedE2ERTT     | See MOM description. |
| EUtranCellTDD.estimatedE2ERTT     | See MOM description. |

Table 4   QCI Characteristics

| Resource Type   | QCI   |   AQM Mode | PDB    | Minimum Age Threshold   | Maximum Age Threshold    | Example services                                                                                                                                          |
|-----------------|-------|------------|--------|-------------------------|--------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------|
| GBR             | 1     |          2 | 100 ms | PDB + PDBOffset         | 2• Minimum Age Threshold | Conversational voice                                                                                                                                      |
| GBR             | 2     |          2 | 150 ms | PDB + PDBOffset         | 2• Minimum Age Threshold | Conversational video (live streaming)                                                                                                                     |
| GBR             | 3     |          2 | 50 ms  | PDB + PDBOffset         | 2• Minimum Age Threshold | Real time gaming                                                                                                                                          |
| GBR             | 4     |          2 | 300 ms | PDB + PDBOffset         | 2• Minimum Age Threshold | Non-conversational video (buffered streaming)                                                                                                             |
| GBR             | 65(1) |          2 | 75 ms  | PDB + PDBOffset         | 2• Minimum Age Threshold | Mission-critical user plane push-to-talk voice (for example                                 Mission-Critical Push-to-Talk)                                |
| GBR             | 66(1) |          2 | 100 ms | PDB + PDBOffset         | 2• Minimum Age Threshold | Non-mission-critical user plane push-to-talk voice                                                                                                        |
| Non-GBR         | 5     |          0 | 100 ms | N/A                     | 1 s                      | IMS Signalling                                                                                                                                            |
| Non-GBR         | 6     |          1 | 300 ms | 200 ms                  | 1 s                      | Video (Buffered Streaming)  TCP-based (for example www, email, chat, ftp, p2p file sharing,                                 progressive video, and so on) |
| Non-GBR         | 7     |          1 | 100 ms | 200 ms                  | 1 s                      | Voice  Video (Live Streaming)  Interactive Gaming                                                                                                         |
| Non-GBR         | 8     |          1 | 200 ms | 200 ms                  | 1 s                      | Video (Buffered Streaming)  TCP-based (for example www, email, chat, ftp, p2p file sharing,                                 progressive video, and so on) |
| Non-GBR         | 9     |          1 | 200 ms | 200 ms                  | 1 s                      | Video (Buffered Streaming)  TCP-based (for example www, email, chat, ftp, p2p file sharing,                                 progressive video, and so on) |
| Non-GBR         | 69(1) |          0 | 60 ms  | N/A                     | 1 s                      | Mission-critical delay-sensitive signaling (for example                                 Mission-Critical Push-to-Talk signaling)                          |
| Non-GBR         | 70(1) |          1 | 200 ms | 200 ms                  | 1 s                      | Mission-critical data (examples are the same as for QCIs 6, 8, 9)                                                                                         |

(1)

This QCI can only be used for E-RAB processes when the Mission-Critical Push-to-Talk

feature is active.

Affected Parameters

The value of the Packet Delay Budget from the pdb parameter in

MO QciProfilePredefined and

QciProfileOperatorDefined plus PDBOffset is used in AQM

Mode 2 as the minimum age threshold. The maximum age threshold is twice the PDB.

The pdb parameter is described in Table 5.

Table 5   Affected parameters in MO QciProfilePredefined and

QciProfileOperatorDefined

| Parameter                     | Description                                                                                                                                                                                                                                                                                                                                                                                                  |
|-------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| QciProfilePredefined.pdb      | The contribution from eNodeB to the Packet Delay Budget (PDB) for                                     a QCI. Packet delays outside eNodeB, for example in the                                     transport network, are excluded. For more information about PDB,                                     see 3GPP TS 23.203: Policy and charging                                         control architecture. |
| QciProfileOperatorDefined.pdb | The contribution from eNodeB to the Packet Delay Budget (PDB) for                                     a QCI. Packet delays outside eNodeB, for example in the                                     transport network, are excluded. For more information about PDB,                                     see 3GPP TS 23.203: Policy and charging                                         control architecture. |

# 5 Network Impact of TCP Optimization

This feature affects end-to-end behavior, especially TCP behavior.

Capacity and Performance

This feature has an impact on the UL Packet Loss Rate KPI. When the

feature is activated, the UE discards PDCP packets, which results in

a discontinuous sequence number in the eNodeB.

Retainability is also improved.

Interfaces

No impact.

Other Network Elements

No impact.

# 6 Performance of TCP Optimization

The feature is associated with KPIs, PM counters, and events.

KPIs

This feature has an impact on the UL Packet Loss Rate KPI. When the feature is

activated, the UE discards PDCP packets, which results in a discontinuous sequence

number in the eNodeB.

When the TCP Optimization feature is active, the

EUtranCellFDD.pmPdcpPktDiscDlAqm or the

EUtranCellTDD.pmPdcpPktDiscDlAqm counter includes all the

buffer-related discarded packets. This can improve the Average Downlink Packet Error

Loss Rate KPI by reducing the value of the

EUtranCellFDD.pmPdcpPktDiscDlPelr or the

EUtranCellTDD.pmPdcpPktDiscDlPelr counter.

Counters

This feature introduces the following counters:

- EUtranCellFDD.pmFlexPdcpPktDiscDlRbLimit
- EUtranCellTDD.pmFlexPdcpPktDiscDlRbLimit
- EUtranCellFDD.pmFlexPdcpPktDiscDlStaleSdu
- EUtranCellTDD.pmFlexPdcpPktDiscDlStaleSdu
- EUtranCellFDD.pmPdcpPktDiscDlAqm This is a PEG counter that is incremented by one for each discarded packet.
- EUtranCellTDD.pmPdcpPktDiscDlAqm This is a PEG counter that is incremented by one for each discarded packet.
- EUtranCellFDD.pmPdcpPktDiscDlAqmQci This is a Probability Density Function (PDF) counter where each QCI interval is incremented by one for each discarded packet for that QCI.
- EUtranCellTDD.pmPdcpPktDiscDlAqmQci This is a Probability Density Function (PDF) counter where each QCI interval is incremented by one for each discarded packet for that QCI.
- EUtranCellFDD.pmPdcpPktDiscDlBbmLimit
- EUtranCellTDD.pmPdcpPktDiscDlBbmLimit
- EUtranCellFDD.pmPdcpPktDiscDlRbLimitQci
- EUtranCellTDD.pmPdcpPktDiscDlRbLimitQci
- EUtranCellFDD.pmPdcpPktDiscDlStaleSduQci
- EUtranCellTDD.pmPdcpPktDiscDlStaleSduQci

The feature affects the following counters:

- EUtranCellFDD.pmRlcDelayTimeDl
- EUtranCellTDD.pmRlcDelayTimeDl
- EUtranCellFDD.pmRlcDelayPktTransDl
- EUtranCellTDD.pmRlcDelayPktTransDl
- EUtranCellFDD.pmRlcDelayTimeDlQci
- EUtranCellTDD.pmRlcDelayTimeDlQci
- EUtranCellFDD.pmRlcDelayPktTransDlQci
- EUtranCellTDD.pmRlcDelayPktTransDlQci
- EUtranCellFDD.pmPdcpPktLostUl
- EUtranCellTDD.pmPdcpPktLostUl

Events

Table 6   Events

| Event                          | Event Parameter                        | Description                                                                                                                                                                                                             |
|--------------------------------|----------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| INTERNAL_PER_UE_RB_TRAFFIC_REP | EVENT_PARAM_PER_DRB_PACKET_DISC_AQM_DL | Total number of packets (PDCP SDUs) for which no part has been                                     transmitted over the air in the downlink direction and are                                     discarded due to AQM. |

# 7 Activate TCP Optimization

Prerequisites

- The license key is installed in the node.
- CCTR is active for at least one week before this procedure to collect enough troubleshooting data.

Steps

1. Set the FeatureState.featureState attribute to ACTIVATED in the FeatureState=CXC4011050 MO instance.

After This Task

Keep CCTR active for at least one week after this procedure for continued collection of troubleshooting data.

# 8 Deactivate TCP Optimization

Prerequisites

CCTR is active for at least one week before this procedure to collect enough troubleshooting data.

Steps

1. Set the FeatureState.featureState attribute to DEACTIVATED in the FeatureState=CXC4011050 MO instance.

After This Task

Keep CCTR active for at least one week after this procedure for continued collection of troubleshooting data.

# Appendix A: Feature Change History

This section lists changes that affected this feature and the impact it had on the

network.

## Appendix A.a: 19.Q3: New MOM Attributes

| Feature Name:           | System Improvements in LTE RAN L19.Q3   |
|-------------------------|-----------------------------------------|
| Feature Identity:       | 22/FAJ 121 1447                         |
| Value Package Name:     | LTE Base Package                        |
| Value Package Identity: | FAJ 801 0400                            |
| Node Type:              | DU Radio Node, Baseband Radio Node      |
| Access Type:            | LTE                                     |

The improvement introduces MOM attributes to provide new configuration options for the

features and functions listed in Table 7 and

Table 8.

Capacity and Performance

The introduced MOM attributes can affect service quality and network

capacity when used with non-default values.

For information on the affected features and functions, see

Operation.

Operation

The following features are affected by the new attributes. Click the feature names to

access the related Feature Description guides. Click the attribute names to view the

related MOM descriptions.

Table 7   Affected Features

| Feature                                                                                   | Attribute                      | MO Class                     |
|-------------------------------------------------------------------------------------------|--------------------------------|------------------------------|
| Random Access                                                                             | rachNoOfAllocationsPerFrame    | EUtranCellFDD  EUtranCellTDD |
| Random Access                                                                             | rachPreambleRepetition         | EUtranCellFDD  EUtranCellTDD |
| TCP Optimization                                                                          | estimatedE2ERTT                | EUtranCellFDD  EUtranCellTDD |
| Dynamic Load Control                                                                      | loadCtrlPrioOfMta              | EUtranCellFDD  EUtranCellTDD |
| Basic Load Management                                                                     | loadCtrlPrioOfMta              | EUtranCellFDD  EUtranCellTDD |
| Uplink Scheduling Control for                                         Out-of-Coverage Ues | outOfCoverageDepth             | EUtranCellFDD  EUtranCellTDD |
| Uplink Scheduling Control for                                         Out-of-Coverage Ues | outOfCoverageSparseGrantingBsr | EUtranCellFDD  EUtranCellTDD |
| Coverage-Adapted Load Management                                                          | lbHitRateFilterCoeffCalm       | LoadBalancingFunction        |
| Carrier Aggregation-Aware IFLB                                                            | lbCaHysteresis                 | LoadBalancingFunction        |
| Downlink Coordinated Multi-Point                                                          | dlCompMeasRprtMinSinr          | DlComp                       |
| Downlink Coordinated Multi-Point                                                          | dlCompMeasRprtMaxSinr          | DlComp                       |

The following functions are affected by the new attributes. Click the attribute names

to view the related MOM descriptions.

Table 8   Affected Functions

| Function                                                                                   | Attribute                    | MO Class                     |
|--------------------------------------------------------------------------------------------|------------------------------|------------------------------|
| Basic Functions  See Configure System Information Messages in Manage Radio Network         | nrOfTransmissionsSib1        | EUtranCellFDD                |
| Basic Functions  See Configure RRC Connection Establishment in Manage Bearers and Services | initialBufferSizeMsg5Default | EUtranCellFDD  EUtranCellTDD |

Interfaces

No impact.

Hardware

No special hardware requirements.

Other Network Elements

The improvement requires ENM version 19.3. or later.