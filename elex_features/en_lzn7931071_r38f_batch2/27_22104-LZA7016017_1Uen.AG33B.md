---
complexity_score: 16.0
converted_at: '2025-08-13T06:59:13.248786Z'
file_type: html
format: html
image_processing_enhanced: true
images_extracted: 13
images_saved: 3
original_path: 27_22104-LZA7016017_1Uen.AG33B.html
pictures_extracted: 13
processing_method: docling_multimodal
quality_score: 9.0
source_file: 27_22104-LZA7016017_1Uen.AG33B.html
source_zip: en_lzn7931071_r38f.zip
tables_extracted: 7
zip_image_types:
- .svg
- .png
- .gif
- .jpg
- .bmp
zip_images_total: 2796
---

# 

Streaming of PM Events

Contents

![Image](../images/27_22104-LZA7016017_1Uen.AG33B/additional_3_CP.png)

![Image](../images/27_22104-LZA7016017_1Uen.AG33B/additional_3_CP.png)

- Overview
- Dependencies
- Feature Operation
- Network Impact
- Parameters
- Performance
- Activate the Feature
- Deactivate the Feature
- Engineering Guidelines for Streaming of PM Events
- Feature Change History
    - 24.Q4.0: PM Event Streaming over FQDN

# 1 Streaming of PM Events Overview

The Streaming of PM Events feature enables the gNodeB to stream PM events using TCP

socket protocol. With this feature, streaming output is enabled, so cell trace jobs can be

configured to have PM event output to file and stream, and UE trace jobs can be configured

to have PM event output to file or stream. Without this feature, the Cell Trace and UE Trace

functions can only write their output to files.

| Feature Name           | Streaming of PM Events                                                     |
|------------------------|----------------------------------------------------------------------------|
| Feature Identity       | FAJ 121 4993                                                               |
| Value Package Name     | NR Base Package                                                            |
| Value Package Identity | FAJ 801 4002                                                               |
| Node Type              | Baseband Radio Node                                                        |
| Access Type            | NR                                                                         |
| Licensing              | License-controlled feature. One license is required for each 								node. |

Summary

The Streaming of PM Events feature allows streaming of PM events through TCP socket

connection to an external receiver. For cell trace, the external receiver can be

ENM-, or customer-provided. For UE trace, the external receiver is

customer-provided. PM event streaming for cell trace is enabled through ENM by

providing the IP address and port of the stream receiver when creating or modifying

cell trace event jobs.

Cell trace

streaming can also be set up with FQDN entry, in which case applications get

destination IP addresses through DNS resolution. The related MOM

attributes are under the

following

MO

classes:

- PmEventM
- StreamingCapabilities
- EventJob

PM event streaming for UE trace is controlled by ENM provisioning

of UE trace subscriptions on the MME for NR NSA deployments. The TCP streaming port

for UE trace jobs for the managed function is provided by the

PmEventSigM MO

class.

For supervision of the streams, following PM counters are provided for cell trace:

- Total number of PM events produced. The PM events that are generated by PM event producer for sending on the stream.
- Total number of PM events dropped. The PM events that are produced but do not make it out of the node on the stream.
- Number of PM events dropped per reason (distribution of failure causes).

For more information on PM events, modifying cell trace event jobs, and the UE Trace

function, see Manage Performance NR.

Capacity and Performance

Depending on the number and volume of the PM events activated in the PM event job or

UE trace job, the backhaul connection can get loaded.

Other Network Elements

To fully benefit from the feature, the node requires support from the following

Network Elements:

- ENM: ENM is required to provision the PM event jobs for Cell Trace. ENM may also terminate the streaming connection. ENM is required to create UE trace subscriptions on the MME for UE Trace. ENM is also used to provision the streaming port for UE trace.
- MME: Based on UE trace subscriptions, the MME provides the Trace Start and Deactivate Trace signals for the gNodeB, to start, and stop UE Trace jobs with the appropriate attributes, including file or stream output.

# 2 Dependencies of Streaming of PM Events

Feature Dependencies

Table 1   Feature Dependencies

![Image](../images/27_22104-LZA7016017_1Uen.AG33B/additional_3_CP.png)

![Image](../images/27_22104-LZA7016017_1Uen.AG33B/additional_3_CP.png)

| Feature Name             | Feature Identity   | Access Type   | Relationship   | Relationship Scope   | Description                                                                                                                                                                                                              |
|--------------------------|--------------------|---------------|----------------|----------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Periodic UE Measurements | FAJ 121 5748       | NR            | Related        |                      | If the PM events generated by the Periodic UE Measurements                                     feature are to be streamed, they are streamed using cell traffic                                     trace for reporting. |

Hardware

No specific hardware requirements.

Limitations

3GPP standards do not impose limitations on the feature.

The PM counters for supervision of the streams are not supported for UE trace.

The current PM event streaming solution for UE trace is undergoing deprecation, which

is expected to be completed in 24.Q4.

Network Requirements

ENM is required for cell trace streaming configuration. ENM and MME are required for

UE trace streaming configuration for NR NSA deployments.

The Streaming of PM Events feature has no prerequisite network configuration

requirements. However, it requires a stable connection to stream traces over the

O&amp;M network. Unstable connection can cause data loss.

# 3 Feature Operation of Streaming of PM Events

The Streaming of PM Events feature allows streaming of live cell trace and UE trace

events to an external receiver.

Operational Process

For details on configuring this output mode for cell trace or UE trace, see Manage Performance NR.

TCP Clients Supported by the gNodeB Managed Functions

A

TCP

client is associated with each active PM event job for

cell

trace and with each unique streaming destination for UE

trace.

This applies to each of the following managed functions:

- gNodeB Central Unit Control Plane (gNodeB-CU-CP)
- gNodeB Central Unit User Plane (gNodeB-CU-UP)
- gNodeB Distributed Unit (gNodeB-DU)

For UE trace, PM event jobs that stream to a common destination share a common TCP

stream. The

trace\_reference PM event header attribute  is

used by UE trace to identify, for a specific PM

event,

the

event

job the PM

event

is associated with. Each TCP client establishes and maintains a TCP connection to

the server independently.

TCP Connection Establishment, PM Event Data Streaming, and TCP Connection

Closing

TCP is connection-oriented. For a connection between the TCP client and stream

receiver, the

TCP server must be established before data can be sent. The

server must first bind to and listen to a port for connection requests from TCP

clients to

establish

connections. With this in place, each client establishes a connection using a TCP

three-way handshake. After this,

the

Google

Protocol Buffers (GPB)-encoded, length-delimited PM

event

data is sent. Connections are closed by

using

a TCP four-way handshake connection

closing

sequence. Figure 1 shows the overall flow

for a single TCP client connecting, sending

data,

and closing the connection to a server based on Linux using C or

C++. Initiating and closing the connection from the client side are

associated with starting and stopping PM

event

jobs as well as recovery actions. If there is no receiver at startup or there is a

loss of connectivity, the node client periodically sends the SYN packet associated

with the TCP three-way handshake. This is repeated until the connection is

established. When the connection is established, PM event data is sent to the

receiver.

Figure 1   TCP Connection Establishment, PM Event Data Streaming, and TCP Connection

Closing

As a prerequisite, the stream receiver performs the socket configuration. For a

server based on Linux using C or C++, this consists of the following system

calls:

- Socket socket()(AF\_INET/AF\_INET6, SOCK\_STREAM)
- Socket bind()
- Socket listen()
- Socket accept()

1. The operator starts the PM job. The PM job starts a TCP client that performs socket configuration consisting of the socket socket() (AF\_INET/AF\_INET6, SOCK\_STREAM) system call.
2. The TCP client and TCP server perform a TCP three-way handshake to set up the connection, using the socket connect()system call.
3. While the PM job is active and there is PM event data to send, the TCP client sends GPB-encoded length-delimited PM event data by the socket send() system call. The PM event data is received and acknowledged by the TCP server, using the socket recv() system call.
4. The operator stops the PM job. The TCP client initiates a TCP four-way handshake connection closing sequence (socket close() system call) to close the connection with the TCP server.

Trace Contents

Once the connection is established, GPB-encoded PM events formatted in GPB version 3

are sent to the server. Each PM event is preceded with a GBP variable-length 32-bit

integer that indicates the size of the PM event. The

Heartbeat

administrative event is specific to streaming. It is sent periodically to keep the

TCP connection

alive. The

TraceSessionStart administrative event is specific to cell

trace session including cell trace streaming, it is for notifying about the start of

cell trace recording sessions.

For more information on trace content, see Performance Event Format.

# 4 Network Impact of Streaming of PM Events

The Streaming of PM Events feature supports a streaming interface for cell trace and UE

events. This can introduce an impact on the backhaul connection.

Capacity and Performance

The backhaul connection can become loaded. The load depends on the number and volume

of cell trace events activated in PM event and UE trace job.

Interfaces

The Streaming of PM Events feature introduces a protocol-based TCP socket streaming

interface to stream PM events from cell trace and UE trace jobs.

# 5 Parameters for Streaming of PM Events

This

feature is affected by attributes introduced for PM event streaming through

FQDN.

Table 2   Parameters

| Parameter                              | Type     | Description          |
|----------------------------------------|----------|----------------------|
| StreamingCapabilities.dnsLookupSupport | Affected | See MOM description. |
| EventJob.streamDestination             | Affected | See MOM description. |
| EventJob.streamDestinationIpAddress    | Affected | See MOM description. |
| EventJob.streamDestinationPort         | Affected | See MOM description. |
| EventJob.streamOutputEnabled           | Affected | See MOM description. |

# 6 Performance of Streaming of PM Events

KPIs

This feature has no associated KPIs.

Counters

The following counters are associated with this feature:

- pmFwkStreamProducedEventDistr
- pmFwkStreamDroppedEventDistr
- pmFwkStreamDroppedEventLicenseUnavailableDistr
- pmFwkStreamDroppedEventSocketSetupFailDistr
- pmFwkStreamDroppedEventSocketConnectionFailDistr
- pmFwkStreamDroppedEventSocketErrorDistr
- pmFwkStreamDroppedEventSlowStreamDistr

More information about counters can be found in Managed Object Model (MOM).

Events

A

Heartbeat

administrative event

is

generated for each

stream.

A TraceSessionStart administrative event is generated for each

cell trace recording session start.

For

more information about administrative events,

see

Performance Events File Format NR.

# 7 Activate Streaming of PM Events

Prerequisites

The license key is installed in the node.

Steps

1. Set the attribute featureState to ACTIVATED in the applicable MO instance, depending on node type: Node Type License Control MO Baseband Radio Node FeatureState=CXC4012325

# 8 Deactivate Streaming of PM Events

Steps

1. Set the attribute featureState to DEACTIVATED in the applicable MO instance, depending on node type: Node Type License Control MO Baseband-based FeatureState=CXC4012325

# 9 Engineering Guidelines for Streaming of PM Events

PM event stream

jobs can be set up using FQDN. The FQDN will be in the form of

domainName:port.

The following AMOS commands can be used for PM event stream job setup with FQDN:

- Set up a PM event stream job:pset -s &lt;fqdn&gt;:&lt;port&gt; EventProducer,EventJob=[1000 .. 10005] &lt;event-filter&gt; Example: pset -s testtrace02.ericsson.com:51544 CUCP,EventJob=10001 CuCpF1* PM event normal-priority stream job 10001 will be set up for event producer CUCP having all PM events start with CuCpF1.
![Image](../images/27_22104-LZA7016017_1Uen.AG33B/additional_3_CP.png)
![Image](../images/27_22104-LZA7016017_1Uen.AG33B/additional_3_CP.png)
- Activate PM event job:pdeb EventProducer,EventJob=10001..10005 Example: pdeb CUCP, EventJob=10001
![Image](../images/27_22104-LZA7016017_1Uen.AG33B/additional_3_CP.png)
![Image](../images/27_22104-LZA7016017_1Uen.AG33B/additional_3_CP.png)
- Check job status: pst
![Image](../images/27_22104-LZA7016017_1Uen.AG33B/additional_3_CP.png)
- Check job details: get EventProducer,EventJob=10001..10005 Example: get CUCP,EventJob=10001
![Image](../images/27_22104-LZA7016017_1Uen.AG33B/additional_3_CP.png)
![Image](../images/27_22104-LZA7016017_1Uen.AG33B/additional_3_CP.png)
- Deactivate PM event stream job: pbl EventProducer,EventJob=10001..10005 Example: pbl CUCP, EventJob=10001
![Image](../images/27_22104-LZA7016017_1Uen.AG33B/additional_3_CP.png)
![Image](../images/27_22104-LZA7016017_1Uen.AG33B/additional_3_CP.png)

# 10 Feature Change History

This section lists changes that affected this feature and the impact it had on the

network.

## 10.1 24.Q4.0: PM Event Streaming over FQDN

This feature enhancement provides

support of FQDN for streaming of PM events for cell trace.

| Feature Name           | Streaming of PM Events   | Streaming of Events   |
|------------------------|--------------------------|-----------------------|
| Feature Identity       | FAJ 121 4993             | FAJ 121 0760          |
| Value Package Name     | NR Base Package          | RAN Data Collection   |
| Value Package Identity | FAJ 801 4002             | FAJ 801 0431          |
| Node Type              | Baseband Radio Node      | Baseband Radio Node   |
| Access Type            | NR                       | LTE                   |
| Impact at Upgrade      | Optional                 | Optional              |

Summary and Benefits

This feature enhancement supports FQDN entries for cell trace streaming setup to

complement existing IP and port options.

This feature enhancement has the following benefits:

- Using FQDN enables mapping new IP addresses if the host IP address changes.
- Hostnames are easier to remember than IP addresses.
- Organizations can use a domain name hierarchy that is independent of IP address assignment.

If the host has multiple IP addresses in DNS resolution returning, an IP address will

be randomly selected from the available IP addresses after each reconnection.

Capacity and Performance

No impact.

Operation

This feature enhancement introduces the following attributes:

- StreamingCapabilities.dnsLookupSupport
- EventJob.streamDestination

Interfaces

No impact.

Hardware

No specific hardware requirements.

Other Network Elements

It is required to use ENM version 24.4 or later to support the

MOM changes introduced by this feature enhancement. If the Release Independence

Manager application is used, the MOM changes are supported on earlier ENM versions

also.

It is required to use ENM version 24.4 or later to fully benefit from this feature

enhancement with support for setup of PM event stream jobs using FQDN in the user

interface of the ENM PM Initiation and Collection (PMIC) application. Until this

support is available, AMOS commands can be used instead for feature configuration.

For details, see Streaming of PM Events.

Related Information

Streaming of PM Events

Streaming of Events

Manage Performance