---
complexity_score: 67.5
converted_at: '2025-08-13T06:58:00.645656Z'
file_type: html
format: html
image_processing_enhanced: true
images_extracted: 16
images_saved: 3
original_path: 76_22104-LZA7016014_1Uen.KK.html
pictures_extracted: 16
processing_method: docling_multimodal
quality_score: 9.0
source_file: 76_22104-LZA7016014_1Uen.KK.html
source_zip: en_lzn7931040_r50f.zip
tables_extracted: 107
zip_image_types:
- .svg
- .png
- .gif
- .jpg
- .bmp
zip_images_total: 1893
---

# 

Automated Neighbor Relations

Contents

![Image](../images/76_22104-LZA7016014_1Uen.KK/additional_3_CP.png)

![Image](../images/76_22104-LZA7016014_1Uen.KK/additional_3_CP.png)

- Overview
- Dependencies
- Feature Operation
    - Feature Operation Sequence Diagram
    - Process Steps
    - Process Steps: ANR for E-UTRAN, UTRAN and GERAN
    - Process Steps: ANR for NR
    - Automated Neighbor Relations and MP Load Control
    - Consolidation of Measurement Intensity Control
- Network Impact
- Parameters
- Performance
- Activate the Feature
- Deactivate the Feature
- Engineering Guidelines
    - Automated Neighbor Relations MO Naming Conventions
    - O&amp;M Information
    - Change Global eNodeB ID
    - Update ID Change of Neighboring UTRAN or GERAN cell
    - Disabling ANR Initiated Measurements Based on ASGH
    - Configuration of Selection of Preferred Neighbor Cells in PCI Conflicts
    - Prevention of Configuration Reset of the ExternalGNodeBFunction.dirDataPathAvail Attribute
- Appendix: Feature Change History
    - Appendix: Living with PCI Conflicts
    - Appendix: PCI Conflict Detection Enhancement
    - Appendix: 19.Q2: Automated Neighbor Relations Acquiring Additional PLMN IDs
    - Appendix: 20.Q3: Detection of Problematic GERAN Cells and Removal of Unused Neighbor Objects
    - Appendix: 20.Q2: ANR LTE to NR for EN-DC
    - Appendix: 20.Q4: Automatic Maintenance of LTE to NR EN-DC Neighbor Relations
    - Appendix: 21.Q1: Detection and Removal of Obsolete External E-UTRAN Neighbor Objects
    - Appendix: 21.Q2: Automated Neighbor Relations for Intra-Frequency NR Mobility for EN-DC
    - Appendix: 21.Q3: Support for Automated Neighbor Relations for Inter-Frequency NR Mobility for EN-DC
    - Appendix: 21.Q4: EN-DC ANR Support for NR Cells Used in ESS with No SIB1
    - Appendix: 22.Q3: Automated Neighbor Relations for LTE to NR SA Mobility
    - Appendix: 23.Q1: External Broadcast PLMN Support by Automated Neighbor Relations for LTE to NR SA Mobility
    - Appendix: 23.Q2: Automatic EN-DC X2 Setup Using X2 TNL Address Discovery to gNodeB with MORAN Configuration
    - Appendix: 23.Q3: Enhanced NR EN-DC PCI Conflict Detection for ANR
    - Appendix: 24.Q1.0: ANR-Specific Threshold for Creating LTE-to-NR Neighbor Cell Relations
    - Appendix: 24.Q2.0: Dynamic Handling of NR Frequency Relations
    - Appendix: 24.Q3.0: Shared NR RAN Support for Automated Neighbor Relations
    - Appendix: 24.Q4.0: Preferred Cell Relation Selection in Case of PCI Conflicts

# 1 Automated Neighbor Relations Overview

The Automated Neighbor Relations feature  minimizes the need for the manual

configuration of neighbor cell relations and the need for the optimization of mobility

functions.

| Feature Name           | Automated Neighbor Relations                                               |
|------------------------|----------------------------------------------------------------------------|
| Feature Identity       | FAJ 121 0497                                                               |
| Value Package Name     | Self-Organizing Networks                                                   |
| Value Package Identity | FAJ 801 0435                                                               |
| Node Type              | Baseband Radio Node                                                        |
| Access Type            | LTE                                                                        |
| Licensing              | License-controlled feature. One license is required for each 								node. |

Summary

The Automated Neighbor Relations feature has the following benefits:

- Maintenance is reduced.
- Performance is improved.
- New cells are introduced without the need for neighbor relation planning.
- Dropped calls because of missing neighbors are reduced.
- New neighbors are automatically found when a site is down.
- Problematic cells can be detected and relations with poor handover execution success rate can be barred for mobility.
- Supported PLMN IDs can be whitelisted and relations to external cells with non-whitelisted PLMNs are barred for mobility.

Based on measurement reports from UEs, the feature automatically creates and

maintains lists of the best neighbor cells to be used by the following features:

- Automated Mobility Optimization
- Best Neighbor Relations for Intra-LTE Load Management
- Coverage-Triggered GERAN Session Continuity
- Coverage-Triggered Inter-Frequency Handover
- Coverage-Triggered Inter-Frequency Session Continuity
- Coverage-Triggered TD-SCDMA Session Continuity
- Coverage-Triggered WCDMA IRAT Handover
- Coverage-Triggered WCDMA Session Continuity
- Data Forwarding at Intra-LTE Handover
- Intra-LTE Handover
- Intra-LTE Inter-Mode Handover
- Mobility Control at Poor Coverage
- Redirect with System Information
- Outgoing NR IRAT Handover
- Uplink-Triggered Inter-Frequency Mobility
- Basic Intelligent Connectivity

Additional Information

For information on the preferred state and parameter settings

of this feature, see RAN Parameter Recommendations Lists.

For more information on this feature and related topics, see the following documentation:

- 3GPP TS 36.331

# 2 Dependencies of Automated Neighbor Relations

The Automated Neighbor Relations feature improves the performance of the mobility

features, and reduces the manual maintenance required to optimize the mobility

features.

Table 1   Feature Dependencies

![Image](../images/76_22104-LZA7016014_1Uen.KK/additional_3_CP.png)

![Image](../images/76_22104-LZA7016014_1Uen.KK/additional_3_CP.png)

Citizens Broadband Radio Service Guidelines Dependencies

The

EUtranFrequency

and the EUtranFreqRelation MO instances

related to CBRS cells can be left empty. The empty MO instances are removed

periodically.

If the

Automated

Neighbor Relations feature is activated and enabled, the

following

conditions apply:

- References to empty EUtranFrequency MO instances are only removed from LBDAR information if there are no EUtranFreqRelation MO instances with non-empty EUtranFreqRelation.candNeighborRel attribute pointing at the referenced EUtranFrequency MO instance and if there is no candidate ExternalEUtranCellTDD MO instance.
- An empty EUtranFrequency MO instance is only removed, if there is no candidate ExternalEUtranCellTDD MO instance.
- The WakeUpFreqPriority MO instances pointing to empty EUtranFrequency MO instances are only removed if there is no candidate ExternalEUtranCellTDD MO instance to that frequency.
- An empty EUtranFreqRelation MO instance is only removed, if candidate list EUtranFreqRelation.candNeighborRel is empty.

For more information, see Citizens Broadband Radio Service

Guidelines.

Hardware

No specific hardware requirements.

Limitations

To create an EN-DC X2-C connection with the same IP address in a multiple IP

addresses configuration, both the eNodeB and the gNodeB need to support the exchange

of PLMNs for the selected network in the X2 TNL Address discovery procedure. The

gNodeB can select the local SCTP end-point based on the received PLMN.

Network Requirements

UEs in the network require the following capabilities:

- Measuring on frequencies to be used for mobility to GERAN, UTRAN and to other LTE frequencies A UE is never ordered to perform ANR-specific measurements on more than one LTE frequency other than the frequency of the serving cell, and never more than one IRAT frequency. For each such frequency there must be a sufficient number of UEs capable of measuring. These ANR-specific measurements are limited in time and number of reports.
- Using measurement gap for reading SC of UTRAN, BSIC of GERAN, and for PCI on other LTE frequencies Note: The UE can read those cell identities without using measurement gap.
- Reading and reporting CGI of E-UTRAN cells, UTRAN cells and GERAN cells, using long DRX cycle or autonomous gap
- Reading and reporting RAC and LAC of UTRAN cells, using long DRX cycle. For RAC of GERAN cells
- Reading and reporting NCGI for NR Standalone cells using DRX

# 3 Feature Operation of Automated Neighbor Relations

Based on measurement reports from UEs, the feature automatically constructs and

maintains lists of the best neighbor cells to be used for mobility features.

Automated Neighbor Relations can be used together with manual optimization of neighbor lists.

Automated Neighbor Relations also removes neighbor cell relations that have not been used

within a configurable time period.

Automated Neighbor Relations is divided in the following functions:

- Automated Neighbor Relations support for NR
- Automated Neighbor Relations support for LTE
- Automated Neighbor Relations support for UTRAN
- Automated Neighbor Relations support for GERAN

Automated Neighbor Relations support for NR uses UE measurements of the following types to

detect neighbor relations:

- Mobility measurements triggered by mobility thresholds.

Automated Neighbor Relations support for LTE uses UE measurements of the following types to

detect neighbor relations:

- ANR-initiated measurements triggered when a neighbor cell signal strength exceeds ANR-specific thresholds relative to the serving cell.
- ANR-initiated periodical measurements. The UE reports the strongest cell on the selected frequency.
- Mobility measurements triggered by mobility thresholds.

Automated Neighbor Relations support for UTRAN uses UE measurements of the following types to

detect neighbor relations:

- ANR-initiated measurements The UE reports the strongest cell on the selected frequency.

Automated Neighbor Relations support for GERAN uses UE measurements of the following types to

detect neighbor relations:

- ANR-initiated measurements The UE reports the strongest cell on the selected frequencies.
- Mobility measurements triggered by mobility thresholds.

The eNodeB controls the measurements by sending thresholds and other report conditions to the

UE.

## 3.1 Feature Operation Sequence Diagram

### 3.1.1 ANR LTE High Level Work Flow

Figure 1   ANR LTE High Level Flow

Steps

1. The UE reports neighbor measurement; PCI=5.
2. Cell A concludes that PCI=5 is not known.
3. Cell A orders the UE to read CGI for Cell B.
4. The UE reads and reports the CGI broadcast for Cell B. A neighbor cell is added. Handover is now possible to Cell B.
5. The RBS checks if X2 is allowed to the RBS where Cell B is contained.
6. The RBS gets the IP address for the target RBS from DNS or through S1 configuration transfer. More information can be found in X2 Configuration.
7. X2 is established. Note: In addition to creation of X2 connection, a direct X2 tunnel can be created.
8. Cell A updates the OSS and observation data.

### 3.1.2 High Level Flow for ANR UTRAN and GERAN

The high level flow for ANR UTRAN and GERAN is as follows:

Steps

1. The UE reports neighbor measurement; UTRAN: SC=5 or GERAN: BSIC=5.
2. Cell A concludes that SC=5 or BSIC=5 is not known.
3. Cell A orders the UE to read CGI for Cell B.
4. The UE reads and reports CGI broadcast for Cell B. A neighbor cell and relation is added. Handover is now possible to Cell B.
5. Cell A updates the OSS and observation data. The high level flow for ANR GERAN is the same except that the UE reports the BSIC and carrier frequency instead of SC.

### 3.1.3 High-Level Flow for ANR NR

When receiving B1 MR before ANR triggering, target cell strength is

checked.

The high-level flow for Automated Neighbor Relations for NR is as follows:

Steps

1. The UE reports one of the following measurements: B1 measurement that includes an unknown NR cell for the eNodeB in EN-DC deployment B1 NR Standalone measurement that includes an unknown NR cell for the eNodeB in NR Standalone deployment
2. ANR checks if the NR cell signal strength found in the B1 measurement report is equal to or greater than the ANR-specific threshold.
3. ANR is triggered as follows: For PCI-Based ANR in EN-DC deployment, the eNodeB checks if there is any external NR cell with the same PCI on the measured frequency that the UE reports in the B1 measurement report. If a suitable NR cell is found, the eNodeB creates cell relations to all matched external NR cells with the same PCI. If there is no TermPointToGNB to host the external cell, a new TermPointToGNB is created. For NCGI-based ANR in EN-DC deployment, the eNodeB checks if NCGI measurements are allowed and instructs the UE to perform an NCGI measurement on the reported cell. When the eNodeB receives the NCGI measurement report, the eNodeB creates neighbor objects from LTE to NR. For more information, see MOs Created for EN-DC Mobility. Table 2 MOs Created for EN-DC Mobility EN-DC Mobility Case MOs Created Unknown cell in unknown gNodeB ExternalGNodeBFunction TermPointToGNB ExternalGUtranCell GUtranCellRelation Unknown cell in known gNodeB ExternalGUtranCell GUtranCellRelation Known cell in known gNodeB GUtranCellRelation Unknown cell in known gNodeB following EN-DC-triggered B1 measurements if the TermPointToGNB MO does not exist TermPointToGNB ExternalGUtranCell GUtranCellRelation Known cell in known gNodeB following EN-DC-triggered B1 measurements if relation to the cell exists and the TermPointToGNB MO does not exist TermPointToGNB Known cell in known gNodeB following EN-DC-triggered B1 measurements if relation to the cell does not exist and the TermPointToGNB MO does not exist TermPointToGNB GUtranCellRelation For NCGI-based ANR in standalone deployment, the eNodeB checks if NCGI measurements are allowed and instructs the UE to perform an NCGI measurement on the reported cell. When the eNodeB receives the NCGI measurement report, the eNodeB creates neighbor objects from LTE to NR. For more information, see MOs Created for NR Standalone Mobility. Table 3 MOs Created for NR Standalone Mobility NR Standalone Mobility Case MOs Created Unknown cell in unknown gNodeB following NR Standalone-triggered B1 measurements ExternalGNodeBFunction ExternalGUtranCell GUtranCellRelation Unknown cell in known gNodeB following NR Standalone-triggered B1 measurements ExternalGUtranCell GUtranCellRelation Known cell in known gNodeB following NR Standalone-triggered B1 measurements GUtranCellRelation

## 3.2 Process Steps

### 3.2.1 UE Measurement Reports

ANR uses the following types of UE measurements to detect neighbor relations:

- Mobility measurements
- ANR initiated measurements

### 3.2.2 Mobility Measurements

The UE performs mobility measurements based on the measurement configuration described in

Intra-LTE Handover. These measurements can also be used by ANR. The

maximum number of cells returned in the PCI reports is limited and controlled by the operator

using MOM parameters.

ANR requests the CGI measurements when unknown PCIs are reported with signal strength and

quality above the thresholds for A3 measurement. The thresholds are controlled by the operator using

MOM parameters. The UE must have the capability to perform CGI measurements. If the UE has an

active bearer with QCI 1 (QoS Class Identifier), the CGI measurement is not performed, except

for CGI measurements with autonomous gap. When the CGI is successfully reported, the neighbor

cell is added and the relation is configured.

The Automated Neighbor Relation feature always performs a CGI measurement before adding an

E-UTRAN relation.

CGI measurement with autonomous gap is initiated even when the UE has a QCI 1 bearer if the

following conditions are met:

- The ENodeBFunction.measuringEcgiWithAgActive is set to TRUE.
- The UE is capable of autonomous gap for the target LTE or UTRAN cell.

Figure 2 shows the process of adding a new neighbor

relation based on UE reporting.

Figure 2   UE Reporting Process for Adding a New Relation

### 3.2.3 ANR Initiated Measurements

ANR measurements provide reports from the UE before mobility measurements are triggered.

Over time, a specified number of selected UEs are ordered to report PCI and subsequently to

report CGI.

ANR measurements are switched on and off per frequency relation with the

anrMeasOn attribute. By setting the attribute to

FALSE for a frequency relation, no ANR measurements or ANR triggered

CGI reading are initiated. Thus ANR is disabled for the frequency relation and no cell

relations are added on the frequency. Any existing relations will be removed according to

attribute removeNrelTime.

After providing the RBS with either a specific number of reports

maxNoPciReportsEvent or a specific time

maxTimeEventBasedPciConf, a UE selected for these types of measurements

is then relieved from sending any more ANR-specific PCI reports during the time it is

connected to the RBS.

A UE is selected when connecting to the cell, either by an incoming handover or initial

connect. When a UE connects, ANR can use this UE to perform ANR-specific PCI measurement. This

is done if:

- The UE supports CGI measurements.
- UE does not have active QCI 1 bearer (indicating a voice bearer) or the UE is capable of autonomous gap and the ENodeBFunction.measuringEcgiWithAgActive is set to TRUE.
- The SubscriberGroupProfile.featuresToDisableMeas attribute is not set to disable ANR initiated measurements if the UE is included in the ASG.
- EUtranFreqRelation MO to a frequency that needs to be measured by ANR exists and frequency is supported by the UE.
- EUtranFreqRelation MO has attribute anrMeasOn set to TRUE.

The EUtranFreqRelation MO enables the RBS to order measurements on a

particular frequency and must be manually created.

The EUtranFreqRelation MO also enables ANR to track (but not store) the

following for a particular frequency:

- Actual number of UEs currently selected to perform measurements on the frequency.
- Target number of UEs that ANR would require to get sufficient measurement results.

When the target number is greater than the actual number, ANR orders a connecting UE, which

is CGI-capable, to perform PCI measurements.

Besides mobility, UE is selected to make ANR measurements of PCI on only one frequency. That

frequency is selected according to difference between target and actual number of connected

UEs with configured measurements. Frequency with the biggest difference is selected first and

if UE does not support this frequency, the next prioritized one is selected. Note that only

UEs capable to perform CGI measurements can be selected for ANR purposes.

An ENB regulates the target number of UEs to perform PCI readings as follows:

- Starts from a maximum value at cell unlock or restart For intra-frequency ANR, the AnrFunctionEUtran.anrUesEUtraIntraFMax parameter. For inter-frequency ANR, the AnrFunctionEUtran.anrUesThreshInterFMax parameter.
- Decreases the value if ANR-specific reports contain only known cells For intra-frequency ANR, the AnrFunctionEUtran.anrUesEUtraIntraFDecr parameter. For inter-frequency ANR, the AnrFunctionEUtran.anrUesThreshInterFDecr parameter.
- Increases the value whenever a PCI that does not correspond to any known cell is reported by any UE in mobility reports or ANR-specific reports For intra-frequency ANR, the AnrFunctionEUtran.anrUesEUtraIntraFIncrAnr and AnrFunctionEUtran.anrUesEUtraIntraFIncrHo parameters. For inter-frequency ANR, the AnrFunctionEUtran.anrUesThreshInterFIncrAnr and AnrFunctionEUtran.anrUesThreshInterFIncrHo parameters.

A minimum value for the target number can also be set manually, however, the actual number of

UEs might be below this value, since it depends on the amount of CGI-capable UEs that are

attached to the cell.

A3 measurement with an ANR-specific offset is the measurement when the frequency of the

serving cell is selected for a UE. A5 measurement with an ANR-specific offset is the

measurement when a frequency other than that of the serving cell is selected for a UE.

The measurement configuration sent to the UE depends on the corresponding mobility

measurement configuration. Configuration is located under

ReportConfigEUtraBestCellAnr and ReportConfigA5Anr

MOs. All parameters are defined as an offset to corresponding parameters on parent MOs:

ReportConfigEUtraBestCell and ReportConfigA5. The

offset values broaden the cell border and provide ANR with information on new cells before

they are needed for handover, providing more time to perform CGI reading.

### 3.2.4 S1 Handover

If there is an incoming S1 Handover Request with an unknown cell

and there is a PCI conflict with an existing cell, then a new relation

is created.

Figure 3   S1 Handover Process for Adding a New Relation

### 3.2.5 EUTRAN Cell Relations

There are two types of EUTRAN cell relations, the candidate

EUtranCellRelation and the EUtranCellRelation MOs. The

candidate EUtranCellRelation enables a reduction of memory consumption by

reducing the number of neighbor relation objects that are not frequently used and only present

in the following relations:

- Relations used at an operator configured handover rate
- Relations used by Carrier Aggregation
- Relations used by Load Balancing

All candidate EUtranCellRelation are represented in the

EUtranFreqRelation.candNeighborRel list, which stores the necessary

information to recreate the candidate EUtranCellRelation in case of a

restart.

If the parameter AnrFunction.cellRelHoAttRateThreshold is set higher than

zero the cell relation is created as a candidate EUtranCellRelation,

otherwise it is created as a EUtranCellRelation MO. Candidate

EUtranCellRelations with PCI conflicts to other cell relations with the same source cell are

converted to EUtranCellRelation MO so that the conflict can be

resolved.

If ANR Detection of Problematic Cells functionality is activated and the handover success

rate is on medium level, the candidate EUtranCellRelation is converted to

EUtranCellRelation MO for better mobility optimization.

The parameter AnrFunction.cellRelHoAttRateThreshold is also used for

handling external cells in the same way as for cell relations. For this, there are also

candidate ExternalEUtranCellFDD and candidate ExternalEUtranCellTDD to reduce the number of

external cell objects that do not need to be represented as

ExternalEUtranCellFDD or ExternalEUtranCellTDD MOs.

### 3.2.6 MOs Representing Neighbor Relations

ANR creates the following MOs holding information about neighbor

relations:

- TermPointToENB
- ExternalEUtranCellFDD
- ExternalEUtranCellTDD
- EUtranCellRelation
- EUtranFreqRelation

The ExternalENodeBFunction MO represents another eNodeB. When it is

missing, it is added for new external cells.

The TermPointToENB MO represents the termination point of an X2 link. It

is created at the same time as the ExternalENodeBFunction MO if an X2 link

is allowed to the other eNodeB. ANR triggers X2 setup by creating the

TermPointToENB MO. The TermPointToENB is not created

if there are no EUtranCellRelation MOs to

ExternalEutranCells on given ExternalENodeBFunction,

even if there are candidate

EUtranCellRelations.

The ExternalEUtranCellFDD and ExternalEUtranCellTDD MOs

represent cells in another eNodeB. They are detected by UE measurements or received over X2

from a neighbor eNodeB. The later is not connected to ANR and is included in X2 Configuration.

The EUtranCellRelation represents the mobility relationship between two

neighboring E-UTRAN cells.

The attribute EUtranFreqRelation.candNeighborRel contains representations

for all the candidate EUtranCellRelation.

Figure 4   Candidate Neighbor Relations List

The parameter AnrFunction.cellRelHoAttRateThreshold controls when ANR

creates or removes an EUtranCellRelation MO. The

EUtranCellRelation MO is created when the threshold for

AnrFunction.cellRelHoAttRateThreshold is reached. If the daily handover

rate goes below the threshold during the time specified in parameter

AnrFunction.removeNrelTime, the EUtranCellRelation MO

is removed but kept as a candidate EUtranCellRelation.

Candidate cell relations are converted to an MO instance if any of the following conditions

are met:

- The handover attempt rate is equal to or greater than the threshold specified by the AnrFunction.cellRelHoAttRateThreshold attribute
- The cell relation is used for load balancing
- The cell relation is involved in a PCI conflict
- The EUtranCellRelation.hoSuccLevel attribute is set to MEDIUM
- The EUtranCellRelation.hoSuccLevel attribute is set to LOW while the AnrFunction.problematicCellPolicy attribute is set to AUTO\_DETECT
- The EUtranCellRelation.hoSuccLevel attribute is set to LOW while the AnrFunction.barringLowHoAllowed attribute is set to FALSE and the available struct member of the EUtranCellRelation.mobilityStatus attribute is set to TRUE
- The EUtranCellRelation.asmStatus attribute is set to any of the following values: CANDIDATE ALLOWED ONLY\_ALLOWED\_FOR\_DL

MO instances associated with the cell relation are converted to candidate cell relations if

the handover attempt rate is lower than the threshold specified by the

AnrFunction.cellRelHoAttRateThreshold attribute for the time specified by

the AnrFunction.removeNRelTime attribute.

The following conditions can prevent the conversion of MO instances to candidate cell

relations:

- The cell relation is used for load balancing or carrier aggregation
- The EUtranCellRelation.isRemoveAllowed attribute is set to false
- The cell relation is involved in a PCI conflict
- The EUtranCellRelation.hoSuccLevel attribute is set to MEDIUM
- The EUtranCellRelation.hoSuccLevel attribute is set to LOW while the AnrFunction.problematicCellPolicy attribute is set to AUTO\_DETECT
- The EUtranCellRelation.hoSuccLevel attribute is set to LOW while the AnrFunction.barringLowHoAllowed attribute is set to FALSE and the available struct member of the EUtranCellRelation.mobilityStatus attribute is set to TRUE
- The EUtranCellRelation.cellIndividualOffsetEUtran attribute is set to a value lower than 0 while the Automated Mobility Optimization feature is activated and the EUtranCellRelation.amoState attribute is set to ENABLED
- The Automatic SCell Management feature is activated and the EUtranCellRelation.asmStatus attribute is set to any of the following values: CANDIDATE ALLOWED ONLY\_ALLOWED\_FOR\_DL

To stop the conversion of cell relations, set the

AnrFunction.cellRelHoAttRateThreshold attribute to 0. If

any candidate cell relations exist when this occurs, they are converted to

EUtranCellRelation MO instances at the next handover attempt or when the

instance is created manually. If all instances of the

EUtranFreqRelation.candNeighborRel attribute are empty, no candidate cell

relations exist, if this is the case, no conversions are performed. If the conversion needs to

be stopped immediately and all candidate cell relations need to be deleted, contact Ericsson

support.

Candidate cell relations are removed if the following conditions are met:

- No PCI or CGI reports are received from UEs for the time specified by the AnrFunction.removeNRelTime attribute
- The maximum number of cell relations is reached for the EUtranFreqRelation MO instance and a new cell relation needs to be added

MO instances associated with cell relations are removed if the following conditions are

met:

- The cell relation is removed through manual configuration
- No PCI or CGI reports are received from UEs for the duration of time specified by the AnrFunction.removeNRelTime attribute while the EUtranCellRelation.isRemoveAllowed is set to true
- The following conditions are not met: The EUtranCellRelation.cellIndividualOffsetEUtran attribute is set to a lower value than 0 The Automated Mobility Optimization feature is activated. The EUtranCellRelation.amoState attribute is set to ENABLED

Figure 5   Neighbor Relation Life-Cycle

ANR stops adding neighbors, if the maximum number of possible intra-LTE cell relations in

EUtranCellRelation MO, or external eNodeBs in

ExternalENodeBFunction MO is reached. If

AnrFunction.cellRelHoAttRateThreshold is set to higher than zero, all

additional neighbors found are kept in the candidate list until the neighbor list size stored

in the MOM is reduced. If AnrFunction.cellRelHoAttRateThreshold is set to

zero, they are discarded.

If the maximum candidate EUtranCellRelation for one EUtranFreqRelation is

reached and there is no more room for new neighbor relations, an older candidate

EUtranCellRelation, still not converted into an MO

EUtranCellRelation, is swapped out from the list to make room for the new

neighbor relation.

Related concepts

ANR Detection of Problematic Cells

### 3.2.7 Removal of Unused Neighbor Objects

The automatic removal of E-UTRAN, GERAN, UTRAN, and NR objects is performed for the following

elements:

- Cell relations
- Candidate cell relations
- External cells
- Candidate external cells
- External RBS
- X2 connections

Once in every 24 hours, ANR evaluates which objects can be deleted. The first check is

executed one hour after RBS restart. Changing any of the following attributes triggers

immediate evaluation for cleanup and starts a new 24-hour-long cycle:

- AnrFunction.removeNrelTime
- AnrFunction.removeNcellTime
- AnrFunction.removeNenbTime
- AnrFunction.removeNgnbTime

ANR removal is executed with limited precision. For all objects, there can be up to 24 hours

delay from expected removal time. Cell relations and candidate cell relations can also be

removed up to 12 hours earlier than expected removal time.

If the feature removes unused neighbor objects, the PCI can be removed from the SIB4 or the

SIB5 excludelist depending on the configured value of the following attributes:

- EUtranCellRelation.isHoAllowed
- EUtranCellRelation.includeInSystemInformation

This is possible if the EUtranFreqRelation.blackListEntryIdleMode

attribute does not include the corresponding PCI in the SIB4 or the SIB5 excludelist.

Related concepts

Removal of Unused E-UTRAN Neighbor Objects

Removal of Unused UTRAN and GERAN Neighbor Objects

Removal of Unused NR Neighbor Objects

Related Information

Idle Mode Support

#### 3.2.7.1 Removal of Unused E-UTRAN Neighbor Objects

Removal Evaluation for EUtranCellRelation

![Image](../images/76_22104-LZA7016014_1Uen.KK/additional_3_CP.png)

![Image](../images/76_22104-LZA7016014_1Uen.KK/additional_3_CP.png)

EUtranCellRelation is converted to a candidate

EUtranCellRelation after not being used frequently enough for

AnrFunction.removeNrelTime if

AnrFunction.cellRelHoAttRateThreshold is set to higher than

zero. EUtranCellRelation is removed totally if it is not used at

all for another AnrFunction.removeNrelTime.

For the EUtranCellRelation MO to be in use means that it is asked

for in a handover evaluation situation when a UE has reported the cell in the

mobility best cell report or corresponding inter-frequency measurement. This does

not necessarily mean that handover has been performed to the

cell.

The Automated Mobility Optimization (AMO) feature can affect the removal

functionality. If the AMO feature FeatureState.serviceState is

OPERABLE and EUtranCellRelation.amoState is

ENABLED, the unused relation is kept as an MO in

EUtranCellRelation if its

EUtranCellRelation.cellIndividualOffsetEUtran is below zero.

For more AMO feature and parameter details, see the Automated Mobility Optimization Feature Description.

If the best cell has a cell relation where

EUtranCellRelation.isHoAllowed is false, this cell relation

is removed anyway, unless EUtranCellRelation.isRemoveAllowed is

false.

Removal Evaluation for ExternalEUtranCellFDD or ExternalEUtranCellTDD and

TermPointToENB

![Image](../images/76_22104-LZA7016014_1Uen.KK/additional_3_CP.png)

![Image](../images/76_22104-LZA7016014_1Uen.KK/additional_3_CP.png)

1. Cells are considered as prepared for removal or are converted to candidate MOs. The ExternalEUtranCell MO is considered as prepared for removal if all the following conditions are fulfilled: ExternalEUtranCellFDD.isRemoveAllowed or ExternalEUtranCellTDD.isRemoveAllowed is set to true. The time specified for AnrFunction.removeNcellTime has passed since the last EUtranCellRelation MO referring to this cell was removed. AnrFunction.cellRelHoAttRateThreshold is set to zero. The ExternalEUtranCell MO is converted to a candidate and is considered as not removable if all the following conditions are fulfilled: ExternalEUtranCellFDD.isRemoveAllowed or ExternalEUtranCellTDD.isRemoveAllowed is set to true. The time specified for AnrFunction.removeNcellTime has passed since the last EUtranCellRelation MO referring to this cell was removed. AnrFunction.cellRelHoAttRateThreshold is set to higher than zero. A candidate ExternalEUtranCell object is considered as prepared for removal if the time specified for AnrFunction.removeNcellTime has passed since the last candidate EUtranCellRelation object referring to this cell was removed.
2. The TermPointToENB MO is removed if the following conditions are fulfilled: All external cells and candidate cells for the same parent ExternalENodeBFunction MO are evaluated as prepared for removal. The parent ExternalENodeBFunction MO is not listed in ENodeBFunction.x2WhiteList.
3. All MOs and candidate cells prepared for removal are removed if one of the following conditions applies: There is no TermPointToENB MO created under the same parent MO. The TermPointToENB MO is removed in the second step of this evaluation process. All TermPointToENB.administrativeState MOs under the same parent ExternalENodeBFunction MO are set to locked.

Removal Evaluation for ExternalENodeBFunction

![Image](../images/76_22104-LZA7016014_1Uen.KK/additional_3_CP.png)

![Image](../images/76_22104-LZA7016014_1Uen.KK/additional_3_CP.png)

The ExternalENodeBFunction is removed if it has none of the

following MOs for AnrFunction.removeNenbTime:

- ExternalEUtranCellFDD
- ExternalEUtranCellTDD
- Candidate ExternalEUtranCellFDD
- Candidate ExternalEUtranCellTDD

The ExternalENodeBFunction MO instance can represent an eNodeB

that has an LTE cell in an ESS cell pair with an NR cell. If such an instance of the

MO is deleted, the eNodeB that received information on this NR cell in the ESS cell

pair removes the NR cell information.

Automated creation and removal of MOs can be controlled by use of following parameters:

| AnrFunction.removeNrelTime            |    | Controls how long a relation is kept without being used.                                                                         |
|---------------------------------------|----|----------------------------------------------------------------------------------------------------------------------------------|
|                                       |    |                                                                                                                                  |
| AnrFunction.removeNcellTime           |    | Controls how long an external cell without relation is kept before it                                 is considered for removal. |
|                                       |    |                                                                                                                                  |
| AnrFunction.removeNenbTime            |    | Controls how long an external eNodeB without neighbor cells is kept                                 before it is removed.        |
|                                       |    |                                                                                                                                  |
| AnrFunction.cellRelHoAttRateThreshold |    | Controls when to add and remove a MO neighbor relation.                                                                          |

Related concepts

Removal of Unused Neighbor Objects

Support for ESS Cells without SIB1

#### 3.2.7.2 Removal of Unused UTRAN and GERAN Neighbor Objects

Removal Evaluation for UtranCellRelation and GeranCellRelation

![Image](../images/76_22104-LZA7016014_1Uen.KK/additional_3_CP.png)

![Image](../images/76_22104-LZA7016014_1Uen.KK/additional_3_CP.png)

A UTRAN or GERAN neighbor object is considered to be in use if an outgoing handover

or a release with redirect (with or without NACC) is performed on it.

The UtranCellRelation MO and the

GeranCellRelation MO are removed if the following conditions

are fulfilled:

- The corresponding ANR state is activated (AnrFunctionGeran.anrStateGsm, AnrFunctionUtran.anrStateUtran)
- isRemoveAllowed is set to true for UtranCellRelation and GeranCellRelation.
- The length of time since the relation was last used is equal to or exceeds the time specified for AnrFunction.removeNrelTime.

After UtranCellRelation or GeranCellRelation is

removed, ExternalGeranCell, ExternalUtranCellTDD, and ExternalUtranCellFDD are also

removed as described in Removal Evaluation for ExternalGeranCell, ExternalUtranCellTDD, and ExternalUtranCellFDD.

Removal Evaluation for ExternalGeranCell, ExternalUtranCellTDD, and

ExternalUtranCellFDD

![Image](../images/76_22104-LZA7016014_1Uen.KK/additional_3_CP.png)

![Image](../images/76_22104-LZA7016014_1Uen.KK/additional_3_CP.png)

A cell MO is considered to be in use if a cell relation is configured for it.

The ExternalGeranCell, ExternalUtranCellTDD,

and ExternalUtranCellFDD MOs are removed if the following

conditions are fulfilled:

- The corresponding ANR state is activated (AnrFunctionGeran.anrStateGsm, AnrFunctionUtran.anrStateUtran)
- isRemoveAllowed is set to true for ExternalGeranCell, ExternalUtranCellTDD, or ExternalUtranCellFDD.
- The length of time since the cell was last used is equal to or exceeds the time specified for AnrFunction.removeNrelTime.

Related concepts

Removal of Unused Neighbor Objects

#### 3.2.7.3 Removal of Unused NR Neighbor Objects

The Automated Neighbor Relations feature automatically removes NR neighbor objects

that are unused. This way, the number of NR cells used in neighbor relations can be

optimized.

To enable the automatic removal of unused NR neighbor objects,

AnrFunctionNR.anrStateNR must be set to

ACTIVATED.

Removal of Unused ExternalBroadcastPLMNInfo

MOs

The ExternalBroadcastPLMNInfo MO is automatically removed if the

following conditions are met:

- The ExternalGUtranCell.isRemoveAllowed attribute is set to true.
- The ExternalGUtranCell MO is not used in any cell relations for the duration configured with the AnrFunction.removeNcellTime attribute.Note: The default duration is 30 days.

Removal of Unused ExternalGUtranCell MO

The ExternalGUtranCell MO is automatically removed if the

following conditions are met:

- There are no ExternalBroadcastPLMNInfo MOs under the ExternalGUtranCell MO.
- The ExternalGUtranCell.isRemoveAllowed attribute is set to true.
- The ExternalGUtranCell MO is unused in any cell relations for the time set in AnrFunction.removeNcellTime.

The ExternalGUtranCell MO becomes unused when there is no

GUtranCellRelation MO referring to it.

Removal of Unused ExternalGNodeBFunction MO

The ExternalGNodeBFunction MO is removed if this MO remains unused

during a configurable period. This period can be set through the

AnrFunction.removeNgnbTime attribute.

The ExternalGNodebFunction MO becomes unused when there is no

child ExternalGUtranCell MO.

Removal of Unused TermPointToGNB MO

The TermPointToGNB MO is removed when the last

ExternalGUtranCell MO is removed under the

ExternalGNodeBFunction MO.

The TermPointToGNB MO is not removed automatically if the gNodeB

is no longer used in an EN-DC setup, but related

ExternalGUtranCell MOs are still used for handover

preparation in standalone deployment. The manual removal of the

TermPointToGNB MO is possible.

Removal of Unused GUtranCellRelation MO

The Automated Neighbor Relations feature automatically removes the

GUtranCellRelation MO from an NR cell if the cell is not used

for 24 hours.

The use of GUtranCellRelation is defined as either of the

following scenarios:

- Preparation for a handover attempt
- EN-DC setup with an NR cell

For the automatic removal of the GUtranCellRelation MO, the

following conditions must be met:

- The GUtranCellRelation.isRemoveAllowed attribute is set to true.
- The GUtranCellRelation.essEnabled attribute is set to false.
- The GUtranCellRelation MO is unused during the configured time. Note: The default value for AnrFunction.removeNrelTime is 7 days.

### 3.2.8 ANR Detection of Problematic Cells

This function enables the eNodeB to detect and bar mobility cell relations with low

handover execution success rate.

The following attributes must be configured for this function to operate:

- The AnrFunction.problematicCellPolicy attribute for E-UTRAN
- The AnrFunctionGeran.problematicCellPolicy attribute for GERAN

These attributes can be set to the following values:

| AUTO_DETECT         |    | If the attribute is set to AUTO_DETECT, the detection function is               enabled.                                                       |
|---------------------|----|------------------------------------------------------------------------------------------------------------------------------------------------|
|                     |    |                                                                                                                                                |
| AUTO_DETECT_AND_BAR |    | If the value of the attribute is set to AUTO_DETECT_AND_BAR, both               the               detection and barring functions are enabled. |

The detection algorithm calculates the success rate for handover execution. It also defines

the handover success level as HIGH, MEDIUM or

LOW through the following attributes:

- The EUtranCellRelation.hoSuccLevel attribute for E-UTRAN
- The GeranCellRelation.hoSuccLevel attribute for GERAN

The value of these attributes is set to OFF for all cell relations by

default. When the ANR Detection of Problematic Cells function is activated, the value is set

to HIGH and the evaluation starts. The

values

are updated after the handover and changed if the requirements are

fulfilled.

Table 4   Requirements for Value Change

| Affecting Attribute                                                                                    | Affected Attribute                                                                     | Value Change in the Affected Attribute   | Value Change Requirement                                                                                                                                                                                                                                                                           |
|--------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------|------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| AnrFunction.probCellDetectMedHoSuccThres and                   AnrFunction.probCellDetectMedHoSuccTime | EUtranCellRelation.hoSuccLevel for E-UTRAN     GeranCellRelation.hoSuccLevel for GERAN | HIGH to MEDIUM                           | The success rate for handover execution cannot be higher than the value of the                   AnrFunction.probCellDetectMedHoSuccThres attribute for at least                 the time specified as the value of the                   AnrFunction.probCellDetectMedHoSuccTime attribute.       |
| AnrFunction.probCellDetectMedHoSuccThres and                   AnrFunction.probCellDetectMedHoSuccTime | EUtranCellRelation.hoSuccLevel for E-UTRAN     GeranCellRelation.hoSuccLevel for GERAN | MEDIUM to HIGH                           | The success rate for handover execution must be higher than the value of the                   AnrFunction.probCellDetectMedHoSuccThres attribute for at least                 half of the time specified as the value of the                   AnrFunction.probCellDetectMedHoSuccTime attribute. |
| AnrFunction.probCellDetectLowHoSuccThres and                   AnrFunction.probCellDetectLowHoSuccTime | EUtranCellRelation.hoSuccLevel for E-UTRAN     GeranCellRelation.hoSuccLevel for GERAN | MEDIUM to LOW                            | The success rate for handover execution cannot be higher than the value of the                   AnrFunction.probCellDetectLowHoSuccThres attribute for at least                 the time specified as the value of the                   AnrFunction.probCellDetectLowHoSuccTime attribute.       |
| AnrFunction.probCellDetectLowHoSuccThres and                   AnrFunction.probCellDetectLowHoSuccTime | EUtranCellRelation.hoSuccLevel for E-UTRAN     GeranCellRelation.hoSuccLevel for GERAN | LOW to MEDIUM                            | The success rate for handover execution must be higher than the value of the                   AnrFunction.probCellDetectLowHoSuccThres attribute for at least                 the time specified as the value of the                   AnrFunction.probCellDetectLowHoSuccTime attribute.         |

A cell relation can be added as an EUtranCellRelation MO if the

requirements are fulfilled.

Table 5   Requirements for Adding a Cell Relation as EUtranCellRelation MO

| Condition                           | Attribute                                                                           | Value                       | Result                                                                                                                                                                                                                                                                                                                                                                       |
|-------------------------------------|-------------------------------------------------------------------------------------|-----------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| This requirement must be fulfilled. | EUtranCellRelation.hoSuccLevel                                                      | MEDIUM or LOW               | The cell relation can be added and kept as an                     EUtranCellRelation MO even if the                   other                   requirements are not                   fulfilled.                   This optimizes mobility and improves the success rate for handover execution                   before barring the cell relation for mobility.              |
| This requirement must be fulfilled. | EUtranCellRelation.hoSuccLevel                                                      | Changes from HIGH to MEDIUM | The cell relation is added as an EUtranCellRelation MO.                                                                                                                                                                                                                                                                                                                      |
| All requirements must be fulfilled. | EUtranCellRelation.hoSuccLevel                                                      | MEDIUM or LOW               | The cell relation is kept as a EUtranCellRelation MO.                                                                                                                                                                                                                                                                                                                        |
| All requirements must be fulfilled. | AnrFunction.problematicCellPolicy                                                   | AUTO_DETECT                 | The cell relation is kept as a EUtranCellRelation MO.                                                                                                                                                                                                                                                                                                                        |
| All requirements must be fulfilled. | EUtranCellRelation.hoSuccLevel or                     GeranCellRelation.hoSuccLevel | Changes from MEDIUM to LOW  | The cell relation is barred for mobility. The mobility status attributes indicate                   that handover is not allowed on the cell relation.                   The                   value of the mobilityStatusReason struct member of the                     EUtranFreqRelation.candNeighborRelInfoRO attribute is set to                     PROBLEMATIC_CELL. |
| All requirements must be fulfilled. | AnrFunction.problematicCellPolicy                                                   | AUTO_DETECT_AND_BAR         | The cell relation is barred for mobility. The mobility status attributes indicate                   that handover is not allowed on the cell relation.                   The                   value of the mobilityStatusReason struct member of the                     EUtranFreqRelation.candNeighborRelInfoRO attribute is set to                     PROBLEMATIC_CELL. |

The following PM

counters

show the number of prevented handovers for the barred relations:

- EUtranCellFDD.pmHoPreventedProblematicCell
- EUtranCellTDD.pmHoPreventedProblematicCell

The success rate evaluation for handover execution is

paused

if the following conditions are fulfilled:

- The Automated Neighbor Relations feature is deactivated.
- The ANR Detection of Problematic Cells function is enabled.

In this case, all barred cell relations remain barred, and the most recent values are kept

for the following attributes:

- EUtranCellFDD.hoSuccLevel and EUtranCellFDD.mobilityStatus for E-UTRAN
- GeranCellRelation.hoSuccLevel and GeranCellRelation.mobilityStatus for GERAN

The Automated Mobility Optimization feature can affect the ANR Detection of Problematic Cells

function if any of the following conditions are fulfilled:

- The value of the FeatureState.serviceState attribute is changed to OPERABLE, while the value of the EUtranCellRelation.amoState attribute is set to ENABLED.
- The lower or upper limit in the value of the EUtranCellRelation.cellIndividualOffsetEUtran or the EUtranCellRelation.qOffsetCellEUtran attributes is changed to a wider range. Simultaneously, the value of the FeatureState.serviceState attribute is set to OPERABLE and the value of the EUtranCellRelation.amoState attribute is set to ENABLED.

Table 6   Affecting Conditions

| Condition                         | Prerequisite                                                                                            | Value                                                    |
|-----------------------------------|---------------------------------------------------------------------------------------------------------|----------------------------------------------------------|
| All conditions must be fulfilled. | FeatureState.serviceState                                                                               | Changed to OPERABLE                                      |
| All conditions must be fulfilled. | EUtranFreqRelation.amoAllowed                                                                           | true                                                     |
| All conditions must be fulfilled. | AmoFunction.amoAllowedInterVendor                                                                       | true or false                                            |
| All conditions must be fulfilled. | The eNodeB is an Ericsson eNodeB.                                                                       | N/A                                                      |
| All conditions must be fulfilled. | EUtranFreqRelation.amoAllowed                                                                           | Changed to true                                          |
| All conditions must be fulfilled. | FeatureState.serviceState                                                                               | OPERABLE                                                 |
| All conditions must be fulfilled. | AmoFunction.amoAllowedInterVendor                                                                       | true or false                                            |
| All conditions must be fulfilled. | The eNodeB is an Ericsson eNodeB.                                                                       | N/A                                                      |
| All conditions must be fulfilled. | AmoFunction.amoAllowedInterVendor                                                                       | Changed to true                                          |
| All conditions must be fulfilled. | FeatureState.serviceState                                                                               | OPERABLE                                                 |
| All conditions must be fulfilled. | EUtranFreqRelation.amoAllowed                                                                           | true                                                     |
| All conditions must be fulfilled. | The eNodeB is a non-Ericsson eNodeB.                                                                    | N/A                                                      |
| All conditions must be fulfilled. | EUtranCellRelation.cellIndividualOffsetEUtran or                   EUtranCellRelation.qOffsetCellEUtran | The lower or the upper limit is changed to a wider range |
| All conditions must be fulfilled. | FeatureState.serviceState                                                                               | OPERABLE                                                 |
| All conditions must be fulfilled. | EUtranFreqRelation.amoAllowed                                                                           | true                                                     |
| All conditions must be fulfilled. | AmoFunction.amoAllowedInterVendor                                                                       | true or false                                            |
| All conditions must be fulfilled. | The eNodeB is an Ericsson eNodeB.                                                                       | N/A                                                      |

The PROBLEMATIC\_CELL value is cleared in the

mobilityStatusReason struct

member

of the EUtranFreqRelation.candNeighborRelInfoRO attribute. The evaluation

parameters are

set

to the highest values and the evaluation restarts.

For cell relations that are involved in a PCI conflict, the value of the

EUtranCellRelation.hoSuccLevel attribute is set to OFF

on the following conditions:

- The value of the AnrFunction.pciConflictDetectionEcgiMeas attribute is set to true.
- The value of the AnrFunction.pciConflictMobilityEcgiMeas attribute is set to false.

It is possible that the ANR Detection of Problematic Cells function is active when the cell

is unlocked. In such cases, the evaluation restarts from the highest value for the

corresponding handover success level.

Table 7 shows the conditions that must be

fulfilled for evaluation restart.

Table 7   Values

at Node Restart

| Attribute                                                                                                     | Value                | Result                                                                                                                |
|---------------------------------------------------------------------------------------------------------------|----------------------|-----------------------------------------------------------------------------------------------------------------------|
| The mobilityStatusReason member of the                     EUtranFreqRelation.candNeighborRelInfoRO attribute | PROBLEMATIC_CELL     | The evaluation restarts from the value of the                     AnrFunction.probCellDetectLowHoSuccThres attribute. |
| EUtranCellRelation.hoSuccLevel                                                                                | LOW                  | The evaluation restarts from the value of the                     AnrFunction.probCellDetectLowHoSuccThres attribute. |
| The mobilityStatusReason member of the                     EUtranFreqRelation.candNeighborRelInfoRO attribute | Not PROBLEMATIC_CELL | The evaluation restarts from Value 1.                                                                                 |
| EUtranCellRelation.hoSuccLevel                                                                                | HIGH                 | The evaluation restarts from Value 1.                                                                                 |

The PROBLEMATIC\_CELL value of the mobilityStatusReason

struct

member

of the EUtranFreqRelation.candNeighborRelInfoRO attribute is cleared on the

following conditions:

- The ANR Detection of Problematic Cells function is active.
- The AnrFunction.probCellDetectLowHoSuccThres attribute is reconfigured.

The value of the EUtranCellRelation.hoSuccLevel or the

GeranCellRelation.hoSuccLevel attribute is reset to

MEDIUM. For these cell relations, the handover success rate evaluation

restarts from the new value of the AnrFunction.probCellDetectLowHoSuccThres

attribute.

For cell relations involved in a PCI conflict, the PROBLEMATIC\_CELL value is

cleared in the mobilityStatusReason struct

member

of the EUtranFreqRelation.candNeighborRelInfoRO attribute. The evaluation

attributes are reset to the highest values and the evaluation restarts.

See

Table 8 for the conditions that must be fulfilled

to reset the value of the EUtranCellRelation.hoSuccLevel attribute to

OFF.

When the CGI report detects an unknown cell with which the CGI has no relation, the unknown

cell relation is added as a new cell relation.

Table 8   Conditions for Resetting the EUtranCellRelation.hoSuccLevel Attribute to OFF

| Attribute                                | Value                              |
|------------------------------------------|------------------------------------|
| AnrFunction.pciConflictDetectionEcgiMeas | true                               |
| AnrFunction.pciConflictMobilityEcgiMeas  | false                              |
| AnrFunction.problematicCellPolicy        | AUTO_DETECT or AUTO_DETECT_AND_BAR |

Table 9   Conditions for Resetting the EUtranCellRelation.hoSuccLevel Attribute to HIGH

| Condition                         | Prerequisite                                                                                                | Value                              |
|-----------------------------------|-------------------------------------------------------------------------------------------------------------|------------------------------------|
| All conditions must be fulfilled. | AnrFunction.problematicCellPolicy                                                                           | AUTO_DETECT or AUTO_DETECT_AND_BAR |
| All conditions must be fulfilled. | AnrFunction.pciConflictMobilityEcgiMeas                                                                     | true                               |
| All conditions must be fulfilled. | AnrFunction.pciConflictDetectionEcgiMeas                                                                    | false                              |
| All conditions must be fulfilled. | AnrFunction.pciConflictMobilityEcgiMeas                                                                     | false                              |
| All conditions must be fulfilled. | AnrFunction.problematicCellPolicy                                                                           | AUTO_DETECT or AUTO_DETECT_AND_BAR |
| All conditions must be fulfilled. | AnrFunction.pciConflictDetectionEcgiMeas                                                                    | true                               |
| All conditions must be fulfilled. | A PCI conflict is resolved by deleting or updating a cell relation over the X2                   interface. | N/A                                |
| All conditions must be fulfilled. | AnrFunction.pciConflictDetectionEcgiMeas                                                                    | true                               |
| All conditions must be fulfilled. | A PCI conflict is resolved at node restart.                                                                 | N/A                                |
| All conditions must be fulfilled. | AnrFunction.pciConflictMobilityEcgiMeas                                                                     | true                               |
| All conditions must be fulfilled. | Another PCI conflict is found in the CGI measurement report.                                                | N/A                                |

The

ANR Detection of Problematic Cells function makes it possible to select

specific cell relations involved in PCI conflicts that are excluded from barring. If

the

value of the AnrFunction.problematicCellPolicy attribute

is set to AUTO\_DETECT\_AND\_BAR, the

EUtranCellRelation.barringLowHoAllowed attribute can be used to select a

cell relation with low handover success rate and exclude it from

barring.

Related concepts

Barring and Un-barring Cell Relations for Mobility

### 3.2.9 ANR PCI Handling of Problematic Cells

The following two functions are for PCI handling of problematic cells:

- PCI conflict detection enhancement
- Living with PCI Conflicts

PCI Conflict Detection Enhancement

This function provides the possibility to detect unknown neighboring cells with the

same PCI which are not detected by ANR through triggering additional Extra CGI

measurement. The parameter

Anrfunction.pciConflictDetectionEcgiMeas defines if the

function is activated.

When EUtranCellRelation.hoSuccLevel for a relation becomes

MEDIUM or LOW, it is a trigger to request

extra CGI measurement. It will be done sporadically as below. The first time an

extra CGI report is sent not earlier than start intensity after

EUtranCellRelation.hoSuccLevel becomes

MEDIUM or LOW. The eNodeB has to wait for it

until any A3 or A5 UE Measurement Report is received, because the extra CGI must be

requested from UE reporting on the wanted PCI. The frequency of sending request for

extra CGI report for given PCI is decreased with each next request.

When the extra CGI report detects an unknown cell (no cell relation exists with that

CGI), then the cell relation is added. It also means that a PCI conflict was

found.

The extra CGI measurement must be stopped if one of the following events occurs.

- The EUtranCellRelation.hoSuccLevel becomes HIGH.
- The EUtranCellRelation.hoSuccLevel becomes OFF.
- The parameter AnrFunction.pciConflictDetectionEcgiMeas is FALSE.

CGI measurement with autonomous gap is initiated, if the following conditions are

met:

- The AnrFunction.measuringEcgiWithAgActive is set to true.
- The UE is capable of autonomous gap for the target LTE cell.

If the conditions are not met but UE has QCI1 bearer, then CGI measurement is not

initiated. If the above conditions are not met and UE does not have QCI1 bearer,

then CGI measurement with DRX configuration is initiated.

The DRX configuration is decided by MO AnrPciConflictDrxProfile.

Corresponding counters and events are observed.

When the parameter problematicCellPolicy is set to

AUTO\_DETECT\_AND\_BAR or AUTO\_DETECT and the

parameter AnrFunction.pciConflictDetectionEcgiMeas is set to

true, the eNodeB checks if any PCI conflict exists. For the

cell relations involved in PCI conflict, see for the behavior in special cases of

ANR Detection of Problematic Cells function.

Living with PCI Conflicts

This function allows to select the proper cell before handover by means of extra CGI

measurement for the cell relations involved in PCI conflict. The parameter

AnrFunction.pciConflictMobilityEcgiMeas defines if the

function is activated.

Whenever a measurement report (A3/A5) is received with a PCI, on which there are

multiple relations (PCI conflict), a CGI measurement must be requested from the UE

prior to the handover. The CGI received is used to perform the handover to the

correct cell.

When the extra CGI report does not match any relations within the PCI conflict, the

cell relation is added. It means that another conflict is found for the PCI.

The extra CGI measurement must be stopped if one of the following conditions is

met:

- A PCI conflict is resolved and there are no longer any multiple relations with the same PCI and frequency.
- The parameter AnrFunction.pciConflictMobilityEcgiMeas is false.

CGI measurement with autonomous gap is initiated if the following conditions are met

regardless if the UE has any QCI1 bearer or not:

- The AnrFunction.measuringEcgiWithAgActive is set to true.
- The UE is capable of autonomous gap for the target LTE cell.

Otherwise, CGI measurement with DRX is initiated. The DRX configuration is

decided by MO AnrPciConflictDrxProfile. Corresponding counters

and events are observed.

Disabling Measurements for ANR PCI Handling of Problematic Cells

The measurements for both functions of ANR PCI handling of problematic cells can be

disabled if the SubscriberGroupProfile.featuresToDisableMeas

attribute is set to disable ANR initiated measurements and the UE is included in the

ASG. In this case, the eNodeB does not trigger additional CGI measurement.

Influence of the PCI Conflict Detection Enhancement and the Living with PCI

Conflicts Functions on the Handover Success Level with Relation When PCI Conflict is

Detected Earlier

Table 10   Influence on Handover Success Level with Relation When PCI Conflict is

Detected Earlier

| AnrFunction.pciConflictDetectionEcgiMeas   | AnrFunction.pciConflictMobilityEcgiMeas   | mobilityStatusReason member of the                                             EutranFreqRelation.candNeighborRel                                         attribute   | GeranCellRelation.hoSuccLevel or                                         EUtranCellRelation.hoSuccLevel   | Comment                                                                                                                                                                                                                                                                                                                                                                         |
|--------------------------------------------|-------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| true                                       | false                                     | NONE                                                                                                                                                                  | Resets to OFF and evaluation                                     restarts.                                | See Table 8                                                                                                                                                                                                                                                                                                                                                                     |
| false                                      | true                                      | NONE                                                                                                                                                                  | HIGH  MEDIUM  LOW                                                                                         | When the AnrFunction.problematicCellPolicy                                     attribute is set to AUTO_DETECT_AND_BAR or                                         AUTO_DETECT, the extra CGI measurement is                                     used to calculate the Handover Execution Success Rate for                                     relations also in a PCI conflict. |
| false                                      | false                                     | NONE                                                                                                                                                                  | Resets to HIGH and evaluation                                     restarts.                               | See Table 9                                                                                                                                                                                                                                                                                                                                                                     |
| true                                       | true                                      | NONE                                                                                                                                                                  | HIGHMEDIUM  LOW                                                                                           | When the AnrFunction.problematicCellPolicy                                     attribute is set to AUTO_DETECT_AND_BAR or                                         AUTO_DETECT, the extra CGI measurement is                                     used to calculate the Handover Execution Success Rate for                                     relations also in a PCI conflict. |

### 3.2.10 ANR Detection and Removal of Obsolete External E-UTRAN Neighbor Objects

This ANR function provides the possibility to automatically detect and remove obsolete

external E-UTRAN Neighbor Objects with zero outgoing S1 handover preparation success

rate caused by process of swapping nodes, when the following conditions apply:

- During node swap the same PCI is kept
- No manual activity is done to clean up obsolete neighbor-related MOs

The function enables the automatic removal of obsolete external MOs if a faulty

configuration is identified. An E-UTRAN faulty configuration occurs if the following

conditions apply:

- The eNodeB ID and the eNodeB IP address are changed.
- The eNodeB ID and the eNodeB IP address are not reused within the same cluster.

The function can be activated by setting the

AnrFunction.detectObsoleteExtCellsEnabled attribute to

ENABLED if the Automated Neighbor Relations feature is active.

The function monitors the S1 preparation outgoing handover phase over the S1 interface in

each external E-UTRAN node. It also evaluates the outgoing S1 handover preparation

failures induced by each cause.

Some of the outgoing S1 Handover preparation failures are excluded from further

evaluation based on the failure cause.

A counter is stepped for each consecutive outgoing S1 handover preparation failure with a

cause not excluded by the function. This counter is reset after each successful outgoing

S1 handover preparation or failure with a cause excluded by the function. The process is

repeated until this counter reaches the counter threshold. The counter threshold can be

configured by setting the AnrFunction.s1HoPrepConsFailThres

attribute. The default value is 50.

When the counter threshold is reached, the ECGI measurements threshold is checked. This

threshold denotes the time elapsed since the last extra ECGI measurement. The value of

this threshold is 30 minutes. If the threshold is exceeded, an ECGI measurement is

requested. The ECGI value from the report is compared to the ECGI stored in the neighbor

cell list. If these values are different, the feature removes the following obsolete

neighbor MOs:

- ExternalENodeBFunction
- ExternalEUtranCellFDD
- ExternalEUtranCellTDD
- EUtranCellRelation
- TermPointToENB

Obsolete E-UTRAN neighbor MOs are removed automatically based on ECGI measurements. These

measurements are also used to create new E-UTRAN neighbor cell MOs in case they do not

exist.

The function is automatically deactivated once the threshold for the elapsed time between

two consecutive MO removals is reached. This is to ensure that the function is

deactivated once the node swap is finished. The value of this threshold is 12 hours.

The timer starts if the following conditions apply:

- The function is activated with the AnrFunction.detectObsoleteExtCellsEnabled attribute.
- The consecutive outgoing S1 preparation handover failures statistics storage is initiated after the activation of the function.

If there are no obsolete MO removals and the threshold is reached, the function is

turned off automatically.

### 3.2.11 ANR Whitelist PLMN IDs

PLMN IDs can be put on the allowlist through the configuration of

the

ANR Whitelist PLMN IDs function.

This

leads to fewer cells that are barred for mobility actions.

This function enables the operator to configure PLMN IDs to be put on the allowlist. With

the function activated, mobility towards cells with non-allowlisted PLMN IDs is

prevented. X2 setup is also not initiated towards nodes without any allowlisted cell

relations.

The function supports E-UTRAN, UTRAN, and GERAN cell relations.

The following attributes define which functions are activated:

- AnrFunction.plmnWhiteListEnabled is used for E-UTRAN.
- AnrFunction.plmnWhiteListUtranEnabled is used for UTRAN.
- AnrFunction.plmnWhiteListGeranEnabled is used for GERAN.

PLMN allowlists are configured by PlmnInfo MOs, where the

PlmnInfo.actualPlmn attribute contains the source side PLMN ID

and the PlmnInfo.plmnWhiteList can contain allowlisted target PLMN

IDs. The PlmnInfo.actualPlmn attribute must be unique, as it is not

allowed to configure two or more allowlists with the same source side PLMN ID.

Configuration of PlmnInfo.plmnWhiteList allows wildcards for both MCC

(Mobile Country Code) and MNC. Wildcard configuration is done by setting MCC, MNC, or

both to -1, stating that all MCCs, MNCs, or both are considered as allowlisted.

When the ANR Whitelist PLMN IDs functionality is enabled, all relations to external cells

are evaluated. The evaluation is based on whether the PLMN ID of the target cell in the

relation is allowlisted or not. External cell relations include the following:

- Relations added by the Automated Neighbor Relations feature
- Relations added by the operator
- Relations added by X2

When evaluating relations, the following rules apply:

- An allowlist is active for the source cell if it has an PlmnInfo.actualPlmn that matches a supported PLMN defined in the following attributes: ENodeBFunction.eNodeBPlmnId Any PLMN from the EUtranCellFDD.additionalPlmnList and EUtranCellTDD.additionalPlmnList attributes in the source cell EUtranCellFDD.cellDefinedPrimaryPlmnId and EUtranCellTDD.cellDefinedPrimaryPlmnId, if these attributes are defined and the Shared LTE RAN feature is activated
- A relation to the target E-UTRAN cell is allowlisted if the union of all active allowlists for the source cell contains any PLMN from the activePlmnList of the target cell.
- A relation to the target UTRAN or GERAN cell is allowlisted if the union of all active allowlists for the source cell contains plmnIdentity of the target cell.
- A supported PLMN is interpreted as if all target PLMNs are allowed if it does not have a matching PlmnInfo.actualPlmn attribute.
- A supported PLMN is interpreted as if all target PLMNs are allowed if it has a matching PlmnInfo.actualPlmn attribute and its PlmnInfo.plmnWhiteList attribute is empty.

The non-allowlisted relations are barred for mobility. The mobility status parameters

indicate that the handover is not allowed on the relation. The reason of barring can be

one of the following:

- Attribute mobilityStatus.available is set to FALSE and PLMN\_NOT\_SUPPORTED is added to the attribute in the corresponding element of mobilityStatus.reason list represented by either of the following MOs: EUtranCellRelation UtranCellRelation GeranCellRelation
- The mobilityStatusReason attribute in the candNeighborRel struct which is referenced from the EUtranFreqRelation MO is set to PLMN\_NOT\_SUPPORTED for candidate relations.

The total number of prevented handovers for the barred relations can be observed through

the following counters:

- EUtranCellFDD.pmHoPreventedNotInPlmnWL
- EUtranCellFDD.pmHoPreventedNotInPlmnWLUtran
- EUtranCellFDD.pmHoPreventedNotInPlmnWLGeran
- EUtranCellTDD.pmHoPreventedNotInPlmnWL
- EUtranCellTDD.pmHoPreventedNotInPlmnWLUtran
- EUtranCellTDD.pmHoPreventedNotInPlmnWLGeran

The Automated Neighbor Relations feature must be active for this function to perform any

changes in the mobility status for the relations. The function reacts to configuration

changes and updates the mobility status in the following cases:

- During function activation, all existing relations are checked and non-allowlisted relations are barred.
- When new relations are added by the Automated Neighbor Relations feature, operator, or X2, they are evaluated according to the allowlist configuration and non-allowlisted relations are barred.
- Allowlist configuration is updated.
- Supported PLMN (eNodeBPlmnId attribute in the corresponding element or any PLMN from additionalPlmnList in the source cell) is changed on source eNodeB.
- The activePlmnList is changed for the neighbor E-UTRAN cell.
- The plmnIdentity is changed for the neighbor UTRAN or GERAN cell.
- During functionality deactivation, the functionality-related barring for mobility reason (PLMN\_NOT\_SUPPORTED) is cleared.

If the Automated Neighbor Relations feature is deactivated but ANR Whitelist PLMN IDs

function is active, the mobility status settings on cell relations are not changed. This

means that cell relations that have been barred for mobility remain barred. When the

Automated Neighbor Relations feature is deactivated, the function does not react to any

configuration changes and new relations are not evaluated.

When all cell relations for the target node are barred for mobility due to

PLMN\_NOT\_SUPPORTED reason, the functionality prevents sending X2 setup requests to the

target node.

If there is no X2 connection towards the target node, the ANR Whitelist PLMN IDs function

can perform periodic ECGI measurements to obtain activePlmnList and

TAC configuration changes of the target E-UTRAN cell.

The ANR Whitelist PLMN IDs function can perform periodic CGI measurements for GERAN and

UTRAN cells to obtain plmnIdentity configuration changes of the

target cell.

The periodic ECGI and CGI measurements are switched on and off separately for each RAT

with the following parameters:

- AnrFunction.perEcgiMeasPlmnWhiteList for E-UTRAN
- AnrFunction.perCgiMeasPlmnWhiteListGeran for GERAN
- AnrFunction.perCgiMeasPlmnWhiteListUtran for UTRAN

The function is activated by default for each RAT.

The CGI and ECGI measurements are performed if the following conditions are

fulfilled:

Table 11   Conditions for CGI and ECGI Measurements

| Cell    | Conditions to Trigger Periodic Measurements                                                                                                                                                                                                                                                                                       |
|---------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| E-UTRAN | Attributes AnrFunction.plmnWhiteListEnabled                                     and AnrFunction.perEcgiMeasPlmnWhiteList are                                     set to TRUE.                                                                                                                                                     |
| E-UTRAN | At least 24 hours passed since the last activation of the ANR                                     Whitelist PLMN IDs functionality for E-UTRAN.                                                                                                                                                                                   |
| E-UTRAN | At least 24 hours passed since previous ECGI measurement for that                                     target cell.                                                                                                                                                                                                                |
| E-UTRAN | The relation to the target cell exists but is barred for mobility                                     due to PLMN_NOT_SUPPORTED reason or the relation is allowed for                                     mobility and Handover Preparation Failure with cause Unknown                                     Target ID is received. |
| E-UTRAN | No X2 connection exists towards the target node.                                                                                                                                                                                                                                                                                  |
| UTRAN   | Attributes                                         AnrFunction.plmnWhiteListUtranEnabled and                                         AnrFunction.perCgiMeasPlmnWhiteListUtran                                     are set to TRUE.                                                                                                |
| UTRAN   | At least 24 hours passed since the last activation of the ANR                                     Whitelist PLMN IDs - IRAT function for UTRAN.                                                                                                                                                                                   |
| UTRAN   | At least 24 hours passed since the previous CGI measurement for                                     that target cell.                                                                                                                                                                                                             |
| UTRAN   | The relation to the target cell exists but is barred for mobility                                     due to PLMN_NOT_SUPPORTED reason or the relation is allowed for                                     mobility and Handover Preparation Failure with cause Unknown                                     Target ID is received. |
| GERAN   | Attributes                                         AnrFunction.plmnWhiteListGeranEnabled and                                         AnrFunction.perCgiMeasPlmnWhiteListGeran                                     are set to TRUE.                                                                                                |
| GERAN   | At least 24 hours passed since the last activation of the ANR                                     Whitelist PLMN IDs - IRAT functionality for GERAN.                                                                                                                                                                              |
| GERAN   | At least 24 hours passed since previous CGI measurement for that                                     target cell.                                                                                                                                                                                                                 |
| GERAN   | The relation to the target cell exists but is barred for mobility                                     due to PLMN_NOT_SUPPORTED reason or the relation is allowed for                                     mobility and Handover Preparation Failure with cause Unknown                                     Target ID is received. |

When an ANR-initiated PCI measurement report contains a PCI of a target cell that

fulfills conditions for triggering CGI measurement, a CGI measurement is configured for

the UE. When the CGI measurement arrives, the received information is used to update the

following attributes of the target cell if needed:

- activePlmnList, TAC for E-UTRAN cell, and ExternalEUtranCellFDD.plmnListVerifiedByX2OrCgi
- plmnIdentity, cellIdentity, LAC, and RAC for GERAN cell
- plmnIdentity, cellIdentity, LAC, and RAC for UTRAN cell

For E-UTRAN, a new neighbor cell MO with relation is created in the following cases:

- When the CGI measurement arrives.
- The CGI of the target cell has changed, for example, primary PLMN of the target cell is different.

Since the cell has the same PCI as the old one, it results in a PCI conflict until the

old EutranCellRelation is removed.

When the CGI measurement arrives for GERAN or UTRAN cell with known PCI but with new PLMN

ID, the plmnIdentity attribute is changed for the external cell. In

this case, the RDN of the MO of the external cell remains unchanged. Therefore, if the

RDN contains old PLMN ID, it results in the inconsistency between the

plmnIdentity attribute and the RDN.

If

the

value of the

EUtranCellRelation.barringLowHoAllowed

attribute is set to FALSE, handover and X2 connection setup are still

blocked toward

non-allowlisted

PLMN IDs.

Related concepts

Barring and Un-barring Cell Relations for Mobility

### 3.2.12 ANR Acquires Additional PLMN IDs

If the AnrFunctionEUtran.acquirePlmnIdListEnabled attribute is set to

true, the Automated Neighbor Relations feature is able to acquire

additional PLMN IDs of external cells, even if autonomous gap is configured for ECGI

measurement. Autonomous gap has benefits compared to DRX, but it cannot be used to

acquire additional PLMN IDs. DRX is used only if it is necessary, autonomous gap is used

at most other

cases.

The following steps are performed by the Automated Neighbor Relations feature to acquire

the additional PLMN IDs:

1. The eNodeB creates a new external cell MO. ECGI measurements are always triggered with DRX when external cell MO is created, regardless of autonomous gap configuration for non-VoLTE UEs. For VoLTE UEs, autonomous gap is still allowed to avoid long voice interruption. Additional PLMN IDs are only included in ECGI measurements with DRX.
2. The eNodeB validates PLMN IDs on the existing external cell MO. Extra ECGI measurement is triggered with DRX regardless of autonomous gap activation. PLMN IDs are validated on the existing external cell MO. If the PLMN ID list is not verified through the X2 interface or the ECGI measurement with DRX, the external cell MO can be adjusted at the validation. The PLMN ID list is not verified if the ExternalEUtranCellFDD.plmnListVerifiedByX2OrCgi or the ExternalEUtranCellTDD.plmnListVerifiedByX2OrCgi is false.
    1. For ANR-initiated event-based measurements and periodical measurements, extra ECGI measurement with DRX is triggered to acquire additional PLMN IDs in the following cases:
        - The ExternalEUtranCellFDD.plmnListVerifiedByX2OrCgi or the ExternalEUtranCellTDD.plmnListVerifiedByX2OrCgi is false and there is no X2 connection for non-VoLTE UEs.
        - 24 hours pass from the previous ECGI measurement with DRX and there is no X2 connection for non-VoLTE UEs. If ANR-initiated periodical measurements are used, the UE must be inactive. Note: No extra ECGI is triggered for VoLTE UEs at ANR-initiated event-based measurements.
    2. For mobility measurements, extra ECGI measurement with DRX is triggered for VoLTE and non-VoLTE UEs to acquire additional PLMN IDs, if the following conditions are met: The ExternalEUtranCellFDD.plmnListVerifiedByX2OrCgi or ExternalEUtranCellTDD.plmnListVerifiedByX2OrCgi is false, or 24 hours pass from the previous ECGI measurement with DRX. The EUtranCellRelation.isHoAllowed attribute is set to true. There is no X2 connection to the eNodeB of the target cell. The PLMN ID or the equivalent PLMN of the UE defined in the HRL does not match any of the PLMN IDs on the list of the external cells. Note: If none of the PLMN IDs configured in the external E-UTRAN cell match the PLMN ID of a UE at mobility measurement, the handover procedure is not triggered in a shared LTE RAN configuration.

The ANR specific DRX configuration with long DRX cycle is used for extra ECGI

measurements.

Only enable this function on a shared RAN configuration. Without the shared RAN

configuration the function causes unnecessary ECGI measurements.

### 3.2.13 Barring and Un-barring Cell Relations for Mobility

#### 3.2.13.1 Handling of Cell Relations

The EUtranFreqRelation.mobilityStatus.available and

EUtranFreqRelation.mobilityStatus.reason attributes indicate if

relation is barred for mobility and the reason of barring for the following cell

relations:

- EUtranCellRelation
- UtranCellRelation
- GeranCellRelation

The EUtranFreqRelation.mobilityStatus.reason is a list that can

contain multiple reasons of relation barring related to different functionalities. When

a specific functionality sets the functionality-related reason for barring, it is

inserted into the list. When the related functionality clears the reason, it is removed

from the list.

The mechanism for barring and unbarring relations is represented by the

EUtranCellRelation MO:

- If the EUtranFreqRelation.mobilityStatus.reason list is empty, the EUtranFreqRelation.mobilityStatus.available is set to TRUE and the relation is allowed for mobility.
- If the EUtranFreqRelation.mobilityStatus.reason list is not empty, the EUtranFreqRelation.mobilityStatus.available is set to FALSE and the relation is barred for mobility.

#### 3.2.13.2 Handling of Candidate Cell Relations

For candidate relations stored in EUtranFreqRelation.candNeighborRel

list the struct member mobilityStatusReason of struct CandNeighborRelInfo indicates if a relation is

barred for mobility and the reason of barring. The attribute can indicate only one

reason of relation barring.

Mechanism for barring and un-barring candidate relations:

- If mobilityStatusReason is set to NONE, the candidate relation is allowed for mobility.
- If mobilityStatusReason is set to reason related to specific functionality, the candidate relation is barred for mobility.

#### 3.2.13.3 Handling of Counters Related to Cell Relation Barring Reasons

If an outgoing handover on a given cell relation is prevented due to the setting of

mobility status attributes, the counter related to reason of relation barring is pegged.

If the relation is barred for multiple reasons, only the counter related to the highest

priority reason is pegged.

The highest priority can be found on the top of Table 12.

Table 12   Priority Table for E-UTRAN

| Cell Relation Barring Reason   | Feature or Functionality           |
|--------------------------------|------------------------------------|
| PLMN_NOT_SUPPORTED             | ANR Whitelist PLMN ids             |
| PROBLEMATIC_CELL               | ANR Detection of Problematic Cells |

The following PM counters are related to mobility status reasons for E-UTRAN:

- pmHoPreventedNotInPlmnWL for reason PLMN\_NOT\_SUPPORTED.
- pmHoPreventedProblematicCell for reason PROBLEMATIC\_CELL.

The following PM counters are related to mobility status reasons for UTRAN and GERAN:

- pmHoPreventedNotInPlmnWLUtran for reason PLMN\_NOT\_SUPPORTED.
- pmHoPreventedNotInPlmnWLGeran for reason PLMN\_NOT\_SUPPORTED.

### 3.2.14 Mobility Control at Poor Coverage and ANR for LTE

When the feature Mobility Control at Poor Coverage is activated in the cell, the behavior of

ANR for LTE is different.

The Mobility Control at Poor Coverage feature defines a search zone along the edge of the

cell and uses A2 measurements to determine when the UE is in the search zone and when it

is in good coverage. When the UE is in the search zone an additional way to find unknown cells

is provided:

| LTE intra-frequency   |    | If the UE sends an A3 measurement report to the eNodeB while the UE is in the search             zone, the eNodeB inspects the set of reported cells to see if the best cell is unknown.             If so, the Mobility Control at Poor Coverage feature ignores the measurement and allows             ANR to configure a CGI measurement in the UE for the unknown cell. This only happens for             the first measurement report. On subsequent reports, a mobility action can be triggered             even when the best reported cell is unknown.                                                                                                                                   |
|-----------------------|----|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|                       |    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| LTE inter-frequency   |    | If an A5 measurement or A3 measurement is configured for an LTE frequency in the search             zone by the Mobility Control at Poor Coverage feature, and the UE subsequently sends a             measurement report to the eNodeB, the eNodeB inspects the set of reported cells to see             if the best cell is unknown. If so, the Mobility Control at Poor Coverage feature             ignores the measurement and allows ANR to configure a CGI measurement in the UE for the             unknown cell. This only happens for the first measurement report. On subsequent reports,             a mobility action can be triggered even when the best reported cell is unknown. |

See Mobility Control at Poor Coverage for more information.

### 3.2.15 Uplink-Triggered Inter-Frequency Mobility and ANR for LTE

When the Uplink-Triggered Inter-Frequency Mobility feature is

activated in the cell, the behavior of ANR for LTE is different. This feature defines an

uplink search zone along the edge of the cell and uses A2 measurements to determine when

the UE is in the uplink search zone and when it is in uplink good coverage. When the UE

is in the uplink search zone an additional way to find unknown cells is provided:

LTE interfrequency

If an A5 measurement is configured for an LTE frequency in the uplink search

zone by the Uplink-Triggered Inter-Frequency Mobility feature, and the UE

subsequently sends a measurement report to the eNodeB, the eNodeB inspects the set

of reported cells to see if the best cell is unknown. If so, the Uplink-Triggered

Inter-Frequency Mobility feature ignores the measurement and allows ANR to configure

a CGI measurement in the UE for the unknown cell. This only happens for the first

measurement report. On subsequent reports, a mobility action can be triggered even

when the best reported cell is unknown.

### 3.2.16 Selection of Preferred Neighbor Cells in PCI Conflicts

For UEs incapable of making CGI reports, preferred handover targets in PCI confusion

can be selected manually or automatically.

PCI confusions are a type of PCI conflict. A PCI confusion occurs if a source cell has

multiple neighbor cells with the same PCI and frequency.

This function allows the selection of a preferred handover target for UEs incapable of

making CGI measurements in cell relations where PCI confusion is present. To enable this

function, the AnrFunction.pciConflictCellSelection attribute must be

set to a value other than OFF. The configuration of this attribute also

determines whether preferred handover target cells are selected automatically or

manually.

Manual Selection of Preferred Neighbor Cells

Preferred neighbor cells in PCI confusion can be selected manually through the

configuration of the

EUtranCellRelation.pciConflictPreferredCellMan attribute if

the value of the AnrFunction.pciConflictCellSelection attribute

is set to one of the following values:

- MANUAL\_SELECT
- MANUAL\_SELECT\_AND\_AUTO\_DETECT

If the value of the AnrFunction.pciConflictCellSelection attribute

is set to MANUAL\_SELECT\_AND\_AUTO\_DETECT, the eNodeB automatically

evaluates which cell is the optimal handover target. The preferred cell must still

be selected through manual configuration.

Automatic Selection of Preferred Neighbor Cells

Preferred neighbor cells in PCI confusion can be selected automatically based on the

following properties:

- The number of CGI reports in a cell relation
- The percentage of CGI reports indicating that a cell is preferred

The AnrFunction.cgiReportCountEval attribute determines the number

of CGI reports used for the evaluation of a preferred neighbor cell in PCI

confusion. If the number of stored CGI reports matches the value of the

AnrFunction.cgiReportCountEval attribute and a CGI report is

received, the oldest CGI report is discarded from the evaluation. The latest CGI

report replaces the discarded one.

The AnrFunction.pciConflictSelectThreshPerc attribute specifies a

percentage value of all evaluated CGI reports. If the reports of the most-reported

cell exceed the reports of the second-most-reported cell by the percentage of CGI

reports specified by this attribute, the most-reported cell can be selected as the

preferred handover target.

No selection is made if either of the following conditions are not met:

- The number of CGI reports specified in the AnrFunction.cgiReportCountEval attribute
- The difference in the percentage of CGI reports specified in the AnrFunction.pciConflictSelectThreshPerc attribute

If either the number of CGI reports specified in the

AnrFunction.cgiReportCountEval attribute or the difference in

the percentage of CGI reports specified in the

AnrFunction.pciConflictSelectThreshPerc attribute is not met,

no selection is made. If no selection is made, the selection of a handover target

for UEs incapable of making CGI measurements proceeds without the selection of

preferred neighbor cells in PCI conflicts.

The automatic selection of a preferred handover target in PCI confusion is handled

according to the following process:

1. The eNodeB checks if the number of CGI reports for the same PCI is equal to or higher than the value of the AnrFunction.cgiReportCountEval attribute.
2. If the number of CGI reports is sufficient, the eNodeB checks if the reports of the most-reported neighbor cell exceed the reports of the second-most-reported cell by the percentage of reports specified by the AnrFunction.pciConflictSelectThreshPerc attribute.
3. If the most-reported neighbor cell meets the conditions for being selected, it is selected as the preferred handover target.
4. The eNodeB continues to monitor the received CGI reports.
5. If another neighbor cell is the most-reported cell, the eNodeB checks if the cell can be selected as the preferred handover target. If the reports of the most-reported cell exceed the reports of the second-most-reported cell by the percentage of all reports specified by the AnrFunction.pciConflictSelectThreshPerc attribute, the most-reported cell is selected as the preferred handover target.

The selection of the preferred handover target in PCI confusion remains configured

even after eNodeB restarts and software upgrades. If an eNodeB restart or software

upgrade is performed, the CGI reports used in the automatic selection process are

discarded.

## 3.3 Process Steps: ANR for E-UTRAN, UTRAN and GERAN

This section describes the main processes for the feature flow related to ANR for E-UTRAN,

UTRAN and for

GERAN

using periodical measurements.

### 3.3.1 Periodical ANR-Initiated Measurements

ANR orders UE measurements on E-UTRAN, GERAN, and UTRAN to detect possible neighbor cells

before poor coverage triggers mobility functions.

Unknown cells are found with a periodical measurement where purpose is

set to reportStrongestCells or reportStrongestCellsForSON

(for UTRAN), maxReportCells is set to 1. The

reportAmount attribute is set to r1, as described in 3GPP TS 36.331, on the following conditions:

- The UE is a release 10 UE or later.
- There is no SCell configured for the UE.

The reportAmount attribute is set to r2 if these

conditions are not fulfilled.

This results in the UE initiating one measurement report when it has determined the strongest

cell on the associated frequency (for E-UTRAN and UTRAN) or GeranFreqGroup that contains a

number of frequencies (for GERAN). Then no further measurements are performed. The maximal

number of periodical ANR-initiated measurements that the UE must perform during the time the

UE is connected to the cell is limited by the parameter

UeMeasControl.maxNoMeasReportsInact.

ANR selects UEs to perform measurements on GERAN, UTRAN, or E-UTRAN based on the following

conditions:

- An E-UTRAN inter-frequency, a GERAN frequency group or a UTRAN frequency that must be measured by ANR exists. ANR calculates the target point in time for the next measurement for each frequency. Measurement is required when this point in time is passed.
- The UE is inactive. The UE is RRC\_CONNECTED but does not send or receive any data.
- The UE is capable of reading CGI and supports the Radio Access Technology (RAT) and frequency to measure. CGI-capability is not required for reading the short identity (SC) of UTRAN or short identity (BSIC) of GERAN.
- For EUTRAN, the UE supports periodical measurements on unknown inter-frequency E-UTRAN cells. It reports configuration inter-frequency reportStrongestCells.
- For UTRAN, the UE supports periodical measurements on unknown UTRAN cells. It reports configuration IRAT reportStrongestCellsForSON.
- For GERAN, the UE supports periodical measurements on unknown GERAN cells. It reports configuration IRAT reportStrongestCells.

ANR performs measurement only on the referenced frequency if the parameter

anrMeasOn

is set to true.

The target number of measurement reports is controlled for each RAT as follows:

1. Starts from a configurable maximum value at cell restart as follows:
    1. For UTRAN, the AnrFunctionUtran.anrUtranMeasReportMax parameter.
    2. For GERAN, the AnrFunctionGeran.anrGeranMeasReportMax parameter.
    3. For E-UTRAN, the AnrFunctionEUtran.anrEutranInterFMeasReportMax parameter.
2. Decreases with a configurable value when ANR-specific reports contain only known cells as follows:
    - For UTRAN, the AnrFunctionUtran.anrUtranMeasReportDecr parameter.
    - For GERAN, the AnrFunctionGeran.anrGeranMeasReportDecr parameter.
    - For E-UTRAN, the AnrFunctionEUtran.anrEutranInterFMeasReportDecr parameter.
3. Increases with a configurable value when a new cell is reported in ANR-specific reports as follows:
    - For UTRAN, the AnrFunctionUtran.anrUtranMeasReportIncr parameter.
    - For GERAN, the AnrFunctionGeran.anrGeranMeasReportIncr parameter.
    - For E-UTRAN, the AnrFunctionEUtran.anrEutranInterFMeasReportIncr parameter.
4. Stops decreasing when a configurable minimum target value is reached as follows:
    - For UTRAN, the AnrFunctionUtran.anrUtranMeasReportMin parameter.
    - For GERAN, the AnrFunctionGeran.anrGeranMeasReportMin parameter.
    - For E-UTRAN, the AnrFunctionEUtran.anrEutranInterFMeasReportMin parameter.

The number of received measurement reports can be below the minimum target value. The number

of received reports depends on the number of CGI-capable UEs attached to the cell and capable

of measuring the RAT and frequency.

For the frequency to be measured, the frequency relation must be defined in the RBS. ANR does

not create frequency relations.

The following MOs must be manually created by the operator:

- UtranFreqRelation for UTRAN
- GeranFreqGroupRelation for GERAN
- EUtranFreqRelation for E-UTRAN

The MOs enable ANR to keep track of the following for a particular frequency relation:

- Target number of measurements per hour.
- Last ANR E-UTRAN, UTRAN, or GERAN measurement.

This information is used to calculate the target point in time for the next measurement. As

soon as the UE becomes inactive after the next target point in time, it is requested to

perform measurements.

ANR prioritizes frequencies on which to order ANR-initiated UE periodic measurements.

Prioritization is based on how much a frequency has passed the target point in time for

measurement.

A UE is selected to measure only one E-UTRAN frequency, UTRAN frequency or GERAN frequency

group for ANR purposes. If the available UE does not support the highest prioritized

frequency, the next prioritized frequency is selected for the UE. ANR orders an available UE

to measure on the highest prioritized frequency that it supports.

When a CGI measurement is performed, it is mandatory for the UE to send the

cellGlobalId. For UTRAN, it is optional to send the Location Area Code

and Routing Area Code and for GERAN it is optional to send Routing Area Code. If the UE does

not send Location Area Code or Routing Area Code, or both, ANR creates the neighbor UTRAN cell

anyway. In this case, the Routing Area Code respective to the Location Area Code is set to an

invalid value (allowed in MOM). If the RBS does not succeed in getting the Location Area Code

or Routing Area Code, the RBS continues to try to get it. The RBS requests a CGI measurement

if an ANR UTRAN measurement report contains a PCI where the corresponding Location Area Code

or Routing Area Code of ExternalUtranCellFdd is set to an invalid value. If

the Location Area Code or Routing Area Code is received in the measurement report, ANR updates

the corresponding neighbor UTRAN cell with this information. This description applies for

GERAN as well if Routing Area Code is missing.

If the SubscriberGroupProfile.featuresToDisableMeas attribute is set to

disable ANR initiated measurements and the UE is included in the ASG, the eNodeB does not

request UE measurement.

### 3.3.2 GERAN Mobility Measurements

The UE performs mobility measurements based on Measurement Configuration as described in

Coverage-Triggered GERAN Session Continuity. RBSs can use the

reports resulting from Measurement Configurations for mobility or ANR. The maximum number of

cells returned in the PCI reports is limited and operator controlled by Managed Object Model

(MOM) parameters.

ANR uses mobility reports to add neighbor GeranCellRelation. These are

added based on B2 reports if the cell is known (ExternalGeranCell MO

exist). Otherwise ANR will trigger a CGI report from the UE.

A CGI report can be also requested from a UE in order to obtain RAC of a known GERAN

cell.

### 3.3.3 MOs Representing E-UTRAN Neighbor Relations

ANR creates the following MOs holding information about neighbor

relations:

- ExternalENodeBFunction
- TermPointToENB
- ExternalEUtranCellFDD
- ExternalEUtranCellTDD
- EUtranCellRelation

Related concepts

MOs Representing Neighbor Relations

### 3.3.4 MOs Representing UTRAN Neighbor Relations

ANR creates the following MOs holding information about neighbor

relations:

- FDD only: ExternalUtranCellFDD
- TDD only: ExternalUtranCellTDD
- UtranCellRelation

The ExternalUtranCellFDD is created with use of the CGI report received

from the UE. The CGI consist of PLMN ID and cell identity. Cell identity contains the RNC ID

and cell ID. Mapping from cell identity to RNC ID and cell ID is not standardized. In the

implementation, it is assumed that bit 1-16 is the cell ID and bit 17-28 is the RNC ID.

### 3.3.5 MOs Representing GERAN Neighbor Relations

ANR creates the following MOs holding information about neighbor

relations:

- ExternalGeranCell TOOLTIPFLAG
- GeranCellRelation TOOLTIPFLAG

### 3.3.6 Mobility Control at Poor Coverage and Periodical Measurements

When the feature Mobility Control at Poor Coverage is activated in the cell, the

behavior of ANR for E-UTRAN, UTRAN and for GERAN is different.

The Mobility Control at Poor Coverage feature defines a search zone

along the edge of the cell and uses A2 measurements to determine when the UE is in the

search zone and when it is in good coverage. When the UE is in good coverage (both uplink and

downlink, if Uplink-Triggered Inter-Frequency Mobility is activated), ANR creates periodical

measurements, but when the UE is in the search zone, (for either uplink or downlink, if

Uplink-Triggered Inter-Frequency Mobility is activated), inactivity in the UE no longer

triggers the eNodeB to configure a periodical measurement to find unknown cells for E-UTRAN,

UTRAN or for GERAN. Finding unknown cells in the search zone are handled in the following

way:

| UTRAN   |    | When an B2 measurement is configured for a UTRAN frequency in the search zone by             the Mobility Control at Poor Coverage feature, a periodical measurement with               purpose set to reportStrongestCellsForSON can be             configured by ANR for the same frequency. This measurement is configured in the same way             as the periodical measurement. To determine whether a periodical               reportStrongestCellsForSON measurement needs to be configured or             not, the eNodeB uses the target number of measurement reports for the UTRAN frequency.             This number is used in the following way:    If the target number of measurement reports goes below   anrUtranMeasReportMin + 0.4 × (anrUtranMeasReportMax −                   anrUtranMeasReportMin) the eNodeB will stop configuring periodical                   reportStrongestCellsForSON measurements for the frequency,                 given that the attribute UtranFreqRelation.anrMeasOn is                   true.     If the target number of measurement reports goes above anrUtranMeasReportMin + 0.6 × (anrUtranMeasReportMax −                   anrUtranMeasReportMin) the eNodeB starts configuring periodical                   reportStrongestCellsForSON measurements for the frequency.   |
|---------|----|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|         |    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| GERAN   |    | If an B2 measurement is configured for a GERAN frequency group in the search zone             by the Mobility Control at Poor Coverage feature, and the UE subsequently sends a             measurement report to the eNodeB, the eNodeB inspects the set of reported cells to see             if the best cell is unknown. If it is unknown, the Mobility Control at Poor Coverage             feature ignores the measurement and allows ANR to configure a CGI measurement in the UE             for the unknown cell.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
|         |    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| E-UTRAN |    | See Mobility Control at Poor Coverage and ANR for LTE for E-UTRAN information.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |

Related concepts

Periodical ANR-Initiated Measurements

### 3.3.7 Uplink-Triggered Inter-Frequency Mobility and Periodical Measurements

When the feature Uplink-Triggered Inter-Frequency Mobility is activated in the cell, the

behavior of ANR for E-UTRAN is different.

The Uplink-Triggered Inter-Frequency Mobility defines an uplink search zone along the

edge of the cell and uses A2 measurements to determine when the UE is in the uplink

search zone and when it is in good uplink coverage. When the UE is in good coverage

(both uplink and downlink), ANR creates periodical measurements, but when the UE is in

the search zone (for either uplink or downlink), inactivity in the UE no longer triggers

the eNodeB to configure a periodical measurement to find unknown cells for E-UTRAN.

Finding E-UTRAN unknown cells in the uplink search zone are handled as described in

Uplink-Triggered Inter-Frequency Mobility and ANR for LTE.

Related concepts

Periodical ANR-Initiated Measurements

Uplink-Triggered Inter-Frequency Mobility and ANR for LTE

### 3.3.8 Automatic Removal of Empty EUtranFrequency and EUtranFreqRelation MO Classes Configured on CBRS Bands

The CBRS-related

EUtranFrequency and EUtranFreqRelation MO classes can

be left empty as they are removed automatically after a set period of time.

The EUtranFrequency

and

the EUtranFreqRelation MO classes related to CBRS cells can be left

empty. The empty MO classes are removed periodically.

The length of time

for

the removal

of

the empty EUtranFrequency and EUtranFreqRelation

MO classes configured on a CBRS band is configured with the

AnrFunction.removeEutranFreqRelTime attribute. This attribute

replaces the ENodeBFunction.zzzTemporary57 attribute. The

AnrFunction.removeEutranFreqRelTime attribute, preserves the

settings

of the ENodeBFunction.zzzTemporary57 attribute after the

upgrade.

The timer configured by AnrFunction.removeEutranFreqRelTime is used by

the clean-up of empty CBRS MO classes to also remove unused frequencies

from

the LBDAR distribution configuration periodically. Unused

WakeUpFreqPriority MO instances can also be removed automatically

when the timer configured by AnrFunction.removeEutranFreqRelTime

expires.

## 3.4 Process Steps: ANR for NR

### 3.4.1 ANR-Specific Threshold for Creating LTE-to-NR Neighbor Cell Relations

By configuring the ANR-specific threshold, LTE-to-NR neighbor cell relations are only

created to NR cells in which the radio link quality is above the configured threshold. The

ANR-specific threshold is used in the evaluation of the B1 measurement report to prevent the

creation of an LTE-to-NR cell relation to NR cells with poor radio link quality.

The master node configures the UE with B1 measurements to find neighbor NR cells with the

aim of EN-DC setup or IRAT handover to NR. The Automated Neighbor Relations feature

compares the radio link quality of the reported NR cells to a configurable ANR-specific

threshold.

With the use of the ANR-specific threshold, EN-DC setup and IRAT handover to an NR cell

with poor radio link quality can be avoided by not creating a cell relation to it.

The ANR-specific threshold is configured as follows:

- The configuration of the threshold depends on the trigger quantity of the reported radio link quality in the following way: If the trigger quantity for the B1 measurement report is RSRP, the configuration of the AnrFunctionNR.cellAddRsrpThresholdNR attribute is considered. If the trigger quantity for the B1 measurement report is RSRQ, the configuration of the AnrFunctionNR.cellAddRsrqThresholdNR attribute is considered.
- To apply the ANR-specific threshold, the value of the attributes must be set to a higher value than the B1 threshold for EN-DC setup or IRAT handover to NR. If the value of the attributes is set to default, the ANR-specific threshold is not considered, so the Automated Neighbor Relations feature creates a cell relation to the unknown cell regardless of poor radio link quality.

The value of the ANR-specific threshold can be overridden based on frequency

differentiation. The values of the following attributes are used as the ANR-specific

threshold if they are configured with a value other than the default:

- GUtranFreqRelation.cellAddRsrpThrNROverride: if the trigger quantity for the B1 measurement report is RSRP.
- GUtranFreqRelation.cellAddRsrqThrNROverride: if the trigger quantity for the B1 measurement report is RSRQ.

If no cell relation exists to the highest signal strength NR cell in the B1 measurement

report, but the reported radio link quality for the cell is below the ANR-specific

threshold, no LTE-to-NR cell relation is created. In this case, the following metrics

are applied:

- The INTERNAL\_EVENT\_ANR\_NR\_EVAL PM event is generated with the EVENT\_PARAM\_ANR\_EVAL\_RESULT parameter set to the value NO\_ACTION\_TOO\_WEAK\_TARGET\_SIGNAL.
- Either the EUtranCellFDD.pmAnrNrNoActionTooWeak or the EUtranCellTDD.pmAnrNrNoActionTooWeak PM counter is stepped.
- The GUtranFreqRelation.pmAnrNrNoActionTooWeak PM counter is stepped.

If no cell relation exists to the highest signal strength NR cell in the B1 measurement

report, and the reported radio link quality of cell is equal to or greater than the

ANR-specific threshold, ANR is triggered for creating the LTE-to-NR cell relation.

Figure 6 and Figure 7 show how the ANR-specific threshold is

used in EN-DC and in Ongoing NR IRAT Handover.

Figure 6   ANR-Specific Threshold in EN-DC

Figure 7   ANR-Specific Threshold for Outgoing NR IRAT Handover

3.4.1ANR-Specific Threshold for Creating LTE-to-NR Neighbor Cell Relations

### 3.4.2 PCI-Based ANR

PCI-based ANR supports the automatic creation of LTE-to-NR neighbor cell relations

based on the PCI in the B1 measurement report.

The following configuration is required to enable the automatic creation of LTE-to-NR

neighbor cell relations:

- The ENodeBFunction.zzzTemporary74 attribute is set to 1.

When PCI-based ANR is enabled, the eNodeB creates cell relations on the frequency of the

B1 measurement toward all external cells with the same PCI if the following is true:

- The eNodeB receives a B1 measurement report.
- No cell relation matches with the PCI.

The operational process has the following steps:

1. When the eNodeB receives the B1 measurement report toward one NR frequency, the eNodeB checks if the PCI of the external cell referred by a cell relation is matched with the received PCI on the measured frequency. If a matching PCI is found on the external cell, the eNodeB proceeds with the EN-DC setup.
2. If the received PCI does not match any external cell referred by a cell relation on the measured frequency, the eNodeB checks the PCI toward all external cells on the same frequency. If there is any external cell with a matching PCI, the eNodeB creates cell relations toward all the external cells with a matching PCI.
3. If there is no matching PCI on any external cell, the eNodeB waits for the next B1 measurement report.

The LTE-to-NR cell relation is only created if the NR cell

found in the B1 measurement report has a radio link quality that is equal to or greater

than the ANR-specific threshold.

PCI-based ANR is supported for the following NR bands:

- Low-Band
- Mid-Band
- High-Band

Creating cell relations to a weak NR cell is possible in the following

cases:

- Overshooting NR cells exist around the LTE cell
- B1 threshold for EN-DC is configured as a lower value

Cell relation to a weak NR cell can result in KPI degradation, because

it might cause NR Random Access Failure. It is also possible that the EN-DC setup is not

attempted because the UE does not send B1 measurement report if the NR cell is too weak.

PCI-based ANR finds external cells that have the same PCI as the cell that the UE reports

in B1 measurement report. It creates cell relations towards these matched external

cells. PCI is not unique and different cells can have the same PCI. Because of this, it

is not guaranteed that the newly added cell relation is the cell that the UE reports in

B1 measurement report.

To avoid this, it is recommended to use NCGI-based ANR to identify a neighbor that the UE

reports. It is also recommended to configure ANR-Specific Threshold.

Related concepts

ANR-Specific Threshold for Creating LTE-to-NR Neighbor Cell Relations

### 3.4.3 NCGI-Based ANR

When the UE reports an unknown PCI in the B1 measurement for Low-Band and Mid-Band,

NCGI measurement is triggered to find an unknown NR cell and to create an NR neighbor cell

relation automatically.

NCGI-based ANR supports the automatic creation of LTE-to-NR neighbor cell relations. It

can be enabled through the following configurations:

- The AnrFunctionNR.anrStateNR attribute is set to ACTIVATED.
- The GUtranFreqRelation.anrMeasOn attribute is set to true.

NCGI-based ANR is supported for the following NR bands:

- Low-Band
- Mid-Band

Creating cell relations to a weak NR cell is possible in the following

cases:

- Overshooting NR cells exist around the LTE cell
- B1 threshold for EN-DC is configured as a lower value

Cell relation to a weak NR cell can result in KPI degradation, because

it might cause NR Random Access Failure. It is also possible that the EN-DC setup is not

attempted because the UE does not send B1 measurement report if the NR cell is too weak.

To avoid this, it is recommended to configure ANR-Specific Threshold.

Related concepts

ANR-Specific Threshold for Creating LTE-to-NR Neighbor Cell Relations

#### 3.4.3.1 Detection of Unknown NR Cell

When the UE reports B1 measurement for EN-DC or NR Standalone setup, NCGI measurement is

triggered to detect an unknown NR cell or an NR cell relation is created automatically.

The B1 measurement report can contain an NR cell that is in an ESS cell pair with an LTE

cell on another eNodeB.

The following cases allow the detection of an unknown NR cell:

- The GUtranCellRelation MO does not exist, but an ExternalGUtranCell MO exists for the reported PCI.
- The GUtranCellRelation MO does not exist, and no ExternalGUtranCell MO exists for the reported PCI.

If the

SubscriberGroupProfile.featuresToDisableMeas attribute is set to

disable ANR initiated measurements and the UE is included in the ASG, the eNodeB does

not request NCGI measurement.

If the UeMeasControl.nrB1MeasWindow timer is started, the ANR is

triggered by the measurement report with the highest received frequency priority.

#### 3.4.3.2 Handling NCGI Measurements

When the UE reports an unknown NR cell to the eNodeB, the eNodeB triggers an NCGI

measurement.

The following prerequisites must be met for the handling of NCGI measurements:

- The Automated Neighbor Relations feature must be activated from LTE to NR on node level by setting the AnrFunctionNR.anrStateNR to ACTIVATED.
- The UE and the NR frequency range must support NCGI reading.Note: NCGI measurement is allowed only for Low-Band and Mid-Band frequencies.
- DRX must be used during the NCGI measurement, because Autonomous Gap is not supported.
- The GUtranFreqRelation.anrMeasOn attribute must be set to true. The GUtranFreqRelation.anrMeasOn attribute can activate or deactivate NCGI measurement on frequency level. When the eNodeB receives a B1 measurement including an unknown PCI from the UE, the eNodeB triggers the NCGI measurement toward the UE if the GUtranFreqRelation.anrMeasOn attribute is set to true.
- The NR cell must transmit SIB1. The NR cell only transmits SIB1 if the NRCellDU.secondaryCellOnly attribute is set to false in the gNodeB.Note: If the NRCellDU.secondaryCellOnly attribute is set to true, the NR cell is in an ESS cell pair with an LTE cell. In this case, SIB1 is not transmitted. If the NRCellDU.ssbFrequency attribute is set to 0, and then any change is made to the NRCellDU.secondaryCellOnly attribute, the gNodeB automatically selects a new SSB frequency. This triggers the SSB frequency change in the gNodeB and the frequency information is transmitted to the eNodeB through X2. The operator must create the GUtranFreqRelation MO for the frequency in the eNodeB if the frequency is changed and there is no GUtranFreqRelation MO for the frequency. For more information on SSB frequency change, see the CORESET#0 Placement section of Manage Radio Network NR.
- The radio link quality of the reported NR cell must be equal to or greater than the ANR-specific threshold.

NCGI measurement is not allowed for UEs with an ongoing voice call.

The NCGI measurement is used according to the following sequence:

1. The UE reports and unknown NR cell to the eNodeB.
2. The eNodeB instructs the UE to perform an NCGI measurement on the reported NR cell.
3. When the NCGI measurement begins, a T321 timer starts in the UE, and a DRX timer starts in the eNodeB. The T321 timer determines how long the UE keeps the NCGI measurement before removing it.
4. The UE initiates reporting to the eNodeB and stops the measurement if one of the following conditions is met: The UE acquires the NCGI reading. The UE acquires the NCGI reading without SIB1 broadcast. The T321 timer expires.
5. The UE sends the NCGI measurement report to the eNodeB. If the SIB1 message is not broadcasted, the UE reports noSIB1 in the NCGI measurement report. This is considered as receiving a successful NCGI report, and no neighbor configuration is created because of the absence of NR cell information. This also generates a PM event for successful NCGI handling. For the cells reported with noSIB1, no additional NCGI measurement is triggered on the same UE again. An NCGI measurement report on the NR cell in an ESS cell pair can be returned by the UE with noSIB1 in the NR cell. In this case, the eNodeB serving the UE creates the LTE-to-NR cell relation to the NR cell in the ESS cell pair based on the following messages that the serving eNodeB received from the eNodeB that hosts the ESS cell pair: X2AP X2 SETUP REQUEST X2AP X2 SETUP RESPONSE X2AP ENB CONFIGURATION UPDATE The NCGI measurement report has multiple PLMNs and multiple Cell Identities, but the first of the PLMNs is used for the NCGI. For more information, see 3GPP TS 36.331.Note: The NCGI measurement report can contain an unknown NR cell with MORAN configuration hosted by a shared gNodeB. In this case, the global gNodeB ID built from the NCGI measurement may not match with the actual global gNodeB ID and inconsistent neighbor configuration can be created.
6. The NR cell is added to the neighbor cell list maintained on the eNodeB.
7. If the ENodeBFunction.endcX2IpAddrViaS1Active attribute is set to true, the EN-DC X2 Setup procedure is triggered automatically, requesting the IP address of the new gNodeB. Note: For cell with MORAN configuration, EN-DC setup can be triggered with inconsistent neighbor configuration.

Related concepts

Support for ESS Cells without SIB1

Creating Neighbor Objects

X2 TNL Address Discovery Procedure

##### 3.4.3.2.1 Support for ESS Cells without SIB1

An NCGI measurement report on the NR cell in an ESS cell pair might be returned by the UE

without SIB1. In this case, the eNodeB serving the UE creates the LTE-to-NR cell

relation to the NR cell in the ESS cell pair based on the following messages that the

serving eNodeB received from the eNodeB that hosts the ESS cell pair:

- X2AP X2 SETUP REQUEST
- X2AP X2 SETUP RESPONSE
- X2AP ENB CONFIGURATION UPDATE

The following prerequisites apply for the process:

- The AnrFunctionNR.anrStateNR attribute is set to ACTIVATED.
- The GUtranFreqRelation.anrMeasOn attribute is set to attribute is set to true.

The LTE-to-NR cell relation to the NR cell in an ESS cell pair is created according to

the following sequence:

1. If the AnrFunctionNR.essNRNeighborCellInfoUsed attribute is set to true, the eNodeB that has an LTE cell in an ESS cell pair with an NR cell shares the NR neighbor information to neighbor eNodeBs during the X2 Setup procedure or eNodeB Configuration Update procedure.
2. The neighbor eNodeBs store the NR neighbor information received during the X2 Setup or eNodeB Configuration Update procedures.
3. If the AnrFunction.essNRNeighborCellInfoUsed attribute is set to true, the eNodeB uses the NR cell information for building LTE-to-NR cell relations to NR cells used in ESS cell pairs. When the eNodeB receives an NCGI measurement report without SIB1, it proceeds with one of the following steps: The eNodeB tries to find the NR cell in its own ExternalGUtranCell MOs. Figure 8 LTE-to-NR Cell Relation to the NR Cell of the ESS Cell Pair Built with the NR Neighbor Information of the eNodeB for EN-DC Setup If the eNodeB cannot find the NR cell in its own ExternalGUtranCell MOs, it tries to find the NR cell in the stored NR neighbor information. Figure 9 LTE-to-NR Cell Relation to the NR Cell of the ESS Cell Pair Built with Stored NR Neighbor Information for EN-DC Setup Note: Even if the AnrFunctionNR.essNRNeighborCellInfoUsed attribute is set to false, the receiving eNodeB stores the NR neighbor information for later use. Both the sending and the receiving eNodeB must be set to the same value. For the sending eNodeB, the parameter configuration takes effect at the next X2 Setup or eNodeB Configuration Update procedure. For the receiving eNodeB, the parameter configuration takes effect immediately. This function is only used if the NCGI report does not contain SIB1 information.

3.4.3.2.1Support for ESS Cells without SIB1

#### 3.4.3.3 Cells with Multiple NR TACs

The ExternalBroadcastPLMNInfo MO class and the

attributes

in

it are created and deleted automatically by the Automated Neighbor Relations

feature

or manually by the operator. The following attributes are used for

configuring and displaying PLMN information for automated neighbor relations for cells

with multiple NR TACs:

- ExternalBroadcastPLMNInfo.createdBy
- ExternalBroadcastPLMNInfo.externalBroadcastPLMNInfoId
- ExternalBroadcastPLMNInfo.pLMNIdList
- ExternalBroadcastPLMNInfo.nRTAC
- GUtranCellRelation.mobilityStatusNR

The

GUtranCellRelation.mobilityStatusNR

attribute can be used to configure whether handover is allowed or not for each cell

relation. The reason for not allowing handover is indicated by the

reasonNR struct of the

GUtranCellRelation.mobilityStatusNR attribute.

When multiple operators share the same neighbor NR cell, the

ExternalBroadcastPLMNInfo MO and the attributes in this MO

class             are automatically created by the Automated Neighbor Relations feature based on the NCGI

report. This MO class contains the NR TAC and the associated PLMN information on the

operators that share the same NR cell.

If there are multiple PLMN lists in the NCGI report, one

ExternalBroadcastPLMNInfo MO instance is created for each PLMN

list. The first instance of theExternalBroadcastPLMNInfo MO

class             contains the same information as the ExternalGUtranCell MO class and

belongs to the first operator that connects to the cell.

If the first PLMN does not support mobility and at least one additional PLMN does, a new

LTE-to-NR standalone relation is created. The following conditions must be true to

create the relation:

- The value of the associated ExternalBroadcastPLMNInfo.nRTAC attribute of the first PLMN in the NCGI report is -1 or 0.
- The value of the associated ExternalBroadcastPLMNInfo.nRTAC attribute of at least one additional PLMN of the shared NR cell is higher than 0.

Each PLMN across the ExternalBroadcastPLMNInfo.pLMNIdList attribute

must have a unique ExternalBroadcastPLMNInfo.nRTAC attribute value,

except when the value of the ExternalBroadcastPLMNInfo.nRTAC

attribute is empty. A maximum of 12 ExternalBroadcastPLMNInfo MO

instances can exist at the same time in each ExternalGUtranCell MO

instance. A maximum of 12 unique PLMN IDs are supported across the

ExternalGUtranCell MO instance, including all

ExternalBroadcastPLMNInfo MO instances.

Existing LTE-to-NR standalone relations are automatically updated once, when automated

neighbor relations are

enabled

for cells with multiple NR TACs. The update is requested by the UE and is based on the

B1 NR standalone measurement.

If the configuration of the ExternalBroadcastPLMNInfo.pLMNIdList and

the ExternalBroadcastPLMNInfo.nRTAC attributes change on the gNodeB

side, the eNodeB MOM structure can only be updated manually. The configuration of the

attributes must be within the expected range for the Automated Neighbor Relations

feature to function properly.

For information about the automatic removal of the

ExternalBroadcastPLMNInfo MO instance, see Removal of Unused NR Neighbor Objects.

### 3.4.4 MOs Representing NR Neighbor Relations

The feature creates the following MOs that contain information about neighbor

relations:

- ExternalGNodeBFunction
- TermPointToGNB
- ExternalGUtranCell
- ExternalBroadcastPLMNInfo
- GUtranCellRelation

The ExternalGNodeBFunction MO represents another gNodeB. When it is

missing, it is added for new external cells.

The TermPointToGNB MO represents the termination point of an X2 link.

For LTE-to-EN-DC neighbor relations, it is created at the same time as the

ExternalGNodeBFunction MO if an X2 link is allowed to the other

gNodeB. Automated Neighbor Relations triggers X2 setup by creating the

TermPointToGNB MO.

For

LTE-to-NR standalone neighbor relations, the

TermPointToGNB MO is not created.

The ExternalGUtranCell MOs represent cells in the gNodeB. They are

detected by UE measurements or received over X2 from a neighbor gNodeB. Updating the

ExternalGUtranCell MO over X2 is not connected to the Automated

Neighbor Relations feature and is included in the X2 Configuration feature.

The ExternalBroadcastPLMNInfo MO class and the

attributes in the MO class represent the NR TAC and the associated PLMN information of

the operators that share the same neighbor NR cell. The MO class is automatically

created based on the NCGI report.

The GUtranCellRelation represents the mobility relationship

between

an E-UTRAN cell and

a

neighboring NR cell.

### 3.4.5 Creating Neighbor Objects

PCI-based ANR creates the GUtranCellRelation and the

TermPointToGNB MO instances.

NCGI-based ANR creates the following MO instances:

- GUtranCellRelation
- ExternalGUtranCell
- ExternalBroadcastPLMNInfo
- TermPointToGNB
- ExternalGNodeBFunction

To find out if an unknown NR cell belongs to a known gNodeB, the Global gNodeB ID from NCGI report must be compared with the Global gNodeB ID of the existing neighbor gNodeB. If these matched, it means that unknown NR cell resides in known gNodeB. Therefore, a neighbor object is created under the existing ExternalGNodeBFunction MO in the known gNodeB.

When an unknown NR cell reported by the UE resides in an unknown gNodeB, all the LTE-to-NR

neighbor objects are created on the eNodeB.

### 3.4.6 Handling PLMNs received from gNodeB

The Master Node handles the PLMNs received from the Secondary Node in the following

way:

1. When the ExternalGUtranCell MO is created, the ExternalGUtranCell.plmnIdList attribute is updated.
2. When the list of connected gNodeB is updated for supporting the X2 TNL Address Discovery procedure, the super set of PLMNs are found from all ExternalGUtranCell MOs on the Secondary Node. The list of PLMNs are contained in the S1AP ENB CONFIGURATION UPDATE or S1AP S1 SETUP REQUEST messages. The source eNodeB includes all the configured PLMNs in the ExternalGUtranCell.plmnIdList attribute under one ExternalGNodeBFunction MO instance. The collected PLMNs are included in the Broadcast PLMNs IE as part of the list of connected gNodeBs and it is sent to the MME. The first PLMN in the Broadcast PLMNs IE is set by the ExternalGNodeBFunction.gNodeBPlmnId attribute.
3. The super set of changed PLMNs are found from all ExternalGUtranCell MOs. The list of changed PLMNs are included in the S1AP ENB CONFIGURATION UPDATE message when the change of the NRCellDU.pLMNIdList is indicated from the Secondary Node.

### 3.4.7 X2 TNL Address Discovery Procedure

This procedure can start after the neighbor configuration for a new NR cell in an unknown

Secondary Node is created. The source eNodeB initiates the X2 TNL address discovery

procedure to retrieve the IP address of the unknown gNodeB through the

MME.

The ENodeBFunction.endcX2IpAddrViaS1Active attribute must be set to

true on the following nodes:

- Source eNodeB
- Master Node

By setting the ENodeBFunction.endcX2IpAddrViaS1Active attribute to

true, the following functions become available:

- The source eNodeB can initiate the X2 TNL address discovery procedure.
- The Master Node can send the updated list of connected gNodeBs IE to the MME in the following messages: Through the S1AP ENB CONFIGURATION UPDATE message during the setup or release of the EN-DC connection Through the S1AP S1 SETUP REQUEST message during the S1 connection setup

Figure 10   X2 TNL Address Discovery Procedure

Operational Process

1. The EN-DC X2 connection must be manually pre-configured between the Master Node and the Secondary Node. The Secondary Node sends the following information to the Master Node during the EN-DC X2 Setup procedure: The global gNodeB ID The list of served NR cells including the configured TAC and the list of served PLMNs
2. If the ENodeBFunction.endcX2IpAddrViaS1Active attribute is set to true, the Master Node sends the S1AP ENB CONFIGURATION UPDATE message with the received information from the Secondary Node to the MME to update the list of connected gNodeBs IE. If the EN-DC X2 connection is lost or re-established, the Master Node updates the list of connected gNodeBs IE to the MME. When the gNodeB is configured with MORAN, the MME can identify the target gNodeB even if the Automated Neighbor Relations feature creates an inconsistent neighbor configuration for the gNodeB. If the MME identifies the target gNodeB by a combination of any PLMN from the Broadcast PLMNs and the gNodeB ID from the list of connected gNodeBs IE, the ENodeBFunction.separateEnGNbForMoranEnabled attribute must be set to false. If the MME identifies a separate instance for the MORAN configuration of the target gNodeB by a combination of the first PLMN from the Broadcast PLMNs and the gNodeB ID from the list of connected gNodeBs IE, the ENodeBFunction.separateEnGNbForMoranEnabled attribute is set to true.Note: When using Ericsson MME, the ENodeBFunction.separateEnGNbForMoranEnabled attribute must set to false.
3. The source eNodeB finds a new neighbor cell from an NCGI measurement report. The global gNodeB ID sent in the NCGI measurement report identifies a gNodeB hosting a neighbor NR cell. If the ExternalGNodeBFunnction MO instance does not exists for the global gNodeB ID from the NCGI measurement report, the neighbor NR cell is hosted by an unknown gNodeB. Note: When the NCGI measurement report is sent for an NR cell with MORAN configuration, the global gNodeB ID in the NCGI measurement report does not match the actual global gNodeB ID of the hosting gNodeB.
4. If the ENodeBFunction.endcX2IpAddrViaS1Active attribute is set to true, the source eNodeB starts the X2 TNL address discovery procedure for the unknown Secondary Node through the MME to retrieve the IP address of the unknown gNodeB as follows: The source eNodeB sends the S1AP ENB CONFIGURATION TRANSFER message to the MME. The target gNodeB ID is created from the global gNodeB ID from the NCGI measurement report of an unknown cell. The PLMN of the Selected PLMN in the Source eNB-ID IE set by the PLMN for selected IP network. Note: The source eNodeB selects its local SCTP end-point based on the ExternalGNodeBFunction.gNodeBPlmnID attribute. For more information, see Multiple IP Addresses for S1 and X2. The MME sends the S1AP MME CONFIGURATION TRANSFER message to the Master Node that acts as proxy to the target Secondary Node, with the information received from the source eNodeB. The Master Node performs either of the following checks on this unknown gNodeB: The target global gNodeB ID sent in the S1AP MME CONFIGURATION TRANSFER message matches the global gNodeB ID from the ExternalGNodeBFunction MO instance. The gNodeB ID from the target global gNodeB ID is matched with the ExternalGNodeBFunction.gNodeBId attribute and the PLMN of the target global gNodeB ID is matched with the first value of the ExternalGUtranCell.plmnIdList attribute. The target global gNodeB ID is sent in the S1AP MME CONFIGURATION TRANSFER message. If an external node is found based on the matching parameters, the Master Node sends the X2AP EN-DC CONFIGURATION TRANSFER message to the matched target gNodeB. If there is no match, the X2 TNL address discovery procedure fails as the Master Node ignores the S1AP MME CONFIGURATION TRANSFER message.
5. The target gNodeB sends the X2 TNL Configuration Info IE in the X2AP EN-DC CONFIGURATION TRANSFER message to the source eNodeB through the MME with the following information: The global gNodeB ID in the Source en-gNB ID IE received in the X2AP EN-DC CONFIGURATION TRANSFER message. The PLMN of the selected TAI in the Source en-gNB ID IE set by the PLMN of the selected IP network. The X2 TNL Address Info IE containing the selected Local SCTP end-point configured for the PLMN of Selected TAI in the Source eNodeB ID sent in the X2AP X2 EN-DC CONFIUGRATION TRANSFER message. In case of a gNodeB with MORAN configuration, the global gNodeB ID is received in the X2 EN-DC CONFIGURAITON TRANSFER message might be different from the actual global gNodeB ID on the target gNodeB.
6. The source eNodeB starts the EN-DC X2 Setup procedure after receiving the S1AP MME CONFIGURATION TRANSFER message with the IP address of the target gNodeB. If there is no reply from the MME, another connected MME is selected for the retry. Note: The External Link to gNodeB Failure alarm is raised if the ENodeBFunction.endcX2IpAddrViaS1Active attribute is set to false, or if there is no valid IP address for the TermPointToGNodeB MO instance. The source eNodeB corrects the inconsistent neighbor configuration when it receives the X2AP EN-DC X2 SETUP RESPONSE message with the correct global gNodeB ID.
7. The list of the connected gNodeBs IE on the source eNodeB is updated to the MME in the S1AP ENB CONFIGURATION TRANSFER message. This is performed so the MME can find which eNodeB is connected to the specific Secondary Node.

When there is no response to the S1AP ENB CONFIGURATION UPDATE

message, or the S1AP ENB CONFIGURATION UPDATE FAILURE message is

received from the MME, the Master Node executes a shut down and reestablishment with

the MME, except when updating only Secondary Node information.

#### 3.4.7.1 Configured TAC or Selected TAI

The configured TAC or selected TAI is required for the X2 TNL Address Discovery

procedure.

In the pre-configured EN-DC X2 Setup procedure, the configured TAC of the Secondary Node

must be handled as a mandatory IE in the list of connected or disconnected Secondary

Nodes by the S1 interface. The configured TAC is sent from the Secondary Node to the

MME.

In the configuration transfer of the Secondary Node, the Selected TAI of the Secondary

Node must be handled as a mandatory IE in the source Secondary Node ID.

The selected TAI consists of the PLMN and the configured TAC. It is relayed from the

Secondary Node to the MME through the S1 or X2 interface.

The source eNodeB provides the configured TACs of the newly connected Secondary Nodes to

all connected MMEs.

#### 3.4.7.2 No Configured EPS TAC on Secondary Node

If there is no configured EPS TAC on the Secondary Node, the X2 TNL address discovery

procedure fails because the MME does not know which eNodeB is connected to the Secondary

Node.

In this case, the Secondary Node can reuse the TAC of the Master Node, which is received

during EN-DC X2 Setup.

This means that the control plane of the Secondary Node includes the TAC of the Master

Node as configured TAC in the EN-DC X2 Setup Response or the EN-DC

Configuration Transfer messages.

#### 3.4.7.3 Update Broadcast PLMNs

The broadcasting of Secondary Node PLMNs are relayed to the MME. The PLMNs are configured

with the NRCellDU.pLMNIdList attribute.

Updating the PLMNs has the following way:

1. The control plane of the Secondary Node receives the value of the NRCellDU.pLMNIdList attribute which is included in the F1 Setup Request or the gNB-DU Configuration Update messages.
2. The control plane of the Secondary Node updates the value of NRCellDU.pLMNIdList attribute with the value received by the F1 Setup Request or the gNB-DU Configuration Update messages. The values are also updated to the values of the NRCellCU.pLMNIdList attribute.
3. The value of the NRCellCU.pLMNIdList attribute is included in the EN-DC X2 Setup Response at the EN-DC X2 Setup procedure or in the EN-DC Configuration Update message.

#### 3.4.7.4 Correcting Inconsistent ANR Configuration of Neighbor gNodeB with MORAN Configuration

The Automated Neighbor Relations feature can correct inconsistent neighbor

configuration for an NR cell with MORAN configuration.

The first PLMN of the NR cell with MORAN configuration broadcasted in the SIB1 message

does not match the PLMN in the global gNodeB ID of the target gNodeB. Therefore, the

global gNodeB ID that is built with the PLMN from the NCGI measurement report for the NR

cell with MORAN configuration does not match the global gNodeB ID of the target gNodeB.

When a new NR cell with MORAN configuration is detected, the Automated Neighbor

Relations feature creates an inconsistent neighbor configuration for the NR cell based

on the global gNodeB ID received in the NCGI measurement report.

After the X2 TNL address discovery procedure between the source eNodeB and shared gNodeB,

the source eNodeB receives the actual gNodeB ID in the X2AP EN-DC X2 SETUP

RESPONSE message. At this point, the eNodeB detects the inconsistent

neighbor configuration between the following

configurations:

- The ExternalGNodeBFunction MO instance is constructed from the NCGI measurement report on the NR cell with MORAN configuration.
- The actual global gNodeB ID received during the EN-DC X2 Setup procedure.

When the Automated Neighbor Relations feature on the eNodeB finds an NR cell with MORAN

configuration on a known gNodeB it is already connected to, the eNodeB sends the

X2AP X2 SETUP REQUEST message to the gNodeB. The eNodeB detects the

gNodeB as an unknown gNodeB. As a result, the gNodeB rejects the X2AP X2 SETUP

REQUEST message, if the TermPointToENodeB attribute is

already enabled for the eNodeB.

The eNodeB corrects the inconsistent ANR configuration depending on the

ExternalGNodeBFunction instance configuration and the EN-DC X2-C

connection.

Inconsistent ExternalGNodeBFunction MO Instance Configuration

In this case, only inconsistent neighbor configurations can be found. When the EN-DC

X2-C connection is established to an ExternalGNodeBFunction MO

instance with inconsistent neighbor

configuration, the eNodeB

corrects the inconsistent neighbor configuration as follows:

1. The SCTP is shut down for the inconsistently configured ExternalGNodeBFunction MO instance.
2. The following inconsistently configured MO instances are removed: ExternalGNodeBFunction ExternalGUtranCell GUtranCellRelation ExternalBroadcastPLMNInfo TermPointToGNB
3. The correct ExternalGNodeBFunction MO instance is created with the following child MO instances: ExternalGNodeBFunction ExternalGUtranCell GUtranCellRelation TermPointToGNB The ExternalGNodeBFunction MO instance is created with the global gNodeB ID received in the X2AP EN-DC X2 SETUP RESPONSE message.
4. The TermPointToGNB MO instance is unlocked and the X2 TNL address discovery procedure starts.
5. The EN-DC X2-C connection is set up again with the correct configuration if the X2 TNL address discovery procedure is successful.

Correct and Inconsistent ExternalGNodeBFunction MO Instance Configuration

In this case, there are correct and inconsistent neighbor configurations. The

correction of the neighbor configuration depends on whether the eNodeB finds a

correct or inconsistent neighbor configuration.

If the EN-DC X2-C connection is established to an

ExternalGNodeBFunction MO instance with inconsistent neighbor

configuration, the eNodeB corrects the inconsistent neighbor configuration as

follows:

1. The SCTP is shut down for the inconsistently configured ExternalGNodeBFunction MO instance.
2. The following inconsistent neighbor configurations are removed: ExternalGNodeBFunction ExternalGUtranCell GUtranCellRelation ExternalBroadcastPLMNInfo
3. The following MO instances are created under the ExternalGNodeBFunction MO instance configured with the global gNodeB ID received in the X2AP EN-DC X2 SETUP RESPONSE message: ExternalGUtranCell GUtranCellRelation TermPointToGNB if it does not exist.
4. If the TermPointToGNB MO instance is newly created, it is unlocked, and the X2 TNL address discovery procedure is started.
5. The EN-DC X2-C connection is set up again with the correct configuration if the X2 TNL address discovery procedure is successful.

If the EN-DC X2-C connection is established to an

ExternalGNodeBFunction MO instance with correct neighbor

configuration, the eNodeB corrects the existing inconsistent neighbor configurations

as follows:

1. The SCTP is shut down for the inconsistently configured ExternalGNodeBFunction MO instance.
2. The following inconsistent neighbor configurations are removed: ExternalGNodeBFunction ExternalGUtranCell GUtranCellRelation ExternalBroadcastPLMNInfo ExternalGNodeBFunction after the child MO instances are removed TermPointToGNB after the child MO instances are removed
3. The following MO instances are created under the ExternalGNodeBFunction MO instance configured with the global gNodeB ID received in the X2AP EN-DC X2 SETUP RESPONSE message: ExternalGUtranCell GUtranCellRelation Note: The Automated Neighbor Relations feature can create the GUtranCellRelation MO instance if, the ExternalGUtranCell MO instance has the same NR frequency as the removed ExternalGUtranCell MO instance.

The eNodeB creates the ExternalGUtranCell MO instance for MORAN

configuration based on the information received in the X2AP EN-DC

CONFIGURATION UPDATE message. In this case, the eNodeB checks the

ExternalGUtranCell and the

GUtranCellrelation MO instances and corrects them, if they

are configured with inconsistent neighbor configuration.

### 3.4.8 Automated Neighbor Relations for NR Mobility for EN-DC

This function allows the automatic detection and creation of NR-to-NR neighbor cell

relations in the gNodeB, based on NR neighbor information propagated from the eNodeB to the

gNodeB over the X2AP.

The function is activated on the eNodeB if the

AnrFunctionNR.anrStateNR attribute is set to

ACTIVATED while the Automated Neighbor Relations license is active.

This enables PCI-based ANR or NCGI-based ANR from LTE to NR on the node level.

If cell-defined primary PLMN ID is configured, the

AnrFunctionNR.anrStateNR attribute must be set to

DEACTIVATED.

When the function is activated, NR neighbor information is included in the Served

E-UTRA Cells to Modify in the EN-DC CONFIGURATION UPDATE

message, sent by the eNodeB to neighbor gNodeBs.

When EN-DC X2 setup is initiated towards the gNodeB, NR neighbor information of the LTE

PCell on eNodeB is included in the Served E-UTRA Cells to Modify IE in

the EN-DC CONFIGURATION UPDATE message. The EN-DC CONFIGURATION

UPDATE message is sent by the eNodeB to newly connected gNodeBs and to other

neighbor gNodeBs of the LTE PCell.

A GUtranCellRelation neighbor object can be created or deleted on the

eNodeB by the operator or the Automated Neighbor Relations feature. In this case, NR

neighbor information of the LTE PCell is sent to neighbor gNodeBs in the Served

E-UTRA Cells to Modify IE in the EN-DC CONFIGURATION UPDATE

message.

If there is an NR neighbor information change in the gNodeB, neighbor eNodeBs are

informed of the change through the Served NR Cells To Modify IE in the

EN-DC CONFIGURATION UPDATE message.

The NR neighbor information is then included in the Served E-UTRA Cells to

Modify IE in the EN-DC CONFIGURATION UPDATE message, which is

sent by the eNode to neighbor gNodeBs.

NR neighbor information is used for the automatic detection and creation of NR-to-NR

neighbor cell relations in gNodeBs. This function is activated on gNodeBs by setting the

ANRFunctionNR.anrEndcX2Enabled attribute to

true. For more information, see NR Automated Neighbor Relations.

If the ExternalGUtranCell.nRTAC attribute exists, the TAC for the

external G-UTRAN cell is also sent in the EN-DC CONFIGURATION UPDATE

message, supporting SA mobility.

### 3.4.9 ANR Detection of NR PCI Conflict

The function allows the automatic detection of NR cell with PCI conflict.

The function monitors NR random access statistics in EN-DC deployments in order to

trigger NR PCI conflict reporting.

The function is activated if the following conditions apply:

- The AnrFunctionNR.pciConflictDetectionType attribute is set to FR1, FR2, or BOTH for the corresponding NR frequency range.
- The AnrFunctionNR.endcRachFailThrPerUe attribute is set to a value higher than 0.
- The PCI-based ANR or the NCGI-based ANR function is enabled.

ANR only performs NR PCI conflict detection if just one NR cell relation exists with a

given PCI. If ANR finds another NR cell with the same PCI, it adds the PCI-conflicting

cell as a new neighbor cell, and PCI conflict detection is performed. In this case, ANR

stops checking for other cells with PCI conflict.

Related concepts

PCI-Based ANR

NCGI-Based ANR

#### 3.4.9.1 Finding an NR Cell with PCI Conflict Suspected

ANR finds cells where PCI conflict is suspected by monitoring NR random access

statistics.

Figure 11   Cell with NR PCI Conflict Suspected

1. ANR monitors UEs that experience a high number of NR random access failures until the threshold configured in the AnrFunctionNR.endcRachFailThrPerUe attribute is reached for a cell relation during EN-DC setup. NR random access failure happens if the following conditions are met: The UE sends the RRC SCGFailureInformationNR message with randomAccessProblem or synchReconfigFailure-SCG as the failure type. The SCG session time between receiving the RRC ConnectionReconfigurationComplete message for the SCG addition and the RRC SCGFailureInformationNR is shorter than the time specified in the AnrFunctionNR.scgSessTimeForEndcRachFail attribute.
2. ANR finds the cell where NR PCI conflict is suspected if the number of UEs that experience NR random access failure for a given cell relation reaches the threshold configured in the AnrFunctionNR.maxNoOfUeForPciConflictDetect attribute.
3. The INTERNAL\_EVENT\_NR\_PCI\_CONFLICT\_SUSPECTED PM event is generated to show that a cell is found where NR PCI conflict is suspected.
4. ANR crates a neighbor relation to the newly found NR cell with the PCI conflict.

If the function for the detection, prevention, and handling of recurring EN-DC setup

failures is enabled, the following adjustments are applied in the ANR criteria for

finding a cell where NR PCI conflict is suspected:

- Between the values set for the EUtranCellFDD.loopingEndcShortScgSessTime or the EUtranCellTDD.loopingEndcShortScgSessTime attribute and the AnrFunctionNR.scgSessTimeForEndcRachFail attribute, the longer time value is applied for monitoring NR random access failures.
- Between the values set for the EUtranCellFDD.loopingEndcConsecFailThr or the EUtranCellTDD.loopingEndcConsecFailThr attribute and the AnrFunctionNR.endcRachFailThrPerUe attribute, the lower value is applied for finding a cell where NR PCI conflict is suspected.

The purpose of these adjustments is to trigger NCGI for the cell where NR PCI

conflict is suspected before the EN-DC setup to the cell is prevented during a certain

period if the UE experiences recurring EN-DC setup failures. For more information about

the function, see Detection, Prevention, and Handling of Recurring EN-DC Setup Failures

in Basic Intelligent Connectivity.

##### 3.4.9.1.1 Creating NR Neighbor Cell Relation for the NR PCI-Conflicting Cell

If another NR cell with PCI conflict is found and it is not configured as a neighbor

cell, ANR creates a cell relation to the external cell.

If it is suspected that an NR cell has PCI conflict, ANR is triggered to find another NR

neighbor cell with the same PCI. One of the following functions is used for this

process:

- PCI-based ANR
- NCGI-based ANR

PCI-Based ANR

The function is triggered if the following conditions apply:

- The function is enabled.
- The AnrFunctionNR.pciConflictDetectionType attribute is set to FR1, FR2, or BOTH for the corresponding NR frequency range.

During the operation of the PCI-based ANR function, ANR checks if other external

cells exist with conflicting PCI. If another NR cell with PCI conflict is found and

it is not configured as a neighbor cell, ANR creates a cell relation to the external

cell.

NCGI-Based ANR

The function is triggered if the following conditions apply:

- The function is enabled.
- The AnrFunctionNR.pciConflictDetectionType attribute is set to FR1 or BOTH for the corresponding NR frequency range.

During the operation of the NCGI-based ANR function, ANR triggers an NCGI measurement

to find another NR cell with conflicting PCI. If the UE reports NCGI for the other

NR cell that is not configured as neighbor cell, ANR creates a cell relation to the

external cell.

Related concepts

PCI-Based ANR

NCGI-Based ANR

Creating Neighbor Objects

### 3.4.10 Automatic Update of NR Neighbor Configuration for NR Frequency Change

The change of the frequency of a neighbor NR cell can automatically be updated in the

frequency relations and cell relations.

The eNodeB monitors the following messages for changes in the NR cell frequency

information:

- The X2AP EN-DC X2 SETUP RESPONSE message with the Served NR Cell Information IE
- The X2AP EN-DC CONFIGURATION UPDATE with the Served NR Cell Information IE in the Served NR Cells to Add IE or the Served NR Cells to Modify IE

If any of these incoming messages contain changes in the frequency information for an NR

neighbor cell, the following changes are performed:

- A new GUtranSyncSignalFrequency MO is created with the updated frequency if one does not exist yet.
- Any ExternalGUtranCell MO instance that refers to the existing GUtranSyncSignalFrequency MO instance is updated to refer to the new one.
- Any GUtranCellRelation MO instance that uses the existing frequency is deleted.

The

automatic

update of NR frequency relations and cell relations can be enabled by

setting the value of the AnrFunctionNR.supportNrFreqChange attribute

to ADD\_FREQREL or ADD\_FREQREL\_IF\_CELLREL\_EXIST.

If the value of the AnrFunctionNR.supportNrFreqChange attribute is set

to ADD\_FREQREL, the following actions are performed:

- If an existing GUtranFreqRelation MO instance is present using the existing frequency and the new MO instance does not yet exist for the new frequency, a new GUtranFreqRelation MO instance is created for the new frequency.
- If an existing GUtranCellRelation MO instance is present under the previous GUtranFreqRelation MO instance, a new GUtranCellRelation MO instance is created under the new GUtranFreqRelation MO instance.

If the value of the AnrFunctionNR.supportNrFreqChange attribute is set

to ADD\_FREQREL\_IF\_CELLREL\_EXIST, the following actions are

performed:

- If any GUtranCellRelation MO instances are present under the previous GUtranFreqRelation MO instance, a new GUtranFreqRelation MO instance is created for the new frequency if one does not yet exist.
- For any GUtranCellRelation MO instance under the previous GUtranFreqRelation MO instance, a new GUtranCellRelation MO instance is created under the new GUtranFreqRelation MO instance.

For cell relations where the GUtranCellRelation.essEnabled attribute

is set to true or the GUtranCellRelation MO instance

is referenced by any SharingGroup.gUtranCellRelationRef attribute,

automatic frequency update is not supported. In this case, no new

GUtranCellRelation and GUtranFreqRelation MO

instances are created in place of the existing ones.

### 3.4.11 Automatic Removal of GUtranSyncSignalFrequency and GUtranFreqRelation MO Instances

Unused GUtranSyncSignalFrequency and

GUtranFreqRelation MO instances can be automatically

removed.

The GUtranFreqRelation and

GUtranSyncSignalFrequency MO instances configured in the n48 band

can be automatically removed by setting the

AnrFunction.removeFreqRelTime attribute to a value other than

-1.

If automatic removal is activated, the eNodeB checks for removable MO instances every 5

minutes.

Automatic Removal of GUtranSyncSignalFrequency MO Instances

A GUtranSyncSignalFrequency MO instance is considered unused if it

is not referenced by any other MO instances.

A GUtranSyncSignalFrequency MO instance is automatically removed

if the following conditions are met:

- Automatic removal is activated by setting the AnrFunction.removeFreqRelTime attribute to a value other than -1.
- The GUtranSyncSignalFrequency MO instance is configured for the n48 band.
- The GUtranSyncSignalFrequency MO instance exists for longer than 10 minutes. This check is in place so the MO instance is not immediately deleted before any references to it could be configured by the operator.

For the first 10 minutes after a node restart, no

GUtranSyncSignalFrequency MO instances are removed.

Automatic Removal of GUtranFreqRelation MO Instances

A GUtranFreqRelation MO instance is considered unused if the

GUtranFreqRelation MO instance refers to a

GUtranSyncSignalFrequency MO instance that is not referenced

by any ExternalGUtranCell MO instances. A

GUtranFreqRelation MO instance is automatically removed if

the following conditions are met:

- Automatic removal is activated by setting the AnrFunction.removeFreqRelTime attribute to a value other than -1.
- The GUtranFreqRelation MO instance refers to the GUtranSyncSignalFrequency MO instance that is configured in the n48 band.
- The GUtranFreqRelation MO instance is unused for the time period set through the AnrFunction.removeEUtranFreqRelTime attribute.

## 3.5 Automated Neighbor Relations and MP Load Control

The periodic measurements are not started when cell component load state or

MP load control state is set to OVERLOAD.

For more information on MP Overload Protection, see Basic Load Management.

## 3.6 Consolidation of Measurement Intensity Control

The following features use the same periodic measurement function:

- Automatic SCell Management
- Automated Neighbor Relations
- Cell Sleep Mode

The measurement intensity control is consolidated among these features, which means

that the need for high intensity always supersedes the need for low intensity. The

periodic measurement intensity control is set by the highest value of the following

attributes if the corresponding feature is activated:

- Maximum target value: AutoSCellMgmFunction.asmInterFMeasReportMax AnrFunctionEUtran.anrEutranInterFMeasReportMax CellSleepNodeFunction.csmEutranInterFMeasReportMax
- Increment of the target value: AutoSCellMgmFunction.asmInterFMeasReportIncr AnrFunctionEUtran.anrEutranInterFMeasReportIncr CellSleepNodeFunction.csmEutranInterFMeasReportIncr
- Minimum target value: AutoSCellMgmFunction.asmInterFMeasReportMin AnrFunctionEUtran.anrEutranInterFMeasReportMin CellSleepNodeFunction.csmEutranInterFMeasReportMin
- Decrement of the target value: AutoSCellMgmFunction.asmInterFMeasReportDecr AnrFunctionEUtran.anrEutranInterFMeasReportDecr CellSleepNodeFunction.csmEutranInterFMeasReportDecr

# 4 Network Impact of Automated Neighbor Relations

ANR builds relations that improve mobility.

Capacity and Performance

ANR improves session drop rate by assuring that the best neighbors can always be used for

handover. Even when a neighbor relation is not set up before a handover attempt, a handover

may be possible within 1 second. This only occurs when no other handover target cell

alternatives exist. At least one successful CGI report is required for each neighbor

relation. Handover for subsequent UE, using the neighbor relations, is not affected. The

time for handover is not negatively affected by ANR.

Interfaces

An IE is introduced for Ericsson Private Extension that contains information about the

neighbor NR cells that might not be possible to find through NCGI measurements. This IE is

introduced in the following messages sent over the X2-C interface:

- X2AP X2 SETUP REQUEST
- X2AP X2 SETUP RESPONSE
- X2AP ENB CONFIGURATION UPDATE

Other Network Elements

No impact.

# 5 Parameters of Automated Neighbor Relations

The Automated Neighbor Relations feature introduces attributes to configure the

feature.

Table 13   Parameters

| Parameter                                                 | Type       | Description                                                                                                                                                                                             |
|-----------------------------------------------------------|------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| AnrFunctionNR.cellAddRsrpThresholdNR                      | Introduced | See MOM description.                                                                                                                                                                                    |
| AnrFunctionNR.cellAddRsrqThresholdNR                      | Introduced | See MOM description.                                                                                                                                                                                    |
| AnrFunction.cellRelHoAttRateThreshold                     | Introduced | See MOM description.                                                                                                                                                                                    |
| AnrFunction.cgiReportCountEval                            | Introduced | See MOM description.                                                                                                                                                                                    |
| AnrFunction.detectObsoleteExtCellsEnabled                 | Introduced | See MOM description.                                                                                                                                                                                    |
| AnrFunction.maxNoPciReportsEvent                          | Introduced | See MOM description.                                                                                                                                                                                    |
| AnrFunction.maxTimeEventBasedPciConf                      | Introduced | See MOM description.                                                                                                                                                                                    |
| AnrFunction.pciConflictCellSelection                      | Introduced | See MOM description.                                                                                                                                                                                    |
| AnrFunction.pciConflictDetectionEcgiMeas                  | Introduced | See MOM description.                                                                                                                                                                                    |
| AnrFunction.pciConflictMobilityEcgiMeas                   | Introduced | See MOM description.                                                                                                                                                                                    |
| AnrFunction.pciConflictSelectThreshPerc                   | Introduced | See MOM description.                                                                                                                                                                                    |
| AnrFunction.perCgiMeasPlmnWhiteListGeran                  | Introduced | See MOM description.                                                                                                                                                                                    |
| AnrFunction.perCgiMeasPlmnWhiteListUtran                  | Introduced | See MOM description.                                                                                                                                                                                    |
| AnrFunction.perEcgiMeasPlmnWhiteList                      | Introduced | See MOM description.                                                                                                                                                                                    |
| AnrFunction.plmnWhiteListEnabled                          | Introduced | See MOM description.                                                                                                                                                                                    |
| AnrFunction.plmnWhiteListGeranEnabled                     | Introduced | See MOM description.                                                                                                                                                                                    |
| AnrFunction.plmnWhiteListUtranEnabled                     | Introduced | See MOM description.                                                                                                                                                                                    |
| AnrFunction.probCellDetectLowHoSuccThres                  | Introduced | See MOM description.                                                                                                                                                                                    |
| AnrFunction.probCellDetectLowHoSuccTime                   | Introduced | See MOM description.                                                                                                                                                                                    |
| AnrFunction.probCellDetectMedHoSuccThres                  | Introduced | See MOM description.                                                                                                                                                                                    |
| AnrFunction.probCellDetectMedHoSuccTime                   | Introduced | See MOM description.                                                                                                                                                                                    |
| AnrFunction.problematicCellPolicy                         | Introduced | See MOM description.                                                                                                                                                                                    |
| AnrFunction.removeEutranFreqRelTime                       | Introduced | See MOM description.                                                                                                                                                                                    |
| AnrFunction.removeFreqRelTime                             | Introduced | See MOM description.                                                                                                                                                                                    |
| AnrFunction.removeNcellTime                               | Introduced | See MOM description.                                                                                                                                                                                    |
| AnrFunction.removeNenbTime                                | Introduced | See MOM description.                                                                                                                                                                                    |
| AnrFunction.removeNrelTime                                | Introduced | See MOM description.                                                                                                                                                                                    |
| AnrFunction.s1HoPrepConsFailThres                         | Introduced | See MOM description.                                                                                                                                                                                    |
| AnrFunctionEUtran.acquirePlmnIdListEnabled                | Introduced | See MOM description.                                                                                                                                                                                    |
| AnrFunctionEUtran.anrEutranInterFMeasReportDecr           | Introduced | See MOM description.                                                                                                                                                                                    |
| AnrFunctionEUtran.anrEutranInterFMeasReportIncr           | Introduced | See MOM description.                                                                                                                                                                                    |
| AnrFunctionEUtran.anrEutranInterFMeasReportMax            | Introduced | See MOM description.                                                                                                                                                                                    |
| AnrFunctionEUtran.anrEutranInterFMeasReportMin            | Introduced | See MOM description.                                                                                                                                                                                    |
| AnrFunctionEUtran.anrInterFreqState                       | Introduced | See MOM description.                                                                                                                                                                                    |
| AnrFunctionEUtran.anrIntraFreqState                       | Introduced | See MOM description.                                                                                                                                                                                    |
| AnrFunctionEUtran.anrUesEUtraIntraFDecr                   | Introduced | See MOM description.                                                                                                                                                                                    |
| AnrFunctionEUtran.anrUesEUtraIntraFIncrAnr                | Introduced | See MOM description.                                                                                                                                                                                    |
| AnrFunctionEUtran.anrUesEUtraIntraFIncrHo                 | Introduced | See MOM description.                                                                                                                                                                                    |
| AnrFunctionEUtran.anrUesEUtraIntraFMax                    | Introduced | See MOM description.                                                                                                                                                                                    |
| AnrFunctionEUtran.anrUesEUtraIntraFMin                    | Introduced | See MOM description.                                                                                                                                                                                    |
| AnrFunctionEUtran.anrUesThreshInterFDecr                  | Introduced | See MOM description.                                                                                                                                                                                    |
| AnrFunctionEUtran.anrUesThreshInterFIncrAnr               | Introduced | See MOM description.                                                                                                                                                                                    |
| AnrFunctionEUtran.anrUesThreshInterFIncrHo                | Introduced | See MOM description.                                                                                                                                                                                    |
| AnrFunctionEUtran.anrUesThreshInterFMax                   | Introduced | See MOM description.                                                                                                                                                                                    |
| AnrFunctionEUtran.anrUesThreshInterFMin                   | Introduced | See MOM description.                                                                                                                                                                                    |
| AnrFunctionEUtran.cellAddRsrpThresholdEutran              | Introduced | See MOM description.                                                                                                                                                                                    |
| AnrFunctionEUtran.cellAddRsrqThresholdEutran              | Introduced | See MOM description.                                                                                                                                                                                    |
| AnrFunctionEUtran.hoAllowedEutranPolicy                   | Introduced | See MOM description.                                                                                                                                                                                    |
| AnrFunctionEUtran.x2SetupPolicy                           | Introduced | See MOM description.                                                                                                                                                                                    |
| AnrFunctionGeran.anrGeranMeasReportDecr                   | Introduced | See MOM description.                                                                                                                                                                                    |
| AnrFunctionGeran.anrGeranMeasReportIncr                   | Introduced | See MOM description.                                                                                                                                                                                    |
| AnrFunctionGeran.anrGeranMeasReportMax                    | Introduced | See MOM description.                                                                                                                                                                                    |
| AnrFunctionGeran.anrGeranMeasReportMin                    | Introduced | See MOM description.                                                                                                                                                                                    |
| AnrFunctionGeran.anrGeranMeasReportRacIncr                | Introduced | See MOM description.                                                                                                                                                                                    |
| AnrFunctionGeran.anrGeranRacMeasOn                        | Introduced | See MOM description.                                                                                                                                                                                    |
| AnrFunctionGeran.anrStateGsm                              | Introduced | See MOM description.                                                                                                                                                                                    |
| AnrFunctionGeran.problematicCellPolicy                    | Introduced | See MOM description.                                                                                                                                                                                    |
| AnrFunctionNR.anrStateNR                                  | Introduced | See MOM description.                                                                                                                                                                                    |
| AnrFunctionNR.endcRachFailThrPerUe                        | Introduced | See MOM description.                                                                                                                                                                                    |
| AnrFunctionNR.essNRNeighborCellInfoUsed                   | Introduced | See MOM description.                                                                                                                                                                                    |
| AnrFunctionNR.gNodebIdLength                              | Introduced | See MOM description                                                                                                                                                                                     |
| AnrFunctionNR.maxNoOfUeForPciConflictDetect               | Introduced | See MOM description.                                                                                                                                                                                    |
| AnrFunctionNR.pciConflictDetectionType                    | Introduced | See MOM description.                                                                                                                                                                                    |
| AnrFunctionNR.scgSessTimeForEndcRachFail                  | Introduced | See MOM description.                                                                                                                                                                                    |
| AnrFunctionNR.supportNrFreqChange                         | Introduced | See MOM description.                                                                                                                                                                                    |
| AnrFunctionUtran.anrStateUtran                            | Introduced | See MOM description.                                                                                                                                                                                    |
| AnrFunctionUtran.anrUtranAcMeasOn                         | Introduced | See MOM description.                                                                                                                                                                                    |
| AnrFunctionUtran.anrUtranMeasReportAcIncr                 | Introduced | See MOM description.                                                                                                                                                                                    |
| AnrFunctionUtran.anrUtranMeasReportDecr                   | Introduced | See MOM description.                                                                                                                                                                                    |
| AnrFunctionUtran.anrUtranMeasReportIncr                   | Introduced | See MOM description.                                                                                                                                                                                    |
| AnrFunctionUtran.anrUtranMeasReportMax                    | Introduced | See MOM description.                                                                                                                                                                                    |
| AnrFunctionUtran.anrUtranMeasReportMin                    | Introduced | See MOM description.                                                                                                                                                                                    |
| AnrFunctionUtran.hoAllowedUtranPolicy                     | Introduced | See MOM description.                                                                                                                                                                                    |
| AnrPciConflictDrxProfile.anrPciConflictDrxInactivityTimer | Introduced | See MOM description.                                                                                                                                                                                    |
| AnrPciConflictDrxProfile.anrPciConflictLongDrxCycle       | Introduced | See MOM description.                                                                                                                                                                                    |
| AnrPciConflictDrxProfile.anrPciConflictOnDurationTimer    | Introduced | See MOM description.                                                                                                                                                                                    |
| ENodeBFunction.endcX2IpAddrViaS1Active                    | Introduced | See MOM description.                                                                                                                                                                                    |
| ENodeBFunction.measuringEcgiWithAgActive                  | Introduced | See MOM description.                                                                                                                                                                                    |
| ENodeBFunction.x2WhiteList                                | Introduced | See MOM description.  The attribute has the following members:  enbId     mcc     mnc     mncLength                                                                                                     |
| ENodeBFunction.separateEnGnbForMoranEnabled               | Introduced | See MOM description.                                                                                                                                                                                    |
| EUtranCellRelation.barringLowHoAllowed                    | Introduced | See MOM description.                                                                                                                                                                                    |
| EUtranCellRelation.isRemoveAllowed                        | Introduced | See MOM description.                                                                                                                                                                                    |
| EUtranCellRelation.pciConflictPreferredCellAuto           | Introduced | See MOM description.                                                                                                                                                                                    |
| EUtranCellRelation.pciConflictPreferredCellMan            | Introduced | See MOM description.                                                                                                                                                                                    |
| EUtranFreqRelation.anrMeasOn                              | Introduced | See MOM description.                                                                                                                                                                                    |
| EUtranFreqRelation.candNeighborRel                        | Introduced | See MOM description.  The attribute has the following members:  cellId     enbId     mcc     mnc     mncLength     mobilityStatusReason     physicalLayerCellIdGroup     physicalLayerSubCellId     tac |
| ExternalBroadcastPLMNInfo.externalBroadcastPLMNInfoId     | Introduced | See MOM description.                                                                                                                                                                                    |
| ExternalBroadcastPLMNInfo.createdBy                       | Introduced | See MOM description.                                                                                                                                                                                    |
| ExternalBroadcastPLMNInfo.pLMNIdList                      | Introduced | See MOM description.                                                                                                                                                                                    |
| ExternalBroadcastPLMNInfo.nRTAC                           | Introduced | See MOM description.                                                                                                                                                                                    |
| ExternalEUtranCellFDD.isRemoveAllowed                     | Introduced | See MOM description.                                                                                                                                                                                    |
| ExternalEUtranCellFDD.plmnListVerifiedByX2OrCgi           | Introduced | See MOM description.                                                                                                                                                                                    |
| ExternalEUtranCellTDD.isRemoveAllowed                     | Introduced | See MOM description.                                                                                                                                                                                    |
| ExternalEUtranCellTDD.plmnListVerifiedByX2OrCgi           | Introduced | See MOM description.                                                                                                                                                                                    |
| ExternalGUtranCell.configuredTAC                          | Introduced | See MOM description.                                                                                                                                                                                    |
| ExternalGUtranCell.nRTAC                                  | Introduced | See MOM description.                                                                                                                                                                                    |
| ExternalGUtranCell.plmnIdList                             | Introduced | See MOM description.                                                                                                                                                                                    |
| GeranCellRelation.hoSuccLevel                             | Introduced | See MOM description.                                                                                                                                                                                    |
| GeranCellRelation.mobilityStatus                          | Introduced | See MOM description.                                                                                                                                                                                    |
| GUtranCellRelation.isRemoveAllowed                        | Introduced | See MOM description.                                                                                                                                                                                    |
| GUtranCellRelation.mobilityStatusNR                       | Introduced | See MOM description.                                                                                                                                                                                    |
| GUtranFreqRelation.anrMeasOn                              | Introduced | See MOM description.                                                                                                                                                                                    |
| GUtranFreqRelation.cellAddRsrpThrNROverride               | Introduced | See MOM description.                                                                                                                                                                                    |
| GUtranFreqRelation.cellAddRsrqThrNROverride               | Introduced | See MOM description.                                                                                                                                                                                    |
| PlmnInfo.actualPlmn                                       | Introduced | See MOM description.  The attribute has the following members:  mcc     mnc     mncLength                                                                                                               |
| PlmnInfo.plmnWhiteList(1)                                 | Introduced | See MOM description.  The attribute has the following members:  mcc     mnc     mncLength                                                                                                               |
| ReportConfigA5Anr.a5Threshold1RsrpAnrDelta                | Introduced | See MOM description.                                                                                                                                                                                    |
| ReportConfigA5Anr.a5Threshold1RsrqAnrDelta                | Introduced | See MOM description.                                                                                                                                                                                    |
| ReportConfigA5Anr.a5Threshold2RsrpAnrDelta                | Introduced | See MOM description.                                                                                                                                                                                    |
| ReportConfigA5Anr.a5Threshold2RsrqAnrDelta                | Introduced | See MOM description.                                                                                                                                                                                    |
| ReportConfigA5Anr.hysteresisA5                            | Introduced | See MOM description.                                                                                                                                                                                    |
| ReportConfigA5Anr.timeToTriggerA5                         | Introduced | See MOM description.                                                                                                                                                                                    |
| ReportConfigEUtraBestCellAnr.a3offsetAnrDelta             | Introduced | See MOM description.                                                                                                                                                                                    |
| ReportConfigEUtraBestCellAnr.hysteresisA3                 | Introduced | See MOM description.                                                                                                                                                                                    |
| ReportConfigEUtraBestCellAnr.timeToTriggerA3              | Introduced | See MOM description.                                                                                                                                                                                    |
| TermPointToENB.domainName                                 | Introduced | See MOM description.                                                                                                                                                                                    |
| UeMeasControl.maxMeasInterFreqEUtra                       | Introduced | See MOM description.                                                                                                                                                                                    |
| UeMeasControl.maxMeasUtraFdd                              | Introduced | See MOM description.                                                                                                                                                                                    |
| UeMeasControl.maxNoMeasReportsInact                       | Introduced | See MOM description.                                                                                                                                                                                    |
| UeMeasControl.maxNoMeasReportsInact                       | Introduced | See MOM description.                                                                                                                                                                                    |
| UeMeasControl.maxNoMeasReportsInact                       | Introduced | See MOM description.                                                                                                                                                                                    |
| UeMeasControl.measQuantityUtraFDD                         | Introduced | See MOM description.                                                                                                                                                                                    |
| UtranFreqRelation.anrMeasOn                               | Introduced | See MOM description.                                                                                                                                                                                    |
| AnrFunction.removeNgnbTime                                | Introduced | See MOM description.                                                                                                                                                                                    |
| ExternalGUtranCell.isRemoveAllowed                        | Introduced | See MOM description.                                                                                                                                                                                    |
| GUtranCellRelation.isRemoveAllowed                        | Introduced | See MOM description.                                                                                                                                                                                    |

(1)

The plmnWhiteList attribute is used for all RATs as a

common list. The whitelist is used to evaluate the E-UTRAN, UTRAN, and GERAN

cell relations and lists all PLMN IDs that are available for handover and

X2.

# 6 Performance of Automated Neighbor Relations

The Automated Neighbor Relations feature introduces counters and events to monitor the

feature operation.

KPIs

This feature has no associated KPIs.

Counters

- EUtranCellFDD.pmAnrNeighbrelAdd
- EUtranCellTDD.pmAnrNeighbrelAdd
- EUtranCellFDD.pmAnrNeighbrelRem
- EUtranCellTDD.pmAnrNeighbrelRem
- EUtranCellFDD.pmAnrNrNoActionTooWeak
- EUtranCellTDD.pmAnrNrNoActionTooWeak
- EUtranCellFDD.pmAnrHoSuccLevelMedium
- EUtranCellTDD.pmAnrHoSuccLevelMedium
- EUtranCellFDD.pmAnrHoSuccLevelLow
- EUtranCellTDD.pmAnrHoSuccLevelLow
- EUtranCellFDD.pmHoPreventedProblematicCell
- EUtranCellTDD.pmHoPreventedProblematicCell
- EUtranCellTDD.pmHoPreventedNotInPlmnWL
- EUtranCellFDD.pmHoPreventedNotInPlmnWLUtran
- EUtranCellTDD.pmHoPreventedNotInPlmnWLUtran
- EUtranCellFDD.pmHoPreventedNotInPlmnWLGeran
- EUtranCellTDD.pmHoPreventedNotInPlmnWLGeran
- EUtranCellFDD.pmCgiMeasFailAnrPciConflict
- EUtranCellTDD.pmCgiMeasFailAnrPciConflict
- EUtranCellFDD.pmCgiMeasSuccAnrPciConflict
- EUtranCellTDD.pmCgiMeasSuccAnrPciConflict
- EUtranCellFDD.pmCgiMeasSuccDrx
- EUtranCellTDD.pmCgiMeasSuccDrx
- EUtranCellFDD.pmCgiMeasSuccAg
- EUtranCellTDD.pmCgiMeasSuccAg
- EUtranCellFDD.pmCgiMeasSuccDrxQci1
- EUtranCellTDD.pmCgiMeasSuccDrxQci1
- EUtranCellFDD.pmCgiMeasSuccAgQci1
- EUtranCellTDD.pmCgiMeasSuccAgQci1
- GUtranFreqRelation.pmAnrNrNoActionTooWeak
- GUtranCellRelation.pmHoExeAtt
- GUtranCellRelation.pmHoExeSucc
- GUtranCellRelation.pmHoPrepAtt
- GUtranCellRelation.pmHoPrepSucc

The

following EBS counters are associated with this feature:

- pmAgMeasSuccCgiMcPtt
- pmAgMeasSuccCgiNonMcPtt
- pmDrxMeasSuccCgiMcPtt
- pmDrxMeasSuccCgiNonMcPtt
- pmRrcConnReconfAgRestoreMcPtt
- pmRrcConnReconfAgRestoreNonMcPtt
- pmRrcConnReconfAgSuccMcPtt
- pmRrcConnReconfAgSuccNonMcPtt
- pmRrcConnReconfDrxRestoreMcPtt
- pmRrcConnReconfDrxRestoreNonMcPtt
- pmRrcConnReconfDrxSuccMcPtt
- pmRrcConnReconfDrxSuccNonMcPtt
- pmAnrPciConflictMeasSuccEutranCgi
- pmAnrPciConflictMeasFailEutranCgi
- pmDrxMeasSuccCgi
- pmAgMeasSuccCgi
- pmDrxMeasSuccCgiQci1
- pmAgMeasSuccCgiQci1

Table 14   Counters Corresponding to EBS Counters

| Counter                                                                              | EBS                   Counter     | Description                                                                                                                 |
|--------------------------------------------------------------------------------------|-----------------------------------|-----------------------------------------------------------------------------------------------------------------------------|
| EUtranCellFDD.pmCgiMeasSuccAnrPciConflict  EUtranCellTDD.pmCgiMeasSuccAnrPciConflict | pmAnrPciConflictMeasSuccEutranCgi | The total number of CGI measurement failure for ANR PCI Conflict due to lack of                   UE capability.            |
| EUtranCellFDD.pmCgiMeasFailAnrPciConflict  EUtranCellTDD.pmCgiMeasFailAnrPciConflict | pmAnrPciConflictMeasFailEutranCgi | The total number of successful CGI measurement for ANR PCI Conflict.                                                        |
| EUtranCellFDD.pmCgiMeasSuccDrx  EUtranCellTDD.pmCgiMeasSuccDrx                       | pmDrxMeasSuccCgi                  | The total number of successful CGI measurement with DRX for ANR PCI Conflict.                                               |
| EUtranCellFDD.pmCgiMeasSuccAg  EUtranCellTDD.pmCgiMeasSuccAg                         | pmAgMeasSuccCgi                   | The total number of successful CGI measurement with AG for ANR PCI Conflict.                                                |
| EUtranCellFDD.pmCgiMeasSuccDrxQci1  EUtranCellTDD.pmCgiMeasSuccDrxQci1               | pmDrxMeasSuccCgiQci1              | The total number of successful CGI measurement with DRX for ANR PCI Conflict when                   the UE has QCI1 bearer. |
| EUtranCellFDD.pmCgiMeasSuccAgQci1  EUtranCellTDD.pmCgiMeasSuccAgQci1                 | pmAgMeasSuccCgiQci1               | The total number of successful CGI measurement with AG for ANR PCI Conflict when                   the UE has QCI1 bearer.  |

Table 15   EBS Counters for LTE to NR EN-DC

| EBS Counter              | Description                                                           |
|--------------------------|-----------------------------------------------------------------------|
| pmAnrNeighbrelAddNr      | The number of the added neighbor NR cell relations.                   |
| pmAnrNeighbrelDelNr      | The number of deleted neighbor NR cell relations.                     |
| pmAnrMeasSuccNrCgi       | The number of successfully performed NR CGI measurement.              |
| pmAnrMeasSuccNrCgiNoSIB1 | The number of successfully performed NR CGI measurement without SIB1. |

For more information on EBS counters associated with the feature, see Lists and Delta Lists.

Events

Table 16   Events

| Event                                        | Event Parameter                                                                                                                                                                                                                                                                                                                         | Description                                                                                                                                                                                                                                              |
|----------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| INTERNAL_EVENT_ANR_NR_EVAL                   | EVENT_PARAM_ANR_EVAL_RESULT  EVENT_PARAM_ANR_TRIGGER  EVENT_PARAM_FREQ  EVENT_PARAM_NEIGHBOR_PCI  EVENT_PARAM_NEIGHBOR_RSRP  EVENT_PARAM_NEIGHBOR_RSRQ  EVENT_PARAM_TRIGGER_QUANTITY_NR                                                                                                                                                 | Triggered when the reported radio link quality is below the ANR-specific threshold                 to indicate if GUtranCellRelation creation toward a weak cell is prevented.                                                                           |
| INTERNAL_EVENT_ANR_NR_FREQ_REL_ADD           | EVENT_PARAM_NEIGHBOR_PCI  EVENT_PARAM_NEIGHBOR_NCGI  EVENT_PARAM_ANR_RESULT  EVENT_PARAM_PREVIOUS_NR_NEIGHBOR_FREQ  EVENT_PARAM_UPDATED_NR_NEIGHBOR_FREQ  EVENT_PARAM_PREVIOUS_NR_NEIGHBOR_SMTC_SCS  EVENT_PARAM_UPDATED_NR_NEIGHBOR_SMTC_SCS                                                                                           | Triggered when a GUtranFreqRelation MO is automatically                 added.                                                                                                                                                                           |
| INTERNAL_EVENT_NEIGHBREL_ADD                 | EVENT_PARAM_NEIGHBOR_PCI  EVENT_PARAM_NEIGHBOR_CGI  EVENT_PARAM_RAT  EVENT_PARAM_ANR_RESULT  EVENT_PARAM_NEIGHBOR_NCGI  EVENT_PARAM_NEIGH_ADD_METHOD                                                                                                                                                                                    | Triggered when the neighbor cell is automatically added.                                                                                                                                                                                                 |
| INTERNAL_EVENT_NEIGHBREL_ADD                 | EVENT_PARAM_NEIGHBOR_PCI  EVENT_PARAM_NEIGHBOR_CGI  EVENT_PARAM_OPERATION  EVENT_PARAM_SELECT_METHOD                                                                                                                                                                                                                                    |                                                                                                                                                                                                                                                          |
| INTERNAL_EVENT_NEIGHBCELL_CHANGE             | EVENT_PARAM_NEIGHBOR_PCI  EVENT_PARAM_NEIGHBOR_CGI  EVENT_PARAM_ANR_CAUSE  EVENT_PARAM_ANR_OPERATION  EVENT_PARAM_RAT  EVENT_PARAM_FREQ  EVENT_PARAM_ANR_RESULT  EVENT_PARAM_NEIGHBOR_NCGI                                                                                                                                              | Triggered when a neighbor cell is automatically added, removed, or updated.                                                                                                                                                                              |
| INTERNAL_EVENT_NEIGHBENB_CHANGE              | EVENT_PARAM_GENBID  EVENT_PARAM_ENB_NAME  EVENT_PARAM_ANR_CAUSE  EVENT_PARAM_ANR_OPERATION  EVENT_PARAM_ANR_RESULT                                                                                                                                                                                                                      | Triggered when a neighbor RBS is automatically added, removed, or updated.                                                                                                                                                                               |
| INTERNAL_EVENT_NEIGHBREL_REMOVE              | EVENT_PARAM_NEIGHBOR_PCI  EVENT_PARAM_NEIGHBOR_CGI  EVENT_PARAM_ANR_CAUSE  EVENT_PARAM_RAT  EVENT_PARAM_ANR_RESULT  EVENT_PARAM_NEIGHBOR_NCGI                                                                                                                                                                                           | Triggered when the neighbor cell is automatically removed.                                                                                                                                                                                               |
| INTERNAL_EVENT_NEIGHBREL_SELECT_PCI_CONFLICT | EVENT_PARAM_NEIGHBOR_PCI  EVENT_PARAM_NEIGHBOR_CGI  EVENT_PARAM_OPERATION  EVENT_PARAM_SELECT_METHOD                                                                                                                                                                                                                                    | Triggered when a preferred neighbor relation is selected or deselected by the                 selection of preferred neighbor cell in PCI conflicts function.                                                                                            |
| INTERNAL_PROC_ANR_CGI_REPORT                 | EVENT_PARAM_REJECT_MEAS_CAUSE  EVENT_PARAM_AFFECTED_MEAS_TYPE  EVENT_PARAM_MEASUREMENT_ID  EVENT_PARAM_NEIGHBOR_PCI  EVENT_PARAM_ANR_MEASURE_RESULT  EVENT_PARAM_NEIGHBOR_CGI  EVENT_PARAM_RAT  EVENT_PARAM_FREQ  EVENT_PARAM_NO_SIB1_IN_CGI_INFO  EVENT_PARAM_NEIGHBOR_NCGI                                                            | Triggered when the ANR feature initiates a CGI measurement and RBS receives a CGI                 report from the UE.                                                                                                                                    |
| INTERNAL_EVENT_UE_ANR_CONFIG_PCI             | EVENT_PARAM_RAT  EVENT_PARAM_FREQ  EVENT_PARAM_GERAN_FREQ_GROUP_ID                                                                                                                                                                                                                                                                      | Triggered when the configuration measurements are sent to measure PCI.                                                                                                                                                                                   |
| INTERNAL_EVENT_UE_ANR_PCI_REPORT             | EVENT_PARAM_NEIGHBOR_PCI  EVENT_PARAM_RAT  EVENT_PARAM_FREQ  EVENT_PARAM_ANR_MEASURE_RESULT                                                                                                                                                                                                                                             | Triggered when the PCI report from UE is received.                                                                                                                                                                                                       |
| INTERNAL_EVENT_UE_ANR_CONFIG_PCI_REMOVE      | EVENT_PARAM_ANR_REMOVE_CAUSE                                                                                                                                                                                                                                                                                                            | Triggered when an ANR PCI measurement is removed.                                                                                                                                                                                                        |
| INTERNAL_EVENT_ANR_PCI_REPORT_WANTED         | EVENT_PARAM_ANR_PCI_MEASURE_RESULT  EVENT_PARAM_RAT  EVENT_PARAM_FREQ  EVENT_PARAM_GERAN_FREQ_GROUP_ID  EVENT_PARAM_UE_CAP_ANR_FEATURE_INDICATORS                                                                                                                                                                                       | Triggered when UE becomes available to perform ANR-specific PCI measurements  The event specifies the success or failure of selecting this UE to measure on a                 particular frequency.                                                      |
| INTERNAL_EVENT_ANR _HO_LEVEL_CHANGED         | EVENT_PARAM_HO_SUCC_LEVEL  EVENT_PARAM_NEIGHBOR_CGI                                                                                                                                                                                                                                                                                     | Triggered when handover execution success rate is changed in any of the following                 ways for the ANR Detection of Problematic Cells function:    From HIGH to MEDIUM     From MEDUIM to LOW     From LOW to MEDIUM     From MEDIUM to HIGH |
| INTERNAL_PROC_ANR_PCI_CONFLICT_CGI_REPORT    | EVENT_PARAM_REJECT_MEAS_CAUSE  EVENT_PARAM_AFFECTED_MEAS_TYPE  EVENT_PARAM_MEASUREMENT_ID  EVENT_PARAM_NEIGHBOR_PCI  EVENT_PARAM_ANR_PCI_CONFLICT_MEASURE_RESULT  EVENT_PARAM_NEIGHBOR_CGI  EVENT_PARAM_RAT  EVENT_PARAM_FREQ  EVENT_PARAM_START_CGI_MEAS_QCI1  EVENT_PARAM_CGI_MEAS_METHOD_TYPE  EVENT_ARRAY_ERAB_SERVICE_TYPE         | Generated for the procedure to request and receive CGI measurements for ANR PCI                 Conflict Detection.                                                                                                                                      |
| INTERNAL_EVENT_MEAS_CONFIG_PERIODICAL_NR     | EVENT_PARAM_MEASUREMENT_ID  EVENT_PARAM_MEAS_OBJECT_ID  EVENT_PARAM_MEAS_REQUESTER  EVENT_PARAM_PERIODICAL_PURPOSE  EVENT_PARAM_ARFCN  EVENT_PARAM_MAX_REPORT_CELLS  EVENT_PARAM_REPORT_INTERVAL  EVENT_PARAM_REPORT_AMOUNT  EVENT_PARAM_EXT_MAX_MEASID  EVENT_PARAM_EXT_MAX_MEASID  EVENT_PARAM_INC_MON_EUTRA  EVENT_PARAM_UE_TRACE_ID | Triggered when a UE uses RRC Reconfiguration to report measurements on NR with                 Report Configuration of type Periodical.                                                                                                                  |
| INTERNAL_EVENT_NEIGHBGNB_CHANGE              | EVENT_PARAM_GLOBAL_RN_ID  EVENT_PARAM_GNB_NAME  EVENT_PARAM_ANR_CAUSE  EVENT_PARAM_ANR_OPERATION  EVENT_PARAM_ANR_RESULT                                                                                                                                                                                                                | Triggered when a neighbor gNodeB is automatically added, removed, or updated.                                                                                                                                                                            |
| INTERNAL_PROC_HO_EXEC_S1_OUT                 |                                                                                                                                                                                                                                                                                                                                         | Can be used to observe the performance of LTE-to-NR standalone relations.                                                                                                                                                                                |
| INTERNAL_PROC_HO_PREP_S1_OUT                 |                                                                                                                                                                                                                                                                                                                                         | Can be used to observe the performance of LTE-to-NR standalone relations.                                                                                                                                                                                |
| INTERNAL_EVENT_NEIGHBGNB_CHANGE              |                                                                                                                                                                                                                                                                                                                                         | Triggered when a neighbor gNodeB is automatically added, removed, or updated.                                                                                                                                                                            |
| INTERNAL_EVENT_NR_PCI_CONFLICT_SUSPECTED     | EVENT_PARAM_NEIGHBOR_PCI  EVENT_PARAM_NEIGHBOR_NCGI                                                                                                                                                                                                                                                                                     | Triggered if a source cell finds an NR cell where PCI conflict is suspected if the                   RRC SCGFailureInformationNR message is received from the UE.                                                                                        |

# 7 Activate Automated Neighbor Relations

To use the feature, it must be activated following the usual feature activation

procedure.

Prerequisites

- The license key is installed in the node.
- CCTR is active for at least one week before this procedure to collect enough troubleshooting data.

UEs that are capable of the following are available in the network:

- Measuring on frequencies to be used for mobility to GERAN, UTRAN and to other LTE A UE is never ordered to perform ANR-specific measurements on more than one LTE frequency other than the frequency of the serving cell, and never more than one IRAT frequency. For each such frequency there must be a sufficient number of UEs capable of measuring. These ANR-specific measurements are limited in time and number of reports, whatever comes first.
- Using measurement gap for reading SC of UTRAN, BSIC of GERAN, and for PCI on other LTE frequencies Alternatively, the UE can read those cell identities without using measurement gap.
- Reading and reporting CGI of E-UTRAN cells, UTRAN cells and GERAN cells, using long DRX cycle or autonomous gap
- Reading and reporting RAC and LAC of UTRAN cells, using long DRX cycle. For RAC of GERAN cells
- Reading and reporting NCGI for NR SA cells using DRX

Steps

1. Set the FeatureState.featureState attribute to ACTIVATED in the FeatureState=CXC4010620 MO instance.

After This Task

Keep CCTR active for at least one week after this procedure for continued collection of troubleshooting data.

# 8 Deactivate Automated Neighbor Relations

If the feature is no longer needed, it can be deactivated following the usual

feature deactivation procedure. It must also be deactivated before the activation of any

conflicting feature.

Prerequisites

CCTR is active for at least one week before this procedure to collect enough troubleshooting data.

Steps

1. Set the FeatureState.featureState attribute to DEACTIVATED in the FeatureState=CXC4010620 MO instance.

After This Task

Keep CCTR active for at least one week after this procedure for continued collection of troubleshooting data.

# 9 Engineering Guidelines for Automated Neighbor Relations

The Automated Neighbor Relations needs to be configured for optimal

operation.

Exclude Weak Neighbor

Adjust the RSRP threshold

(AnrFunctionEUtran.cellAddRsrpThresholdEutran) for a cell to

be added automatically as a neighbor. It avoids adding neighbors that are normally

too weak. It is a risk that the number of neighbors get too high if the

AnrFunctionEUtran.cellAddRsrpThresholdEutran attribute is

kept at the default value.

AnrFunctionEUtran.cellAddRsrpThresholdEutran has a default

value of -144dB and needs to be set to about the same value as

ReportConfigA5Anr.a5Threshold2Rsrp.

AnrFunctionEUtran.cellAddRsrqThresholdEutran also needs to be

set to about the same value as

ReportConfigA5Anr.a5Threshold2Rsrq.

## 9.1 Automated Neighbor Relations MO Naming Conventions

Table 17   MO Naming Conventions

| Parameter                                        | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
|--------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| externalENodeBFunctionId                         | The Automated Neighbor Relations feature constructs the RDN of the MO as                 follows:  [ <MCC> ][ <MNC> ]-[ <eNBId> ]  Example:   If MCC=125, MNC=46 , and eNBId=10243 , then                   externalENodeBFunctionId will be                   12546-10243.                                                                                                                                                                                                                                                                                                                                                                 |
| termPointToENBId(1)                              | The Automated Neighbor Relations feature constructs the RDN of the MO as                 follows:  [ <MCC> ][ <MNC> ]-[ <eNBId> ]  Example:   If MCC=125, MNC=46 , and eNBId=10243, then                   termPointToENBId will be 12546-10243.                                                                                                                                                                                                                                                                                                                                                                                            |
| externalEUtranCellFDDId  externalEUtranCellTDDId | The Automated Neighbor Relations feature constructs the RDN of the MO as                 follows:  [ <MCC> ][ <MNC> ]-[ <eNBId> ]-[ <localCellId> ]  Example:   If MCC=125, MNC=46 , eNBId=10243 , and                   localCellId=30, then                   externalEUtranCellFDDId will be                   12546-10243-30.  Exists for MO classes:  ExternalEUtranCellFDD.ExternalEUtranCellFDDId     ExternalEUtranCellTDD.ExternalEUtranCellTDDId                                                                                                                                                                                  |
| eUtranCellRelationId                             | The Automated Neighbor Relations feature constructs the RDN of the MO as                 follows:  [ <MCC> ][ <MNC> ]-[ <eNBId> ]-[ <LocalCellId> ], where localCellId applies to the                 case where the cell is in another RBS. If both cells are in the same RBS,                   cellId applies. That is, the                   eUtranCellRelationId corresponds to CGI, which refers to the                 target cell. ,                     Example:   If the target cell has MCC=125, MNC=46eNBId=10243 , and localCellId=30 ,, then                   eUtranCellRelationId will be                   12546-10243-30. |
| externalUtranCellFDDId  externalUtranCellTDDId   | The Automated Neighbor Relations feature constructs the RDN of the MO as                 follows:  [ <MCC> ][ <MNC> ]-[ RNC-ID ]-[ <cId> ]  Example:   If MCC=125, MNC=46 , and rncId=1024 and                   cId=30, then externalUtranCellFDDId will                 be 12546-1024-30.  Bits 1–6 of cellIdentity is cId and bits                 17–28 of cellIdentity is rncId.  Exists for MO classes:  ExternalUtranCellFDD.externalUtranCellFDDId     ExternalUtranCellTDD.externalUtranCellTDDId                                                                                                                                  |
| utranCellRelationId                              | The Automated Neighbor Relations feature constructs the RDN of the MO as                 follows:  [ <MCC> ][ <MNC> ]-[ RNC-ID ]-[ <cId> ]  Example:   If the target cell has MCC=125, MNC=46 ,                   rncId=1024 and cId=30 , then                   utranCellRelationId will be                 12546-1024-30.  Bits 1–6 of cellIdentity is cId and bits                 17–28 of cellIdentity is rncId.                                                                                                                                                                                                                       |
| externalGeranCellId                              | The Automated Neighbor Relations feature constructs the RDN of the MO as                 follows:  [ <MCC> ][ <MNC> ]-[ <lac> ]-[ <cellIdentity> ]  Example:   If MCC=125, MNC=46 , lac=10243 , and                   cellIdentity=30 , then externalGeranCellId                 will be 12546-10243-30.                                                                                                                                                                                                                                                                                                                                    |
| geranCellRelationId                              | The Automated Neighbor Relations feature constructs the RDN of the MO as                 follows:  [ <MCC> ][ <MNC> ]-[ <lac> ]-[ <cellIdentity> ]  Example:   If the target cell has MCC=125, MNC=46                   ,lac=10243 , and cellIdentity=30 , then                   geranCellRelationId will be                 12546-10243-30.                                                                                                                                                                                                                                                                                               |
| externalGUtranCellId                             | The Automated Neighbor Relations feature constructs the RDN of the MO as                 follows:  [ <MCC for gNodeB> ][ <MNC for gNodeB> ]-[ leading 0s ( length : 32- gNodeBIdLength ) ][ < gNBId > ]-[ <localCellId> ]  Example:   If MCC=123, MNC=45, Node_MCC=125, Node_MNC=46 ,                   gNBId=10243 , gNodeBIdLength=22 , and                   localCellId=30 , then externalGUtranCellId                 will be 12546-000000000010243-30.  The Node_MCC&Node_MNC is used for RDN                                                                                                                                         |
| gUtranCellRelationId                             | The Automated Neighbor Relations feature constructs the RDN of the MO as                 follows:  [ <MCC for gNodeB> ][ <MNC for gNodeB> ]-[ leading 0s ( length : 32- gNodeBIdLength ) ][ < gNBId > ]-[ <localCellId> ]  Example:   If the target cell has MCC=123, MNC=45, Node_MCC=125, Node_MNC=46 gNBId=10243 , gNodeBIdLength=22 , and                   localCellId=30 , then gUtranCellRelationId                 will be 12546-000000000010243-30.  The Node_MCC&Node_MNC is used for RDN                                                                                                                                         |
| externalGNodeBFunctionId                         | The Automated Neighbor Relations feature constructs the RDN of the MO as                 follows:  [ <MCC> ][ <MNC> ]-[ leading 0s ( length : 32- gNodeBIdLength ) ][ <gNBId> ]  Example:   If the target cell has MCC=125, MNC=46 ,                   gNBId=10243 , and gNodeBIdLength=22 ,                 then externalGNodeBFunctionId will be                   12546-000000000010243.                                                                                                                                                                                                                                                 |
| termPointToGNBId                                 | The Automated Neighbor Relations feature constructs the RDN of the MO as                 follows:  [ <MCC> ][ <MNC> ]-[ leading 0s ( length : 32- gNodeBIdLength ) ][ <gNBId> ]  Example:   If the target cell has Node_MCC=125, Node_MNC=46 ,                   gNBId=10243, and gNodeBIdLength=22 ,                 then termPointToGNBId will be                   12546-000000000010243.                                                                                                                                                                                                                                                |

(1)

Cell-Defined Primary PLMN ID for Shared LTE RAN (MORAN on Single Baseband

configuration) increased the cardinality for the

termPointToENB MO to 3. For further details, see

Configure X2-C Connections for MORAN on Single Baseband in Shared LTE RAN.

## 9.2 O&amp;M Information

Information about configuration activities for ANR can be found

in ANR Function.

The OSS shows all ANR-controlled MOs that are neighbor RBSs, neighbor cells, neighbor cell

relations, and X2 terminations.

The MOs can be sorted by the following conditions:

- Created or not created by ANR
- Deleted or not deleted by ANR
- Neighbor relation exists (for neighboring cells)

It is possible to reach the log view for an MO by marking it in

the ANR object view.

## 9.3 Change Global eNodeB ID

There is no automatic propagation of the change of the

ENodeBFunction.eNBId and ENodeBFunction.eNodeBPlmnId

attributes to neighboring eNodeBs. Therefore, as an example, the

ENodeBFunction.eNBId or ENodeBFunction.eNodeBPlmnId

attribute for eNodeB A is updated as follows:

Steps

1. Deactivate the Automated Neighbor Relations feature in eNodeB A and all neighbors of eNodeB A by setting featureState, AnrFunctionEUtran.anrInterFreqState, and AnrFunctionEUtran.anrIntraFreqState to DEACTIVATED.
2. Lock all TermPointToENB MOs in eNodeB A.
    1. If the changing of the eNodeB ID is done as part of an eNodeB reconfiguration that can affect radio conditions, remove all external eNodeB functions in eNodeB A. This includes all children and possible referring EUtranCellRelation MOs. Note: An eNodeB reconfiguration that can affect radio configurations is, for example, the changing of the cell range or cell frequencies. With these changes, some neighbor information might not be needed anymore if the local cells are too far away.
3. Remove the ExternalENodeBFunction MO representing eNodeB A from all neighboring eNodeBs. This includes all children and possible referring EUtranCellRelation MOs. Note: The TermPointToENB MO must be locked before removing it.
4. Change the ENodeBFunction.eNBId or the ENodeBFunction.eNodeBPlmnId attribute, or both in eNodeB A.
5. Restart eNodeB A.
6. Unlock all TermPointToENB MOs in eNodeB A.
7. Restore the settings of the Automated Neighbor Relations feature in eNodeB A and neighboring eNodeBs and let the feature or the X2 interface recreate the relevant children of EutraNetwork and EUtranCellRelation.

## 9.4 Update ID Change of Neighboring UTRAN or GERAN cell

There is no automatic propagation for the ID change in a UTRAN or GERAN cell to neighboring

eNodeBs. Therefore, the external UTRAN or GERAN cell information must be updated in one of the

following ways:

- Deletion of external UTRAN or GERAN cells and cell relations to let ANR recreate them.
- Manual update of external UTRAN or GERAN cell information.

Deletion is recommended when the changed information is related to CGI due to the ANR naming

convention. ANR is not able to add new cells with reused CGI information otherwise.

CGI related information for UTRAN is the ExternalUtranCellFDD.cellIdentity

and ExternalUtranCellFDD.plmniIdentity attributes, or

ExternalUtranCellTDD.cellIdentity and

ExternalUtranCellTDD.plmniIdentity attributes.

For GERAN, the CGI related information is in

ExternalGeranCell.cellIdentity,

ExternalGeranCell.plmnIdentity, and

ExternalGeranCell.lac attributes.

To manually update the UTRAN cell information, configure the following attributes:

- ExternalUtranCellFDD.cellIdentity
- ExternalUtranCellFDD.lac
- ExternalUtranCellFDD.rac
- ExternalUtranCellFDD.plmnIdentity
- ExternalUtranCellTDD.cellIdentity
- ExternalUtranCellTDD.lac
- ExternalUtranCellTDD.rac
- ExternalUtranCellTDD.plmnIdentity

To manually update the GERAN cell information, configure the following attributes:

- ExternalGeranCell.cellIdentity
- ExternalGeranCell.bcc
- ExternalGeranCell.ncc
- ExternalGeranCell.lac
- ExternalGeranCell.rac
- ExternalGeranCell.plmnIdentity

## 9.5 Disabling ANR Initiated Measurements Based on ASGH

If the UE is in a subscriber group, all measurements triggered by the Automated

Neighbor Relations feature can be disabled.

For disabling the ANR initiated measurements, the

SubscriberGroupProfile.featuresToDisableMeas attribute must

include the value that corresponds the Automated Neighbor Relations feature name.

With the disabled measurements, the downlink and uplink throughput improves for the UE.

However, this can result in other performance changes. The effectiveness of the cell

relation check decreases because fewer measurement reports can be used to analyze cell

relations. With the disabled measurements, the successful handover rate decreases while

detecting or living with PCI conflicts because the eNodeB cannot detect unknown

neighboring or target cell.

If the periodic inter-frequency measurement is also enabled for the Cell Sleep Mode

feature, the measurements cannot be disabled for the Automated Neighbor Relations and

the Automatic SCell Management features for inactive UEs. The reason is that all three

features use the same inter-frequency periodic measurement function for inactive UEs.

Disabling ANR-initiated measurements is recommended only for subscriber groups with

limited number of UEs.

## 9.6 Configuration of Selection of Preferred Neighbor Cells in PCI Conflicts

The selection of preferred neighbor cells for handover in PCI confusion can be done

automatically and manually.

Several methods are available for the selection of a preferred handover target cell in

PCI confusion.

The

AnrFunction.pciConflictCellSelection attribute can be used to

configure which method is used. For the possible configurations of

this attribute and the impacts of these configurations, see Table 18.

Table 18   Configuration Options for Preferred Neighbor Cell Selection

Method

| Attribute Value               | Result                                                                                                                                                                                                                                              |
|-------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| OFF                           | The                                     selection of preferred neighbor cells in PCI                                     conflicts is not enabled.                                                                                                  |
| MANUAL_SELECT                 | The preferred handover target can be selected manually through                                     the EUtranCellRelation.pciConflictPrefCellMan                                     attribute.                                                     |
| MANUAL_SELECT_AND_AUTO_DETECT | A handover target is                                     suggested                                     automatically based on previous CGI reports, and the preferred                                     handover target can be selected manually. |
| AUTO_SELECT_OVER_MANUAL       | The preferred handover target is selected automatically based on                                     previous CGI reports.                                                                                                                          |

The following configurations are recommended based on use cases of

the selection of preferred neighbor cells in

PCI conflicts

function:

- For deployments with constant changes in traffic pattern, the following configuration is recommended: The value of the AnrFunction.pciConflictCellSelection attribute is recommended to be set to AUTO\_SELECT\_OVER\_MANUAL. The AnrFunction.cgiReportCountEval and the AnrFunction.pciConflictSelectThreshPerc attributes are recommended to be reconfigured if too many nomination changes are observed.
- For deployments with unknown traffic patters, the following configuration is recommended: The value of the AnrFunction.pciConflictCellSelection attribute is recommended to be set to MANUAL\_SELECT\_AND\_AUTO\_DETECT. The EUtranCellRelation.pciConflictPreferredCellMan attribute is recommended to be configured using the automatic nomination for each cell relation as a reference. The EUtranCellRelation.pciConflictPreferredCellMan attribute is recommended to be reconfigured based on handover success rate KPIs.
- For deployments with known traffic patterns that are too complex for automatic selection, the following configuration is recommended: The value of the AnrFunction.pciConflictCellSelection attribute is recommended to be set to MANUAL\_SELECT. The EUtranCellRelation.pciConflictPreferredCellMan attribute is recommended to be configured for each cell relation based on traffic pattern information.

## 9.7 Prevention of Configuration Reset of the ExternalGNodeBFunction.dirDataPathAvail Attribute

If the ExternalGNodeBFunction MO instance is removed and recreated by

the Automated Neighbor Relations feature, the configuration of the

ExternalGNodeBFunction.dirDataPathAvail is reset and direct

packet forwarding is enabled. The operation of the following features can be

affected:

- Automated Neighbor Relations
- X2 Configuration EN-DC
- Incoming NR IRAT Handover

To keep the configuration of the

ExternalGNodeBFunction.dirDataPathAvail MO attribute, the removal

of the ExternalGNodeBFunction MO instance can be prevented, by

setting the ExternalGUtranCell.isRemoveAllowed attribute to

false.

# Appendix A: Feature Change History

This section lists changes that affected this feature and the impact it had on the

network.

## Appendix A.a: Living with PCI Conflicts

| Access Type:       | LTE                                                                                              |
|--------------------|--------------------------------------------------------------------------------------------------|
| Hardware Platform: | All                                                                                              |
| Licensing:         | Automated Neighbor Relations(FDD), FAJ 121 0497  Automated Neighbor Relations(TDD), FAJ 221 0031 |

The function measures the CGI before every handover to make sure that relations in PCI

conflicts are handled appropriately. It makes sure that:

- All handovers are done to the correct target cell.
- The ANR removal function resolves PCI conflicts by using the extra CGI to remove the relation that is not used.
- The Problematic Cell Detection function uses the extra CGI to detect and bar relations with bad handover success rate.

Capacity and Performance

Minor impact on subscriber capacity due to slightly increased CPU load.

Operation

If the feature PCI Conflict Reporting is active, then any detected PCI conflict is reported

according to this feature.

A new PM counter and a new MO attribute have been added. Existing PM counters have been

updated.

Table 19   New MO attribute

| MO class    | Attribute name              | Attribute description                                                                                               |
|-------------|-----------------------------|---------------------------------------------------------------------------------------------------------------------|
| AnrFunction | pciConflictMobilityEcgiMeas | The attribute controls if ECGI measurements are requested before handover when a PCI          conflict is detected. |

Table 20   New PM counters

| MO class                          | PM Counter           |                                                                                                                     |
|-----------------------------------|----------------------|---------------------------------------------------------------------------------------------------------------------|
| EUtranCellFDD   and EUtranCellTDD | pmDrxMeasSuccCgiQci1 | The total number of successful CGI measurements with DRX for ANR PCI Conflict when the UE          has QCI1 bearer. |

Table 21   Updated PM counters

| PM counter                    | Description                                                                   |
|-------------------------------|-------------------------------------------------------------------------------|
| pmRrcConnReconfDrxSuccQci1    | Reconfiguration to CGI read with DRX for ANR PCI Conflict Detection is added. |
| pmRrcConnReconfDrxRestoreQci1 | Reconfiguration to CGI read with DRX for ANR PCI Conflict Detection is added. |

Table 22   Updated PM events

| PM event                                  | Description                                                                                                  |
|-------------------------------------------|--------------------------------------------------------------------------------------------------------------|
| INTERNAL_PROC_ANR_PCI_CONFLICT_CGI_REPORT | Generated for the procedure to request and receive CGI measurements for ANR PCI Conflict          Detection. |

Interfaces

No impact.

Other Network Elements

## Appendix A.b: PCI Conflict Detection Enhancement

| Access Type:       | LTE                                                                                              |
|--------------------|--------------------------------------------------------------------------------------------------|
| Hardware Platform: | All                                                                                              |
| Licensing:         | Automated Neighbor Relations(FDD), FAJ 121 0497  Automated Neighbor Relations(TDD), FAJ 221 0031 |

The enhancement allows the detection of PCI confusion in the case of cell relations with a low

handover success rate. It uses the Problematic Cell Detection function to find relations with

hoSuccLevel equal to MEDIUM or LOW.

Capacity and Performance

Minor impact on subscriber capacity due to the slightly increased CPU load.

Operation

With enhanced PCI conflict detection, more PCI conflicts might be found. This might have an

impact on the PM statistics for PCI conflicts. Impact on KPIs depends on the number of PCI

conflicts in the network.

If the feature PCI Conflict Reporting is active, then any detected PCI conflict is reported

according to this feature.

New MO class, MO attributes, PM event and PM counters are available. Existing PM counters have

been updated.

Table 23   New MO classes

| MO class                 | Description                                                                                                                                                                                    |
|--------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| AnrPciConflictDrxProfile | Contains DRX profiles and DRX parameters to map with ANR PCI conflict CGI reading. The          RDN for this MO type is AnrPciConflictDrxProfile=1. This MO is created          by the system. |

Table 24   New MO attributes

| MO class                 | Attribute name                   | Attribute description                                                                                                                                                                                                                                                                                                  |
|--------------------------|----------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| AnrPciConflictDrxProfile | anrPciConflictDrxProfileId       | The value component of the RDN.                                                                                                                                                                                                                                                                                        |
| AnrPciConflictDrxProfile | anrPciConflictOnDurationTimer    | The number of consecutive PDCCH subframes at DRX Cycle initialization. The attribute is          only used to read CGI for ANR PCI conflict cell. TS36.331 ch. 6.3.2, RRC parameter           onDurationTimer.                                                                                                         |
| AnrPciConflictDrxProfile | anrPciConflictDrxInactivityTimer | The attribute indicates the number of consecutive PDCCH subframes after successfully          decoding a PDCCH that indicates an initial UL or DL user data transmission for this UE. It          is only used to read CGI for ANR PCI conflict cell. TS36.331 ch. 6.3.2, RRC parameter           drx-InactivityTimer. |
| AnrPciConflictDrxProfile | anrPciConflictLongDrxCycle       | The attribute indicates the number of subframes. It is only used to read CGI for ANR PCI          conflict.                                                                                                                                                                                                            |
| AnrFunction              | pciConflictDetectionEcgiMeas     | The attribute controls if ECGI measurements are requested in order to detect PCI          conflicts.                                                                                                                                                                                                                   |

Table 25   New counters

| MO class                          | PM Counter                        |                                                                                                                  |
|-----------------------------------|-----------------------------------|------------------------------------------------------------------------------------------------------------------|
| EUtranCellFDD   and EUtranCellTDD | pmAnrPciConflictMeasFailEutranCgi | The total number of CGI measurement failures for ANR PCI Conflict due to lack of UE          capability.         |
| EUtranCellFDD   and EUtranCellTDD | pmAnrPciConflictMeasSuccEutranCgi | The total number of successful CGI measurements for ANR PCI Conflict.                                            |
| EUtranCellFDD   and EUtranCellTDD | pmDrxMeasSuccCgi                  | The total number of successful CGI measurement with DRX for ANR PCI Conflict.                                    |
| EUtranCellFDD   and EUtranCellTDD | pmAgMeasSuccCgi                   | The total number of successful CGI measurement with AG for ANR PCI Conflict.                                     |
| EUtranCellFDD   and EUtranCellTDD | pmAgMeasSuccCgiQci1               | The total number of successful CGI measurement with AG for ANR PCI Conflict when the         UE has QCI1 bearer. |

Table 26   Updated PM counters

| PM counter                   | Description                                                                   |
|------------------------------|-------------------------------------------------------------------------------|
| pmRrcConnReconfAgSuccQci1    | Reconfiguration to CGI read with AG for ANR PCI Conflict Detection is added.  |
| pmRrcConnReconfAgSuccCgi     | Reconfiguration to CGI read with AG for ANR PCI Conflict Detection is added.  |
| pmRrcConnReconfAgRestoreQci1 | Reconfiguration to CGI read with AG for ANR PCI Conflict Detection is added.  |
| pmRrcConnReconfDrxSucc       | Reconfiguration to CGI read with DRX for ANR PCI Conflict Detection is added. |
| pmRrcConnReconfDrxSuccCgi    | Reconfiguration to CGI read with DRX for ANR PCI Conflict Detection is added. |
| pmRrcConnReconfDrxFail       | Reconfiguration to CGI read with DRX for ANR PCI Conflict Detection is added. |

Table 27   New PM events

| PM event                                  | Description                                                                                                 |
|-------------------------------------------|-------------------------------------------------------------------------------------------------------------|
| INTERNAL_PROC_ANR_PCI_CONFLICT_CGI_REPORT | Generated for the procedure to request and receive CGI measurements for ANR PCI         Conflict Detection. |

Interfaces

No impact.

Other Network Elements

No impact.

## Appendix A.c: 19.Q2: Automated Neighbor Relations Acquiring Additional PLMN IDs

This enhancement enables the Automated Neighbor Relations feature to acquire

additional PLMN IDs on external cells even if autonomous gap is configured for ECGI

measurement in shared RAN configuration.

| Feature Name:           | Automated Neighbor Relations       |
|-------------------------|------------------------------------|
| Feature Identity:       | FAJ 121 0497                       |
| Value Package Name:     | Self-Organizing Networks           |
| Value Package Identity: | FAJ 801 0435                       |
| Node Type:              | Baseband Radio Node  DU Radio Node |
| Access Type:            | LTE                                |

Capacity and Performance

The enhancement improves retainability. The eNodeB is able to get additional PLMN IDs

even if autonomous gap is configured for ECGI measurements. This way, UEs with

additional PLMN can be moved to external cells in a shared RAN configuration.

The feature enhancement has a minor negative impact on UE throughput. This occurs

when a UE performs ECGI measurements with DRX on an external cell.

The enhancement introduces a minor increase in the number of RRC connection

reconfigurations in the network to trigger extra ECGIs.

Operation

To activate the function, set the

AnrFunctionEUtran.acquirePlmnIdListEnabled attribute to

true.

The feature enhancement introduces the following parameters:

- AnrFunctionEUtran.acquirePlmnIdListEnabled
- ExternalEUtranCellFDD.plmnListVerifiedByX2OrCgi
- ExternalEUtranCellTDD.plmnListVerifiedByX2OrCgi

The following counters are introduced along with the feature enhancement:

- EUtranCellFDD.pmCgiMeasFailAnrPciConflict
- EUtranCellTDD.pmCgiMeasFailAnrPciConflict
- EUtranCellFDD.pmCgiMeasSuccAnrPciConflict
- EUtranCellTDD.pmCgiMeasSuccAnrPciConflict
- EUtranCellFDD.pmCgiMeasSuccDrx
- EUtranCellTDD.pmCgiMeasSuccDrx
- EUtranCellFDD.pmCgiMeasSuccAg
- EUtranCellTDD.pmCgiMeasSuccAg
- EUtranCellFDD.pmCgiMeasSuccDrxQci1
- EUtranCellTDD.pmCgiMeasSuccDrxQci1
- EUtranCellFDD.pmCgiMeasSuccAgQci1
- EUtranCellTDD.pmCgiMeasSuccAgQci1

Interfaces

No impact.

Hardware

No impact.

Other Network Elements

This feature enhancement requires ENM version 19.1 or later.

## Appendix A.d: 20.Q3: Detection of Problematic GERAN Cells and Removal of Unused Neighbor Objects

This feature enhancement enables the detection and barring of GERAN cell relations

with low handover success rate. It also automatically removes unused GERAN neighbor cell

relations and external cells.

| Feature Name:           | Automated Neighbor Relations   |
|-------------------------|--------------------------------|
| Feature Identity:       | FAJ 121 0497                   |
| Value Package Name:     | Self-Organizing Networks       |
| Value Package Identity: | FAJ 801 0435                   |
| Node Type:              | Baseband Radio Node            |
| Access Type:            | LTE                            |

Benefits

- The ANR feature adds numerous cell relations. Relations are considered as problematic if they have low handover execution success rate. With the detection and barring of problematic GERAN cell relations, the following KPIs can improve: Mobility (Handover Success Rate) Retainability (ERAB Drop Rate and UE Context Drop Rate)
- The removal of unused GERAN neighbor cell relations reduces operating expenses. Without this cleanup, unused objects are kept and can prevent new objects from being created. This is particularly disadvantageous in networks that work in dense areas.

Capacity and Performance

No impact.

Operation

This feature enhancement introduces the following attributes for ANR detection of

problematic GERAN cells:

- AnrFunctionGeran.problematicCellPolicy
- GeranCellRelation.hoSuccLevel

The legacy AnrFunctionGeran.AnrStateGsm attribute is used for the

removal of unused GERAN neighbor objects.

With this feature enhancement, the following attributes can be used in GERAN:

- AnrFunction.probCellDetectLowHoSuccThres
- AnrFunction.probCellDetectLowHoSuccTime
- AnrFunction.probCellDetectMedHoSuccThres
- AnrFunction.probCellDetectMedHoSuccTime
- AnrFunction.removeNcellTime The test configuration value "0" is no longer available for this attribute.
- AnrFunction.removeNenbTime The test configuration value "0" is no longer available for this attribute.
- AnrFunction.removeNrelTime The test configuration value "0" is no longer available for this attribute.
- GeranCellRelation.mobilityStatus

With this feature enhancement, the following PM counters can be used in GERAN:

- pmAnrHoSuccLevelLow Stepped when AnrFunctionGeran.problematicCellPolicy is set to AUTO\_DETECT or AUTO\_DETECT\_AND\_BAR, and GeranCellRelation.hoSuccLevel is set to LOW.
- pmAnrHoSuccLevelMedium Stepped when AnrFunctionGeran.problematicCellPolicy is set to AUTO\_DETECT or AUTO\_DETECT\_AND\_BAR, and GeranCellRelation.hoSuccLevel is set to MEDIUM.
- pmHoPreventedProblematicCell Stepped when traffic measurement reports (A3, A5, or B2) identify the best handover target cell that is marked as problematic.

This feature enhancement modifies the following PM event:

- INTERNAL\_EVENT\_ANR\_HO\_LEVEL\_CHANGED\_GERAN With this PM event, operators can observe changes in the status of GeranCellRelation.hoSuccLevel.

Hardware

No special hardware requirements.

Interfaces

No impact.

Other Network Elements

ENM version 20.1 or later is required for this feature

enhancement.

## Appendix A.e: 20.Q2: ANR LTE to NR for EN-DC

This enhancement enables the eNodeB to find and create neighbor cell relations  from

LTE to NR EN-DC automatically.

| Feature Name:           | Automated Neighbor Relations   |
|-------------------------|--------------------------------|
| Feature Identity:       | FAJ 121 0497                   |
| Value Package Name:     | Self-Organizing Networks       |
| Value Package Identity: | FAJ 801 0435                   |
| Node Type:              | Baseband Radio Node            |
| Access Type:            | LTE                            |

This enhancement enables the eNodeB to find and create neighbor cell relations from LTE

to NR EN-DC automatically when the UE reports unknown NR cell during B1 measurement. It

also automatically maintains neighbor relations by removing the unused neighbor objects

from LTE to NR.

Benefits

![Image](../images/76_22104-LZA7016014_1Uen.KK/additional_3_CP.png)

![Image](../images/76_22104-LZA7016014_1Uen.KK/additional_3_CP.png)

The benefits of this enhancement are the following:

- Automatic neighbor creation from LTE to NR EN-DC.
- Automatic removal of unnecessary neighbor relations.

Capacity and Performance

No impact.

Operation

To activate the Automated Neighbor Relations feature from LTE to NR on node level,

the AnrFunctionNR.anrStateNR must be set to

ACTIVATE. The GUtranFreqRelation.anrMeasOn

must be set to true to allow NCGI measurement on frequency

level.

After the feature activation, the eNodeB becomes able to automatically find and

create neighbor cell relations from LTE to NR EN-DC. This enhancement also enables

to remove the unnecessary neighbor objects from LTE to NR.

Interfaces

The RRC interface has the following impacts:

- New IE is introduced in LTE-capable UEs to indicate whether the UE supports CGI reading towards NR cell.
- New IEs are also introduced in MeasObjectNR and ReportConfigInterRAT to configure NCGI reporting for UE.
- In measurement report, a new IE is introduced to show NCGI information.

Hardware

No special hardware requirements.

Other Network Elements

To fully benefit from the change, the node requires support from the following

network elements:

- ENM This enhancement requires ENM version 20.05 or later to be used.
- UE The UE must support 3GPP TS 36.331 15.3.0 on RRC and support reporting CGI for NR on LTE cell.

## Appendix A.f: 20.Q4: Automatic Maintenance of LTE to NR EN-DC Neighbor Relations

This feature enhancement provides the possibility of automatically removing neighbor

objects that are unused. It also ensures that EN-DC

neighbor relations and the configuration data of the NR neighbor objects are kept

up-to-date.

| Feature Name:           | Automated Neighbor Relations   |
|-------------------------|--------------------------------|
| Feature Identity:       | FAJ 121 0497                   |
| Value Package Name:     | Self-Organizing Networks       |
| Value Package Identity: | FAJ 801 0435                   |
| Node Type:              | Baseband Radio Node            |
| Access Type:            | LTE                            |

Benefits

This enhancement provides the possibility of automatically removing the following

unused NR neighbor objects:

- ExternalGUtranCell
- ExternalGNodeBFunction
- TermPointToGNB

This way, there is no need for manual configuration, which reduces maintenance cost.

EN-DC neighbor relations and the configuration data of

ExternalGUtranCell neighbor objects are also kept up-to-date

through the X2 interface. The number of used cells is  also optimized.

Capacity and Performance

No impact.

Operation

The AnrFunctionNR.anrStateNR attribute must be set to

ACTIVATED to enable the removal of unused NR neighbor

objects.

The automated removal of neighbor objects can be controlled by configuring the

following parameters:

- AnrFunction.removeNcellTime This parameter controls the duration of keeping an external cell without relation before it is removed.
- AnrFunction.removeNgnbTime This parameter controls the duration of keeping an external gNodeB without neighbor cells before it is removed.

The ExternalGUtranCell MO is automatically removed if the removal

of the MO is allowed and if it remains unused during the configured time.

The ExternalGNodeBFunction MO is removed if this MO remains unused

during a configurable period.

The TermPointToGNB MO is removed when the last

ExternalGUtranCell MO is removed under the

ExternalGNodeBFunction MO.

- The ExternalGUtranCell.isRemoveAllowed attribute is set to TRUE.
- The ExternalGUtranCell MO is unused in any cell relations for the time set in AnrFunction.removeNcellTime.

The following PM events show if NR neighbor objects are automatically removed:

- INTERNAL\_EVENT\_NEIGHBCELL\_CHANGE
- INTERNAL\_EVENT\_NEIGHBGNB\_CHANGE

The benefits of this feature enhancement can be observed through the following legacy

PM events:

- X2\_ENDC\_CONFIGURATION\_UPDATE
- X2\_ENDC\_CONFIGURATION\_UPDATE\_ACKNOWLEDGE
- X2\_ENDC\_CONFIGURATION\_UPDATE\_FAILURE

Interfaces

This change affects the following interface:

- X2AP The Cell Assistance Information information element is introduced in the X2AP: EN-DC CONFIGURATION UPDATE message to request information about the NR cell. NR cell information is retrieved through this information element to keep the NR cell information up-to-date in the ExternalGUtranCell MO when the eNodeB creates this MO for the gNodeB by the NCGI measurement. The List of Served NR Cells information element is supported in the X2AP: EN-DC CONFIGURATION UPDATE ACKNOWLEDGE message to include information about the requested NR cell.

Hardware

No specific hardware requirements.

Other Network Elements

ENM version 20.3 or later is required for this feature

enhancement.

## Appendix A.g: 21.Q1: Detection and Removal of Obsolete External E-UTRAN Neighbor Objects

The enhancement enables the automatic detection and removal of obsolete, external

E-UTRAN neighbor cells, neighbor cell relations, and corresponding neighbor MOs with zero

outgoing S1 handover preparation success rate, caused by the PCI being kept when swapping

nodes, and by doing no manual activity to clean up obsolete neighbor-related

MOs.

| Feature Name:           | Automated Neighbor Relations   |
|-------------------------|--------------------------------|
| Feature Identity:       | FAJ 121 0497                   |
| Value Package Name:     | Self-Organizing Networks       |
| Value Package Identity: | FAJ 801 0435                   |
| Node Type:              | Baseband Radio Node            |
| Access Type:            | LTE                            |

Benefits

When swapping an external node, the same PCI is kept for the new node. This

enhancement can provide the following benefits:

- Neighbor cell lists can be cleaned up without manual activity.
- The degradation of the Mobility KPI is minimized.

Capacity and Performance

No impact.

Operation

The following attributes are introduced:

- AnrFunction.detectObsoleteExtCellsEnabled
- AnrFunction.s1HoPrepConsFailThres

The EVENT\_VALUE\_NODE\_SWAP value is added to the

EVENT\_PARAM\_ANR\_CAUSE event parameter in cases of the

following PM events:

- INTERNAL\_EVENT\_NEIGHBCELL\_CHANGE
- INTERNAL\_EVENT\_NEIGHBENB\_CHANGE
- INTERNAL\_EVENT\_NEIGHBREL\_REMOVE

The new value indicates if an external neighbor cell, cell relation, or MO is removed

because of the incorrect CGI value resulted by node swapping.

Interfaces

No impact.

Hardware

No special hardware requirements.

Other Network Elements

ENM version 21.1 or later is required for this feature enhancement.

## Appendix A.h: 21.Q2: Automated Neighbor Relations for Intra-Frequency NR Mobility for EN-DC

This enhancement enables the eNodeB to support the automatic detection and creation

of NR-to-NR neighbor cell relations by propagating NR neighbor information to the gNodeB

over the X2 link.

| Feature Name:           | Automated Neighbor Relations   |
|-------------------------|--------------------------------|
| Feature Identity:       | FAJ 121 0497                   |
| Value Package Name:     | Self-Organizing Networks       |
| Value Package Identity: | FAJ 801 0435                   |
| Node Type:              | Baseband Radio Node            |
| Access Type:            | LTE                            |

Benefits

If the enhancement is activated on the eNodeB, the eNodeB propagates NR neighbor

information to neighbor gNodeBs over the X2 link. This enables the eNodeB to support

the automatic detection and creation of NR-to-NR neighbor cell relations. For

information on related gNodeB configurations, see NR Automated Neighbor Relations.

Capacity and Performance

No impact.

Operation

The activation of the enhancement on the eNodeB has the following prerequisites:

- The Automated Neighbor Relations license must be active.
- At least one of the following attributes must be set to TRUE: The AnrFunctionNR.anrStateNR attribute can be used to enable NCGI-based ANR from LTE to NR on the node level. The ENodeBFunction.zzzTemporary74 attribute can be used to enable PCI-based ANR from LTE to NR on the node level.

Interfaces

This change affects the following interfaces:

- Uu The trackingAreaCode-r15 IE is introduced in the CGI-InfoNR-r15 IE of the Measurement Report message from the UE.
- X2 The NR Neighbor Information IE is introduced in the Served E-UTRA Cells to Add IE or the Served E-UTRA Cells to Modify IE in the EN-DC CONFIGURATION UPDATE message.

Hardware

No special hardware requirements.

Other Network Elements

ENM version 21.1 or later is required for this enhancement.

## Appendix A.i: 21.Q3: Support for Automated Neighbor Relations for Inter-Frequency NR Mobility for EN-DC

This enhancement enables the eNodeB to support automatic creation of inter-frequency

NR-to-NR neighbor cell relations by propagating NR neighbor information to the gNodeB

through the X2 link.

| Feature Name:           | Automated Neighbor Relations                 |
|-------------------------|----------------------------------------------|
| Feature Identity:       | FAJ 121 0497                                 |
| Value Package Name:     | Self-Organizing Networks                     |
| Value Package Identity: | FAJ 801 0435                                 |
| Node Type:              | Baseband Radio Node                          |
| Access Type:            | LTE                                          |
| Licensing               | Licensed feature. One license for each node. |

Summary and Benefits

This enhancement enables the automatic detection and creation of inter-frequency

neighbors from NR-to-NR for NSA mobility when NR neighbor information is propagated

from eNodeB to gNodeB over the X2 link.

Capacity and Performance

No impact.

Operation

The activation of the enhancement on the eNodeB requires that at least one of the

following attributes must be set to ACTIVE:

- The ANRFunctionNR.anrStateNR attribute can be used to enable NCGI-based ANR from LTE to NR on the node level.
- The ENodeBFunction.zzzTemporary74 attribute can be used to enable PCI-based ANR from LTE to NR on the node level.

Interfaces

No impact.

Hardware

No special hardware requirements.

Other Network Elements

ENM version 21.1 or later is required for this feature

enhancement.

## Appendix A.j: 21.Q4: EN-DC ANR Support for NR Cells Used in ESS with No SIB1

This feature enhancement enables the Automated Neighbor Relations feature to create

LTE-to-NR cell relations for EN-DC setup to NR cells used in ESS cell pairs without SIB1

transmission.

| Feature Name:           | Automated Neighbor Relations   |
|-------------------------|--------------------------------|
| Feature Identity:       | FAJ 121 0497                   |
| Value Package Name:     | Self-Organizing Networks       |
| Value Package Identity: | FAJ 801 0435                   |
| Node Type:              | Baseband Radio Node            |
| Access Type:            | LTE                            |

Summary and Benefits

With this feature enhancement, more LTE-to-NR cell relations can provide more

opportunities for EN-DC.

Capacity and Performance

No impact.

Operation

Table 28 shows the PM events that are

updated by this feature enhancement.

Table 28   Affected PM Events

| PM Event                         | Description                                                                                                                                                                                                                        |
|----------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| INTERNAL_EVENT_NEIGHBREL_ADD     | Triggered when a neighbor relation is created by the                                             EVENT_PARAM_NEIGHBREL_ADD_METHOD_NR                                         event value.                                          |
| INTERNAL_EVENT_NEIGHBCELL_CHANGE | Triggered when a neighbor cell is added, removed, or                                         updated.  Cause of PCI report on found NR cell in an ESS cell pair is                                         added to the event.     |
| INTERNAL_EVENT_NEIGHBREL_ADD     | Triggered when the neighbor cell relation is automatically                                         added.  Cause of PCI report on found NR cell in an ESS cell pair is                                         added to the event. |

The performance of this feature enhancement can be observed through the

EUtranCellFDD.pmAnrNeighbrelAdd and

EUtranCellTDD.pmAnrNeighbrelAdd PM counters.

The following EBS counters are updated:

- pmAnrNeighbrelAddNr
- pmAnrMeasSuccNrCgiNoSIB1

Hardware

No specific hardware requirements.

Interfaces

This feature enhancement introduces an IE for Ericsson Private Extension that

contains information about the neighbor NR cells that might not be possible to find

through NCGI measurements. This IE is introduced in the following messages sent over

the X2-C interface:

- X2AP X2 SETUP REQUEST
- X2AP X2 SETUP RESPONSE
- X2AP ENB CONFIGURATION UPDATE

Other Network Elements

It is recommended to use ENM version 21.4 or later to support the MOM changes introduced by this feature enhancement. If the Release Independence Manager application is used, the MOM changes are supported on earlier ENM versions also.

## Appendix A.k: 22.Q3: Automated Neighbor Relations for LTE to NR SA Mobility

This feature enhancement introduces the automatic creation and removal of NR

Standalone neighbor cell relations.

| Feature Name           | Automated Neighbor Relations   |
|------------------------|--------------------------------|
| Feature Identity       | FAJ 121 0497                   |
| Value Package Name     | Self-Organizing Networks       |
| Value Package Identity | FAJ 801 0435                   |
| Node Type              | Baseband Radio Node            |
| Access Type            | LTE                            |
| Impact at  Upgrade     | Optional                       |

Summary and Benefits

This feature enhancement reuses the Event B1 NR measurement process triggered by the

NR Coverage-Triggered NR Session Continuity feature. If an unknown NR cell is

reported to the eNodeB in the B1 NR measurement, the eNodeB instructs the UE to

perform NCGI measurements on that cell. Based on these measurements, LTE to NR

Standalone neighbor cell relations can be created automatically.

This feature enhancement has the following benefits:

- It increases mobility opportunities through the automatic creation of LTE to NR SA neighbor relations.
- It improves OPEX by reducing manual workload.

Capacity and Performance

The feature enhancement affects existing PM and EBS counters.

The following PM counters are expected to be stepped more:

- EUtranCellFDD.pmAnrNeighbrelAdd
- EUtranCellTDD.pmAnrNeighbrelAdd
- EUtranCellFDD.pmAnrNeighbrelRem
- EUtranCellTDD.pmAnrNeighbrelRem

The following EBS counters are affected:

- pmAnrNeighbrelAddNr
- pmAnrNeighbrelDelNr
- pmAnrMeasSuccNrCgi

Existing PM events are also affected:

- INTERNAL\_EVENT\_NEIGHBGNB\_CHANGE
- INTERNAL\_EVENT\_NEIGHBCELL\_CHANGE
- INTERNAL\_PROC\_ANR\_CGI\_REPORT
- INTERNAL\_EVENT\_NEIGHBREL\_ADD
- INTERNAL\_EVENT\_NEIGHBREL\_REMOVE

Operation

Existing attributes can be used to enable the creation of LTE to NR Standalone

relations to neighbor gNodeBs.

The following eNodeB configuration is required:

- The AnrFunctionNR.anrStateNR attribute is set to ACTIVATED, activating automated neighbor relations for NR on node level.
- The GUtranFreqRelation.connectedModeMobilityPrio attribute is not set to a negative value, enabling automated neighbor relations for NR Standalone frequencies.
- The GUtranFreqRelation.anrMeasOn attribute is set to true, activating NCGI measurements on the frequency level.

The following neighbor NR cell configuration is required:

- The NRCellDU.secondaryCellOnly attribute is set to false, allowing the SIB1 message to be broadcast.

This feature enhancement extends the conditions for the removal of unused neighbor

cell relations. Besides the EN-DC setup, preparations for handover attempts are also

considered for determining when a cell relation was last used.

Interfaces

The feature enhancement updates the description of the

reportCGI-NR-EN-DC-r15 IE on the Uu interface. The

reportCGI-NR-EN-DC-r15 IE is used to identify whether

EN-DC-configured UE supports the inter-RAT report CGI procedure towards NR

cells.

Hardware

No specific hardware requirements.

Other Network Elements

This feature enhancement requires the following network elements:

- The UE needs to support NR Standalone deployment.
- To be able to perform NCGI measurements, the UE needs to support one of the following IEs, which are described in 3GPP TS 36.331: reportCGI-NR-EN-DC-r15; if EN-DC is configured in the UE reportCGI-NR-NoEN-DC-r15; if EN-DC is not configured in the UE
- For the successful performance of NR IRAT handovers based on LTE-to-NR automated neighbor relations, support from the core network is also needed.

Related Information

Automated Neighbor Relations

NR Coverage-Triggered NR Session Continuity

5G Mobility and Traffic Management

Outgoing NR IRAT Handover

## Appendix A.l: 23.Q1: External Broadcast PLMN Support by Automated Neighbor Relations for LTE to NR SA Mobility

This feature enhancement allows multiple operators to share neighbor NR

cells.

| Feature Name           | Automated Neighbor Relations   |
|------------------------|--------------------------------|
| Feature Identity       | FAJ 121 0497                   |
| Value Package Name     | Self-Organizing Networks       |
| Value Package Identity | FAJ 801 0435                   |
| Node Type              | Baseband Radio Node            |
| Access Type            | LTE                            |
| Impact at Upgrade      | Optional                       |

Summary and Benefits

The feature enhancement introduces MOM structure support for multiple NR TACs and the

associated PLMN information in the NCGI report. Existing LTE-to-NR Standalone

relations are updated automatically based on the NCGI report in the B1 NR Standalone

measurement.

The handover evaluation process of the Outgoing NR IRAT Handover feature is updated

to support the MOM structure change and consider the available NR TACs and the

associated PLMNs in each cell.

The feature enhancement has the following benefits:

- The eNodeB MOM structure supports the NR TACs and PLMNs of additional operators that use the shared neighbor NR cell.
- Handover options increase for UEs because of the updated handover evaluation process of the Outgoing NR IRAT Handover feature.
- Additional LTE-to-NR Standalone relations are created automatically if the first PLMN does not support mobility and at least one additional PLMN does.

Capacity and Performance

The eNodeB can access the NR TAC and the PLMN information of the operators that share

the same NR cell. This results in the following changes:

- The number of LTE-to-NR Standalone relations increases.Note: This is only applicable if the first PLMN does not support mobility and at least one additional PLMN does.
- The number of successful NR IRAT handover attempts increases.

The introduced eNodeB MOM structure allows the creation of new LTE-to-NR Standalone

relations and handover to the additional PLMNs of the shared NR cell. The feature

enhancement can be observed with the following existing PM

counters:

- GUtranCellRelation.pmHoExeAtt
- GUtranCellRelation.pmHoExeSucc
- GUtranCellRelation.pmHoPrepAtt
- GUtranCellRelation.pmHoPrepSucc

The

behavior of the feature enhancement can be observed with the following

events:

- INTERNAL\_PROC\_HO\_EXEC\_S1\_OUT
- INTERNAL\_PROC\_HO\_PREP\_S1\_OUT
- INTERNAL\_EVENT\_NEIGHBGNB\_CHANGE

Operation

The NR Coverage-Triggered NR Session Continuity feature must be activated for the

feature enhancement to operate. This is a prerequisite for creating Automated

Neighbor Relations for LTE-to-NR Standalone neighbor cell relations.

The legacy feature enhancement for the automatic creation of LTE-to-NR Standalone

relations is a prerequisite for this feature enhancement to operate.

The feature enhancement is applicable for new LTE-to-NR Standalone relations.

Existing LTE-to-NR Standalone relations are automatically updated after activating

the feature enhancement. The update is requested by the UE and is based on the B1 NR

Standalone measurement.

The feature enhancement introduces the

GutranCellRelation.mobilityStatusNR attribute, which is

automatically created based on the NR TAC value and shows the mobility status

information of the neighbor NR cell.

The feature enhancement introduces the

ExternalGUtranCell.ExternalBroadcastPLMNInfo MO class for the

neighbor NR cell shared by multiple operators. The attributes in this MO

class                 contain the NR TAC and the associated PLMN information. The

ExternalBroadcastPLMNInfo MO class and the attributes under

it are created and deleted automatically by the Automated Neighbor Relations

feature. The following attributes in the

ExternalBroadcastPLMNInfo MO class are also introduced:

- ExternalBroadcastPLMNInfo.createdBy
- ExternalBroadcastPLMNInfo.externalBroadcastPLMNInfoId
- ExternalBroadcastPLMNInfo.pLMNIdList
- ExternalBroadcastPLMNInfo.nRTAC

If the ExternalBroadcastPLMNInfo.pLMNIdList and the

ExternalBroadcastPLMNInfo.nRTAC attributes are manually

configured by the operator, the Automated Neighbor Relations feature does not

overwrite them automatically. If the configuration of the

ExternalBroadcastPLMNInfo.pLMNIdList and the

ExternalBroadcastPLMNInfo.nRTAC attributes change on the

gNodeB side after activating the feature enhancement, the eNodeB MOM structure can

only be updated manually.

A maximum of 12 ExternalBroadcastPLMNInfo MO instances can exist

at the same time in each ExternalGUtranCell MO instance. A

maximum of 12 unique PLMN IDs are supported across the

ExternalGUtranCell MO instance, including all

ExternalBroadcastPLMNInfo MO instances.

The handover evaluation process of the Outgoing NR IRAT Handover feature is updated.

If at least one ExternalBroadcastPLMNInfo MO instance exists, the

handover evaluation process checks all available information about the NR TAC and

the associated PLMNs only in the attributes that belong to the

ExternalBroadcastPLMNInfo MO instances. If there are no

ExternalBroadcastPLMNInfo MO instances, then the handover

evaluation process checks the ExternalGUtranCell MO instance.

If the first PLMN does not support mobility and at least one additional PLMN does, a

new LTE-to-NR Standalone relation is created. The following conditions must be true

to create the relation:

- The value of the associated ExternalBroadcastPLMNInfo.nRTAC attribute of the first PLMN in the NCGI report is -1 or 0.
- The value of the associated ExternalBroadcastPLMNInfo.nRTAC attribute of at least one additional PLMN of the shared NR cell is higher than 0.

Each PLMN across the ExternalBroadcastPLMNInfo.pLMNIdList attribute

must have a unique ExternalBroadcastPLMNInfo.nRTAC attribute

value, except when the value of the

ExternalBroadcastPLMNInfo.nRTAC attribute is empty.

Interfaces

No impact.

Hardware

No specific hardware requirements.

Other Network Elements

The UE must be capable of LTE-to-NR Standalone and support the

reportCGI-NR-EN-DC-r15 and the

reportCGI-NR-NoEN-DC-r15 UE capabilities.

It is required to use ENM version 23.03 or later to

support the MOM changes introduced by this feature enhancement.

Without ENM, parameters can only be configured through

MOShell.

Related Information

Automated Neighbor Relations

Outgoing NR IRAT Handover

Shared NR RAN

## Appendix A.m: 23.Q2: Automatic EN-DC X2 Setup Using X2 TNL Address Discovery to gNodeB with MORAN Configuration

This feature enhancement allows the Automated Neighbor Relations feature to correct

inconsistent neighbor configurations for NR cells with MORAN configuration.

| Feature Name           | Automated Neighbor Relations   |
|------------------------|--------------------------------|
| Feature Identity       | FAJ 121 0497                   |
| Value Package Name     | Self-Organizing Networks       |
| Value Package Identity | FAJ 801 0435                   |
| Node Type              | Baseband                       |
| Access Type            | LTE                            |
| Impact at Upgrade      | Mandatory                      |

Summary and Benefits

This feature enhancement updates the X2 TNL Address Discovery procedure. The update

allows the Automatic Neighbor Relations feature on the eNodeB to create consistent

neighbor configuration for NR cells with MORAN configuration hosted by a shared

gNodeB.

The feature enhancement introduces the following functions:

- An IP request can be sent from the MME to the gNodeB through a proxy Master Node for the hosted neighbor NR cell with MORAN configuration. The proxy Master Node can select the gNodeB based on the global gNodeB ID received from the NCGI measurement report of the cell with MORAN configuration sent from the UE.
- The Automated Neighbor Relations feature can correct the inconsistent neighbor configuration of an external neighbor gNodeB with MORAN configuration.
- Automatic EN-DC X2 setup to the neighbor gNodeB with MORAN configuration.
- Selecting the correct IP address for EN-DC X2 setup between the eNodeB and the neighbor gNodeB with MORAN configuration when multiple IP addresses are configured for the operators.

The Master Node is acting as proxy in the X2 TNL Address Discovery procedure by

providing the following functions:

- Sending information to the MME about the connected Secondary Nodes
- Forwarding IP address requests from the MME to the selected Secondary Node

The eNodeB provides separate instance for a connected gNodeB hosting cells with

MORAN configuration, if the

ENodeBFunction.separateEngNBForMoranEnalbed is set to

true. As a result, the gNodeB has separate instances for MORAN

and non-MORAN configured cells in the list of connected gNodeBs

IE. The MME can identify the gNodeB from the global gNodeB ID received from an NCGI

measurement report for a cell with MORAN configuration.

This feature enhancement has the following benefits:

- The number of successful EN-DC setups to a gNodeB with MORAN configuration increases.
- The need for manual configuration of LTE-to-NR cell relations is decreased.
- New NR cells with MORAN configuration can be introduced without specific neighbor cell relation planning.

Capacity and Performance

This feature enhancement increases the load on the main processor, because of the

increased modification of the NR neighbor object and the increased signaling on the

S1 interface.

Outgoing NR IRAT handovers are interrupted until the inconsistent NR neighbor objects

are removed and the correct NR neighbor object is created.

Increase in the

throughput

KPIs can be observed with the following PM

counters:

- EUtranCellFDD.pmEndcSetupScgUeAtt
- EUtranCellFDD.pmEndcSetupScgUeSucc
- EUtranCellFDD.pmEndcSetupUeAtt
- EUtranCellFDD.pmEndcSetupUeSucc
- EUtranCellFDD.pmPdcpVolDlDrb
- EUtranCellTDD.pmEndcSetupScgUeAtt
- EUtranCellTDD.pmEndcSetupScgUeSucc
- EUtranCellTDD.pmEndcSetupUeAtt
- EUtranCellTDD.pmEndcSetupUeSucc
- EUtranCellTDD.pmPdcpVolDlDrb

The

correction of the incorrect configuration can be monitored with

the following PM

counters:

- EUtranCellFDD.pmAnrNeighbrelAdd
- EUtranCellFDD.pmAnrNeighbrelRem
- EUtranCellTDD.pmAnrNeighbrelAdd
- EUtranCellTDD.pmAnrNeighbrelRem

Operation

To allow the Automatic Neighbor Relations feature to create consistent cell relations

to NR cells hosted by a gNodeB with MORAN configuration, the following attributes

must be configured:

- The AnrFunctionNR.anrStateNR attribute must be set to ACTIVATED.
- The ENodeBFunction.endcX2IpAddrViaS1Active attribute must be set to true.
- The GUtranFreqRelation.anrMeasOn attribute must be set to true.

If the MME identifies the target gNodeB by a combination of any PLMN from the

Broadcast PLMNs and the gNodeB ID from the list of connected

gNodeBs IE, the

ENodeBFunction.separateEnGNbForMoranEnabled attribute must be

set to false.

If the MME identifies a separate instance for the MORAN configuration of the target

gNodeB by a combination of the first PLMN from the Broadcast PLMNs and the gNodeB ID

from the list of connected gNodeBs IE, the

ENodeBFunction.separateEnGNbForMoranEnabled attribute must be

set to true.

The correction of the

incorrect

configuration can be monitored with the following PM events:

- INTERNAL\_EVENT\_NEIGHBREL\_REMOVE with the EVENT\_VALUE\_CORRECT\_FAULTY event parameter in the EVENT\_PARAM\_ANR\_CAUSE.
- INTERNAL\_EVENT\_NEIGHBREL\_ADD

The relocation of the ExternalGUtranCell MO class under the

correct parent MO can be monitored with the

INTERNAL\_EVENT\_NEIGHBCELL\_CHANGE PM event with the

following event parameters:

- EVENT\_VALUE\_CORRECT\_FAULTY in the EVENT\_PARAM\_ANR\_CAUSE
- EVENT\_VALUE\_REMOVE or EVENT\_VALUE\_ADD in the EVENT\_PARAM\_ANR\_OPERATION

The removal of an incorrect ExteranlGNodeBFunction MO can be

monitored with the INTERNAL\_EVENT\_NEIGHBGNB\_CHANGE  PM event

with the following event parameters:

- EVENT\_VALUE\_CORRECT\_FAULTY in the EVENT\_PARAM\_ANR\_CAUSE
- EVENT\_VALUE\_REMOVE in the EVENT\_PARAM\_ANR\_OPERATION

The creation of the correct ExteranlGNodeBFunction MO can be

monitored with the INTERNAL\_EVENT\_NEIGHBGNB\_CHANGE PM event

with the following event parameters:

- EVENT\_VALUE\_CORRECT\_FAULTY in the EVENT\_PARAM\_ANR\_CAUSE
- EVENT\_VALUE\_ADD in the EVENT\_PARAM\_ANR\_OPERATION

Interfaces

This feature enhancement affects the following

interfaces:

- S1 The signaling and message size is increased on the S1 interfaces when the ENodeBFunction.separateEnGnbForMoranEnabled attribute is set to true. The following messages are used to send the Connected en-gNB List IE to the MME to update the list of connected gNodeBs IE: S1AP S1 SETUP REQUEST S1AP ENB CONFIGURATION UPDATE The following IEs are updated to indicate the PLMN for the selected IP network: Selected TAI on Source eNB ID in EN-DC SON Configuration Transfer Selected TAI on Source en-gNB ID in EN-DC SON Configuration Transfer The following messages are used to send the updated EN-DC SON Configuration Transfer IE: S1AP eNB CONFIGURATION TRANSFER S1AP MME CONFIGURATION TRANSFER

- X2 The X2AP EN-DC CONFIGURATION TRANSFER message is used to send the updated EN-DC SON Configuration Transfer IE.

Hardware

No specific hardware requirements.

Other Network Elements

This feature enhancement requires the following

network

elements:

- ENM It is recommended to use ENM version 23.2 or later to support the MOM changes introduced by this feature enhancement. If the Release Independence Manager application is used, the MOM changes are supported on earlier ENM versions also.
- MME The MME must be compliant with 3GPP TS 36.413 15.5.0 or above and support the X2 TNL address discovery procedure for a candidate gNodeB.
- UE The UE must be compliant with 3GPP TS 36.331 15.3.0 or above to support the RRC protocol and support the reporting of the CGI measurement on LTE and NR cells.

Related Information

Automated Neighbor Relations

## Appendix A.n: 23.Q3: Enhanced NR EN-DC PCI Conflict Detection for ANR

This feature enhancement enables finding NR cells where PCI conflict is suspected and

creating neighbor configuration between such cells for a fast PCI conflict

detection.

| Feature Name           | Automated Neighbor Relations   |
|------------------------|--------------------------------|
| Feature Identity       | FAJ 121 0497                   |
| Value Package Name     | Self-Organizing Networks       |
| Value Package Identity | FAJ 801 0435                   |
| Node Type              | Baseband Radio Node            |
| Access Type            | LTE                            |
| Impact at Upgrade      | Optional                       |

Summary and Benefits

The feature enhancement detects the NR neighbor cell where PCI conflict is suspected.

It continues to search for another NR cell that has the same PCI, and if it finds

one, it creates a cell relation by adding the other NR cell as a new neighbor cell.

This behavior results in a fast NR PCI conflict detection.

Capacity and Performance

No impact.

Operation

The AnrFunctionNR.pciConflictDetectionType attribute is introduced

to enable the feature enhancement for the following frequencies:

- Low-Band and Mid-Band
- High-Band
- All

The following attributes are introduced for finding an NR neighbor cell in which PCI

conflict is suspected:

- AnrFunctionNR.endcRachFailThrPerUe
- AnrFunctionNR.maxNoOfUeForPciConflictDetect
- AnrFunctionNR.scgSessTimeForEndcRachFail

The following PM event is introduced to provide information about the NR cell where

PCI conflict is suspected:

- INTERNAL\_EVENT\_NR\_PCI\_CONFLICT\_SUSPECTED

Interfaces

No impact.

Hardware

No specific hardware requirements.

Other Network Elements

It is recommended to use ENM version 23.3 or later to support the

MOM changes introduced by this feature enhancement. If the Release Independence

Manager application is used, the MOM changes are supported on earlier ENM versions

also.

Related Information

Automated Neighbor Relations

PCI Conflict Reporting

## Appendix A.o: 24.Q1.0: ANR-Specific Threshold for Creating LTE-to-NR Neighbor Cell Relations

This feature enhancement makes it possible to configure an ANR-specific threshold to

avoid creating LTE-to-NR neighbor cell relation to NR cells with poor radio link

quality.

| Feature Name           | Automated Neighbor Relations   |
|------------------------|--------------------------------|
| Feature Identity       | FAJ 121 0497                   |
| Value Package Name     | Self-Organizing Networks       |
| Value Package Identity | FAJ 801 0435                   |
| Node Type              | Baseband Radio Node            |
| Access Type            | LTE                            |
| Impact at Upgrade      | Optional                       |

Summary and Benefits

With the application of the ANR-specific threshold, NR cells with poor radio link

quality can be filtered out from cell relation creation.

This feature enhancement introduces the following benefits:

- LTE-to-NR neighbor cell relation-handling is improved because the number of cell relations to NR cells with poor radio quality can be reduced.
- OPEX can be reduced.

Capacity and Performance

When the ANR-specific threshold is configured, the following impact can be

expected:

- Fewer LTE-to-NR neighbor cell relations are created.
- EN-DC setup or outgoing IRAT handover to NR can be delayed if the B1 measurement report keeps returning an NR cell as the first PCI in which the radio link quality is below the ANR-specific threshold. When the UE reports an NR cell with a radio link quality above the ANR-specific threshold as the first PCI in the measurement report, EN-DC setup or outgoing IRAT handover to NR is allowed to begin. For EN-DC setup, the following PM counters can increase if the UE keeps reporting B1 measurement report for an NR cell with a radio link quality below the ANR-specific threshold as the first reported PCI in the measurement report: EUtranCellFDD.pmB1MeasRepEndcConfig EUtranCellFDD.pmB1MeasRepEndcConfigRestart EUtranCellTDD.pmB1MeasRepEndcConfig EUtranCellTDD.pmB1MeasRepEndcConfigRestart

Operation

This feature enhancement introduces the following MO attributes to configure the

ANR-specific threshold:

- The following node-level attributes are introduced in the AnrFunctionNR MO: AnrFunctionNR.cellAddRsrpThresholdNR AnrFunctionNR.cellAddRsrqThresholdNR To activate this feature enhancement on the node-level, it is recommended to configure a higher value than the configured B1 threshold.
- The following frequency relation-level attributes are introduced in the GUtranFreqRelation MO: GUtranFreqRelation.cellAddRsrpThrNROverride GUtranFreqRelation.cellAddRsrqThrNROverride If the frequency relation-level attributes are configured with a value other than -1000, the frequency relation-level configuration of the ANR-specific threshold takes priority over the node-level configuration. To activate this feature enhancement on the frequency relation-level, it is recommended to configure a higher value than a configured B1 threshold.

The following introduced PM counters can be used to observe when the creation of an

LTE-to-NR neighbor cell relation is not triggered because poor radio link quality is

reported from the NR cell that is in the B1 measurement report:

- EUtranCellFDD.pmAnrNrNoActionTooWeak
- EUtranCellTDD.pmAnrNrNoActionTooWeak
- GUtranFreqRelation.pmAnrNrNoActionTooWeak

The INTERNAL\_EVENT\_ANR\_NR\_EVAL introduced PM event can be used to

observe when the creation of an LTE-to-NR neighbor cell relation is not triggered

because poor radio link quality is reported from the NR cell that is in the B1

measurement report.

Hardware

No impact.

Interfaces

No impact.

Other Network Elements

It is recommended to use ENM version 24.1 or later to support the

MOM changes introduced by this feature enhancement. If the Release Independence

Manager application is used, the MOM changes are supported on earlier ENM versions

also.

Related Information

Automated Neighbor Relations

## Appendix A.p: 24.Q2.0: Dynamic Handling of NR Frequency Relations

A change in the frequency of an NR neighbor cell can automatically be updated in the

NR neighbor configuration on the eNodeB. Unused NR frequency and frequency relation MO

instances in the n48 band can automatically be cleaned up on the eNodeB.

| Feature Name           | Automated Neighbor Relations   |
|------------------------|--------------------------------|
| Feature Identity       | FAJ 121 0497                   |
| Value Package Name     | Self-Organizing Networks       |
| Value Package Identity | FAJ 801 0435                   |
| Node Type              | Baseband Radio Node            |
| Access Type            | LTE                            |
| Impact at Upgrade      | Optional                       |

Summary and Benefits

This feature enhancement allows the eNodeB to automatically update NR frequency

relations and cell relations. When the eNodeB receives a message over the X2

interface, that contains information about a changed NR cell frequency of an

existing NR neighbor cell, the eNodeB automatically updates the related neighbor

relations.

The feature enhancement adds support for the automatic removal of unused

GUtranFreqRelation MO instances and

GUtranSyncSignalFrequency MO instances configured in the n48

band.

These improvements provide the following benefits:

- OPEX can be improved by automatically reconfiguring the GUtranFreqRelation and the GUtranCellRelation MO instances.
- OPEX can be improved by automatic removal of the unused GUtranFreqRelation and GUtranSyncSignalFrequency MO instances in the n48 band.

Capacity and Performance

The following PM counters can increase because the neighbor configuration on the

eNodeB is automatically updated:

- EUtranCellFDD.pmMeasRepEndcConfig
- EUtranCellTDD.pmMeasRepEndcConfig
- EUtranCellFDD.pmB1MeasRepEndcConfigRestart
- EUtranCellTDD.pmB1MeasRepEndcConfigRestart
- EUtranCellFDD.pmB1BestCellEvalReport
- EUtranCellTDD.pmB1BestCellEvalReport
- EUtranCellFDD.pmB1BestCellEvalReportRsrp
- EUtranCellTDD.pmB1BestCellEvalReportRsrp
- EUtranCellFDD.pmEndcSetupUeAtt
- EUtranCellTDD.pmEndcSetupUeAtt
- EUtranCellFDD.pmEndcSetupUeSucc
- EUtranCellTDD.pmEndcSetupUeSucc
- EUtranCellFDD.pmEndcSetupScgUeAtt
- EUtranCellTDD.pmEndcSetupScgUeAtt
- EUtranCellFDD.pmEndcSetupScgUeSucc
- EUtranCellTDD.pmEndcSetupScgUeSucc
- GUtranCellRelation.pmEndcSetupUeAtt
- GUtranCellRelation.pmEndcSetupUeSucc
- GUtranCellRelation.pmEndcSetupScgUeAtt
- GUtranCellRelation.pmEndcSetupScgUeSucc

The following PM counters can increase because the neighbor configuration is

automatically updated and EN-DC triggered handover is performed for a changed

frequency without manual configuration:

- EUtranCellFDD.pmCellHoPrepAttLteInterFEndcHo
- EUtranCellTDD.pmCellHoPrepAttLteInterFEndcHo
- EUtranCellFDD.pmCellHoPrepSuccLteInterFEndcHo
- EUtranCellTDD.pmCellHoPrepSuccLteInterFEndcHo
- EUtranCellFDD.pmCellHoExeAttLteInterFEndcHo
- EUtranCellTDD.pmCellHoExeAttLteInterFEndcHo
- EUtranCellFDD.pmCellHoExeSuccLteInterFEndcHo
- EUtranCellTDD.pmCellHoExeSuccLteInterFEndcHo

The following PM counters can increase because neighbor configuration is

automatically updated and redirect to NR is performed for a changed frequency

without manual configuration:

- EUtranCellFDD.pmUeCtxtRelSCNr
- EUtranCellTDD.pmUeCtxtRelSCNr
- EUtranCellFDD.pmFlexUeCtxtRelSCNr
- EUtranCellTDD.pmFlexUeCtxtRelSCNr
- EUtranCellFDD.pmUeCtxtRelSCNrB1Rsrp
- EUtranCellTDD.pmUeCtxtRelSCNrB1Rsrp
- EUtranCellFDD.pmUeCtxtRelSCNrB1Rsrq
- EUtranCellTDD.pmUeCtxtRelSCNrB1Rsrq
- EUtranCellFDD.pmB1BestCellEvalReport
- EUtranCellTDD.pmB1BestCellEvalReport
- EUtranCellFDD.pmB1BestCellEvalReportRsrp
- EUtranCellTDD.pmB1BestCellEvalReportRsrp
- EUtranCellFDD.pmB1BestCellEvalReportRsrq
- EUtranCellTDD.pmB1BestCellEvalReportRsrq
- GUtranFreqRelation.pmIdleModeMobilityExcluded

The following PM counters can increase because neighbor configuration is

automatically updated and outgoing IRAT handover is performed for a changed

frequency without manual configuration:

- EUtranCellFDD.pmFlexCellHoExeAttNr
- EUtranCellTDD.pmFlexCellHoExeAttNr
- EUtranCellFDD.pmFlexCellHoExeSuccNr
- EUtranCellTDD.pmFlexCellHoExeSuccNr
- EUtranCellFDD.pmFlexCellHoPrepAttNr
- EUtranCellTDD.pmFlexCellHoPrepAttNr
- EUtranCellFDD.pmFlexCellHoPrepSuccNr
- EUtranCellTDD.pmFlexCellHoPrepSuccNr
- GUtranFreqRelation.pmConnModeMobilityExcluded
- GUtranCellRelation.pmHoExeAtt
- GUtranCellRelation.pmHoExeSucc
- GUtranCellRelation.pmHoPrepAtt
- GUtranCellRelation.pmHoPrepSucc

The following PM counters can decrease because the

GUtranCellRelation MO is moved when the NR cell frequency

changes:

- EUtranCellFDD.pmAnrNeighbrelRem
- EUtranCellTDD.pmAnrNeighbrelRem

The INTERNAL\_EVENT\_NEIGHREL\_REMOVE PM event can trigger less

frequently, because the GUtranCellRelation MO is moved when the

NR cell frequency changes.

The INTERNAL\_EVENT\_NR\_PCI\_CONFLICT\_DETECTED PM event can trigger

more frequently if PCI conflicts are detected while the

GUtranCellRelation MO is moved during NR neighbor frequency

change.

Operation

The AnrFunctionNR.supportNrFreqChange attribute is introduced to

control the behavior of the automatic NR frequency relation and cell relation update

because of NR cell frequency change.

The AnrFunction.removeFreqRelTime attribute is introduced to

manage the removal of unused NR frequency relations.

The INTERNAL\_EVENT\_ANR\_NR\_FREQ\_REL\_ADD PM event is introduced to

monitor when a GUtranFreqRelation MO instance is created by the

automatic update.

Interfaces

No impact.

Hardware

No specific hardware requirements.

Other Network Elements

It is recommended to use ENM version 24.2 or later to support the

MOM changes introduced by this feature enhancement. If the Release Independence

Manager application is used, the MOM changes are supported on earlier ENM versions

also.

Related Information

Automated Neighbor Relations

## Appendix A.q: 24.Q3.0: Shared NR RAN Support for Automated Neighbor Relations

This feature enhancement enables automatic updates of LTE-to-NR standalone relations

through the EN-DC X2 interface.

This

feature enhancement also adds ANR support for MORAN configurations in the NR standalone

deployment.

| Feature Name           | Automated Neighbor Relations   |
|------------------------|--------------------------------|
| Feature Identity       | FAJ 121 0497                   |
| Value Package Name     | Self-Organizing Networks       |
| Value Package Identity | FAJ 801 0435                   |
| Node Type              | Baseband Radio Node            |
| Access Type            | LTE                            |
| Impact at Upgrade      | Mandatory                      |

Summary and Benefits

This feature enhancement adds the option to update LTE-to-NR standalone neighbor cell

relations automatically through an EN-DC X2 connection

to

an updated gNodeB. If no

EN-DC

X2 connection is available, the cell relation can only be updated

manually.

This feature enhancement also introduces ANR support for MORAN configurations in the

NR standalone deployment. This reduces the need for manual configuration for the

neighbor NR cell.

The automatic update of the

LTE-to-NR

standalone neighbor cell relations and the

support

for MORAN configurations have the following benefits on the network:

- Improved success rate of LTE-to-NR standalone handovers
- Improved UE mobility

Capacity and Performance

This feature enhancement can improve mobility KPIs through keeping the

LTE-to-NR

standalone cell relations

up-to-date.

If the PLMNs change on the shared gNodeB, the feature enhancement might increase the

LTE-to-NR handover success rate.

This feature enhancement might

improve

the following KPIs:

- Cell Handover Success Rate
- Cell Mobility Success Rate
- Handover Success Rate
- Mobility Success Rate

The feature enhancement might increase the following PM counters:

- EUtranCellFDD.pmAnrNeighbrelAdd
- EUtranCellTDD.pmAnrNeighbrelAdd
- GUtranCellRelation.pmHoExeAtt
- GUtranCellRelation.pmHoExeSucc
- GUtranCellRelation.pmHoPrepSucc

The feature enhancement can increase the INTERNAL\_EVENT\_NEIGHBREL\_ADD PM

event

and the number of successful results of the INTERNAL\_PROC\_HO\_PREP\_S1\_OUT PM

event.

Operation

No impact.

Interfaces

This feature enhancement affects the X2AP interface through adding the

Broadcast PLMN Identity Information List NR IE to the following

messages:

- EN-DC CONFIGURATION UPDATE
- EN-DC CONFIGURATION UPDATE ACKNOWLEDGE
- EN-DC X2 SETUP RESPONSE

Hardware

No specific hardware requirements.

Other Network Elements

It is recommended to use ENM version 24.3 or later to support the

MOM changes introduced by this feature enhancement. If the Release Independence

Manager application is used, the MOM changes are supported on earlier ENM versions

also.

The gNodeB software must be updated to version 24.Q3 or later to support the IEs on

the X2AP interface introduced by this feature enhancement.

Related Information

Automated Neighbor Relations

Outgoing NR IRAT Handover

Shared NR RAN

## Appendix A.r: 24.Q4.0: Preferred Cell Relation Selection in Case of PCI Conflicts

This feature enhancement

provides support

for

the selection of a preferred cell candidate for handover

in

case of PCI conflicts.

The

enhancement

also introduces configuration options to prohibit cells from being barred in cell relations

where the

handover

success rate is low.

| Feature Name           | Automated Neighbor                                 Relations   |
|------------------------|----------------------------------------------------------------|
| Feature Identity       | FAJ 121 0497                                                   |
| Value Package Name     | Self-Organizing Networks                                       |
| Value Package Identity | FAJ 801 0435                                                   |
| Node Type              | Baseband Radio Node                                            |
| Access Type            | LTE                                                            |
| Impact at Upgrade      | Optional                                                       |

Summary and Benefit

This feature enhancement

provides

support

for

the manual and automatic selection of a preferred neighbor cell candidate for

handover

in

case of PCI conflicts. The automatic selection is only applicable

to PCI conflicts in which one of the neighbor cells is a better handover target

based on CGI

reports. The

preferred cell selection remains configured even after node restart and software

upgrade.

This feature enhancement also introduces configuration options to prohibit a cell

from being barred from mobility actions if

the

handover

success rate is low on the cell relation.

The feature enhancement has the following benefits:

- More predictable handovers during PCI conflicts for UEs incapable of reporting CGI
- Increased handover success rate during PCI conflicts
- Reduced operating expenses in deployments where the preferred handover targets are barred from mobility actions

Capacity and Performance

This feature enhancement

can

improve the Cell Handover Execution Success Rate KPI in deployments with PCI

conflicts.

Operation

This feature enhancement introduces the following

attributes:

- AnrFunction.cgiReportCountEval

- AnrFunction.pciConflictSelectThreshPerc

- AnrFunction.pciConflictCellSelection

- AnrFunction.problematicCellPolicy

- EUtranCellRelation.barringLowHoAllowed

- EUtranCellRelation.pciConflictPreferredCellMan

- EUtranCellRelation.pciConflictPreferredCellAuto

To enable the selection of a preferred neighbor cell during PCI

conflicts,

the following conditions must be met:

- The Automated Neighbor Relations feature must be activated.
- The AnrFunction.pciConflictCellSelection attribute must be set to one of the following values: MANUAL\_SELECT MANUAL\_SELECT\_AND\_AUTO\_DETECT AUTO\_SELECT\_OVER\_MANUAL

To

exclude

neighbor cells from being barred from mobility

actions,

the following conditions must be met:

- The Automated Neighbor Relations feature must be activated.
- The AnrFunction.problematicCellPolicy attribute must be set to the AUTO\_DETECT\_AND\_BAR value.

This feature enhancement introduces the INTERNAL\_EVENT\_NEIGHBREL\_SELECT\_PCI\_CONFLICT

PM event to indicate the selection of a preferred handover target

in

case of PCI conflicts.

Interfaces

No impact.

Hardware

No specific hardware requirements.

Other Network Elements

It is recommended to use ENM version 24.3 or later to support the

MOM changes introduced by this feature enhancement. If the Release Independence

Manager application is used, the MOM changes are supported on earlier ENM versions

also.

Related Information

Automated Neighbor Relations

Intra-LTE Handover

X2 Configuration