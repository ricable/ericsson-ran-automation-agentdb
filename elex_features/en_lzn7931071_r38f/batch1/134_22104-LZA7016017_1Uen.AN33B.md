---
complexity_score: 11.5
converted_at: '2025-08-13T06:57:47.421083Z'
file_type: html
format: html
image_processing_enhanced: true
images_extracted: 2
images_saved: 3
original_path: 134_22104-LZA7016017_1Uen.AN33B.html
pictures_extracted: 2
processing_method: docling_multimodal
quality_score: 9.0
source_file: 134_22104-LZA7016017_1Uen.AN33B.html
source_zip: en_lzn7931071_r38f.zip
tables_extracted: 9
zip_image_types:
- .svg
- .png
- .gif
- .jpg
- .bmp
zip_images_total: 2796
---

# 

NR Minimization of Drive Tests

Contents

![Image](../images/134_22104-LZA7016017_1Uen.AN33B/additional_3_CP.png)

![Image](../images/134_22104-LZA7016017_1Uen.AN33B/additional_3_CP.png)

- NR Minimization of Drive Tests Overview
- Dependencies of NR Minimization of Drive Tests
- Operation of NR Minimization of Drive Tests
    - Operation of Area-Based Immediate Minimization of Drive Tests
    - UE Group Support for NR Minimization of Drive Tests
- Network Impact of NR Minimization of Drive Tests
    - Privacy Implications of NR Minimization of Drive Tests
- Parameters for NR Minimization of Drive Tests
- Performance of NR Minimization of Drive Tests
- Activate NR Minimization of Drive Tests
- Deactivate NR Minimization of Drive Tests
- Engineering Guidelines for NR Minimization of Drive Tests
    - Configuration of UE Selection Ratio
    - Configuration of UE Group Handling
    - Configuration of Inter-Frequency MDT M1 Delay Time for EN-DC

# 1 NR Minimization of Drive Tests Overview

The NR Minimization of Drive Tests feature provides 3GPP-defined functionality that

enables the operator to replace physical drive tests with collection of the same

information, using UEs selected from existing traffic in the network.

| Feature Name           | NR Minimization of Drive Tests                                             |
|------------------------|----------------------------------------------------------------------------|
| Feature Identity       | FAJ 121 5348                                                               |
| Value Package Name     | NR Base Package                                                            |
| Value Package Identity | FAJ 801 4002                                                               |
| Node Type              | Baseband Radio Node                                                        |
| Access Type            | NR                                                                         |
| Licensing              | License-controlled feature. One license is required for each 								node. |

Summary

The NR Minimization of Drive Tests (MDT) feature provides a remote method for

operators to use for troubleshooting, verification and optimization of the radio

network that is simpler and cheaper than traditional drive tests.

MDT data reported from UEs and the RAN can be used for the following:

- Monitoring and detecting coverage problems in the network.
- Verifying quality of service.
- Assessing user experience from a RAN perspective, together with location information.
- Assisting network capacity extension.
- Obtaining traffic location information (where data traffic is transferred within a cell).

Additional Information

More information about this feature, and related topics, can be found in the

following documentation:

- 3GPP TS 32.421, Trace concepts and requirements
- 3GPP TS 32.422, Trace control and configuration management
- 3GPP TS 32.423, Trace data definition and management
- 3GPP TS 37.320, Radio measurement collection for MDT
- 3GPP TS 37.355: LTE Positioning Protocol (LPP)
- 3GPP TS 38.214 NR; Physical Layer Procedures for Data
- 3GPP TS 38.314, NR; Layer 2 Measurements
- 3GPP TS 38.331, NR; Radio Resource Control (RRC); Protocol specification
- 3GPP TS 36.413, S1 Application Protocol (S1AP)
- 3GPP TS 36.423, X2 Application Protocol (X2AP)
- 3GPP TS 38.413, NG Application Protocol (NGAP)

# 2 Dependencies of NR Minimization of Drive Tests

NR Minimization of Drive

Tests affects Cell Traffic Trace.

Features

Table 1   Feature Dependencies

| Feature Name                                                                    | Feature Identity   | Access Type   | Relationship   | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
|---------------------------------------------------------------------------------|--------------------|---------------|----------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Measurement Gap-Aware NR                                             Scheduling | FAJ 121 5295       | NR            | Prerequisite   | The Measurement Gap-Aware NR Scheduling feature is required for inter-frequency                 measurements in the NR Minimization of Drive Tests feature.  For initial MDT-specific measurements configured on High-Band frequencies, a gapless                 measurement configuration is applied in the following use cases:  The UE supports independent measurement gap configuration.     The measurement gap for High-Band inter-frequency measurements is                             disabled for UEs based on the configuration of the                                 CapabilityHandlingUeCfg.gaplessFr2InterFreqMeasSupp                             attribute. |
| NR Extended N77 Band Support                                                    | FAJ 121 5480       | NR            | Related        | The gNodeB can configure UEs with extended n77 band frequency ranges to perform A5             measurements for MDT M1 measurements only if the UE capability message indicates the             appropriate RF parameter.                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| Streaming of PM Events                                                          | FAJ 121 4993       | NR            | Related        | PM Events for NR Minimization of Drive Tests are streamed                                         using cell traffic trace for reporting.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| NR Cell Soft Lock                                                               | FAJ 121 5575       | NR            | Related        | When A5 or B1 measurement for cell offload is configured,                                         requesting location information IE, which is                                             includeCommonLocationInfo, can be                                         included depending on the                                             MdtCellProfileUeCfg.m1IncludeCommonLocationInfo                                         attribute.                                                                                                                                                                                                                                  |
| UE Grouping Framework                                                           | FAJ 121 5314       | NR            | Related        | The UE Grouping Framework feature can be applied to MDT and                                         allows operator to target specific kinds of UEs.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |

Hardware

NR Minimization of Drive Tests feature requires 3GPP Release 16-capable UEs to obtain

full measurement capabilities.

Limitations

Immediate MDT measurements do not support XNAP Triggers associated with Xn Handover,

Resume from RRC inactive, RRC reestablishment and NR Dual Connectivity.

Core Network Dependency

Measurements collected by NR Minimization of Drive Tests feature include data which

is considered personal. As a result of privacy concerns and legal obligations, user

consent is required to use the feature. User consent is collected by the operator as

part of a customer care process. Once obtained, user consent information

availability is stored as part of the subscription data in the CN. User consent is

signaled to RAN from the CN when a UE session is first set up, or passed between RAN

nodes as part of handover.

For NR NSA deployments, user consent is indicated to the gNodeB by the presence of

the ManagementBasedMdtAllowed IE. The

ManagementBasedMdtAllowed IE is provided to the gNodeB by the

eNodeB as part of the SGNB ADDITION REQUEST

message.

The user consent is obtained by the gNodeB in the following way:

1. The user consent is granted to the eNodeB.
    1. The eNodeB obtains user consent directly from the CN (S1AP INITIAL CONTEXT SETUP REQUEST).
    2. The eNodeB obtains user consent from another eNodeB (X2AP HANDOVER REQUEST). User consent propagated from another eNodeB also originates from the CN (through an MME)
2. The user consent is propagated from eNodeB to the gNodeB (X2AP SGNB ADDITION REQUEST).

This is illustrated in Figure 1.

Figure 1   User Consent Propagation for Management-Based Immediate MDT NR NSA

For NR SA deployments, user consent is indicated to the gNodeB by the presence of the

ManagementBasedMDTPLMNList IE.

The user consent is obtained by the gNodeB in the following way:

1. The user consent is granted to the gNodeB.
    1. The gNodeB obtains user consent directly from the CN (NGAP INITIAL CONTEXT SETUP or NGAP HANDOVER REQUEST).
    2. The gNodeB obtains user consent from another gNodeB (XNAP HANDOVER REQUEST).
2. The user consent is propagated from gNodeB to another gNodeB (XNAP S-NODE ADDITION REQUEST).

This is illustrated in Figure 2.

Figure 2   User Consent Propagation for Management-Based Immediate MDT NR SA

UE Dependency

Certain measurements collected from UEs require the UE to support specific

capabilities. If the UE does not indicate support for the capability, the

measurement is not configured in the UE and not provided in PM events. UE

capabilities, associated measurements, descriptions, and operational considerations

are captured in the table Table 2.

Table 2   UE Dependencies

| UE Capability     | Associated Measurement   | Associated Counter                                                 | Description                                                                                                                                                                                                                                                                                                                       |
|-------------------|--------------------------|--------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| gnss-Location-r16 | M1                       | pmEndcUeCapabilityGnssLocation(1) pmSaUeCapabilityGnssLocation (2) | Indicates whether the UE is equipped with a GNSS or A-GNSS                                     receiver that can be used to provide detailed location                                     information along with SON or MDT-related measurements in                                     RRC_CONNECTED, RRC_IDLE and RRC_INACTIVE. |
| ulPDCP-Delay-r16  | M6                       | pmEndcUeCapabilityUlPdcpDelay(1)  pmSaUeCapabilityUlPdcpDelay (2)  | Indicates whether the UE supports UL PDCP Packet Average Delay                                     measurement and reporting in RRC_CONNECTED state.                                                                                                                                                                              |

(1)

For NR NSA

(2)

For NR SA

System Functions

| Function           | Description                                                                                                                       |
|--------------------|-----------------------------------------------------------------------------------------------------------------------------------|
| Cell Traffic Trace | PM Events produced by NR Minimization of Drive Tests are included                                     in regular Cell Trace Jobs. |

# 3 Operation of NR Minimization of Drive Tests

NR Minimization of Drive Test feature

supports Area-based Immediate MDT.

Immediate MDT applies to measurements collected when the UE is in the connected mode.

Immediate MDT Measurements are reported as PM Events as part of Cell Trace jobs.

Area-based measurements are collected based on cell coverage. They are the same as the

3GPP-defined management-based measurements.

As a result of NR Minimization of Drive Test feature dependency on user consent and UE

capability, the following cell related counters are provided without feature

activation:

- pmEndcUeCapabilityGnssLocation For NR NSA, this is the number of UEs that support gnss-location-r16. This capability is required for the UE to provide detailed location information.
- pmEndcUeCapabilityUlPdcpDelay For NR NSA, this is the number of UEs that support ulPDCP-Delay-r16. This capability is required for the UE to provide UL PDCP Packet Average Delay measurement.
- pmEndcSgnbAdditionRequestMdtConsent, pmEndcSgnbAdditionRequest For NR NSA, this is the number of UE sessions that are initiated with consent and the number of UE sessions initiated in total.
- pmSaUeCapabilityGnssLocation For NR SA, this is the number of UEs that support gnss-location-r16. This capability is required for the UE to provide detailed location information.
- pmSaUeCapabilityUlPdcpDelay For NR SA, this is the number of UEs that support ulPDCP-Delay-r16. This capability is required for the UE to provide UL PDCP Packet Average Delay measurement.
- pmUeCtxtEstabAttMdtConsent, pmUeCtxtEstabAtt For NR SA, this is the number of UE sessions that are initiated with consent and the number of UE sessions initiated in total.
- pmHoPrepAttInNgMdtConsent, pmHoPrepAttInNg For NR SA, this is the number of NG Handover request with consent and the number of NG Handover request in total.

For more information on the counters used, see Lists and Delta Lists.

The overall network view for NR NSA deployments is shown in Figure 3.

Figure 3   NR NSA Network Overview

The overall network view for NR SA deployments is shown in Figure 4.

Figure 4   NR SA Network Overview

## 3.1 Operation of Area-Based Immediate Minimization of Drive Tests

Minimization of Drive Tests feature must be activated to configure measurement

collection.

Activation

Activation of Area-based Immediate MDT involves configuration and activation of

immediate MDT-initiated measurement collection and reporting. Measurement collection

and reporting can be performed in any order but both are required. In order not to

miss reporting collected measurements, report activation is recommended to be done

first. Measurement collection can only be configured when the NR Minimization of

Drive Test feature is activated.

- Configuration and activation of reporting of MDT measurements as PM Events MDT-initiated measurements are reported, when the associated MDT PM Events are added to an existing or MDT-specific Cell Trace job. Add the events to the Trace Cell job as the MDT PM Events group. The MDT PM Event group includes all MDT-initiated PM Events. In such case, the Operator does not need to update the Cell Trace job when new MDT-related PM Events become available. It also reduces the possibility of MDT-initiated measurements that are not reported. MDT PM Events are used as output to files or streamed to an external receiver based on Cell Trace job configuration. For more information on Cell Trace job configuration, see Manage Performance. MDT-specific PM Events associated with UE measurements are CuCpPerUeMdtReport (for M1) and CuCpPerUeMdtM6UlReport (for M6ul).
- Configuration and activation of MDT-initiated measurement collection With default cell configuration, the MDT M1 and M6 uplink measurements are configured and collected at feature activation, when they connect to a gNodeB. They are collected only from consenting UEs that meet the set criteria. By default all cells have the same MdtCellProfile referenced from NRCellCU MO. MdtCellProfileUeCfg is the default MDT profile for UE configuration group. MO instance MdtCellProfileUeCfg=Base is created automatically when parent MO is created. Different MDT cell profiles can be created and referenced from NRCellCU MO. In this way, different cells can be associated with different profiles for MDT measurements. For example, MDT M1 and M6 measurements can be enabled in one set of cells associated with one profile and MDT M1 measurement can be linked to another set of cells associated with another profile. NRFreqRelation.mdtMeasOn referenced from NRCellCU MO provides a list of frequencies used to select if MDT should perform measurements on the referenced frequency. The operator can disable any but not all configured frequencies, including intra-frequency of serving cell when MdtCellProfileUeCfg.m1ReportTrigger is set to PERIODICAL.

Figure 5   Activation of Area-Based Immediate MDT NR NSA

The Figure 5 covers the initial

access use case signaled by SGNB ADDITION REQUEST.

Step 1 is executed if the selected frequency requires a measurement gap to obtain

measurements.

Figure 6   Activation of Area-Based Immediate MDT NR SA

The Figure 6 covers the Initial

Context Setup use case signaled by INITIAL CONTEXT SETUP

REQUEST.

For NR NSA deployments, the following opportunities to update UE measurement

configuration are also available:

- MeNodeB-initiated modification The MeNB sends the SGNB MODIFICATION REQUEST message to the SN. The gNodeB sends the SGNB MODIFICATION REQUEST ACKNOWLEDGE message to the MN. If the UE has been selected for MDT, the updated configuration can be provided for the UE. In case of MDT inter-frequency measurement, Measurement gaps are coordinated between the gNB and the eNB through SGNB MODIFICATION REQUIRED message.
- gNodeB-initiated modification The gNodeB receives the X2AP RRC TRANSFER message. The gNodeB sends the SGNB MODIFICATION REQUIRED message to the MeNodeB, if evaluation of the A3 or A5 measurement report triggers one of the following: An Intra-gNodeB Intra-DU PSCell Change Intra-gNodeB Inter-DU PSCell Change If the UE has been selected for MDT, new cell-specific MDT configuration is provided to the UE.

For NR SA deployments, the following opportunities to update UE measurement

configuration are also available:

- NGAP HANDOVER REQUEST
- INTRA-GNB HANDOVER (based on result of processing F1AP UL RRC MESSAGE TRANSFER)

Deactivation of MDT M1 and MDT M6 Measurements

MDT M1 and M6 measurements are based on measurements provided by the UE and can be

activated or deactivated independently. If an M1 or M6 measurement report is

received and the measurement has been disabled, measurement report reception serves

as a trigger to configure the UE to stop providing the measurement.

It is possible for M1 measurements to include RRM-configured measurements. When those

measurements have detailed location information, then MDT M1 measurement report

reception serves to reconfigure the UE to stop providing the detailed location

information for RRM-configured measurements.

This serves to minimize collection of personal data and to reduce the MDT impact on

UE power consumption and battery life.

There are use cases where M1 and M6 measurement reports are not received after the

measurement is disabled. In these cases reporting stops when the UE is released or

transitions to idle mode.

There are three options for deactivation of MDT measurement collection:

- Individual measurements such as M1 and or M6 can be deactivated at the cell level. For example to disable M1 measurement collection set MdtCellProfileUeCfg.m1Enabled to FALSE.
- All MDT measurements associated with a cell can also be deactivated. NRCellCU.mdtEnabled is set to FALSE.
- The feature is deactivated as described in Deactivate NR Minimization of Drive Tests. UEs are no longer configured to provide MDT measurements.

If measurement collection is disabled then subsequent reception of a measurement

report for a deactivated measurement serves as a trigger to reconfigure the UE to no

longer provide the measurement.

If the MDT feature is disabled the MDT PM Event Group, or all the MDT PM Events (if

the events were added individually) are to be removed from the cell trace job. If a

cell trace job was created for MDT, it is to be removed. For more information, see

Manage Performance.

The Figure 7 covers the case

when NR MDT feature is deactivated for NR NSA deployments. It applies to all UEs, in

all cells for all measurements. Other use cases follow a similar pattern but have

smaller scope such as disable MDT at the cell level or disable a specific

measurement M1, or M6 at the cell level.

Figure 7   Deactivation of Area-Based Immediate MDT NR NSA

The Figure 8 covers the case

when NR MDT feature is deactivated for NR SA deployments. It applies to all UEs, in

all cells for all measurements. Other use cases follow a similar pattern but have

smaller scope, such as disable MDT at the cell level or disable a specific

measurement M1, or M6 at the cell level.

Figure 8   Deactivation of Area-Based Immediate MDT NR SA

Related tasks

Activate NR Minimization of Drive Tests

Deactivate NR Minimization of Drive Tests

## 3.2 UE Group Support for NR Minimization of Drive Tests

The NR Minimization of Drive Tests feature is adapted to the UE Grouping

Framework

feature.

This feature can be configured with the following attributes, which belong to the

MdtCellProfileUeCfg MO

class             that

is adapted to the UE Grouping

Framework

feature:

- MdtCellProfileUeCfg.immediateMdtGnssR16Check
- MdtCellProfileUeCfg.m1Enabled
- MdtCellProfileUeCfg.m1EventA2Hysteresis
- MdtCellProfileUeCfg.m1EventA2ThresholdRsrp
- MdtCellProfileUeCfg.m1EventA2ThresholdRsrq
- MdtCellProfileUeCfg.m1EventA2ThresholdSinr
- MdtCellProfileUeCfg.m1EventA2TimeToTrigger
- MdtCellProfileUeCfg.m1EventA2TriggerQuantity
- MdtCellProfileUeCfg.m1IncludeBeamMeasurement
- MdtCellProfileUeCfg.m1IncludeCommonLocationInfo
- MdtCellProfileUeCfg.m1IncludeRrmReport
- MdtCellProfileUeCfg.m1InterFreqMeasAllowed
- MdtCellProfileUeCfg.m1MaxNoOfRsIndexToReport
- MdtCellProfileUeCfg.m1MaxReportCells
- MdtCellProfileUeCfg.m1ReportAmount
- MdtCellProfileUeCfg.m1ReportInterval
- MdtCellProfileUeCfg.m1ReportQuantityCell
- MdtCellProfileUeCfg.m1ReportQuantityRsIndex
- MdtCellProfileUeCfg.m1ReportTrigger
- MdtCellProfileUeCfg.m6Enabled
- MdtCellProfileUeCfg.m6ReportAmount
- MdtCellProfileUeCfg.m6ReportInterval
- MdtCellProfileUeCfg.mdtUeSelectionRatio

The attributes are read from the MO instances that are selected based on

the

UE groups that the UE belongs to.

When the UE groups that the UE belongs to change, the change can trigger the selection of

a new instance of the MdtCellProfileUeCfg MO class to which the

listed attributes belong. If MDT measurements are ongoing in the UE and the value of any

of the listed attributes changes because of the selection of a new MO instance, the MDT

measurements are reconfigured based on the attribute values of the new MO instance. If

the NR Minimization of Drive Tests feature is enabled and no ongoing MDT measurements

exist,

MDT measurements are configured in the UE after a UE group change.

The UE group support for this function is controlled by the User- and Service-Specific

Mobility feature. If the license of this feature is not activated, configuration data is

always taken from the Base instance of the

MdtCellProfileUeCfg MO class.

For more information on the feature license activation, see User- and Service-Specific Mobility.

# 4 Network Impact of NR Minimization of Drive Tests

NR Minimization of

Drive Tests affects capacity, performance, interfaces, and other network

elements.

Capacity and Performance

PM load introduced by NR Minimization of Drive Tests has potential to reduce the

overall capacity of the gNodeB. The following areas can be affected:

- increased RRC signaling on UU interface
- processing of measurement reports from the UEs received in RRC messages
- the reporting of the measurements in PM Events in Cell trace jobs (output to files or streams).

A key configuration parameter for controlling the load impact of the NR MDT feature

is MdtCellProfileUeCfg.mdtUeSelectionRatio. This is used to

reduce the number of UEs selected for MDT which provides a corresponding load

reduction. Characterization of the impact of measurement report processing as input

to setting MdtCellProfileUeCfg.mdtUeSelectionRatio is described

in Engineering Guidelines for NR Minimization of Drive Tests. Another consideration when setting

MdtCellProfileUeCfg.mdtUeSelectionRatio is that it must

always be less than or equal to the UE fraction setting used when selecting UE type

PM Events in Cell Trace jobs. For more information, see Performance Management.

The two filters use the same algorithm so the same UEs are selected for the same

setting. However, if the Cell Trace job UE fraction setting is lower than

MdtCellProfileUeCfg.mdtUeSelectionRatio, then MDT

measurements that have been collected are filtered rather than reported.

It is also recommended to consider changes to measurement parameters related to

measurement intensity and duration. Characterization of NR MDT load impact is based

on the rate of measurement report processing. Decreasing the report interval for

measurements from a single UE similarly decreases the number of UEs supported for

the same load. 10 UEs providing 10 measurement reports for each second has about the

same load as 100 UEs providing one measurement report for each second. Each

measurement report results in a corresponding PM Event so there is increased network

impact and processing load on PM event receivers. Avoid setting high or infinite

report amounts in high load cases. Increasing the report amount increases the

overall contribution to load by a single UE.

Interfaces

PM Events created by Minimization of Drive Test are transported as files secured by

FTPES or TCP streams which need to be secured by infrastructure (IPsec). This is

existing functionality used for other PM Events collected in Cell Trace jobs.

For NR NSA deployments, the X2AP interface is used for the following purposes:

- To provide user consent propagated from the core through the eNodeB,
- For RRC-based transport of UE measurement configuration and the resulting measurement reports.

For NR NSA deployments, M1 and M6 measurement configuration and collected

measurements are transported over the X2 interface to the eNodeB. The eNodeB which

uses UU/SRB1 for both its own and the gNodeB-initiated measurements. This affects

both the system and the user, as RRC signaling has scheduling priority over user

data.

For NR SA deployments, the NGAP interface is used to provide user consent from

core.

The OAM interface is used when reporting MDT collected measurements as PM Events in

files or streams.

Other Network Elements

| UE                 |    | Cell or beam RSRQ measurements initiated by NR Minimization of Drive                             Tests for M1 measurement are not to be used for high band as there are                             known performance degradation issues.   MDT measurement report reception triggers RRM-configured measurements to                             stop providing the detailed location information when the following two                             conditions are fulfilled:     RRM-configured measurements are included in MDT M1 reporting                                     along with detailed location information.     MDT is deactivated at the feature or cell level.     It is possible that this measurement reconfiguration results in lower                             throughput and increased RLF, resulting from delayed                                 SCell mobility. The overall impact can be reduced                             by reducing                             MdtCellProfileUeCfg.mdtUeSelectionRatio.  Decreasing the report interval or increasing the report amount for UE                             associated measurements (M1 and M6) increases UE power consumption and                             reduces UE battery life. Setting report amount to infinity is to be                             avoided, if there is the possibility of long sessions.                                                                                             |
|--------------------|----|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|                    |    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| PM Event Receivers |    | ENM is used to collect and decode cell trace ROP files used for reporting                             MDT-associated PM Events. The MDT-associated PM Events are fully encoded                             using GPB and therefore fully decoded with the appropriate GPB decoder.                             However, the PM Event CuCpPerUeMdtReport, containing                             M1 measurements, has payload consisting of the raw measurements from the                             UE captured as an ASN-encoded UL-DCCH-Message. To decode the                             UL-DCCH-Message an ASN.1, decoder based on TS 38.331 v16.3                             or later is required. Additionally, the IE CommonLocationInfo requires specific                             decoding-based  TS 37.355. ENM has an Event File Decoder                             that fully supports decoding of MDT PM Events including                                 CuCpPerUeMdtReport used for M1 measurements. If                             MDT-originated PM Events are streamed to an external receiver, then that                             receiver requires the usual GPB decoder used for PM Events as well as                             ASN decoders based on TS 38.331 and TS 37.355.                             For more information on ENM PM Event File Decoder, see ENM PM                                 Event File Decoder in Ericsson Network Manager CPI library. |

## 4.1 Privacy Implications of NR Minimization of Drive Tests

The activation of this feature requires user consent.

Instead of using traditional drive tests, this feature provides a simple, cheap, and

remote method to use for troubleshooting or verification of the radio network. The

feature provides a tool to optimize network planning with the MDT measurement data,

including location information.

User consent is required before activating the MDT function for a UE because of privacy

and legal obligations. Generally, user consent is collected through a customer care

process. The user consent information availability must be considered part of the

subscription data and provisioned to the UDM database.

- Location Data Granularity UE location is sensitive data. To reduce the privacy risk, MDT measurements are implemented as described in 3GPP documentation.
- Location Data Retention Location data is collected in PM Event ROP files in the node. This data is sensitive, and must be deleted according to retention times. For the personal data collected by the MDT feature, the recommendation is 6-12 months. The length of time the PM Event ROP files are stored in the node depends on the total file sizes of the saved files. The maximum storage retention of PM Event ROP files on the node is 25 hours. The retention time is reduced as traffic on the node increases and generally retention time is much less than this. Older files are removed whenever new storage capacity is needed for new files.
- MDT Feature Control Only grant access to the specific set of personal data concerned in the task. Access is granted to personnel if the following criteria are met: Have a valid reason to access personal data. Must perform a task with personal data. Is the one performing the task. For a Baseband Radio Node, the file system is hidden from the user.
- Notice to the User Subscribers must be informed or noticed by the UE that UE location tracking is in progress. This threat is mitigated by the consent that they gave to the operator. There can be an option, for example, to send the subscribers an SMS that troubleshooting is being performed and that UE location is tracked.
- MDT Feature Use Logging Logging privacy events is important in creating evidence that can be used as an audit trail. For example, if there is a privacy breach, an audit trail can identify responsibilities and the root cause of the breach.

# 5 Parameters for NR Minimization of Drive Tests

New attributes are introduced

under NRCellCU, Mdt,

MdtCellProfile, and MdtCellProfileUeCfg MO

Classes.

Table 3   Parameters

| Parameter                                       | Type       | Description          |
|-------------------------------------------------|------------|----------------------|
| NRCellCU.mdtCellProfileRef                      | Introduced | See MOM description. |
| NRCellCU.mdtEnabled                             | Introduced | See MOM description. |
| Mdt.mdtId                                       | Introduced | See MOM description. |
| Mdt.userLabel                                   | Introduced | See MOM description. |
| MdtCellProfile.mdtCellProfileId                 | Introduced | See MOM description. |
| MdtCellProfile.reservedBy                       | Introduced | See MOM description. |
| MdtCellProfile.userLabel                        | Introduced | See MOM description. |
| MdtCellProfile.ueConfGroupType                  | Introduced | See MOM description. |
| MdtCellProfileUeCfg.mdtUeSelectionRatio         | Introduced | See MOM description. |
| MdtCellProfileUeCfg.immediateMdtGnssR16Check    | Introduced | See MOM description. |
| MdtCellProfileUeCfg.mdtCellProfileUeCfgId       | Introduced | See MOM description. |
| MdtCellProfileUeCfg.userLabel                   | Introduced | See MOM description. |
| MdtCellProfileUeCfg.m1Enabled                   | Introduced | See MOM description. |
| MdtCellProfileUeCfg.m1IncludeRrmReport          | Introduced | See MOM description. |
| MdtCellProfileUeCfg.m1ReportTrigger             | Introduced | See MOM description. |
| MdtCellProfileUeCfg.m1ReportInterval            | Introduced | See MOM description. |
| MdtCellProfileUeCfg.m1ReportAmount              | Introduced | See MOM description. |
| MdtCellProfileUeCfg.m1ReportQuantityCell        | Introduced | See MOM description. |
| MdtCellProfileUeCfg.m1MaxReportCells            | Introduced | See MOM description. |
| MdtCellProfileUeCfg.m1ReportQuantityRsIndex     | Introduced | See MOM description. |
| MdtCellProfileUeCfg.m1MaxNoOfRsIndexToReport    | Introduced | See MOM description. |
| MdtCellProfileUeCfg.m1IncludeBeamMeasurement    | Introduced | See MOM description. |
| MdtCellProfileUeCfg.m1EventA2TriggerQuantity    | Introduced | See MOM description. |
| MdtCellProfileUeCfg.m1EventA2ThresholdRsrp      | Introduced | See MOM description. |
| MdtCellProfileUeCfg.m1EventA2ThresholdRsrq      | Introduced | See MOM description. |
| MdtCellProfileUeCfg.m1EventA2ThresholdSinr      | Introduced | See MOM description. |
| MdtCellProfileUeCfg.m1EventA2Hysteresis         | Introduced | See MOM description. |
| MdtCellProfileUeCfg.m1EventA2TimeToTrigger      | Introduced | See MOM description. |
| MdtCellProfileUeCfg.m1IncludeCommonLocationInfo | Introduced | See MOM description. |
| MdtCellProfileUeCfg.m1InterFreqMeasAllowed      | Introduced | See MOM description. |
| MdtCellProfileUeCfg.m6Enabled                   | Introduced | See MOM description. |
| MdtCellProfileUeCfg.m6ReportInterval            | Introduced | See MOM description. |
| MdtCellProfileUeCfg.m6ReportAmount              | Introduced | See MOM description. |
| MdtCellProfileUeCfg.prefUeGroupList             | Introduced | See MOM description. |
| MdtCellProfileUeCfg.ueConfGroupList             | Introduced | See MOM description. |
| MdtCellProfileUeCfg.ueGroupList                 | Introduced | See MOM description. |
| NRFreqRelation.mdtMeasOn                        | Introduced | See MOM description. |
| GNBCUCPFunction.endcMdtM1DelayTimeForMeasGap    | Introduced | See MOM description. |

# 6 Performance of NR Minimization of Drive Tests

Minimization of Drive Tests feature

has associated counters under NRCellCU MO Class, as well as associated

events.

KPIs

This feature has no associated Key Performance Indicators.

Counters

- NRCellCU.pmEndcUeCapabilityGnssLocation
- NRCellCU.pmEndcUeCapabilityUlPdcpDelay
- NRCellCU.pmEndcSgnbAdditionRequest
- NRCellCU.pmEndcSgnbAdditionRequestMdtConsent
- NRCellCU.pmEndcUeMeasurementReport
- NRCellCU.pmEndcUeMeasurementReportMdt
- NRCellCU.pmUeCtxtEstabAtt
- NRCellCU.pmUeCtxtEstabAttMdtConsent
- NRCellCU.pmHoPrepAttInNg
- NRCellCU.pmHoPrepAttInNgMdtConsent
- NRCellCU.pmSaUeCapabilityGnssLocation
- NRCellCU.pmSaUeCapabilityUlPdcpDelay
- NRCellCU.pmSaUeMeasurementReport
- NRCellCU.pmSaUeMeasurementReportMdt

Events

- CuCpPerUeMdtReport
- CuCpPerUeMdtM6UlReport

# 7 Activate NR Minimization of Drive Tests

To use the feature, it must be activated following the usual feature activation

procedure.

Prerequisites

Steps

1. Set the attribute featureState to ACTIVATED in the FeatureState=CXC4012564 MO instance. To enable the feature in a cell:
2. Set the value of the NRCellCU.mdtEnabled attribute to TRUE.

# 8 Deactivate NR Minimization of Drive Tests

If the feature is no longer needed, it can be deactivated following the usual

feature deactivation procedure. It must also be deactivated before the activation of any

conflicting feature.

Prerequisites

Steps

1. Set the attribute featureState to DEACTIVATED in the FeatureState=CXC4012564 MO instance. To disable the feature in a cell:
2. Set the value of the NRCellCU.mdtEnabled attribute to FALSE.

# 9 Engineering Guidelines for NR Minimization of Drive Tests

## 9.1 Configuration of UE Selection Ratio

Collection and reporting of MDT-initiated measurements associated with M1 and M6 UL

measurements collected from UEs can make a significant contribution to the CPU use of

the node. For nodes operating near the connected user capacity, MDT-initiated

measurement report processing is kept below 500 measurement reports for each second.

This keeps the CPU impact below 4% on all supported platforms.

The MdtCellProfileUeCfg.mdtUeSelectionRatio attribute is used to

reduce MDT-initiated measurement report processing impact by applying a selection

algorithm so that only the desired fraction of UEs is selected for MDT.

When MDT has been enabled, the rate at which measurement reports are received and

processed on the node is calculated by adding

pmEndcUeMeasurementReportMdt and

pmSaUeMeasurementReportMdt counters for all the cells associated

with the node. This provides the total of the measurement reports received for each ROP.

Divide this by 900 (15 minutes for each ROP times 60 seconds for each minute) to obtain

the rate for each second. The MdtCellProfileUeCfg.mdtUeSelectionRatio

attribute is used to reduce pmEndcUeMeasurementReportMdt and

pmSaUeMeasurementReportMdt as required.

If MDT has not been enabled, the appropriate setting for

MdtCellProfileUeCfg.mdtUeSelectionRatio can be estimated. A basis

for estimation is the following:

- The rate at which the node is handling MDT consenting UEs. This is obtained adding pmEndcSgnbAdditionRequestMdtConsent, pmUeCtxtEstabAttMdtConsent and pmHoPrepAttInNgMdtConsent for all cells associated with the node. This provides the number of consenting UEs for each ROP. Divide by 900 to obtain the number of consenting UEs for each second.
- The measurement configuration, which affects the number of measurement reports for each UE. Key attributes under MdtCellProfileUeCfg are: m1Enabled, m6Enabled, m1ReportTrigger, m1ReportInterval, and m6ReportInterval.

For example, iIf M1 and M6 are enabled on all the cells and each of these are reporting

periodically, with a report interval of 1024 ms then this is 2*1/1.024 measurement

reports for each second for each UE. For 500 measurement reports for each second,

MdtCellProfileUeCfg.mdtUeSelectionRatio is set in a way ensuring

that when this fractional multiplier is applied to the number of consenting UEs for each

second, 256 consenting UEs are selected.

PM Events capturing MDT initiated measurements are written to files as part of cell trace

jobs. 100 measurement reports for each second generate 100 PM Events for each second or

90000 Events for each ROP. Lab results indicate this occupies 1 MB per ROP when

compressed. This estimate is likely to be low. Lab data compresses better than field

data. When considering the impact to storage, consider if RRM configured measurements

are included in MDT M1 PM Event reporting, as they consume additional space.

## 9.2 Configuration of UE Group Handling

With this configuration, connected UEs under different UE groups are treated differently

based on the assigned configuration.

For more information, see UE Grouping Framework.

The UE group functionality for MDT includes the following functions:

- Accepting or rejecting a specific kind of UEs from being selected for MDT
- Excluding VoNR UEs from being selected for MDT M1 inter-frequency measurement

Example 1

When operators want to enable MDT M1 measurement except specific UE vendors which do

not support MDT M1 measurement:

1. Define the specific UE group id through the PrefUeGroupSelectionProfile.prefUeGroupId attribute.
2. Define the UE group selection criteria through the PrefUeGroupSelectionProfile.selectionCriteria attribute. The variable imeisv is recommended.
3. Set the MdtCellProfileUeCfg.prefUeGroupList attribute with the previously defined UE group id.
4. Set the MdtCellProfileUeCfg.m1Enabled attribute to FALSE.

Example 2

When operators want to enable MDT M1 inter-frequency measurement except VoNR UEs:

1. Define the VoNR UE group id through the UeServiceGroupDefinition.ueServiceGroupId attribute.
2. Define the UE group selection criteria through the UeServiceGroupDefinition.selectionCriteria attribute. The variable 5qi or qci is recommended.
3. Set the MdtCellProfile.ueConfGroupType attribute to UE\_SERVICE\_GROUP.
4. Set the MdtCellProfileUeCfg.ueConfGroupList attribute with the previously defined UE group id.
5. Set the MdtCellProfileUeCfg.m1InterFreqMeasAllowed attribute to FALSE.

## 9.3 Configuration of Inter-Frequency MDT M1 Delay Time for EN-DC

In case of EN-DC deployment, a race scenario between the Master Node and the Secondary

Node might happen during the configuration of inter-frequency MDT M1 measurements, which

requires measurement gap configuration. It might increase abnormal Secondary Node drop

rate.

To avoid race scenarios, the

GNBCUCPFunction.endcMdtM1DelayTimeForMeasGap attribute is used to

configure delay time for the configuration of inter-frequency MDT M1 measurements. The

Secondary Node triggers the SgNB Modification Required procedure after the Timer.

Figure 9   Delay Time for Inter-Frequency MDT M1 Configuration

If the Secondary Node drop rate increases after the NR Minimization of Drive Tests

feature is activated, it is recommended to configure the delay timer to avoid race

scenarios.

The following PM counters can be used to monitor the Secondary Node drop rate:

- NRCellCU.pmEndcRelUeAbnormalSgnb
- NRCellCU.pmEndcRelUeAbnormalSgnbAct