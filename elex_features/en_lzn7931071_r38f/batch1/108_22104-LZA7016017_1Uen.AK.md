---
complexity_score: 16.0
converted_at: '2025-08-13T06:58:05.723695Z'
file_type: html
format: html
image_processing_enhanced: true
images_extracted: 4
images_saved: 3
original_path: 108_22104-LZA7016017_1Uen.AK.html
pictures_extracted: 4
processing_method: docling_multimodal
quality_score: 9.0
source_file: 108_22104-LZA7016017_1Uen.AK.html
source_zip: en_lzn7931071_r38f.zip
tables_extracted: 16
zip_image_types:
- .svg
- .png
- .gif
- .jpg
- .bmp
zip_images_total: 2796
---

# 

Location Support

Contents

![Image](../images/108_22104-LZA7016017_1Uen.AK/additional_3_CP.png)

![Image](../images/108_22104-LZA7016017_1Uen.AK/additional_3_CP.png)

- Overview
- Dependencies
- Feature Operation
    - NRPPa-Based E-CID Positioning Method
    - Location Reporting Procedures
- Network Impact
    - Privacy Implications of Location Support
- Parameters
- Performance
- Activate the Feature
- Appendix: Feature Change History
    - Appendix: 22.Q2: Location Reporting Procedure, Single Standalone Report
    - Appendix: 22.Q3: Location Reporting Procedure, Additional Request Type Support

# 1 Location Support Overview

The Location Support feature introduces the NRPPa-based E-CID positioning method and the

Location Reporting procedures.

| Feature Name           | Location Support                                        |
|------------------------|---------------------------------------------------------|
| Feature Identity       | FAJ 121 5311                                            |
| Value Package Name     | NR Base Package                                         |
| Value Package Identity | FAJ 801 4002                                            |
| Node Type              | Baseband Radio Node                                     |
| Access Type            | NR                                                      |
| Licensing              | Non-license-controlled feature. No license is required. |

Summary

The NRPPa-based E-CID positioning method allows the LMF to start UE measurements for

positioning purposes. As a result, the LMF determines a single location estimate for

the target UE. The Location Support feature supports the NRPPa-based E-CID

positioning method for UEs that do not support the LPP protocol or do not respond to

LPP messages.

The location reporting procedures allow the AMF to request location information for a selected

UE from the gNodeB.

The feature supports the following location report types:

- Single, standalone location report The AMF can request a single location report and the gNodeB provides the serving cell ID. For an RRC\_INACTIVE UE, the gNodeB performs the RAN Paging procedure.
- Continuous location report The gNodeB sends a location report to the AMF every time the UE performs a specific mobility action.

The gNodeB supports parallel ongoing location reporting for both location report types.

The AMF can request the PSCell ID to be included in the report for more accurate location

information.

The feature provides the following benefits:

- The NRPPa-based E-CID positioning method provides the same accuracy as LPP-based E-CID positioning.
- The Location Reporting procedures provide accurate information on the location of the UE which can be used by services that require accurate serving cell identification. The accuracy of the location information can be further increased, if the PSCell ID is included in the location report.
- The Location Reporting procedures provide accurate location information on cell level when the UE performs a connected mode mobility action.
- With the Location Reporting procedures, accurate UE location is available for the AMF, even if the UE is in RRC\_INACTIVE state.

Additional Information

For more information, see the following documents:

- 3GPP TS 38.331; NR; Radio Resource Control (RRC); Protocol specification
- 3GPP TS 38.413, NG-RAN; NG Application Protocol (NGAP)
- 3GPP TS 38.455; NG-RAN; NR Positioning Protocol A (NRPPa)
- 3GPP TS 23.502; 5G; Procedures for the 5G System
- 3GPP TS 38.423; NG-RAN; Xn Application Protocol (XnAP)

# 2 Dependencies of Location Support

The Location Support feature has dependencies with features related to triggering the

UE to change its RRC state, and to inter- or intra-gNodeB PSCell handover during E-CID

measurement reporting.

Feature Dependencies

Table 1   Feature Dependencies

![Image](../images/108_22104-LZA7016017_1Uen.AK/additional_3_CP.png)

![Image](../images/108_22104-LZA7016017_1Uen.AK/additional_3_CP.png)

| Feature Name                                                                                 | Feature Identity   | Access Type   | Relationship   | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
|----------------------------------------------------------------------------------------------|--------------------|---------------|----------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| High-Resolution Timing                                         Advance for Macro Positioning | FAJ 121 5768       | NR            | Related        | If SS-RSRP measurements are requested together with the NR Timing             Advance measurements in the NRPPa E-CID MEASUREMENT INITIATION REQUEST             message, the gNodeB sends the NRPPa E-CID MEASUREMENT INITIATION RESPONSE             message to the LMF with SS-RSRP information. This also applies if NR Timing Advance             measurements cannot be collected.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| NR Advanced UE Location Support                                                              | FAJ 121 5628       | NR            | Related        | The gNodeB returns the E-CID MEASUREMENT         INITIATION RESPONSE message, which contains any E-CID information that is possible       to fetch, if the E-CID MEASUREMENT INITIATION REQUEST message is received with       the Measurement Quantities IE set to any of the following values:  SS-RSRP     Cell-ID     NR Timing Advance     If both the SS-RSRP and the NR Timing Advance values are received, the SS-RSRP       measurements are started first. When the measurement report with SS-RSRP is received, then NR       Timing Advance is fetched from the gNodeB.                                                                                                                                                                                                                                                                                                                                                                                |
| NR Mobility                                                                                  | FAJ 121 5041       | NR            | Related        | In case of handover during E-CID measurement reporting, one             of the following messages is sent to the LMF depending on the reporting type:    NRPPa E-CID MEASUREMENT FAILURE INDICATION in case of periodic                     reporting.     NRPPa E-CID MEASUREMENT INITIATION FAILURE in case of on-demand                     reporting.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| NR-NR Dual Connectivity                                                                      | FAJ 121 5380       | NR            | Related        | The AMF can request the reporting of the PSCell ID by sending the NGAP LOCATION                 REPORTING CONTROL message with the Additional Location                 Information IE to the gNodeB.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| Periodic Measurements for                                         Macro Positioning          | FAJ 121 5767       | NR            | Related        | If periodic SS-RSRP measurements are requested together with NR Timing Advance or uplink             AoA measurements in the NRPPa E-CID MEASUREMENT INITIATION REQUEST             message, the gNodeB sends the NRPPa E-CID MEASUREMENT REPORT message with             SS-RSRP information to the LMF even if other measurements cannot be collected.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| Positioning of UEs without PDU                                 Session                       | FAJ 121 5821       | NR            | Related        | SS-RSRP measurements for UEs without PDU Session configuration                                     can only be performed if the Positioning of UEs without PDU                                     Session feature is activated in the cell where the LMF requests                                     SS-RSRP measurements. The Positioning of UEs without PDU Session                                     feature affects the number of SS-RSRP measurement reports and                                     SS-RSRP periodicity.                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| RRC Inactive State                                                                           | FAJ 121 5328       | NR            | Related        | If the UE changes state to RRC_INACTIVE during E-CID measurement reporting, the gNodeB             sends one of the following NRPPa messages to the LMF depending on the reporting             type:    NRPPa E-CID MEASUREMENT FAILURE INDICATION in case of periodic                     reporting.     NRPPa E-CID MEASUREMENT INITIATION FAILURE in case of on-demand                     reporting.     When the LMF sends the NRPPa E-CID MEASUREMENT INITIATION REQUEST message             to the gNodeB to request measurement for the UE in RRC_INACTIVE state, the following             actions take place:    The gNodeB pages the UE to switch state to RRC_CONNECTED.     The measurements are configured in the UE.     If the AMF requests a single, standalone location report             about a UE in RRC_INACTIVE state, the gNodeB starts the RAN Paging procedure.  Continuous location reporting type is supported  for RRC_INACTIVE UEs. |
| Uplink Angle of Arrival for                                         Macro Positioning        | FAJ 121 5769       | NR            | Related        | If SS-RSRP measurements are requested together with the NR Timing             Advance and uplink AoA measurements in the NRPPa E-CID MEASUREMENT INITIATION                 REQUEST message, the gNodeB sends the NRPPa E-CID MEASUREMENT                 INITIATION RESPONSE message to the LMF with SS-RSRP information. This also             applies if other measurements cannot be collected.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |

Hardware

No specific hardware requirements.

Limitations

The feature has the following limitations:

- Measurement quantities different than SS-RSRP and cell ID are not supported.
- Only intra-frequency measurements are supported.
- The NRPPa-based E-CID positioning method is available for UEs in any of the following conditions. In RRC\_CONNECTED state. With PDU session configured. With UE context configured without PDU session and only the cell ID is requested during on-demand location procedure. UE context is typically configured without PDU session when positioning is requested for the UE in RRC\_IDLE state.
- For periodic E-CID reporting, the shortest supported period is 480 ms.
- For the continuous location reporting on UE presence in the Area of Interest, maximum of two Areas of Interest can be configured for a UE.
- The maximum size of the NGAP messages is 65,535 bytes.
- The Additional Location Information IE is only included in the continuous location reporting on change of serving cell during the Xn-Based Handover.

Network Requirements

ENM version 22.3 or later is required for the feature.

# 3 Feature Operation of Location Support

The feature introduces the NRPPa-based E-CID positioning method and the Location

Reporting procedures.

## 3.1 NRPPa-Based E-CID Positioning Method

The Location Support feature introduces the NRPPa-based E-CID positioning method,

which allows the LMF to initiate UE measurements for positioning purposes.

The NRPPa messages exchanged between the gNodeB and the Access and Mobility Management

Function (AMF) are carried in the following NGAP transport messages:

- NGAP DOWNLINK UE ASSOCIATED NRPPA TRANSPORT
- NGAP UPLINK UE ASSOCIATED NRPPA TRANSPORT

The NRPPa-based E-CID positioning method provides additional measurements for the

location management function to determine a single location estimate for the target

UE.

The NR E-CID measurements are requested in the NRPPa E-CID MEASUREMENT INITIATION

REQUEST message. As a result, the UE measures the SS-RSRP.

The UE measurements are configured and reported over the RRC protocol, and contain the

SS-RSRP for the serving and the neighbor cells.

Positioning is performed according to the Report Characteristics IE

received by the gNodeB in the NRPPa E-CID MEASUREMENT INITIATION REQUEST

message. Based on the Report Characteristics IE, the reporting is

performed on demand or periodically.

### 3.1.1 Procedure for On-Demand E-CID Measurement

If the value of the Report Characteristics IE of the NRPPa

E-CID MEASUREMENT INITIATION REQUEST message is set to

OnDemand, the measurement results are returned to the LMF in

the NRPPa E-CID MEASUREMENT INITIATION RESPONSE message once.

Figure 1   On-Demand Location Procedure

1. The LMF sends the NRPPa E-CID MEASUREMENT INITIATION REQUEST message with the Report CharacteristicsIE set to OnDemand to the gNodeB requesting at least one of the following information: The cell ID The SS-RSRP measurements Note: The gNodeB sends back the NRPPa E-CID MEASUREMENT INITIATION FAILURE message to the LMF if the measurement request is rejected by the gNodeB. This can happen because of the following reasons: The measurement is requested in a different value than SS-RSRP or cell ID. No PDU session exists.
2. The gNodeB forwards the measurement request to the UE through the RRC protocol.
3. The UE performs the measurement and sends the result back to the gNodeB through the RRC protocol. The measurement report contains the SS-RSRP of the serving and the neighbor cells. Note: The first measurement report that is received from the UE is always discarded because it only includes measurements from the serving cell.
4. The gNodeB sends the NRPPa E-CID MEASUREMENT INITIATION RESPONSE message including the E-CID Measurement Result IE to the LMF. The cell ID and the SS-RSRP of the serving and neighbor cells are added to the E-CID Measurement Result IE. The gNodeB sends back the NRPPa E-CID MEASUREMENT INITIATION FAILURE message to the LMF if the gNodeB is aware that it cannot send measurements to the LMF in the NRPPa E-CID MEASUREMENT INITIATION RESPONSE message. This can happen because of the following reasons:
    - Handover to another cell is performed.
    - The RRC Reconfiguration procedure fails.
    - The UE context is released.
    - The UE switches to RRC\_IDLE or RRC\_INACTIVE state.

### 3.1.2 Procedure for Periodic E-CID Measurement

If the value of the Report Characteristics IE of the NRPPa

E-CID MEASUREMENT INITIATION REQUEST message is set to

Periodic, the measurement results are returned to the LMF in

the NRPPa E-CID MEASUREMENT REPORT message periodically.

Figure 2   Periodic Location Procedure

1. The LMF sends the NRPPa E-CID MEASUREMENT INITIATION REQUEST message with the Report Characteristics IE set to Periodic to the gNodeB requesting SS-RSRP measurements.Note: If the measurement request is rejected by the gNodeB, it sends back the NRPPa E-CID MEASUREMENT INITIATION FAILURE message to the LMF. The measurement request can be rejected because of the following reasons: The value of the requested measurement is different than SS-RSRP. The Measurement Periodicity is set to one of the following values: 120 ms 240 ms No PDU session exists.
2. The gNodeB sends back the NRPPa E-CID MEASUREMENT INITIATION RESPONSE message with an empty E-CID Measurement Result IE to the LMF.
3. The gNodeB forwards the measurement request to the UE through the RRC protocol.
4. The UE performs the measurement and sends it back to the gNodeB through the RRC protocol. The measurement report contains the SS-RSRP of the serving and the neighbor cells.
5. The gNodeB sends the NRPPa E-CID MEASUREMENT REPORT message including the E-CID Measurement Result IE to the LMF. The SS-RSRP of the serving and neighbor cells are added to the E-CID Measurement Result IE.
6. Depending on the requested Measurement Periodicity, the gNodeB periodically sends the NRPPa E-CID MEASUREMENT REPORT message including the E-CID Measurement Result IE to the LMF.Note: The gNodeB sends the NRPPa E-CID MEASUREMENT FAILURE INDICATION message to the LMF if the gNodeB is aware that it cannot send measurements to the LMF in the NRPPa E-CID MEASUREMENT REPORT message. This can happen because of the following reasons: Handover to another cell is performed. The RRC Reconfiguration procedure fails. The UE context is released. The UE goes to RRC\_IDLE or RRC\_INACTIVE state.
7. Periodic reporting is terminated and UE measurements are deconfigured when the gNodeB receives the NRPPa E-CID MEASUREMENT TERMINATION COMMAND message from the LMF. Note: If the gNodeB receives the NRPPa ERROR INDICATION message, periodic reporting is terminated and UE measurements are deconfigured.

## 3.2 Location Reporting Procedures

The feature supports Location Reporting procedures between the gNodeB and the 5GC

through the NG-C interface.

The AMF can request a location report from the gNodeB for a UE. The gNodeB reports back

the location information of the UE. In NR-DC, the gNodeB includes the PSCell ID in the

report if requested by the AMF.

Figure 3   Location Reporting Procedure

The Location Reporting procedure is executed according to the following steps:

1. The AMF sends the NGAP LOCATION REPORTING CONTROL message to the gNodeB. The AMF includes the Location Reporting Request Type IE. The AMF can include the Additional Location Information IE in the NGAP LOCATION REPORTING CONTROL message to receive the PSCell ID.
2. The gNodeB sends the NGAP LOCATION REPORT message to the AMF. The gNodeB includes the User Location Information IE in the message.

The gNodeB can perform the following location reporting types:

- Single standalone location reporting type
- Continuous location reporting type Continuous Location Reporting on Change of Serving Cell Continuous Location Reporting on UE Presence in Area of Interest

The feature introduces the following IEs:

- Location Reporting Request Type
- Area of Interest List
- UE Presence in Area of Interest List
- Location Reporting Information

The feature updates the User Location Information IE with the

Age of Location IE and the PSCell

Information IE.

The User Location Information IE includes the following IEs:

- NR Cell Global Identity
- TAI
- Age of Location
- PSCell Information Note: The PSCell Information IE is only included in the User Location Information IE if the UE is configured with NR-DC and the PSCell ID is requested by the AMF.

To provide the PSCell ID to the AMF upon request, in NR-DC the gNodeB as the Master Node

stores the PSCell ID. During the Secondary Node Addition procedure, the Master Node

sends the Location Information at S-NODE reporting  IE in the

XnAP S-NODE ADDITION REQUEST message to the Secondary Node. The

Secondary Node sends the XnAP S-NODE ADDITION REQUEST ACKNOWLEDGE message

to the Master Node with the Location Information at S-NODE IE.

Location Reporting can be configured in the following procedures:

- Initial Context Setup procedure
- NG-Based Handover
- Location Reporting Control procedure

During the Initial Context Setup procedure, the AMF sends the Location

Reporting Request Type IE in the NGAP INITIAL CONTEXT SETUP

REQUEST message to the gNodeB. The gNodeB sends the NGAP LOCATION

REPORT message with the User Location Information IE to

the AMF after the NGAP INITIAL CONTEXT SETUP RESPONSE message. If the

Initial Context Setup procedure fails, the gNodeB does not send location report to the

AMF.

During the NG-Based Handover procedure, the AMF sends the Location Reporting

Request Type IE in the NGAP HANDOVER REQUEST message to

the gNodeB. The gNodeB sends the NGAP LOCATION REPORT message with the

User Location Information IE to the AMF after the NGAP

HANDOVER REQUEST ACKNOWLEDGE  message. If the Initial Context Setup

procedure fails, the gNodeB does not send location report to the AMF.

The location information of the UE can be transferred through the following

procedures:

- Xn-Based Handover
- Retrieve UE Context procedure

During the Xn-Based Handover procedure, the source gNodeB sends the Location

Reporting Information IE in the XnAP HANDOVER REQUEST

message to the target gNodeB. The target gNodeB sends the NGAP LOCATION

REPORT message with the User Location Information IE to

the AMF after the XnAP HANDOVER REQUEST ACKNOWLEDGE  message.

During the Retrieve UE Context procedure, the source gNodeB sends the Location

Reporting Information IE in the XnAP RETRIEVE UE CONTEXT

RESPONSE message to the target gNodeB. The target gNodeB sends the

NGAP LOCATION REPORT message with the User Location

Information IE to the AMF.

### 3.2.1 Single Standalone Location Reporting

The AMF can request a single, standalone location report from the gNodeB by sending the

NGAP LOCATION REPORTING CONTROL message with the Location

Reporting Request Type IE set to Direct to the

gNodeB.

The gNodeB sends the NGAP LOCATION REPORT message to the AMF and the

Location Reporting procedure ends.

Location Reporting can be configured in the following procedures:

- Initial Context Setup
- NG-Based Handover
- Location Reporting Control Procedure

The location information of the UE can be transferred through the following

procedures:

- Xn-Based Handover
- Retrieve UE Context procedure

The Location Reporting procedure can be performed for a UE that is in RRC\_INACTIVE state.

If the AMF requests single, standalone location reporting for an RRC\_INACTIVE UE, the

gNodeB performs RAN paging to reach the UE.

Figure 4   Single Standalone Location Reporting in RRC\_INACTIVE State

The single standalone location reporting type is executed according to the following

steps:

1. The AMF sends the NGAP LOCATION REPORTING CONTROL message with the Location Reporting Request Type IE set to Direct included to the gNodeB.
2. If the UE is in RRC\_INACTIVE state, the gNodeB performs RAN paging in the RNA.
3. If the UE responds to the RAN paging, the gNodeB sends the NGAP LOCATION REPORT message with the User Location Information IE to the AMF. If the UE does not respond to the RAN paging, the UE is sent to RRC\_IDLE state and the gNodeB sends the last known location of the UE with a time stamp in the NGAP LOCATION REPORT message to the AMF.

The gNodeB sends the NGAP LOCATION REPORTING FAILURE INDICATION message to

the AMF in the following cases:

- When the gNodeB receives the NGAP LOCATION REPORTING CONTROL message and an outgoing RRC Connection Re-establishment procedure is in progress.
- When the gNodeB receives the NGAP LOCATION REPORTING CONTROL message and an outgoing handover is in progress.

### 3.2.2 Continuous Location Reporting

The continuous location reporting type can be configured in the following procedures:

- Initial Context Setup procedure
- NG-Based Handover
- Location Reporting Control procedure

The location information of the UE can be transferred through the following

procedures:

- Xn-Based Handover
- Retrieve UE Context procedure

During the continuous location reporting, the gNodeB reports the location information of

the UE every time the UE changes its location.

- For continuous location reporting on change of serving cell, the gNodeB reports the location of the UE every time the serving cell changes.
- For continuous location reporting on UE presence in the Area of Interest, the gNodeB reports the location of the UE every time the presence of the UE changes in relation with the Area of Interest.

The following connected mode mobility actions trigger the location reporting from the

gNodeB:

- NG-Based Handover
- Xn-Based Handover
- Intra-gNodeB Handover
- RRC Connection Re-establishment Procedure

The gNodeB continues to report the location of the UE until the AMF stops the location

reporting or the UE is released to RRC\_IDLE state.

To stop the location reporting, the AMF sends the Location Reporting Request

Type IE with one of the following values:

- Stop change of serving cell
- Stop UE presence in Area Of Interest
- Cancel location reporting for the UE

The gNodeB sends the NGAP LOCATION REPORTING FAILURE INDICATION message to

the AMF in the following cases:

- When the gNodeB receives the NGAP LOCATION REPORTING CONTROL message and an outgoing RRC Connection Re-establishment procedure is in progress.
- When the gNodeB receives the NGAP LOCATION REPORTING CONTROL message and an outgoing handover is in progress.
- When the gNodeB receives one of the following IEs: The AreaOfInterestList IE with two or more Area of Interests with the same reference ID. The AreaOfInterestList IE with E-UTRA CGI or NG-eNBid. An empty AreaOfInterestList IE. An AreaOfInterestList IE with the Out of Range of Location Reporting Reference ID.

The gNodeB sends the NGAP ERROR INDICATION to the AMF if the gNodeB

receives the NGAP LOCATION REPORTING CONTROL message with one of the

following IEs:

- An empty AreaOfInterestList IE.
- An AreaOfInterestList IE with the Out of Range of Location Reporting Reference ID.

#### 3.2.2.1 Continuous Location Reporting on Change of Serving Cell

The AMF can request continuous location reporting on change of serving cell in the

following messages:

- NGAP INITIAL CONTEXT SETUP REQUEST
- NGAP LOCATION REPORTING CONTROL
- NGAP HANDOVER REQUEST

If the gNodeB receives the Location Reporting Request Type IE set to

change of serving cell, it sends the NGAP LOCATION

REPORT message to the AMF whenever the UE moves to a different serving

cell.

The Location Reporting procedure stops in the following cases:

- The AMF sends the NGAP LOCATION REPORTING CONTROL message with one of the following IEs: Stop change of serving cell Cancel location reporting for the UE
- The gNodeB sends the NGAP UE CONTEXT RELEASE COMPLETE message to the AMF and the UE is released to RRC\_IDLE state.

Change of Serving Cell for RRC\_CONNECTED UE

Figure 5   Change of Serving Cell for RRC\_CONNECTED UE

During continuous location reporting on change of serving cell, the gNodeB reports

the location of an RRC\_CONNECTED UE in the following cases:

- The AMF requests continuous location reporting on change of serving cell from the gNodeB by sending the Location Reporting Request Type IE set to change of serving cell in the following messages: NGAP INITIAL CONTEXT SETUP REQUEST NGAP LOCATION REPORTING CONTROL NGAP HANDOVER REQUEST The AMF can include the Additional Location Information IE to receive the PSCell ID with the location report. The gNodeB sends the NGAP LOCATION REPORT message to the AMF. The gNodeB includes the User Location Information IE in the message.
- The UE changes serving cell by performing one of the following connected mode mobility actions: NG-Based Handover Xn-Based Handover Intra-gNodeB Handover RRC Connection Re-establishment Procedure The gNodeB sends the NGAP LOCATION REPORT message to the AMF. The gNodeB includes the User Location Information IE with the updated UE location information in the message.
- In NR-DC, the UE is configured with a PSCell and the gNodeB sends the NGAP LOCATION REPORT message with the PSCell ID IE included if the AMF sent the Additional Location Information IE. In NR-DC, the PSCell is deconfigured for the UE and the gNodeB sends the NGAP LOCATION REPORT message with an empty PSCell ID IE.

Change of Serving Cell for RRC\_INACTIVE UE

Figure 6   Change of Serving Cell for RRC\_INACTIVE UE

During continuous location reporting on change of serving cell, the gNodeB reports

the location of an RRC\_INACTIVE UE in the following cases:

- The AMF requests continuous location reporting on change of serving cell from the gNodeB by sending the Location Reporting Request Type IE set to change of serving cell in the NGAP LOCATION REPORTING CONTROL message. The gNodeB sends the NGAP LOCATION REPORT message to the AMF. The gNodeB includes the User Location Information IE with the last known location of the UE and a time stamp in the message.
- When the UE moves to another cell and performs the RNA update procedure, the gNodeB sends the NGAP LOCATION REPORT message to the AMF. The gNodeB includes the User Location Information IE with the updated location information in the message.
- If the UE starts the RRC Resume procedure from a different serving cell, the gNodeB sends the NGAP LOCATION REPORT message to the AMF. The gNodeB includes the User Location Information IE with the updated location information in the message.

#### 3.2.2.2 Continuous Location Reporting on UE Presence in Area of Interest

If the gNodeB receives the Location Reporting Request Type IE set to

UE presence in the Area of Interest, it sends the NGAP

LOCATION REPORT message to the AMF whenever the presence of the UE changes

in relation to the Area of Interest.

The Area of Interest is configured by the AMF with any combination of the following area

types:

- Tracking Area
- gNodeB
- NR Cell Global Identity

The Area of Interest is identified by the Location Reporting Reference

ID IE and sent in the message that contains the location reporting

request.

The presence of the UE can be defined in relation to the Area of Interest:

| IN      |    | In RRC_CONNECTED state, the UE is in the Area of Interest.  In RRC_INACTIVE state, the UE is in an RNA that covers the same area, or                             a subset of the Area of Interest.   |
|---------|----|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|         |    |                                                                                                                                                                                                      |
| OUT     |    | In RRC_CONNECTED state, the UE is outside of the Area of Interest.  In RRC_INACTIVE state, the UE is in an RNA that does not overlap with the                             Area of Interest.          |
|         |    |                                                                                                                                                                                                      |
| UNKNOWN |    | In RRC_INACTIVE state, the UE is in an RNA that partly overlaps with the                             Area of Interest.                                                                               |

The presence of the UE is included in the UE Presence in Area of Interest List

IE in the NGAP LOCATION REPORT message.

Figure 7   UE Presence Relative to Area of Interest and RNA

The Location Reporting procedure stops in the following cases:

- The AMF sends the NGAP LOCATION REPORTING CONTROL message with the Location Reporting Request Type IE set to stop UE presence in the area of interest to the gNodeB.
- The AMF sends the NGAP LOCATION REPORTING CONTROL message with the Location Reporting Request Type IE set to cancel location reporting for the UE to the gNodeB.
- The gNodeB sends the NGAP UE CONTEXT RELEASE COMPLETE message to the AMF and the UE is released to RRC\_IDLE state.

UE Presence in the Area of Interest for RRC\_CONNECTED UE

Figure 8   UE Presence in Area of Interest for RRC\_CONNECTED UE

During continuous location reporting on UE presence in the Area of Interest, the

gNodeB reports the location of a RRC\_CONNECTED UE in the following cases:

- The AMF requests continuous location reporting on UE presence in the Area of Interest from the gNodeB by sending the Location Reporting Request Type IE set to UE presence in the Area of Interest in the following messages: NGAP INITIAL CONTEXT SETUP REQUEST NGAP LOCATION REPORTING CONTROL NGAP HANDOVER REQUEST The gNodeB sends the NGAP LOCATION REPORT message to the AMF. The gNodeB includes the User Location Information IE and the UE Presence in Area of Interest List IE in the message.
- The presence of the UE changes in relation to the Area of Interest after one of the following connected mode mobility actions: NG-Based Handover Xn-Based Handover Intra-gNodeB Handover RRC Connection Re-establishment Procedure The gNodeB sends the NGAP LOCATION REPORT message to the AMF. The gNodeB includes the User Location Information IE with the updated UE location information in the message.
- In NR-DC, if the UE is already configured with NR-DC when the gNodeB receives the NGAP LOCATION REPORTING CONTROL with the Additional Location Information IE from the AMF, the gNodeB sends the NGAP LOCATION REPORT message with the PSCell ID IE included to the AMF.

UE Presence in Area of Interest for RRC\_INACTIVE UE

Figure 9   UE Presence in Area of Interest for RRC\_INACTIVE UE

During continuous location reporting on UE presence in the Area of Interest, the

gNodeB reports the location of an RRC\_INACTIVE UE in the following cases:

- The AMF requests continuous location reporting on UE presence in the Area of Interest from the gNodeB by sending the NGAP LOCATION REPORTING CONTROL message with the Location Reporting Request Type IE set to UE presence in the Area of Interest. The gNodeB sends the NGAP LOCATION REPORT message to the AMF. The gNodeB includes the User Location Information IE with the last known location of the UE and a time stamp in the message.
- When the presence of the UE changes in relation to the Area of Interest, the gNodeB sends the NGAP LOCATION REPORT message to the AMF after the UE performs an RNA update. The gNodeB includes the User Location Information IE with the updated location information in the message.
- When the presence of the UE changes in relation to the Area of Interest and the UE starts the RRC Resume procedure, the gNodeB sends the NGAP LOCATION REPORT message to the AMF. The gNodeB includes the User Location Information IE with the updated location information in the message.
- When the UE is released to RRC\_INACTIVE state and the selected RNA is different from the designated Area of Interest, the gNodeB sends the NGAP LOCATION REPORT message to the AMF. The gNodeB includes the User Location Information IE with the updated location information in the message.

# 4 Network Impact of Location Support

The Location Support feature can affect the main processor load. It also affects the RRC

protocol of the NR Uu interface, and has requirements related to 5GC and NRPPa

procedures.

Capacity and Performance

Since location reporting increases signaling, it is recommended to configure the

feature for a limited number of subscribers. The amount of increased signaling is

dependent on the network configuration, for example, the number of handovers for

each UE.

Signaling on the NG-C interface can increase if the number of UEs configured with

continuous location reporting is high.

Interfaces

The feature affects the RRC protocol of the NR Uu interface when the gNodeB receives

the NRPPa E-CID MEASUREMENT INITIATION REQUEST message requesting

E-CID UE measurements with SS-RSRP. In this case, the RRC Reconfiguration procedure

is initiated to configure UE measurements.

For the Location Report procedure, the feature affects the following interfaces:

- NG-C The feature introduces the following messages: NGAP LOCATION REPORTING CONTROL NGAP LOCATION REPORT NGAP LOCATION REPORTING FAILURE INDICATION The feature updates the following NGAP messages: Table 2 Updated Messages NGAP Message Included New IE NGAP INITIAL CONTEXT SETUP REQUEST Location Reporting Request Type Area of Interest List NGAP HANDOVER REQUEST NGAP PDU SESSION RESOURCE MODIFY INDICATION User Location Information NGAP PDU SESSION RESOURCE RELEASE RESPONSE Age of Location PSCell Information NGAP PDU SESSION RESOURCE MODIFY RESPONSE NGAP PDU SESSION RESOURCE NOTIFY NGAP UE CONTEXT RELEASE COMPLETE NGAP UE CONTEXT MODIFICATION RESPONSE NGAP UPLINK NAS TRANSPORT NGAP HANDOVER NOTIFY Age of Location NGAP PATH SWITCH REQUEST Age of Location NGAP INITIAL UE MESSAGE Age of Location
- Xn-C The feature adds the Location Information at S-NODE Reporting IE to the XnAP S-NODE ADDITION REQUEST message. The feature adds the Location Information at S-NODE IE to the XnAP S-NODE ADDITION REQUEST ACKNOWLEDGE message. The feature updates the following messages with the Location Reporting Information IE: XnAP RETRIEVE UE CONTEXT RESPONSE XnAP HANDOVER REQUEST

Other Network Elements

The 5GC must support the NRPPa protocol for the NRPPa-based E-CID positioning

method.

## 4.1 Privacy Implications of Location Support

The Location Support feature allows the LMF to initiate UE measurements for positioning

purposes. The measurement results are reported to the LMF, where the UE positioning is

calculated.

The gNodeB provides measurement data to the LMF with messages that can be used to

estimate the location of the target UE. The UE position is defined based on the cell ID

and the SS-RSRP information.

With this feature, the operator can support UE positioning even if the UE does not

support LPP or does not respond to LPP messages.

# 5 Parameters of Location Support

The feature does not introduce or affect, and is not affected by any

parameters.

# 6 Performance of Location Support

The Location Support feature introduces PM events related to the transfer of NGAP

messages between the AMF and the gNodeB-CU-CP.

KPIs

This feature has no associated KPIs.

Counters

The following EBS counters are associated with the feature:

- pmEbsLocRepReqAtt
- pmEbsLocRepReqSucc
- pmEbsLocRepTrans

For more information on EBS counters associated with the feature, see Lists and Delta Lists.

The percentage of successful request for location reporting is expressed as the

quotient of the pmEbsLocRepReqSucc and the

pmEbsLocRepReqAtt EBS counters.

Events

The following PM events are introduced for the NRPPa-based E-CID positioning

method:

- CuCpNgDownlinkUeAssociatedNrppaTransport
- CuCpNgUplinkUeAssociatedNrppaTransport

The following PM events are introduced for the Location Reporting procedure:

- CuCpNgLocationReportingControl
- CuCpNgLocationReport
- CuCpNgLocationReportingFailureIndication
- CuCpProcLocationReporting

# 7 Activate Non-License-Controlled Features

Non-license-controlled features do not require manual activation and cannot be

deactivated.

While license-controlled features need to be activated, non-license-controlled features

are activated automatically during node integration. They also do not

have

a software license key associated, which means that they have no

entries in the LKF that is installed on the node.

In some cases, non-license-controlled features need to be configured

manually or have some of

their

subfunctions enabled to work properly.

# Appendix A: Feature Change History

This section lists changes that affected this feature and the impact it had on the

network.

## Appendix A.a: 22.Q2: Location Reporting Procedure, Single Standalone Report

The feature enhancement introduces the single, standalone location reporting

procedure between the AMF and the gNodeB.

| Feature Name           | Location Support    |
|------------------------|---------------------|
| Feature Identity       | FAJ 121 5311        |
| Value Package Name     | NR Base Package     |
| Value Package Identity | FAJ 801 4002        |
| Node Type              | Baseband Radio Node |
| Access Type            | NR                  |

Summary and Benefits

The feature enhancement introduces the Location Reporting procedure between the AMF

and the gNodeB. The Location Reporting procedure is executed through the NG-C

interface. The AMF can request a single, standalone location report from the

gNodeB.

The feature enhancement updates the User Location Information IE

with the Age of Location and PSCell

Information IEs in the NGAP message exchange between the AMF and the

gNodeB.

In NR-DC, the gNodeB can include the PSCell ID in the location report if requested by

the AMF.

The feature enhancement provides the following benefits:

- The Location Reporting procedure provides accurate information on the location of the UE which can be used by services that require accurate serving cell identification.
- The accuracy of the location information can be further increased if the PSCell ID included in the location report.
- With the Location Reporting procedure, the accurate UE location is available for the AMF, even if the UE is in RRC\_INACTIVE state.

Capacity and Performance

No impact.

Operation

The feature enhancement introduces the following PM events:

- CuCpNgLocationReportingControl
- CuCpNgLocationReport
- CuCpNgLocationReportingFailureIndication
- CuCpProcLocationReporting

Interfaces

The feature enhancement affects the following interfaces:

- NG-C The feature introduces the following messages: NGAP LOCATION REPORTING CONTROL NGAP LOCATION REPORTING REPORT LOCATION REPORTING FAILURE INDICATION The feature enhancement updates the following NGAP messages: Table 3 Updated Messages NGAP Message Included New IE NGAP INITIAL CONTEXT SETUP REQUEST Location Reporting Request Type NGAP HANDOVER REQUEST Location Reporting Request Type NGAP PDU SESSION RESOURCE MODIFY INDICATION User Location Information NGAP PDU SESSION RESOURCE RELEASE RESPONSE Age of Location PSCell Information NGAP PDU SESSION RESOURCE MODIFY RESPONSE NGAP PDU SESSION RESOURCE NOTIFY NGAP UE CONTEXT RELEASE COMPLETE NGAP UE CONTEXT MODIFICATION RESPONSE NGAP UPLINK NAS TRANSPORT NGAP HANDOVER NOTIFY Age of Location NGAP PATH SWITCH REQUEST Age of Location NGAP INITIAL UE MESSAGE Age of Location
- Xn-C The feature adds the Location Information at S-NODE Reporting IE to the XnAP S-NODE ADDITION REQUEST message. The feature adds the Location Information at S-NODE IE to the XnAP S-NODE ADDITION REQUEST ACKNOWLEDGE message.

Hardware

No specific hardware requirements.

Other Network Elements

It is recommended to use ENM version 22.2 or later to support the

MOM changes introduced by this feature enhancement. If the Release Independence

Manager application is used, the MOM changes are supported on earlier ENM versions

also.

The AMF needs to support NGAP Location Reporting procedure.

Related Information

Location Support

## Appendix A.b: 22.Q3: Location Reporting Procedure, Additional Request Type Support

The feature enhancement introduces the continuous location reporting procedures.

| Feature Name           | Location Support    |
|------------------------|---------------------|
| Feature Identity       | FAJ 121 5311        |
| Value Package Name     | NR Base Package     |
| Value Package Identity | FAJ 801 4002        |
| Node Type              | Baseband Radio Node |
| Access Type            | NR                  |
| Impact at Upgrade      | Mandatory           |

Summary and Benefits

The feature enhancement provides support for the continuous location reporting

procedures between the gNodeB and the AMF. The following continuous location

reporting types are introduced:

- Change of serving cell
- UE presence in the area of interest

The feature enhancement provides the following benefits:

- The continuous location reporting procedure provides accurate information on the location of the UE on cell level, which can be used by services that require accurate serving cell identification.
- The continuous location reporting procedure provides up-to-date location information in the following cases: The UE performs connected mode mobility. The UE enters and leaves a designated area of interest.
- Operators can be informed about the selected UE location each time the UE moves into a new cell in RRC\_CONNECTED mode.
- The accuracy of the location information can be further increased on PSCell level.

Capacity and Performance

Signaling on the NG-C interface can increase if the number of UEs configured with

continuous location reporting is high.

Operation

The following EBS counters are associated with the feature enhancement:

- pmEbsLocRepReqAtt
- pmEbsLocRepReqSucc
- pmEbsLocRepTrans

For more information on EBS counters associated with the feature, see Lists and Delta Lists.

The new EBS counters can be filtered with the PLMN and the Location Reporting

Type.

The percentage of the successful requests for location reporting is expressed as the

quotient of the pmEbsLocRepReqSucc and the

pmEbsLocRepReqAtt EBS counters.

The feature enhancement updates the following PM events:

- CuCpNgLocationReport
- CuCpProcLocationReporting

Interfaces

The feature enhancement updates the following messages on the NG-C interface:

- NGAP LOCATION REPORTING CONTROL
- NGAP LOCATION REPORT
- NGAP INITIAL CONTEXT SETUP REQUEST
- NGAP HANDOVER REQUEST

The feature enhancement adds the Location Reporting Information

IE to the following messages on the Xn-C interface:

- XnAP RETRIEVE UE CONTEXT RESPONSE
- XnAP HANDOVER REQUEST

Hardware

No specific hardware requirements.

Other Network Elements

ENM version 22.3 or later is required for the feature.

Related Information

Location Support