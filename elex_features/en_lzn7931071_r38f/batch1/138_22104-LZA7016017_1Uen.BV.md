---
complexity_score: 20.5
converted_at: '2025-08-13T06:57:57.981992Z'
file_type: html
format: html
image_processing_enhanced: true
images_extracted: 4
images_saved: 3
original_path: 138_22104-LZA7016017_1Uen.BV.html
pictures_extracted: 4
processing_method: docling_multimodal
quality_score: 9.0
source_file: 138_22104-LZA7016017_1Uen.BV.html
source_zip: en_lzn7931071_r38f.zip
tables_extracted: 25
zip_image_types:
- .svg
- .png
- .gif
- .jpg
- .bmp
zip_images_total: 2796
---

# 

NR Dynamic Power Optimizer

Contents

![Image](../images/138_22104-LZA7016017_1Uen.BV/additional_3_CP.png)

![Image](../images/138_22104-LZA7016017_1Uen.BV/additional_3_CP.png)

- Overview
- Dependencies
- Feature Operation
    - BWP Configuration
    - NR Dynamic Power Optimizer and NR Reduced Bandwidth Support Feature Coexistence
- Network Impact
- Parameters
- Performance
    - Monitoring the Duration of Power-Saving Mode
    - Improved Uplink Performance in Sparse Search Space Configuration
- Activate the Feature
- Deactivate the Feature
- Engineering Guidelines
    - DCI-Based BWP Switch with Carrier Aggregation
    - DCI-Based BWP Switch with Time-Critical Services
    - DCI-Based BWP Switch with VoNR
    - DCI-Based BWP Switch with UE Allow List
    - Different Amounts of Data in the Buffer
    - Switch Threshold Configuration for Different Maximum Channel Capacities
    - Avoidance of Unnecessary BWP Switches
- Appendix: Feature Change History
    - Appendix: 23.Q1: UE Allow List Support for NR Dynamic Power Optimizer
    - Appendix: 23.Q2: Improved Uplink Performance in Sparse Search Space Configuration
    - Appendix: 23.Q2: Improved MOM Configurability for NR Dynamic Power Optimizer
    - Appendix: 23.Q2: Enhanced Robustness and Performance for NR Dynamic Power Optimizer
    - Appendix: 23.Q3: Interaction Handling between Dynamic Waveform Switch and DCI-Based BWP Switch

# 1 NR Dynamic Power Optimizer Overview

This feature improves battery life for UEs with intermittent traffic by introducing the

DCI-based BWP switch.

| Feature Name           | NR Dynamic Power Optimizer                                         |
|------------------------|--------------------------------------------------------------------|
| Feature Identity       | FAJ 121 5443                                                       |
| Value Package Name     | Performance Boost                                                  |
| Value Package Identity | FAJ 801 4021                                                       |
| Node Type              | Baseband Radio Node                                                |
| Access Type            | NR                                                                 |
| Licensing              | License-controlled feature. One license is required for each node. |

Summary

The feature enables UEs to be configured with multiple BWPs and introduces DCI-based BWP

switch based on the amount of data available in the buffer. By activating this

feature on the node, power consumption can be reduced for UEs with intermittent data

connections.

Additional Information

For more information on related topics, see the following documents:

- 3GPP TS 38.133; NR; Requirements for support of radio resource management
- 3GPP TS 38.213; NR; Physical layer procedures for control
- 3GPP TS 38.331; NR; Radio Resource Control (RRC); Protocol specification
- RAN Parameter Recommendations Lists

# 2 Dependencies of NR Dynamic Power Optimizer

The feature has dependencies with other features that affect the DCI-based BWP

switch.

Table 1   Feature Dependencies

![Image](../images/138_22104-LZA7016017_1Uen.BV/additional_3_CP.png)

![Image](../images/138_22104-LZA7016017_1Uen.BV/additional_3_CP.png)

| Feature Name                                                                              | Feature Identity   | Access Type   | Relationship   | Relationship Scope   | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
|-------------------------------------------------------------------------------------------|--------------------|---------------|----------------|----------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Coverage- and Capacity-Optimized PDCCH                                     Beamforming    | FAJ 121 5397       | NR            | Related        |                      | When the DCI-based BWP switch is enabled, the Coverage- and                                 Capacity-Optimized PDCCH Beamforming feature is recommended to be                                 deactivated.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| Data-Aware Carrier Management                                                             | FAJ 121 5410       | NR            | Related        |                      | When configuring the DCI-based BWP switch with carrier aggregation,                                 the Data-Aware Carrier Management feature must be enabled. For more                                 information, see DCI-Based BWP Switch with Carrier Aggregation.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| DFTS-OFDM Waveform in Uplink                                                              | FAJ 121 5089       | NR            | Related        |                      | The waveforms of all BWPs are switched to be the same when waveform switching is             triggered.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| Link Adaptation for Low Target BLER for                                     Dedicated RAN | FAJ 121 5667       | NR            | Related        |                      | If DCI-based BWP switch is enabled in the cell,             achieving the low target BLER might not be possible for the UE group.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| Link Adaptation for Low Target BLER for Public                                     RAN    | FAJ 121 5666       | NR            | Related        |                      | If DCI-based BWP switch is enabled in the cell,             achieving the low target BLER might not be possible for the UE group.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| NR-NR Dual Connectivity                                                                   | FAJ 121 5380       | NR            | Related        |                      | When the NR-NR Dual Connectivity feature is active, the power-saving mode             is suspended.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| NR Reduced UE Bandwidth Support                                                           | FAJ 121 5442       | NR            | Related        |                      | The NR Dynamic Power Optimizer and the NR Reduced UE Bandwidth Support features can be             activated and used together in TDD cells. In this case, power saving can be configured             on both F-BWP and P-BWP. For more information, see NR Dynamic Power Optimizer and NR Reduced Bandwidth Support Feature Coexistence.                                                                                                                                                                                                                                                                                                                                                                                                                |
| NR Standalone                                                                             | FAJ 121 5060       | NR            | Related        |                      | If the NR Dynamic Power Optimizer feature is enabled, switching to                                 sparse search space is only possible for UEs with PDU Session                                 establishment. UEs that are connected without PDU Session                                 establishment remain in the dense search space.                                                                                                                                                                                                                                                                                                                                                                                                               |
| UE Grouping Framework                                                                     | FAJ 121 5314       | NR            | Related        |                      | The UE Grouping Framework feature can be used to provide power-saving                                 configurations in different UE groups. Recommended mainly to disable                                 power saving for certain UE groups.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| NR Service-Adaptive SR Periodicity                                                        | FAJ 121 5595       | NR            | Conflicting    | Partially impairing  | SR periodicity and BWP can work together. However, their                                 configuration changes cannot occur simultaneously within the same                                     UeModifyReq signal. When SR periodicity and                                 the NR Dynamic Power Optimizer feature are enabled, the                                 configuration for both is sent in the same                                     UeModifyReq signal to the gNodeB. However,                                 based on the gNodeB logic, the configuration of SR periodicity is                                 discarded, while the configuration for the NR Dynamic Power                                 Optimizer feature is applied. |
| NR Service-Adaptive Prescheduling                                                         | FAJ 121 5324       | NR            | Conflicting    | Partially impairing  | When the UE is configured with high-priority prescheduling mode, DCI-based BWP switch             is not recommended.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| NR Aperiodic CSI Trigger Handling                                                         | FAJ 121 5758       | NR            | Conflicting    | Partially impairing  | It is not recommended to use the NR Aperiodic CSI Trigger Handling feature             with the DCI-based BWP switch.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| NR 3CC DL Carrier Aggregation                                                             | FAJ 121 5426       | NR            | Conflicting    | Partially impairing  | If the NR Dynamic Power Optimizer feature is activated and             the NRCellDU.improvedUlInSparseBwp attribute is set to                 true, an additional throughput loss can be expected for each             external TDD SCell with TDD PCell.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| NR 4CC DL Carrier Aggregation                                                             | FAJ 121 5518       | NR            | Conflicting    | Partially impairing  | If the NR Dynamic Power Optimizer feature is activated and             the NRCellDU.improvedUlInSparseBwp attribute is set to                 true, an additional throughput loss can be expected for each             external TDD SCell with TDD PCell.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| NR 5CC DL Carrier Aggregation                                                             | FAJ 121 5639       | NR            | Conflicting    | Partially impairing  | If the NR Dynamic Power Optimizer feature is activated and             the NRCellDU.improvedUlInSparseBwp attribute is set to                 true, an additional throughput loss can be expected for each             external TDD SCell with TDD PCell.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| NR 6CC DL Carrier Aggregation                                                             | FAJ 121 5753       | NR            | Conflicting    | Partially impairing  | If the NR Dynamic Power Optimizer feature is activated and the                 NRCellDU.improvedUlInSparseBwp attribute is set to                 true, an additional throughput loss can be expected for each             external TDD SCell with TDD PCell.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| NR DL Carrier Aggregation                                                                 | FAJ 121 5201       | NR            | Conflicting    | Partially impairing  | If the NR Dynamic Power Optimizer feature is activated and             the NRCellDU.improvedUlInSparseBwp attribute is set to                 true, an additional throughput loss can be expected for each             external TDD SCell with TDD PCell.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| NR Massive MIMO Support for CBRS                                                          | FAJ 121 5569       | NR            | Conflicting    | Partially impairing  | ENM does not support the NR Dynamic Power Optimizer feature related                                 BWP MO configurations when the bandwidth associated with the grant                                 from SAS is changed.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| Uplink Configured Grant for URLLC Dedicated                                     RAN       | FAJ 121 5408       | NR            | Conflicting    | Partially impairing  | The NR Dynamic Power Optimizer feature is disabled on UE group level                                 when the Uplink Configured Grant for URLLC Dedicated RAN feature is                                 configured.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| Uplink Configured Grant for URLLC Public                                     RAN          | FAJ 121 5407       | NR            | Conflicting    | Partially impairing  | The NR Dynamic Power Optimizer feature is disabled on UE group level                                 when the Uplink Configured Grant for URLLC Public RAN feature is                                 configured.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |

Hardware

No specific hardware requirements.

Limitations

The feature has the following limitations:

- DCI-based BWP switch is only supported on the PCell, when all SCells are deactivated.
- DCI for BWP switch can only be scheduled in the downlink, by using DCI format 1\_1 on the PDCCH.
- Only NR Standalone is supported.
- Only one switch DCI is supported for each slot.
- Only the following TDD patterns are supported: 4 downlink + 1 uplink 4 downlink + 1 uplink + 3 downlink + 2 uplink 4 downlink + 2 uplink + 4 downlink 8 downlink + 2 uplink
- Only 40 MHz or wider bandwidth TDD Cells are supported.

Network Requirements

To benefit fully from the feature, the node requires support from the following

network elements:

- It is recommended to use ENM version 23.2 or later to support the MOM changes introduced by this feature. If the Release Independence Manager application is used, the MOM changes are supported on earlier ENM versions also.
- The UE must support the DCI-based BWP switch defined in 3GPP. The UE must support 3GPP Release 16 or later. Some Release 15 UEs can also use the feature if they support DCI-based BWP switch, and a UE Allow List group is created for them with the UE grouping framework.

Related concepts

DCI-Based BWP Switch with UE Allow List

# 3 Feature Operation of NR Dynamic Power Optimizer

This feature provides support for switching between BWPs with different search space

configurations. DCI-based BWP switch is based on the amount of data available in the

buffer.

The feature can configure the following types of BWPs to a UE:

| BWP1   |    | A BWP with dense search space configuration. This means that PDCCH monitoring                         happens in every time slot. When the data volume is high, UEs are switched                         to BWP1.                      |
|--------|----|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|        |    |                                                                                                                                                                                                                                        |
| BWP2   |    | A BWP with sparse search space configuration. This means that PDCCH                         monitoring happens in every fourth time slot. When the data volume is low,                         UEs are switched to BWP2 to save power. |

The feature uses DCI-based BWP switch between BWP1 and BWP2 to reduce battery consumption

for UEs that use low-data-rate services. Power

saving can be achieved by switching these UEs to BWP2.

Figure 1   DCI-Based BWP Switch

Dynamic DCI-based BWP switch is based on the amount of data available in the buffer and

the values of the following attributes:

- DynPowerOpt.downDlThreshold
- DynPowerOpt.downUlThreshold
- DynPowerOpt.lowDlActivityTimer
- DynPowerOpt.lowUlActivityTimer
- DynPowerOpt.upDlThreshold
- DynPowerOpt.upUlThreshold

Downswitch Procedure

Downswitch from BWP1 to BWP2 is performed if all the following conditions are

met:

- The number of downlink slots needed to transmit all bits in the buffer is equal to or smaller than the downlink threshold.
- The number of uplink slots needed to transmit all bits in the UE buffer is equal to or smaller than the uplink threshold.

The downswitch thresholds can be configured with the

DynPowerOpt.downDlThreshold and

DynPowerOpt.downUlThreshold attributes. The value of these

attributes represents the number of downlink and uplink slots times 100. For

example, if the DynPowerOpt.downDlThreshold attribute is set to

100, the downswitch can be performed if the data in the buffer

is equal to or less than the data that can be transmitted in one downlink slot. If

the attribute is set to 200, the threshold is at two downlink

slots, and so on.

Because of the slot-based configuration, the actual downswitch thresholds are not

constant. The actual thresholds correspond to the amount of data that can be

transmitted through the slots configured with the

DynPowerOpt.downDlThreshold and

DynPowerOpt.downUlThreshold attributes. The actual thresholds

are calculated separately for every UE, and are affected by the following

factors:

- The maximum downlink or uplink channel capacityNote: The maximum channel capacity depends on the bandwidth of the PCell and the radio channel quality between the UE and the PCell.
- The value of the DynPowerOpt.downDlThreshold and DynPowerOpt.downUlThreshold attributes
- The number of active UEs with data in the buffer in the PCell

The actual downlink downswitch threshold or uplink downswitch threshold decreases if

any of the following conditions apply:

- The UE moves to poor coverage.
- The number of active UEs with data in the buffer in the PCell increases.

Because of the decrease of the actual downlink downswitch threshold or uplink

downswitch threshold, even low-volume sessions cannot trigger the downswitch to

BWP2. In this case, the gain in UE power saving decreases.

In poor radio conditions, the downswitch procedure is

suspended to prevent frequent DCI-based switch messages and data retransmissions.

This prevents negative impact on the UE and the performance. Even if the downswitch

procedure is suspended, UEs can stay in BWP2 and the upswitch procedure to BWP1 is

performed only if the upswitch conditions are met.

The gNodeB detects poor radio conditions based on the

downlink SINR. The threshold for poor radio conditions, where the downswitch

procedure is suspended, can be configured with the

NRCellDU.poorRadioQualDciBwpSwitchThr attribute. The

threshold for good radio conditions, where the suspension ends and the downswitch

procedure can be performed again, can be configured with the

NRCellDU.qualHystDciBwpSwitch attribute.

Figure 2   Threshold for Poor and Good Radio Conditions

Upswitch Procedure

Upswitch from BWP2 to BWP1 is performed if any of the following conditions are

met:

- The number of downlink slots needed to transmit all bits in the buffer is higher than the downlink threshold.
- The number of uplink slots needed to transmit all bits in the UE buffer is higher than the uplink threshold.

The upswitch thresholds can be configured with the

DynPowerOpt.upDlThreshold and

DynPowerOpt.upUlThreshold attributes. The value of these

attributes represents the number of downlink and uplink slots times 100. For

example, if the DynPowerOpt.upDlThreshold attribute is set to

100, the upswitch from BWP2 to BWP1 is performed if the data in

the buffer is more than the data that can be transmitted in one downlink slot. If

the attribute is set to 200, the threshold is at two downlink

slots, and so on.

Because of the slot-based configuration, the actual upswitch thresholds are not

constant. The actual thresholds correspond to the amount of data that can be

transmitted through the slots configured with the

DynPowerOpt.upDlThreshold and

DynPowerOpt.upUlThreshold attributes. The actual thresholds

are calculated separately for every UE, and are affected by the following

factors:

- The maximum downlink channel capacity or the maximum uplink channel capacityNote: The maximum channel capacity depends on the bandwidth of the PCell and the radio channel quality between the UE and the PCell.
- The value of the DynPowerOpt.upDlThreshold and DynPowerOpt.upUlThreshold attributes
- The number of active UEs with data in the buffer in the PCell

The actual downlink upswitch threshold or uplink upswitch threshold decreases if any

of the following conditions apply:

- The UE moves to poor coverage.
- The number of active UEs with data in the buffer in the PCell increases.

Because of the decrease of the actual downlink upswitch threshold or uplink upswitch

threshold, more low-volume sessions can trigger the upswitch to BWP1. In this case,

the UE power-saving gain decreases.

Figure 3   Downswitch and Upswitch Procedure

Impacted Alarms

When the feature license is not activated, the configuration of DCI-based BWP switch

can raise the Configuration Requires Feature Activation

or the MO Configuration Requires Key Install and Feature

Activation alarm. Invalid BWP configurations can raise the

Inconsistent Configuration alarm.

## 3.1 BWP Configuration

If the feature is activated and the UE supports DCI-based BWP switch, the gNodeB

configures BWP1 first. Later, if the data volume is low, the UE can be switched to BWP2 to

save power.

To support DCI-based BWP switch, two RRC-configured BWPs must be configured for the UE

both in the downlink and

uplink.

The UE is configured with the BWP1 as the first active BWP during the following RRC

procedures:

- Attach
- Re-establishment
- Resume
- Handover

## 3.2 NR Dynamic Power Optimizer and NR Reduced Bandwidth Support Feature Coexistence

The NR Dynamic Power Optimizer and the NR Reduced UE Bandwidth Support features can

be activated and used together in TDD cells. In this case, power saving can be configured on

both BWPs.

Figure 4 shows the procedure for UEs to go from

idle mode to connected mode if both the NR Reduced UE Bandwidth Support and the NR

Dynamic Power Optimizer features are activated.

Figure 4   RRC Procedure from Idle Mode to Connected Mode with Both NR Dynamic Power

Optimizer and NR Reduced Bandwidth Support Features

Activated

The RRC setup and configuration procedure is the following:

1. The UE uses the initial BWP configured in the SIB.
2. The gNodeB configures the P-BWP at RRC setup.
3. The gNodeB checks the UE capabilities. The gNodeB also checks UE capability for DCI switching support.
4. The following options are possible: If the UE only supports a bandwidth that is equal to the initial BWP, it stays configured to the P-BWP. If the UE supports a bandwidth that is equal to the carrier bandwidth, the gNodeB configures the F-BWP to the UE by RRC reconfiguration. If the UE supports DCI switching, and power saving is configured for both P-BWP and F-BWP, then two BWPs are configured for both. P-BWP1 + P-BWP2 and F-BWP1 + F-BWP2. DCI switching is used to change between BWP1 and BWP2. There is no DCI switching between P-BWP and F-BWP. For more information, see the NR Dynamic Power Optimizer and NR Reduced UE Bandwidth Support features.

# 4 Network Impact of NR Dynamic Power Optimizer

The feature can decrease the cell throughput and introduces a message IE on the Uu

interface.

Capacity and Performance

By activating this feature on the node, battery consumption can be reduced for UEs

with intermittent data connections.

The switch DCI has a higher scheduling priority than the DRB transmissions to

minimize the negative performance impact, for example, the increased latency. This

can decrease the cell throughput at high load.

The uplink performance of this feature can be improved by

setting the NRCellDU.improvedUlInSparseBwp attribute to

true. However, this can decrease downlink peak throughput.

Too many VoNR UEs in BWP2 can degrade capacity and

performance.

DCI-based switch with VoNR can have negative impact on the

performance if the UE is in poor radio conditions.

Interfaces

The feature introduces the bwp-SameNumerology RRC IE on the Uu

interface.

Other Network Elements

No impact.

# 5 Parameters for NR Dynamic Power Optimizer

The feature introduces MOM attributes for BWP

configuration.

Table 2   Parameters

| Parameter                                | Type       | Description                                                                                                                                                                            |
|------------------------------------------|------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| BWP.bwpContext                           | Introduced | The attribute can only be modified, when it is referenced or used by                                 a locked cell.                                                                    |
| BWP.bWPId                                | Introduced | See MOM description.                                                                                                                                                                   |
| BWP.isInitialBwp                         | Introduced | See MOM description.                                                                                                                                                                   |
| BWP.numberOfRBs                          | Introduced | The attribute can only be modified, when it is referenced or used by                                 a locked cell.                                                                    |
| BWP.reservedBy                           | Introduced | See MOM description.                                                                                                                                                                   |
| BWP.startRB                              | Introduced | The attribute can only be modified, when it is referenced or used by                                 a locked cell.                                                                    |
| BWP.userLabel                            | Introduced | See MOM description.                                                                                                                                                                   |
| BWPSet.allBWPRegularRef                  | Introduced | The attribute can only be modified, when it is referenced or used by                                 a locked cell.                                                                    |
| BWPSet.bWPSetId                          | Introduced | See MOM description.                                                                                                                                                                   |
| BWPSet.reservedBy                        | Introduced | See MOM description.                                                                                                                                                                   |
| BWPSet.startBWPDlRef                     | Introduced | The attribute can only be modified, when it is referenced or used by                                 a locked cell.                                                                    |
| BWPSet.startBWPUlRef                     | Introduced | The attribute can only be modified, when it is referenced or used by                                 a locked cell.                                                                    |
| BWPSet.ueConfGroupType                   | Introduced | See MOM description.                                                                                                                                                                   |
| BWPSet.userLabel                         | Introduced | See MOM description.                                                                                                                                                                   |
| BWPSetCfg.bWPDlRef                       | Introduced | The attribute can only be modified, when it is referenced or used by                                 a locked cell.                                                                    |
| BWPSetCfg.bWPSetCfgId                    | Introduced | See MOM description.                                                                                                                                                                   |
| BWPSetCfg.bWPUlRef                       | Introduced | The attribute can only be modified, when it is referenced or used by                                 a locked cell.                                                                    |
| BWPSetCfg.dynPowerOptRef                 | Introduced | The attribute can only be modified, when it is referenced or used by                                 a locked cell.                                                                    |
| BWPSetCfg.userLabel                      | Introduced | See MOM description.                                                                                                                                                                   |
| BWPSetUeCfg.bWPSetUeCfgId                | Introduced | See MOM description.                                                                                                                                                                   |
| BWPSetUeCfg.bwpSwitchingFilterRelaxation | Introduced | The BWPSetUeCfg=Base MO instance                                 can only have the attribute modified, when it is referenced or used                                 by a locked cell. |
| BWPSetUeCfg.prefUeGroupList              | Introduced | The BWPSetUeCfg=Base MO instance                             can only have the attribute modified, when it is referenced or used by a                             locked cell.         |
| BWPSetUeCfg.ueConfGroupList              | Introduced | The BWPSetUeCfg=Base MO instance                                 can only have the attribute modified, when it is referenced or used                                 by a locked cell. |
| BWPSetUeCfg.ueGroupList                  | Introduced | The BWPSetUeCfg=Base MO instance                                 can only have the attribute modified, when it is referenced or used                                 by a locked cell. |
| BWPSetUeCfg.userLabel                    | Introduced | See MOM description.                                                                                                                                                                   |
| DynPowerOpt.downDlThreshold              | Introduced | See MOM description.                                                                                                                                                                   |
| DynPowerOpt.downUlThreshold              | Introduced | See MOM description.                                                                                                                                                                   |
| DynPowerOpt.dynPowerOptId                | Introduced | See MOM description.                                                                                                                                                                   |
| DynPowerOpt.lowDlActivityTimer           | Introduced | See MOM description.                                                                                                                                                                   |
| DynPowerOpt.lowUlActivityTimer           | Introduced | See MOM description.                                                                                                                                                                   |
| DynPowerOpt.reservedBy                   | Introduced | See MOM description.                                                                                                                                                                   |
| DynPowerOpt.upDlThreshold                | Introduced | See MOM description.                                                                                                                                                                   |
| DynPowerOpt.upUlThreshold                | Introduced | See MOM description.                                                                                                                                                                   |
| DynPowerOpt.userLabel                    | Introduced | See MOM description.                                                                                                                                                                   |
| NRCellDU.bWPRef                          | Introduced | See MOM description.                                                                                                                                                                   |
| NRCellDU.bWPSetRef                       | Introduced | The attribute can only be modified, when it is referenced or used by                                 a locked cell.                                                                    |
| NRCellDU.improvedUlInSparseBwp           | Introduced | See MOM description.                                                                                                                                                                   |
| NRCellDU.maxNoOfUeInSparseBwp            | Introduced | See MOM description.                                                                                                                                                                   |
| NRCellDU.poorRadioQualDciBwpSwitchThr    | Introduced | See MOM description.                                                                                                                                                                   |
| NRCellDU.qualHystDciBwpSwitch            | Introduced | See MOM description.                                                                                                                                                                   |
| DrxProfileUeCfg.drxRetransmissionTimerUl | Affected   | The attribute is recommended to be set to 16 when                                 the NR Dynamic Power Optimizer feature is                                 activated.                 |

# 6 Performance of NR Dynamic Power Optimizer

The feature introduces PM counters that can be used to observe the

performance.

KPIs

Because of the sparse search space configuration, the number of slots available for

scheduling is lower in BWP2 than in BWP1. Therefore, the amount of data in the

buffer can accumulate in BWP2 until the next available slot. This can increase the

cell throughput, which can be observed with the following KPIs:

- Normalized Average UL MAC Cell Throughput considering successful PUSCH slot only
- Normalized Average DL MAC Cell Throughput considering traffic

These KPIs only consider scheduled slots for cell throughput calculation.

Other cell throughput KPIs that consider non-scheduled slots for cell throughput

calculation are not affected.

The DL HARQ Success Rate PI can decrease because no PDSCH transmission is performed

with a switch DCI which contains fake PDSCH resource allocation. When the UE

receives a switch DCI with fake PDSCH resource allocation, a NACK is sent as HARQ

feedback on the PUCCH. The extent of this impact depends on the regularity of

DCI-based BWP switches, which is decided by different factors. For example, traffic

patterns, the radio condition of active UEs in the cell, and the configured

DCI-based BWP switch thresholds.

The DL HARQ DTX Rate Total PI can increase if a UE does not receive the switch DCI.

In this case, the UE might not receive DCI messages sent in PDCCH monitoring

occasions that are configured differently for BWP1 and BWP2. The missed DCI messages

are counted as DTX. The extent of this impact depends on the number of missed DCI

messages and the number of non-received upswitch DCI messages. The number of

received upswitch DCI messages is decided by different factors. For example, traffic

patterns, the radio condition of active UEs in the cell, and the configured

DCI-based BWP switch thresholds.

Counters

- NRCellDU.pmBwpSwitchDciDropped
- NRCellDU.pmMacRBSymUsedPdcchTypeAAggrLvl1Bwp
- NRCellDU.pmMacRBSymUsedPdcchTypeAAggrLvl2Bwp
- NRCellDU.pmMacRBSymUsedPdcchTypeAAggrLvl4Bwp
- NRCellDU.pmMacRBSymUsedPdcchTypeAAggrLvl8Bwp
- NRCellDU.pmMacRBSymUsedPdcchTypeAAggrLvl16Bwp
- NRCellDU.pmMacRBSymUsedPdcchTypeADciSwitchBwp
- NRCellDU.pmMacVolDlBwp
- NRCellDU.pmMacVolUlBwp
- NRCellDU.pmPdcchDciSwitchBwp
- NRCellDU.pmPdschSchedActivityBwp
- NRCellDU.pmPuschSchedActivityBwp
- NRCellDU.pmSessionTimeUeBwpSamp
- NRCellDU.pmSessionTimeUeBwpSumDistr

The

NRCellDU.pmMacPucchSrPuschGrantLatDistr counter can be

improved if the NRCellDU.improvedUlInSparseBwp attribute is

enabled.

Events

This feature has no associated events.

## 6.1 Monitoring the Duration of Power-Saving Mode

The average duration of power-saving mode can be checked by comparing PM counter

values for BWP1 and BWP2.

The network can show the power-saving gain by tracking the relative time the UE spends as

configured with BWP1 and BWP2.

The following PM counters are used for time tracking:

- NRCellDU.pmSessionTimeUeBwpSamp
- NRCellDU.pmSessionTimeUeBwpSumDistr

The

time the UE spends as configured with BWP1 can be tracked with bin[0] and bin[1] of the

NRCellDU.pmSessionTimeUeBwpSumDistr PM counter. The time the UE

spends as configured with BWP2 can be tracked with bin[2] and bin[3].

Figure 5   MOM Configuration with PM Counter Mapping

In the following examples, the NRCellDU.pmSessionTimeUeBwpSamp PM

counter shows the value of 60000, which corresponds to 30

seconds. This is the total time while

at least one UE is connected.

Example 1   One UE Connected for 30 Seconds without Downswitch

```
NRCellDU::pmSessionTimeUeBwpSamp 60000
NRCellDU::pmSessionTimeUeBwpSumDistr 60000 60000 0 0 0 0 0 0 0 0 0 0 0 0 0 0
```

In this example, the UE spends 100% (60,000/60,000) of the time as configured with

BWP1,

and

0% (0/60,000) of the time as configured with

BWP2.

Example 2   One UE Connected for 30 Seconds with Downswitch after a Short Time

```
NRCellDU::pmSessionTimeUeBwpSamp 60000
NRCellDU::pmSessionTimeUeBwpSumDistr 13805 13805 46195 46195 0 0 0 0 0 0 0 0 0 0 0 0
```

In this example, the UE spends 23% (13,805/60,000) of the time as configured with

BWP1, and 77% (46,195/60,000) of the time as configured with BWP2.

Example 3   Four UEs Connected for 30 Seconds without Downswitch

```
NRCellDU::pmSessionTimeUeBwpSamp 60000
NRCellDU::pmSessionTimeUeBwpSumDistr 240000 240000 0 0 0 0 0 0 0 0 0 0 0 0 0 0
```

In this example, the UEs spend 100% (240,000/60,000) of the time as configured with

BWP1.

Example 4   Four UEs Connected for 30 Seconds with Downswitch

```
NRCellDU=1 pmSessionTimeUeBwpSamp 60000
NRCellDU=1 pmSessionTimeUeBwpSumDistr 53615 53615 186385 186385 0 0 0 0 0 0 0 0 0 0 0 0
```

In this example, the used traffic model is UDP. Full buffer data is transmitted

initially. A minimal amount of data is transmitted later, which causes a

downswitch.

The accumulated relative time for all UEs is 53,615/60,000, and the accumulated time

for UEs configured with BWP2 is 186385/60000. This means that the UEs spend 3.47

times more time as configured with BWP2. Therefore, the UEs save power around 77%

(186,385/(53,615 + 186,385)) of the time.

Example 5   Four UEs Connected for 30 Seconds at Different Times without Downswitch

```
NRCellDU::pmSessionTimeUeBwpSamp 240000
NRCellDU::pmSessionTimeUeBwpSumDistr 240000 240000 0 0 0 0 0 0 0 0 0 0 0 0 0 0
```

In this example, each UE spends 100% (60,000/60,000) of the time as configured with

BWP1 in a sequential order, that is, not in parallel.

## 6.2 Improved Uplink Performance in Sparse Search Space Configuration

Uplink performance can be improved when the gNodeB uses more uplink

slots.

The gNodeB uses 50% more uplink slots in BWP2. This improves the uplink performance if

the NRCellDU.improvedUlInSparseBwp attribute is set to

true. The NRCellDU.improvedUlInSparseBwp

attribute must have the same value in all TDD cells of the same gNodeB, otherwise, the

SW Error alarm is raised.

The NRCellDU.improvedUlInSparseBwp attribute can be set to

true only if the feature is enabled on the gNodeB. The gNodeB

decides which value to use on all configured cells based on the value that is used on

the first cell.

Only the following TDD patterns are supported when the

NRCellDU.improvedUlInSparseBwp attribute is set to

true:

- 4 downlink + 1 uplink
- 4 downlink + 2 uplink + 4 downlink
- 8 downlink + 2 uplink

Downlink peak throughput can decrease in single-UE scenarios if the

NRCellDU.improvedUlInSparseBwp attribute is set to

true. This throughput decrease occurs if the following conditions

are fulfilled:

- An external SCell with carrier aggregation is used.
- The SCell and the SpCell use the 4 downlink + 1 uplink TDD pattern.

This degradation in downlink peak throughput can be avoided by setting the

NRCellDU.improvedUlInSparseBwp attribute to

false.

This degradation does not occur in multi-UE scenarios if two or more UEs run downlink

peak throughput on the same SpCell and external SCell.

# 7 Activate NR Dynamic Power Optimizer

To use the feature, it must be activated following the usual feature activation

procedure.

Prerequisites

- The license key is installed in the node.
- CCTR is active for at least one week before this procedure to collect enough troubleshooting data.

Steps

1. Lock the cell.
2. Set the FeatureState.featureState attribute to ACTIVATED in the FeatureState=CXC4012607 MO instance.
3. Unlock the cell.

After This Task

Keep CCTR active for at least one week after this procedure for continued collection of troubleshooting data.

# 8 Deactivate NR Dynamic Power Optimizer

If the feature is no longer needed, it can be deactivated following the usual

feature deactivation procedure. It must also be deactivated before the activation of any

conflicting feature.

Prerequisites

- CCTR is active for at least one week before this procedure to collect enough troubleshooting data.

Steps

1. Lock the cell.
2. Set the following attributes to an empty value to disable the NR Dynamic Power Optimizer feature in the cell: NRCellDU.bWPSetRef NRCellDU.bWPRef
3. Set the FeatureState.featureState attribute to DEACTIVATED in the FeatureState=CXC4012607 MO instance.
4. Unlock the cell. Note: If the attributes in Step 2 are set to non-empty values while the feature is deactivated, the following happens after the node is restarted or the cell is unlocked: The cell is disabled. On the NRCellDU MO, the Configuration Requires Feature Activation alarm is raised with the following additional text: NR Dynamic Power Optimizer is deactivated.

After This Task

Keep CCTR active for at least one week after this procedure for continued collection of troubleshooting data.

Related Information

Configuration Requires Feature Activation

# 9 Engineering Guidelines for NR Dynamic Power Optimizer

## 9.1 DCI-Based BWP Switch with Carrier Aggregation

Certain limitations must be considered when configuring DCI-based BWP switch with

carrier aggregation.

When configuring DCI-based BWP switch with carrier aggregation, the following limitations must be

considered:

- DCI-based BWP switch to BWP2 is not supported when an SCell is activated.
- SCell activation is not supported when the UE is in BWP2.
- The SCell activation threshold must be higher than the BWP upswitch threshold for downlink and uplink. The SCell activation threshold can be configured with the CaSCellHandlingUeCfg.sCellActDeactDataThres attribute for downlink and the CaSCellHandlingUeCfg.sCellActDeactUlDataThresh attribute for uplink. The BWP upswitch threshold can be configured with the DynPowerOpt.upDlThreshold attribute for downlink and the DynPowerOpt.upUlThreshold attribute for uplink.Note: The unit of the threshold values is different. For example, if the DynPowerOpt.upDlThreshold attribute is set to 100 (1 slot), the CaSCellHandlingUeCfg.sCellActDeactDataThres attribute must be set to a value that is higher than 10 (1 slot). If the DynPowerOpt.upUlThreshold attribute is set to 100 (1 slot), the CaSCellHandlingUeCfg.sCellActDeactUlDataThresh attribute must also be set to a value that is higher than 10 (1 slot).
- The SCell deactivation threshold must be higher than the BWP downswitch threshold for downlink and uplink. The SCell deactivation threshold can be determined by subtracting the value of the CaSCellHandlingUeCfg.sCellActDeactDataThresHyst attribute from the value of the CaSCellHandlingUeCfg.sCellActDeactDataThres attribute for downlink. The SCell deactivation threshold can be determined by subtracting the value of the CaSCellHandlingUeCfg.sCellActDeactUlDataThreshHyst attribute from the value of the CaSCellHandlingUeCfg.sCellActDeactUlDataThresh attribute for uplink. The BWP downswitch threshold can be configured with the DynPowerOpt.downDlThreshold attribute for downlink and the DynPowerOpt.downUlThreshold attribute for uplink.Note: The unit of the threshold values is different. For example, if the DynPowerOpt.downDlThreshold attribute is set to 10 (0.1 slot), the difference between the values of the CaSCellHandlingUeCfg.sCellActDeactDataThres attribute and the CaSCellHandlingUeCfg.sCellActDeactDataThresHyst attribute must be higher than 1 (0.1 slot). If the DynPowerOpt.downUlThreshold attribute is set to 10 (0.1 slot), the difference between the values of the CaSCellHandlingUeCfg.sCellActDeactUlDataThresh attribute and the CaSCellHandlingUeCfg.sCellActDeactUlDataThreshHyst attribute must be higher than 1 (0.1 slot).

## 9.2 DCI-Based BWP Switch with Time-Critical Services

Data

for time-critical services can be scheduled both on BWP1 and BWP2. However, to minimize the

negative performance impact, DCI-based BWP switch is recommended to be suspended on UE group

level when time-critical services are used.

An extra scheduling delay can occur for UEs in BWP2 because the number of slots available

for scheduling is lower in BWP2 than in BWP1 with the sparse search space configuration.

Therefore, it is not recommended to use the DCI-based BWP switch in delay-sensitive

scenarios, such as time-critical services.

Example 6   MOM Configuration for time-critical service in a

100 MHz TDD Cell

An example for the typically used MOM configuration for

time-critical service in a 100 MHz TDD cell is shown in Figure 6. The use of this configuration

ensures that the following conditions apply to the UE:

- The power-saving mode is enabled, if supported.
- The power-saving mode is suspended when a time-critical service is established, and resumed when the service is released.

The UeMobilityGroupDefinition MO must not be

configured in the UeGroupSelection MO. The configured values are

ignored.

The BWPSetUeCfg.bwpSwitchingFilterRelaxation

attribute is set to false for the time-critical service

group.

Figure 6   Example MOM Configuration for suspending power saving mode during

time-critical service

Related Information

5G Voice SA RAN Solution Guideline

UE Grouping Framework

## 9.3 DCI-Based BWP Switch with VoNR

The negative impact caused by a DCI-based switch with VoNR can be prevented with

proper configuration.

Data for VoNR can be scheduled on both BWP1 and BWP2.

Too many VoNR UEs in BWP2 can degrade capacity and performance. This can be prevented by

defining the maximum number of UEs that are allowed in BWP2 through the

NRCellDU.maxNoOfUeInSparseBwp attribute.

It is not optimal that UEs stay in BWP2 in poor radio conditions, as it can have negative

impact on performance. As VoNR has a unique traffic pattern, the upswitch procedure

might not be triggered in time. This can be prevented with the following options:

- Using a different BWP switch configuration for VoNR with the UE Grouping Framework.
- Setting the DynPowerOpt.upDlThreshold and the DynPowerOpt.upUlThreshold attributes to lower values when configuring DCI-based BWP switch with VoNR.

Figure 7   Recommended Configuration for DCI-Based Switch with VoNR

## 9.4 DCI-Based BWP Switch with UE Allow List

The UE Grouping Framework can be used to create a UE Allow List for the 3GPP Release

15 UEs that support DCI-based BWP switch. The UE groups are created with the use of the

UeServiceGroupDefinition MO class and the

UeServiceGroupDefinition.selectionCriteria attribute.

The UeServiceGroupDefinition.selectionCriteria attribute is configured

using the IMEI-TAC and optionally the IMEI-SVN to identify the UE model and the software

version.

It is possible to configure more than one UE groups for the UE Allow List.

Example 7   MOM Configuration for UE Allow List in a 100 MHz

TDD Cell

An example for the typically used MOM configuration for UE Allow

List in a 100 MHz TDD cell is shown in Figure 8.

The

UeMobilityGroupDefinition MO must not be configured in the

UeGroupSelection MO. The configured values are

ignored.

The

UeServiceGroupDefinition.ueServiceGroupPriority attribute

must be set to a lower value for the UE Allow List group than for the time-critical

service group.

The BWPSetUeCfg.bwpSwitchingFilterRelaxation

attribute is set to true for the UE Allow List group. The

BWPSetUeCfg.bwpSwitchingFilterRelaxation attribute is set

to false for the Base group.

Figure 8   Example MOM Configuration for UE Allow List

Related Information

UE Grouping Framework

## 9.5 Different Amounts of Data in the Buffer

The UE can be kept in BWP2 by changing the upswitch threshold.

The amount of data in the buffer can vary because of the following factors:

- Data burst payload size
- Radio channel quality
- Downlink and uplink slot configuration in the TDD pattern
- Number of active UEs with data in the buffer in the PCell

To keep the UE in BWP2 when the expected data level in the buffer is known for the

targeted low-data-rate services, the BWP switch threshold can be set so that the

upswitch threshold is bigger than the expected data level in the buffer. For example, if

it is expected that the data level in the buffer does not exceed 7 kB for the targeted

low-data-rate services, the upswitch threshold can be set to 10 kB. This configuration

leaves some margin for the possible changes of the data level in the buffer.

## 9.6 Switch Threshold Configuration for Different Maximum Channel Capacities

The actual switch thresholds are proportional to the maximum channel capacity and the

configured threshold parameter values.

The actual switch threshold is proportional to the maximum channel

capacity.

The maximum channel capacity is the maximum data rate that a UE can achieve with

unlimited data in the buffer in a certain radio channel condition when all PDSCH

resources or PUSCH resources are available for the UE. For example, the actual switch

threshold for a UE with 150 Mbps maximum downlink channel capacity is 10 times lower

than the actual switch threshold for a UE with 1,500 Mbps maximum channel capacity. The

actual switch threshold is two times higher if the configured switch threshold parameter

is set to a value that is two times higher.

The total number of active UEs with data in the buffer in the PCell is considered in the

calculation of the actual switch thresholds, because the cell capacity must be shared by

all active UEs. The actual switch threshold decreases with additional active UEs in the

PCell.

The average number of active UEs can be considered at the configuration of the threshold

parameters, such as the DynPowerOpt.upDlThreshold attribute. For

example, if the average number of active UEs is around or less than one, Table 3 can be used.

Table 3, Table 4, and Table 5 show the actual switch thresholds for

different maximum channel capacities and different values of the configured threshold

parameters, when the number of active UEs is 1, 5, or 10.

Table 3   Actual Switch Thresholds When the Number of Active UEs Is One

| Maximum Channel Capacity (Mbps)   | Maximum Channel Capacity (Mbps)   | Configured Threshold Parameter Value   | Actual Switch Threshold (kB)   | Actual Switch Threshold (kB)   |
|-----------------------------------|-----------------------------------|----------------------------------------|--------------------------------|--------------------------------|
| Downlink                          | Uplink                            | Configured Threshold Parameter Value   | Downlink                       | Uplink                         |
| 1,500                             | 100                               | 100                                    | 134                            | 31                             |
| 1,500                             | 100                               | 10                                     | 13.4                           | 3.1                            |
| 150                               | 10                                | 100                                    | 13.4                           | 3.1                            |
| 150                               | 10                                | 10                                     | 1.3                            | 0.3                            |
| 15                                | 1                                 | 100                                    | 1.3                            | 0.3                            |
| 15                                | 1                                 | 10                                     | 0.13                           | 0.03                           |

Table 4   Actual Switch Thresholds When the Number of Active UEs Is Five

| Maximum Channel Capacity (Mbps)   | Maximum Channel Capacity (Mbps)   | Configured Threshold Parameter Value   | Actual Switch Threshold (kB)   | Actual Switch Threshold (kB)   |
|-----------------------------------|-----------------------------------|----------------------------------------|--------------------------------|--------------------------------|
| Downlink                          | Uplink                            | Configured Threshold Parameter Value   | Downlink                       | Uplink                         |
| 1,500                             | 100                               | 100                                    | 96                             | 22                             |
| 1,500                             | 100                               | 10                                     | 9.6                            | 2.2                            |
| 150                               | 10                                | 100                                    | 9.6                            | 2.2                            |
| 150                               | 10                                | 10                                     | 0.96                           | 0.2                            |
| 15                                | 1                                 | 100                                    | 0.96                           | 0.2                            |
| 15                                | 1                                 | 10                                     | 0.1                            | 0.02                           |

Table 5   Actual Switch Thresholds When the Number of Active UEs Is 10

| Maximum Channel Capacity (Mbps)   | Maximum Channel Capacity (Mbps)   | Configured Threshold Parameter Value   | Actual Switch Threshold (kB)   | Actual Switch Threshold (kB)   |
|-----------------------------------|-----------------------------------|----------------------------------------|--------------------------------|--------------------------------|
| Downlink                          | Uplink                            | Configured Threshold Parameter Value   | Downlink                       | Uplink                         |
| 1,500                             | 100                               | 100                                    | 70                             | 16                             |
| 1,500                             | 100                               | 10                                     | 7                              | 1.6                            |
| 150                               | 10                                | 100                                    | 7                              | 1.6                            |
| 150                               | 10                                | 10                                     | 0.7                            | 0.16                           |
| 15                                | 1                                 | 100                                    | 0.7                            | 0.16                           |
| 15                                | 1                                 | 10                                     | 0.07                           | 0.016                          |

Example 8

In Table 3, the actual downlink upswitch

threshold is 13.4 kB for a UE with 150 Mbps maximum downlink channel capacity and

the configured threshold parameter, the DynPowerOpt.upDlThreshold

attribute set to 100. An upswitch is triggered for this UE when the

amount of data in the downlink buffer is bigger than 13.4 kB. If this actual

upswitch threshold is considered to be too high and must be halved (reduced to 6.7

kB), the configured upswitch threshold parameter, the

DynPowerOpt.upDlThreshold attribute must be set to

50.

Example 9

In Table 4, if a UE is intended to

continue the use of a certain service in BWP1 with 30 Mbps maximum downlink channel

capacity, and the amount of data in the downlink buffer is expected to be higher

than 0.4 kB for that service, the actual downlink downswitch threshold must be lower

than 0.4 kB with some margin to prevent a downswitch to BWP2. In this case, the

configured downswitch threshold parameter, the

DynPowerOpt.downDlThreshold attribute can be set to

10. This way, the actual downlink downswitch threshold is about

0.2 kB.

Example 10

In Table 3, if UEs are intended to

continue the use of certain low-data-rate services in BWP2 with 150 Mbps maximum

downlink channel capacity, and the amount of data in the downlink buffer is expected

to be between 0.5 kB and 2 kB for these low-data-rate services, the actual downlink

upswitch threshold must be higher than 2 kB with some margin to prevent an upswitch

to BWP1. In this case, the configured upswitch threshold parameter, the

DynPowerOpt.upDlThreshold attribute can be set to

30. This way, the actual downlink upswitch threshold is about 4

kB.

If the UEs using these low-data-rate services move to bad radio channel conditions,

which allow 10 Mbps maximum channel capacity, the actual downlink upswitch threshold

is about 0.3 kB. In this case, the configured upswitch threshold parameter, the

DynPowerOpt.upDlThreshold attribute is set to

30, and these UEs are expected to stay in BWP1.

## 9.7 Avoidance of Unnecessary BWP Switches

The number of BWP switches can be decreased with proper threshold

settings.

The value of the DynPowerOpt.downDlThreshold and

DynPowerOpt.downUlThreshold attributes cannot be too close to the

value of the DynPowerOpt.upDlThreshold and

DynPowerOpt.upUlThreshold attributes. This way, unnecessary

switches can be avoided between BWP2 and BWP1.

The upswitch threshold parameter is recommended to be set to a value that is at least

five times higher than the value of the corresponding downswitch threshold parameter.

For example, if the DynPowerOpt.downDlThreshold attribute is set to

10, the DynPowerOpt.upDlThreshold attribute is

recommended to be set to at least 50.

If too many BWP switches are observed between BWP2 and BWP1, it is recommended to

increase the difference between the values of upswitch threshold parameters and

downswitch threshold parameters.

A long enough low-activity timer is recommended to be set to avoid too frequent DCI-based

BWP switches due to the bursty traffic, especially for high-data-rate services. The

low-activity timer can be configured with the

DynPowerOpt.lowDlActivityTimer and

DynPowerOpt.lowUlActivityTimer attributes.

In most of the cases, the arrival time between data bursts is expected to be shorter than

200 ms for high-data-rate services, for example, video streaming. Therefore, it is

recommended to set the DynPowerOpt.lowDlActivityTimer and

DynPowerOpt.lowUlActivityTimer attributes to at least

200. If the actual arrival time between data bursts is different

from the expectation, the low-activity timer parameters must be configured properly

according to the traffic pattern in the network.

If too many BWP switches are observed between BWP2 and BWP1, it is recommended to

increase the value of the low-activity timer parameters.

# Appendix A: Feature Change History

This section lists changes that affected this feature and the impact it had on the

network.

## Appendix A.a: 23.Q1: UE Allow List Support for NR Dynamic Power Optimizer

This feature enhancement creates a UE allow list for Release 15 UEs that support

DCI-based BWP switching and enables them to use the NR Dynamic Power Optimizer

feature.

| Feature Name           | NR Dynamic Power Optimizer   |
|------------------------|------------------------------|
| Feature Identity       | FAJ 121 5443                 |
| Value Package Name     | Performance Boost            |
| Value Package Identity | FAJ 801 4021                 |
| Node Type              | Baseband Radio Node          |
| Access Type            | NR                           |
| Impact at Upgrade      | Optional                     |

Summary and Benefits

A UE allow list is created with the UE Grouping Framework feature by using the

correct IMEI-TAC and IMEI-SVN values for the specific UE models and software

versions.

The main benefit of the feature enhancement is that it enables Release 15 UEs to

reduce battery consumption with the NR Dynamic Power Optimizer feature.

Capacity and Performance

No impact.

Operation

This feature enhancement introduces the

BWPSetUeCfg.bwpSwitchingFilterRelaxation attribute that

enables BWP switching for the selected Release 15 UEs. The default value of the

attribute is false.

Interfaces

No impact.

Hardware

No specific hardware requirements.

Other Network Elements

This feature enhancement requires support from the following network elements:

- It is recommended to use ENM version 23.1 or later to support the MOM changes introduced by this feature enhancement. If the Release Independence Manager application is used, the MOM changes are supported on earlier ENM versions also.
- The UE must support DCI-based BWP switch defined in 3GPP.
- The masked IMEISV values are sent by the Access and Mobility Management Function (AMF) to the gNodeB for the UE group evaluation.

Related Information

NR Dynamic Power Optimizer

UE Grouping Framework

## Appendix A.b: 23.Q2: Improved Uplink Performance in Sparse Search Space Configuration

This feature enhancement improves the uplink

performance.

| Feature Name           | NR Dynamic Power Optimizer   |
|------------------------|------------------------------|
| Feature Identity       | FAJ 121 5443                 |
| Value Package Name     | Performance Boost            |
| Value Package Identity | FAJ 801 4021                 |
| Node Type              | Baseband Radio Node          |
| Access Type            | NR                           |
| Impact at Upgrade      | Mandatory                    |

Summary and Benefits

This feature enhancement improves the uplink performance in BWP2 with the use of the

NRCellDU.improvedUlInSparseBwp attribute. It also improves UE

power saving, as UEs can stay in BWP2 for a longer period. This change is not

applicable for the 4 downlink + 1 uplink + 3 downlink + 2 uplink TDD pattern.

Capacity and Performance

This feature enhancement can improve the uplink performance in BWP2 by using more

uplink scheduling occasions.

This feature enhancement can improve the

NRCellDU.pmMacPucchSrPuschGrantLatDistr counter when the

NRCellDU.improvedUlInSparseBwp attribute is set to

true.

Operation

This feature enhancement introduces the

NRCellDU.improvedUlInSparseBwp attribute.

The introduction of the NRCellDU.improvedUlInSparseBwp attribute

causes configuration limitations which might result in cell setup rejection with the

SW Error alarm and the Contact next level of support and provide log

files required by Data Collection Guideline. additional text.

Interfaces

No impact.

Hardware

No specific hardware requirements.

Other Network Elements

It is recommended to use ENM version 23.2 or later to support the

MOM changes introduced by this feature enhancement. If the Release Independence

Manager application is used, the MOM changes are supported on earlier ENM versions

also.

Related Information

NR Dynamic Power Optimizer

## Appendix A.c: 23.Q2: Improved MOM Configurability for NR Dynamic Power Optimizer

This feature enhancement improves the BWP MOM

configurability.

| Feature Name           | NR Dynamic Power Optimizer   |
|------------------------|------------------------------|
| Feature Identity       | FAJ 121 5443                 |
| Value Package Name     | Performance Boost            |
| Value Package Identity | FAJ 801 4021                 |
| Node Type              | Baseband Radio Node          |
| Access Type            | NR                           |
| Impact at Upgrade      | Mandatory                    |

Summary and Benefits

This feature enhancement aligns the BWP MOM configuration for TDD and the UE grouping

framework configuration.

Capacity and Performance

No impact.

Operation

Figure 9   Old MOM Configuration for TDD BWP with Incorrect BWPSetUeCfg

Configuration

Figure 10   New MOM Configuration for TDD BWP with Corrected BWPSetUeCfg

Configuration

- Only one BWPSetUeCfg MO class instance can be configured where all the following MO attributes are empty: BWPSetUeCfg.prefUeGroupList BWPSetUeCfg.ueConfGroupList BWPSetUeCfg.ueGroupList
- The BWPSetUeCfg MO instance must have at least one BWPSetCfg MO instance that does not point to the DynPowerOpt MO class instance.

This feature enhancement adds UE grouping framework-specific consistency checks for

the following attributes:

- BWPSetUeCfg.ueGroupList
- BWPSetUeCfg.prefUeGroupList
- BWPSetUeCfg.ueConfGroupList

For more information about the consistency checks, see Algorithm for Selection

of MO Class Instances Based on UE Groups in UE Grouping Framework.

This feature enhancement performs an adaptation of the NR Dynamic Power Optimizer

configuration for each BWPSet MO instance. If a

BWPSetUeCfg MO instance has only one child

BWPSetCfg MO instance, which has a reference to the

DynPowerOpt MO instance, then an appropriate

BWPSetCfg MO instance is added, with no reference to the

DynPowerOpt MO instance, as a second child to the same

BWPSetUeCfg MO instance.

This is a necessary adaptation of the existing configuration and it is performed

automatically during the upgrade.

Interfaces

No impact.

Hardware

No specific hardware requirements.

Other Network Elements

It is recommended to use ENM version 23.2 or later to support the

MOM changes introduced by this feature enhancement. If the Release Independence

Manager application is used, the MOM changes are supported on earlier ENM versions

also.

Related Information

NR Dynamic Power Optimizer

## Appendix A.d: 23.Q2: Enhanced Robustness and Performance for NR Dynamic Power Optimizer

This feature enhancement improves robustness and

performance.

| Feature Name           | NR Dynamic Power Optimizer   |
|------------------------|------------------------------|
| Feature Identity       | FAJ 121 5443                 |
| Value Package Name     | Performance Boost            |
| Value Package Identity | FAJ 801 4021                 |
| Node Type              | Baseband Radio Node          |
| Access Type            | NR                           |
| Impact at Upgrade      | Mandatory                    |

Summary and Benefits

This feature enhancement prevents negative impact on the UE and on the system

performance by reducing the number of switch DCI messages and data retransmissions

in poor radio conditions. This can be achieved by allowing the gNodeB to suspend the

downswitch procedure in poor radio conditions by setting the

NRCellDU.qualHystDciBwpSwitch and the

NRCellDU.poorRadioQualDciBwpSwitchThr attributes.

This feature enhancement prevents longer BWP switch delays and negative performance

effects on the data transmission. This can be achieved by defining the maximum

number of UEs allowed in BWP2 through the

NRCellDU.maxNoOfUeInSparseBwp attribute.

This feature enhancement allows to distinguish between UE mobility groups and UE

service groups with the use of the BWPSet.ueConfGroupType

attribute.

This feature enhancement introduces support for the 4 downlink + 1 uplink + 3

downlink + 2 uplink TDD pattern.

This feature enhancement improves DCI-based switch with VoNR.

Capacity and Performance

This feature enhancement might decrease downlink peak throughput in single-UE

scenarios if the following conditions are fulfilled:

- An external SCell with carrier aggregation is used.
- The SCell and the SpCell use the 4 downlink + 1 uplink TDD pattern.

This degradation happens only for the portion of the UE traffic that is sent

over the external SCell. It can be avoided by setting the

NRCellDU.improvedUlInSparseBwp attribute to

false. It does not occur in multi-UE scenarios such as when two

or more UEs run downlink peak throughput on the same SpCell and external SCell.

This feature enhancement introduces the

NRCellDU.pmBwpSwitchDciDropped PM counter, which can be used

to observe the aggregated number of dropped switch DCI messages in a cell.

This feature enhancement improves the accuracy of the following existing PM

counters:

- NRCellDU.pmMacVolDlBwp
- NRCellDU.pmMacVolUlBwp

Operation

This feature enhancement introduces the following attributes:

- BWPSet.ueConfGroupType
- NRCellDU.maxNoOfUeInSparseBwp
- NRCellDU.poorRadioQualDciBwpSwitchThr
- NRCellDU.qualHystDciBwpSwitch

This feature enhancement can raise the Inconsistent Configuration alarm with the

Parameter &lt;bWPRef or bWPSetRef or bWPRef, bWPSetRef&gt; refers

to configuration inconsistent with feature NR Dynamic Power

Optimizer. additional text.

Interfaces

No impact.

Hardware

No specific hardware requirements.

Other Network Elements

It is recommended to use ENM version 23.2 or later to support the

MOM changes introduced by this feature enhancement. If the Release Independence

Manager application is used, the MOM changes are supported on earlier ENM versions

also.

Related Information

NR Dynamic Power Optimizer

## Appendix A.e: 23.Q3: Interaction Handling between Dynamic Waveform Switch and DCI-Based BWP Switch

The feature enhancement handles the interaction between dynamic waveform switching

and DCI-based BWP switching.

| Feature Name           | DFTS-OFDM Waveform in Uplink   | NR Dynamic Power Optimizer   |
|------------------------|--------------------------------|------------------------------|
| Feature Identity       | FAJ 121 5089                   | FAJ 121 5443                 |
| Value Package Name     | Advanced Coverage Extension    | Performance Boost            |
| Value Package Identity | FAJ 801 4006                   | FAJ 801 4021                 |
| Node Type              | Baseband Radio Node            | Baseband Radio Node          |
| Access Type            | NR                             | NR                           |
| Impact at Upgrade      | Mandatory                      | Mandatory                    |

Summary and Benefits

The waveform switching function of the DFTS-OFDM Waveform in Uplink can be used with

the DCI-based BWP switch function of the NR Dynamic Power Optimizer feature. The

waveforms of all BWPs are switched to be the same when waveform switching is

triggered.

Capacity and Performance

No impact.

Operation

No impact.

Interfaces

No impact.

Hardware

No specific hardware requirements.

Other Network Elements

No impact.

Related Information

NR Dynamic Power Optimizer

DFTS-OFDM Waveform in Uplink