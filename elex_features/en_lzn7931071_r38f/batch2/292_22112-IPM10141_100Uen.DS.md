---
complexity_score: 56.0
converted_at: '2025-08-13T06:59:09.333669Z'
file_type: html
format: html
image_processing_enhanced: true
images_extracted: 73
images_saved: 3
original_path: 292_22112-IPM10141_100Uen.DS.html
pictures_extracted: 73
processing_method: docling_multimodal
quality_score: 9.0
source_file: 292_22112-IPM10141_100Uen.DS.html
source_zip: en_lzn7931071_r38f.zip
tables_extracted: 27
zip_image_types:
- .svg
- .png
- .gif
- .jpg
- .bmp
zip_images_total: 2796
---

# 

Elastic RAN and Advanced RAN Coordination Guideline

Contents

![Image](../images/292_22112-IPM10141_100Uen.DS/additional_3_CP.png)

![Image](../images/292_22112-IPM10141_100Uen.DS/additional_3_CP.png)

|   1 | Introduction                                                             |
|-----|--------------------------------------------------------------------------|
| 1.1 | Scope                                                                    |
| 1.2 | Value Argumentation                                                      |
| 2   | Terminology and Concepts                                                 |
| 3   | Principles and Guidelines                                                |
| 3.1 | Ericsson RAN Deployment                                                  |
| 3.2 | Features Related to Elastic RAN and Advanced RAN     Coordination        |
| 3.3 | CoMP                                                                     |
| 3.4 | Advanced RAN Coordination Capacities                                     |
| 3.5 | NR QoS for Downlink Carrier Aggregation                                  |
| 3.6 | Carrier Aggregation and Shared NR RAN Network                            |
| 3.7 | Uplink Carrier Aggregation                                               |
| 3.8 | Automated Carrier Aggregation                                            |
| 4   | Network Elements                                                         |
| 4.1 | E-RAN and Advanced RAN Coordination-Related Ports for     Baseband Units |
| 4.2 | Inter-Baseband Link: Ethernet                                            |
| 4.3 | Baseband Features                                                        |
| 4.4 | E-RAN Switch                                                             |
| 5   | E-RAN and Advanced RAN Coordination Principles                           |
| 5.1 | E-RAN Architecture                                                       |
| 5.2 | E-RAN Terminology                                                        |
| 5.3 | E-RAN Operation                                                          |
| 5.4 | E-RAN Security                                                           |
| 5.5 | E-RAN Performance Tracking                                               |
| 5.6 | Advanced RAN Coordination                                                |
| 6   | Reference Network Design                                                 |
| 6.1 | Common Aspects for All Cases                                             |
| 6.2 | LTE Intra-C-RAN Site E-RAN Design                                        |
| 6.3 | Advanced RAN Coordination Design                                         |
| 7   | Solution Guideline Change History                                        |

# 1 Introduction

There is an increasing demand for high capacity solutions for LTE and 5G, where the number of tightly interacting cells is large. In Carrier Aggregation, cells can be appropriate for participation in carrier aggregation as Secondary Cells (SCells) are not hosted on the same NodeB, to address applicability to both LTE and NR as the Primary Cell (PCell). One of the drivers for Centralized RAN (C-RAN), is to make coordination of radio resources between different eNodeB units easier by placing the Baseband hardware in the same physical location, therefore reducing the delay.

A scalable approach is to provide a solution that enables high speed, low latency interaction between eNodeB or gNodeB units, such that units can be added as required to increase the capacity and cell interaction scope. Elastic RAN (E-RAN) and Advanced RAN Coordination (ARC) are introduced to eliminate fixed-sized coordination boundaries and scalability constraints, allowing the sets of cells that can be considered as secondary cells, which expanded across multiple units. A UE can find a closer-to-optimal set of cells with which to perform carrier aggregation, because it draws from a larger set of SCells. Aggregated capacity can be augmented by adding nodes to the E-RAN cluster.

E-RAN and ARC involve fast link creation between Baseband units. The traffic between the Baseband units is carried over a low latency high-bandwidth-switched network. In case Baseband of RAN Compute Group 3 Baseband uses IDLe or TN port, while Baseband of RAN Compute Group 4 and 5 use TN/IDL port. If the performance of the links meets the requirements imposed by E-RAN or ARC applications, then it is also possible to coordinate Baseband units that are not in the same physical location. For more information about the RAN Compute Groups, see DU and Baseband Configurations and Capacity.

For more information about the E-RAN feature, see Elastic RAN.

For more information about the Advanced RAN Coordination feature, see Advanced RAN Coordination.

A suggested way to distinguish the networks to which a Baseband requires direct connection on a Cell Site or C-RAN site is shown in the below figure. The RAN Network provides connectivity through the Site Router to the backhaul network for RAN (S1, X2, NG, Xn) traffic and for OAM traffic. The E-RAN or ARC network provides the fast inter-baseband connectivity, through E-RAN or ARC switches. The connectivity between Baseband and radio units is provided through the fronthaul network.

![Image](../images/292_22112-IPM10141_100Uen.DS/additional_3_CP.png)

Figure 1   Generic C-RAN Site Network Connections

## 1.1 Scope

The following items are within the scope of this document:

- Description of Carrier Aggregation
- Description of the requirements imposed on the Elastic RAN network by Carrier Aggregation
- Physical and logical connectivity aspects for eNodeB in Elastic RAN
    - Baseband to Elastic RAN Switch
    - Elastic RAN Switch to Elastic RAN Switch
- Synchronization of Baseband units
- Security

The following items are outside the scope of this document:

- Design for Elastic RAN for Uplink Coordinated Multi-Point and Downlink Coordinated Multi-Point
    - Preliminary recommendations on physical connectivity requirements are included
- The design of the transport network connectivity between the Baseband and the backhaul or core network
- The design of the fronthaul and CPRI connectivity between the baseband and the Radio Units
- The design of the OAM connectivity for the Baseband units, the Cell Site Routers, and the E-RAN Switches
- The design of the fiber connectivity between E-RAN Hub sites

### 1.1.1 Assumptions

It is assumed that the design of physical and logical connectivity from the Baseband units to the transport network (backhaul) follows the reference designs.

## 1.2 Value Argumentation

E-RAN or ARC offers the following benefits:

- Centralized coordination benefits without the need to centralize baseband.
    - Once the E-RAN or ARC network meets the strict latency requirements imposed by the coordination features, such as Carrier Aggregation, the coordinating Baseband no longer needs to be located in the same physical location. Nevertheless, it is envisaged that E-RAN or ARC is predominantly built and deployed in and between physically clustered Baseband units.
- Borderless baseband coordination across the entire network.
    - Enables efficient inter-baseband carrier aggregation.
    - Enables LTE Uplink Coordinated Multi-Point between Baseband units.
- Mesh architecture that enables peer-to-peer connection.
- Centralized, distributed, and the mix of both deployment architectures.
- Ethernet switch-based connectivity, based on Ericsson Router 6673, Router 6675, and Router 6676 equipment.
- Configuration flexibility.
    - The configuration of coordination sets can be done remotely, site visit is not required.
- Non-complex deployment at site.
    - One cable between each Baseband unit and switch.

This Elastic RAN and Advanced RAN Coordination High-Level Design document is intended to function as an introduction to the Elastic RAN and the Advanced RAN Coordination concepts. Also provides recommendations to Presales and Solution Design Team on how these concepts affect the design of the switched network between the Baseband nodes. This document is reusable and it could act as a basis for customer solution design documentation.

# 2 Terminology and Concepts

| Term                             | Description                                                                                                                                                                                                         |
|----------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Primary Cell (PCell)             | The LTE or the NR cell where a specific UE has a Radio Resource Control (RRC) connection.                                                                                                                           |
| Secondary Cell (SCell)           | An LTE or the NR cell in which a UE is receiving Carrier Aggregation traffic only (no RRC connection).                                                                                                              |
| External Secondary Cell (ESCell) | An SCell that is controlled in another eNodeB or gNodeB than the PCell.                                                                                                                                             |
| Inter-Baseband Link              | A logical connection over the E5 interface between eNodeB units or gNodeB units. The connection allows fast (intra-TTI) message exchanges between nodes.                                                            |
| Coordination Group               | This is the cluster of Baseband units from which a specific Baseband can create its fast coordination partner set. The fast coordination cluster is defined by physical connectivity and use of a common VLAN.      |
| Coordination Set                 | This is defined with a specific Baseband and is based on the existence of logical fast baseband links between a specific Baseband and its set of fast coordination partners.                                        |
| Coordination Partner             | A pair of Baseband units with a logical fast baseband link connection between them.                                                                                                                                 |
| E5 Interface                     | Ericsson proprietary inter-baseband coordination interface.                                                                                                                                                         |
| Carrier Aggregation              | An LTE Advanced feature that allows higher throughput by aggregating multiple LTE component carriers.                                                                                                               |
| Advanced RAN Coordination        | The Advanced RAN Coordination feature enables inter-baseband coordination between gNodeB-DUs/Capacity Modules through the NR E5 interface.                                                                          |
| Coordinated Multi-Point          | A range of techniques are used to enable coordination of transmission or reception between different eNodeB. Different techniques are used for Downlink Coordinated Multi-Point and Uplink Coordinated Multi-Point. |
| Hub Site                         | A generic term to refer to a site with multiple Baseband units in the same physical location.                                                                                                                       |
| Remote Site                      | A generic term to refer to a site with multiple radio units in the same physical location.                                                                                                                          |
| IDLe                             | Inter-DU Link Ethernet.                                                                                                                                                                                             |
| IDLe Cable                       | An Ericsson proprietary Y-cable, with Xcede connector on 1 end, and 1 or 2 x 10GE connectors at the other end (electrical or optical).                                                                              |
| Cell Site Router                 | A device that provides connectivity from the Baseband to the transport or backhaul network, providing routing and aggregation functions.                                                                            |
| E-RAN or ARC switch              | A Layer 2 device that provides connectivity from Baseband to a low latency, high-bandwidth network for Elastic RAN or Advanced RAN Coordination traffic.                                                            |
| VPLS                             | Virtual Private LAN Service, a method of providing Ethernet based multi-point to multi-point communication over MPLS network.                                                                                       |

# 3 Principles and Guidelines

## 3.1 Ericsson RAN Deployment

### 3.1.1 Distributed RAN

The distributed RAN (D-RAN) architecture consists of one or more Baseband units that are located at the same place as radio units within each cell site. This is introduced explicitly for TCO savings with LTE and NR. This architecture is still used in networks implementing LTE Advanced features. D-RAN constitutes a considerable part of future networks with its ease of deployment and standard IP connectivity.

The D-RAN deployment supports the following aspects of Centralized RAN (C-RAN):

- Shared resources seen from the UE perspective and used with inter-site carrier aggregation
- Inter-site coordinated multi-point
- Mobility management
- Load balancing

### 3.1.2 Centralized RAN

To boost performance in traffic hotspots, such as offices, stadiums, city squares, and commuter hubs, centralized baseband deployments have become increasingly interesting for operators. Centralizing base station processing with Centralized RAN (C-RAN) simplifies network management, enables Baseband resource pooling and improves coordination of radio resources. A C-RAN deployment allows the RAN Transport design to move from a distributed leaf tree architecture, with many relatively low capacity cell site routers, to more of a data center focused design. This process has the following characteristics:

- High-bandwidth
- Low latency
- Top of rack switches to interconnect many Baseband units

### 3.1.3 Elastic RAN and Advanced RAN Coordination

One of the limitations of Distributed RAN (D-RAN) and Centralized RAN (C-RAN) deployments is regarding the LTE Advanced features implementation. The supporting cell site radio units from multiple Baseband units do not allow for the optimal node coordination to implement features like Carrier Aggregation and Elastic RAN Uplink Coordinated Multi-Point Reception. Using the X2 interface to carry the coordination data between Baseband units can introduce too much latency, or be affected by other traffic using the same network equipment. If the coordination features run between a wider number of Baseband units and managed remotely, certain features are required. This is the motivation for E-RAN.

Elastic RAN (E-RAN) is introduced to eliminate any fixed-sized boundaries and constraints, allowing for arbitrarily sized coordination zones. E-RAN enables full coordination across the entire network, agnostic on Baseband deployments - centralized, distributed, or a mix of both. It covers coordination functions with optimal performance. There are no limits to the coordination area, it is fully dynamic and elastic throughout the network. The E-RAN enables Ethernet connectivity between Baseband units with LTE traffic, while Advanced RAN Coordination enables inter-baseband coordination between Baseband units with NR traffic.

## 3.2 Features Related to Elastic RAN and Advanced RAN
    Coordination

### 3.2.1 Carrier Aggregation

Carrier aggregation is one of the major functions of the LTE Advanced feature. It allows data to be transmitted to a single UE on multiple frequency bands. The main benefits are the following:

- Increased downlink speed across the coverage area
- More efficient use of the scattered spectrum
- Higher capacity

Carrier aggregation can be used for both FDD and TDD.

Carrier aggregation provides increased peak UE throughput, as it can provide a peak throughput equivalent to a contiguous carrier of the same bandwidth as the aggregate of the individual carriers.

Carrier aggregation also provides pooling gains across carriers, bringing the effective efficiency of multiple carriers nearly equal to a single carrier having the same bandwidth as the aggregate. Normally there are some load balancing inefficiencies with multiple independent carriers (for example, two 10-MHz carriers) as compared to a single larger carrier (for example, one 20-MHz carrier). Carrier Aggregation can nearly eliminate such inefficiencies.

When carrier aggregation is used, there are several serving cells, one for each component carrier. Carrier aggregation introduces the concept of Primary Cell (PCell) and one or more Secondary Cells (SCells) for the cells serving a particular UE.

The cell where the UE initially sets up the RRC connection is known as the PCell, and is operating on the primary frequency, or Primary Component Carrier (PCC).

The SCell, which is on another frequency, for example, the Secondary Component Carrier (SCC), can be configured after the RRC connection is established. The definition of SCell is just from the UE point of view. It is regarded as a normal cell from the Baseband point of view.

The PCell is always active, whereas the SCell is dynamically activated or deactivated. When a UE has an activated SCell and the downlink channel quality on the SCell is above a specified threshold, downlink data can be transmitted over both carriers. The amount of data sent on each carrier is proportional to the bandwidth and the downlink channel quality of the carrier. Data splitting onto multiple carriers only occurs if the data volume exceeds the specified threshold. If the data volume does not exceed the threshold, transmission only occurs on the PCell.

The signaling towards an end-user device for carrier aggregation affects only certain layers, not the entire protocol stack. For instance, the device is permanently connected by its PCC to the serving PCell. Non-Access Stratum (NAS) functionality such as security key exchange and mobility information are provided by the PCell. All secondary component carriers are understood as additional transmission resources. For the PDCP and Radio Link Control (RLC) layer, carrier aggregation signaling is transparent. A terminal is configured on the Radio Resource Control (RRC) layer with the parameters needed to support the SCells.

The Media Access Control (MAC) layer acts as a multiplexing entity for the aggregated component carriers as they are activated or deactivated by MAC control elements. While the MAC acts as a multiplexer, note each component carrier has its own Physical Layer (PHY) entity, providing channel coding, Hybrid Automatic Repeat Request (HARQ), data modulation and resource mapping.

![Image](../images/292_22112-IPM10141_100Uen.DS/additional_3_CP.png)

Figure 2   Carrier Aggregation Protocol Stack

Given that each component carrier has its own pool of radio resources (PRB, and so on), the scheduling decisions are made per cell and carrier. This means that the amount of data relayed by PCell to SCell is based on the resources available in the SCell, which need to be reported to the PCell.

Carrier aggregation is Intra-eNodeB Carrier Aggregation, where the PCell and SCells are managed by the same eNodeB. This means that all the PCell and SCell interaction, including decisions from PCell on the amount of data to relay to the SCell, is internal to the eNodeB.

![Image](../images/292_22112-IPM10141_100Uen.DS/additional_3_CP.png)

Figure 3   Intra-eNodeB Carrier Aggregation

Carrier aggregation is also possible between eNodeB units, meaning that the PCell can be managed by one eNodeB, and the SCell managed by another, external eNodeB. This expands the set of cells that can be considered as secondary cells, allows the UE to find a set of optimal cells, from a larger set of SCells. It does mean, however, that carrier aggregation traffic, which had been internal to an eNodeB, now needs to be transferred to the external eNodeB.

![Image](../images/292_22112-IPM10141_100Uen.DS/additional_3_CP.png)

Figure 4   Inter-eNodeB Carrier Aggregation

For more information, see Carrier Aggregation.

### 3.2.2 Carrier Aggregation between Baseband Units through the X2
      Interface

One way to implement carrier aggregation between Baseband units is to use the Inter-eNodeB Carrier Aggregation feature. This involves using the X2 interface between the primary eNodeB units to forward carrier aggregation data from the PCell to the SCell.

![Image](../images/292_22112-IPM10141_100Uen.DS/additional_3_CP.png)

Figure 5   Inter-eNodeB Carrier Aggregation as Slow CA

In this case, the X2 interface is used for both control data and for carrier aggregation user data. For control data, X2-AP is used to set up the PCell and SCell relations. The carrier aggregation user data is encapsulated in GTP-U tunnels.

Given that this uses the X2 link, which can have relatively long latency (recommendation is less than 5 ms), this is also known as slow carrier aggregation. The PCell and SCell must transmit carrier aggregation data to the UE in the same TTI. This means the node with PCell must perform advance TTI buffering of Radio Transport Blocks (TB) are sent over the X2 link to the secondary eNodeB, to allow these TB to traverse the X2. The PCell and SCell can then schedule and transmit the Radio TB on the same TTI, so they are received at the UE within the received window. The X2 latency does not maintain all critical timings, and on the external SCell user peak throughput is reduced as a function of X2 latency.

For more information, see Inter-eNodeB Carrier Aggregation.

### 3.2.3 Elastic RAN and Advanced RAN Coordination Carrier
      Aggregation

The Elastic RAN (E-RAN) is an LTE feature that enables inter-eNodeB coordination through the Ethernet E5 connectivity between Baseband units located in different racks or locations. The Advanced RAN Coordination (ARC) is an NR feature, that enables inter-gNodeB coordination through the Ethernet E5 between Baseband units located in different racks or physical locations.

It is recommended to use E5 over X2 links when implementing LTE and NR carrier aggregation between Baseband units.

In E-RAN or Advanced RAN Coordination configuration, multiple Baseband units are connected by fast links to form a mesh of Baseband units that can effectively share Baseband data. These links implement what is called the E5 interface, and can be used to transfer carrier aggregation or LTE Uplink Coordinated Multi-Point (CoMP) data between Baseband units. With the maximum round-trip time of 160 µs between eNodeB units, the maximum round-trip time of 900 µs between gNodeB units, data is allowed to be scheduled onto SCell carrier in the same TTI. This tight cooperation between the schedulers in the PCell and SCell means that the performance of Carrier Aggregation is effectively the same as the Intra-eNodeB Carrier Aggregation feature. For more information on the LTE maximum E5 link latency and supported throughput, see Supported Capacity and Configurations for LTE RAN and Massive IoT RAN.

The E5 interface is a dedicated Ethernet based interface, using the following ports on the Baseband:

- TN
- IDLe
- TN/IDL

The E5 interface connects to a Layer 2 switched network, to support the E-RAN or ARC connectivity between Baseband units.

![Image](../images/292_22112-IPM10141_100Uen.DS/additional_3_CP.png)

Figure 6   Elastic RAN and Advanced RAN Coordination Carrier Aggregation - Fast Carrier Aggregation

The X2 or Xn connectivity between the PCell and the ESCell is used to set up the E-RAN and ARC carrier aggregation, using modified X2 and Xn-AP messages.

The triggers to activate carrier aggregation between the local PCell and an ESCell candidate are the same as for legacy carrier aggregation. With the addition that the SCell must be configured as an allowed candidate for the PCell. If E-RAN carrier aggregation is established for a specific UE, the PCell and ESCell exchange E-RAN specific communication like MAC addresses, license information, cell states over the X2 interface. For the initial establishment of Advanced RAN Coordination, the Xn interface is used for exchanging MAC addresses, cell states, and so on. When the establishment of Advanced RAN Coordination is complete, the NR E5 interface is used for signaling and user data between gNodeB units.

The fast inter-baseband links between the primary Baseband and the external Baseband are setup through TN, IDLe, or TN/IDL port, and exchange the high-bandwidth carrier aggregation information as required.

Related concepts

E-RAN and Advanced RAN Coordination-Related Ports for Baseband Units

### 3.2.4 Coexistence between Inter-Baseband Carrier Aggregation and
      E-RAN Carrier Aggregation

Inter-Baseband Carrier Aggregation is a way to increase throughput by using ESCells located on different Baseband units than the PCell.

Elastic RAN (E-RAN) and Advanced RAN Coordination (ARC) Carrier Aggregation allow for a better coordination performance than the X2 based LTE Inter-eNodeB Carrier Aggregation. The difference lies in the more strict port-to-port latency requirements.

The growing number of users requires more optimization of the use of radio resources. Given that, limiting the Baseband to have only one type of Carrier Aggregation partners (E-RAN, ARC, or Carrier Aggregation between Baseband units through the X2 interface) becomes ineffective. This situation can be observed at the border of urbanized areas.

Urban cell sites with low inter-site latency use E-RAN or ARC Carrier Aggregation. Rural sites with higher inter-site latency use Carrier Aggregation between Baseband units through the X2 interface.

## 3.3 CoMP

Coordinated Multi-Point (CoMP) is an LTE Advanced feature designed to improve the network usage and the overall quality for the users. It is based on a range of different techniques that enable the dynamic coordination of transmission and reception over different eNodeB units.

For more information about the supported Baseband types, see Elastic RAN Uplink Coordinated Multi-Point Reception.

### 3.3.1 Uplink Coordinated Multi-Point

The Uplink Coordinated Multi-Point (CoMP) combines antenna signals from multiple sector carriers that belong to different cells. The reception points are radio units hosted by the same eNodeB or external radio units hosted by another eNodeB.

The purpose of the Uplink Coordinated Multi-Point is to improve uplink throughput because of increased received UE signal power and interference suppression. The benefit is largest in the border area between sectors, either macro sectors, or between a macro sector and small cell.

## 3.4 Advanced RAN Coordination Capacities

The downlink throughput is enhanced for both inter-gNodeB Carrier Aggregation and intra-gNodeB inter-Capacity Module Carrier Aggregation through the E5 link. NR downlink throughput capacity is specified as follows:

- The maximum local downlink throughput to the local cells is sent over the air by the Capacity Module and the Baseband unit.
- The maximum total downlink throughput equals the maximum local downlink throughput and the downlink throughput going to external SCells on the other Capacity Module or the Baseband unit.

![Image](../images/292_22112-IPM10141_100Uen.DS/additional_3_CP.png)

Figure 7   Advanced RAN Coordination Capacities

For more information, see Supported Capacity and Configurations for NR RAN.

## 3.5 NR QoS for Downlink Carrier Aggregation

There are three operation modes which can be configured, based on the MOM attributes ExtCaPriority. In traffic congested case, each traffic gets resources based on its priority, the highest priority traffic gets the first change to use the resource.

The operation modes are as follows, for details, see NR QoS-Aware Downlink Carrier Aggregation.

- Static Priority Mode without Priority Policing
- Static Priority Mode with Priority Policing
- Dynamic Priority Mode

The below figure shows how QoS is applied in NR CA between different Capacity Modules, the Capacity Modules can be in the same gNodeB unit or separate gNodeB units.

![Image](../images/292_22112-IPM10141_100Uen.DS/additional_3_CP.png)

Figure 8   NR QoS for Downlink Carrier Aggregation

Each Capacity Module can be setup with multiple cells, and one cell can be SpCell for some users whereas it can be a SCell for other users. One E5 tunnel is configured between two Capacity Modules, each E5 tunnel can have one or more pipes. The pipe indicates the Advanced RAN Coordination relations, which is between two Capacity Modules hosting one (or more) SpCells to one external SCell. The relation can be intra-gNodeB inter-Capacity Module or inter-gNodeB.

When one SpCell connects to multiple external SCells, each ARC relation corresponds to the SpCell and each SCell. The MOM adjustedPriorityMode is set on SCell, then transferred from SCell to SpCell, SpCell uses such configuration to control the CA traffic being offloaded to the corresponding external SCell. The external SCells can be setup on either different or identical priority modes.

When one SCell connects to multiple SpCells, the MOM configuration in the SCell is transferred to all the SpCells, and SpCells use the same configuration to control the CA traffic being offloaded to that specific SCell.

In the above figure, multiple Advanced RAN Coordination relations are co-existing between three capacity modules. For example between SpCell2 and SCell1/SCell2/SCell4, there are 3 ARC relations available: SpCell2 + SCell1, SpCell2 + SCell2, SpCell2 + SCell4, which could be effective in 2CC, 3CC and 4CC CA combos that listed the following:

- 2CC CA: SpCell2+ SCell1, SpCell2 + SCell2, SpCell2 + SCell4
- 3CC CA: SpCell2 + SCell1 + SCell4, SpCell2 + SCell1 + SCell2, SpCell2 + SCell2 + SCell4
- 4CC CA: SpCell2 + SCell1 + SCell2 + SCell4

In the NR Carrier Aggregation configuration, when PCell is in FDD mode, it offloads downlink data to SCell, then more non-CA UEs can be served by FDD PCell. For details, see NR Carrier Aggregation Data Steering.

Usually the UE peak throughput with external SCell is lower than the same carrier is used as SpCell or local SCell. The network enhancement can be improved with inter-capacity CA, with the deployments where E5 link latency between SpCell and SCell (local or external) capacity module is below 35 us. It improves peak external SCell throughput, also provides QoS support for external SCells to make it as good as local SCell. See NR Carrier Aggregation Scheduling Optimization for External SCells for details.

## 3.6 Carrier Aggregation and Shared NR RAN Network

Carrier Aggregation can be enabled in the Shared NR RAN Network, for details see Shared NR RAN Solution Guideline.

## 3.7 Uplink Carrier Aggregation

Uplink Carrier Aggregation throughput is enhanced by enabling power scaling in different modes. The ulCaPowerScalingMode can be set to 0, 1, or 2, corresponding to conservative, moderate, and aggressive power scaling, respectively. When uplink 2CC CA falls back to 1CC CA, the UE can fallback to the carrier with the highest SINR, the carrier with greater transmission capacity, or the PCell, based on the value of ulCaFallbackPolicy. For more information, see Improved Power Scaling for Uplink Carrier Aggregation.

UE can simultaneously receive or transmit on one or multiple component carriers, depending on the capabilities. If UE supports more than one Tx, it is supported for one Tx to two Tx uplink switching with TDD PCell and FDD SCell, it increases UE peak uplink throughput and uplink spectrum efficiency.

## 3.8 Automated Carrier Aggregation

When Automated Carrier Aggregation feature is enabled, it simplifies the setup and maintenance of E5 partners and cell relations for the Carrier Aggregation. It supports automatic setup and removal of E5 links without generating alarms, and automatic configuration of SCell candidates based on cell usefulness. See  Advanced RAN Coordination Configuration for NR Carrier Aggregation for details.

# 4 Network Elements

This section provides information on the Network Elements needed for Elastic RAN deployment. For detailed capacity information of hardware units used in this Guideline, see the following documents:

- Baseband units: RAN Compute Groups in DU and Baseband Configurations and Capacity Supported Capacity and Configurations for NR RAN Supported Capacity and Configurations for LTE RAN and Massive IoT RAN
- Radio units: Supported Radio Capabilities Radio Configurations for NR Radio Configurations for LTE

## 4.1 E-RAN and Advanced RAN Coordination-Related Ports for
    Baseband Units

The following table shows the ports related to Elastic RAN and Advanced RAN Coordination (ARC) for Baseband units.

| Baseband Types                           | Indoor         | Outdoor        | Port           | Connector      |   Number of Ports | Description                                                                             | Network Connection   |
|------------------------------------------|----------------|----------------|----------------|----------------|-------------------|-----------------------------------------------------------------------------------------|----------------------|
| Baseband 5212 or Baseband 5216           | √              | Not Applicable | TN B, C        | SFP+           |                 2 | 1 Gbps or 10 Gbps Ethernet transmission, External interface, electrical or optical      | Backhaul, E5         |
| Baseband 5212 or Baseband 5216           | √              | Not Applicable | IDLe A, B      | Xcede          |                 2 | IDLe, Elastic RAN connection, Baseband to Baseband interface                            | E5                   |
| Baseband 6303 or Baseband 6318           | Not Applicable | √              | IDLe A, B      | Xcede          |                 2 | IDLe, Elastic RAN connection, Baseband to Baseband interface                            | E5                   |
| Baseband 6303                            | Not Applicable | √              | TN A, B        | SFP+           |                 2 | 1 Gbps or 10 Gbps Ethernet transmission, External interface, electrical or optical      | Backhaul, E5         |
| Baseband 6318                            | Not Applicable | √              | TN B, C        | SFP+           |                 2 | 1 Gbps or 10 Gbps Ethernet transmission, External interface, electrical or optical      | Backhaul, E5         |
| Baseband 6630 or Baseband 6620           | √              | Not Applicable | TN A, B        | SFP+           |                 2 | 1 Gbps or 10 Gbps Ethernet transmission, External interface, electrical or optical      | Backhaul, E5         |
| Baseband 6630 or Baseband 6620           | √              | Not Applicable | TN C, D        | RJ-45          |                 2 | 100 Mbps or 1 Gbps Ethernet transmission, External interface, electrical                | Backhaul             |
| Baseband 6630 or Baseband 6620           | √              | Not Applicable | IDLe A, B      | Xcede          |                 2 | IDLe, Elastic RAN connection, Baseband to Baseband interface                            | E5                   |
| Baseband 6648 or Baseband 6641           | √              | Not Applicable | TN/IDL A       | QSFP+/QSFP28   |                 1 | 4×10 Gbps/4×25 Gbps Ethernet transmission, External interface; electrical or optical    | Backhaul, E5         |
| Baseband 6648 or Baseband 6641           | √              | Not Applicable | TN/IDL B, C, D | SFP/SFP+/SFP28 |                 3 | 1 Gbps/10 Gbps/25 Gbps Ethernet transmission, External interface; electrical or optical | Backhaul, E5         |
| Baseband 6621 or Baseband 6631           | √              | Not Applicable | TN/IDL A       | QSFP+          |                 1 | 4×10 Gbps Ethernet transmission, External interface; electrical or optical              | Backhaul, E5         |
| Baseband 6621 or Baseband 6631           | √              | Not Applicable | TN/IDL B,C,D   | SFP+           |                 3 | 1 Gbps/10 Gbps Ethernet transmission, External interface; electrical or optical         | Backhaul, E5         |
| RAN Processor 6651 or RAN Processor 6647 | √              | Not Applicable | TN/IDL A       | QSFP+          |                 1 | 4×10 Gbps Ethernet transmission, External interface; electrical or optical              | Backhaul, E5         |
| RAN Processor 6651 or RAN Processor 6647 | √              | Not Applicable | TN/IDL A       | QSFP28         |                 1 | 4×10 Gbps/4×25 Gbps Ethernet transmission, External interface; optical                  | Backhaul, E5         |
| RAN Processor 6651 or RAN Processor 6647 | √              | Not Applicable | TN/IDL B, C, D | SFP/SFP+/SFP28 |                 3 | 1 Gbps/10 Gbps/25 Gbps Ethernet transmission, External interface; electrical or optical | Backhaul, E5         |
| Radio Processor 6347                     | Not Applicable | √              | TN/IDL A       | QSFP/QSFP28    |                 1 | 4×10 Gbps/4×25 Gbps Ethernet transmission, External interface; optical                  | Backhaul, E5         |
| Radio Processor 6347                     | Not Applicable | √              | TN/IDL B, C, D | SFP/SFP+/SFP28 |                 3 | 1 Gbps/10 Gbps/25 Gbps Ethernet transmission, External interface; optical               | Backhaul, E5         |
| Baseband 6303 or Baseband 6318           | Not Applicable | √              | TN/IDL B, C    | SFP/SFP+       |                 3 | 1 Gbps/10 Gbps Ethernet transmission, External interface; optical                       | Backhaul, E5         |
| Baseband 6303 or Baseband 6318           | Not Applicable | √              | IDLe A, B      | Xcede          |                 2 | IDLe, Elastic RAN connection, Baseband to Baseband interface                            | E5                   |

Note: 10 Gbps or above is recommended for E-RAN and ARC configuration. If TN port is used for E5 traffic, 10 Gbps is configured. Baseband 6620 supports LTE Elastic RAN only.

## 4.2 Inter-Baseband Link: Ethernet

Coordination between Baseband units is enabled by connecting the Baseband units together using the E5 link.

The E5 connection between Baseband units is a peer-to-peer relationship, therefore, each Baseband is considered as a separate node. This has several benefits, each Baseband has its own S1 connection to the backhaul network, removing a possible bottleneck. Also, the restart domain of the Baseband is limited to a single Baseband, resilience is improved.

The main benefit with the implementation is that the number of Baseband units that can coordinate with each other scales linearly. And because the IDLe port, or TN/IDL port is an Ethernet interface, connecting IDLe or TN/IDL interface to an external switch enables the Baseband to become a coordination partner with any other Baseband on the same network. This is what enables the Elastic RAN (E-RAN) or the Advanced RAN Coordination (ARC) solution.

### 4.2.1 E-RAN and ARC Cables

The Elastic RAN (E-RAN) and the Advanced RAN Coordination (ARC) traffic is supported over the following Baseband and RAN Processor E5 ports:

- IDLe ports for a Baseband model of RAN Compute Group 3 as an example: Each Xcede connector on a Baseband supports two 10 Gbps IDLe links. Separate IDLe links are needed for each E5 service, which means the LTE Carrier Aggregation and the NR Carrier Aggregation. The exception is the LTE Uplink Coordinated Multi-Point (CoMP), which must be configured on a dedicated IDLe port. Separate 10G IDLe links can be hosted by the same or different Xcede connector. It is recommended to use separated 10G IDLe links for LTE Carrier Aggregation and NR Carrier Aggregation E5 traffics.
- 10G TN ports for a Baseband model of RAN Compute Group 3 as an example: LTE Carrier Aggregation is supported together with backhaul on the 10G TN port and NR Carrier Aggregation. The backhaul traffic must use separate TN ports with separate VLAN IDs.
- TN/IDL ports for a Baseband model of RAN Compute Group 5 as an example: TN/IDL A is a 4x10/25G that is a 40G or 100G port, TN/IDL B, C, and D are 1G/10G/25G ports, respectively. E5 links require a minimum 10G, but a single 25G TN/IDL link is sufficient for the coexistence cases of all the traffic types (LTE CA, NR CA, Backhaul, and OAM traffic). The exception is the LTE Uplink CoMP, which must be configured on a dedicated 10/25G TN/IDL link.

For more information, see Advanced RAN Coordination.

Note: With a Y-cable connection, LTE Carrier Aggregation and LTE Uplink CoMP can be configured on the same port. With straight, which means a non Y-cable connection, LTE Carrier Aggregation, and LTE Uplink CoMP must be configured on two different IDLe, TN/IDL, or TN ports.

Below table shows the capacity of the E5 link per Baseband unit. The table takes Baseband models of RAN Compute Group 3 and RAN Compute Group 5 as examples.

| tnPortId (ID of Used E5 Link)   | Example of Baseband/RAN Processor Models   | Baseband/RAN Processor Connector Used for E5 Services (Marking)   | Capacity of Used E5 Link   |
|---------------------------------|--------------------------------------------|-------------------------------------------------------------------|----------------------------|
| IDLe_A1                         | Baseband 6630                              | Xcede with IDL A                                                  | 10G                        |
| IDLe_A2                         | Baseband 6630                              | Xcede with IDL A                                                  | 10G                        |
| IDLe_B1                         | Baseband 6630                              | Xcede with IDL B                                                  | 10G                        |
| IDLe_B2                         | Baseband 6630                              | Xcede with IDL B                                                  | 10G                        |
| TN_A or TN_B                    | Baseband 6630                              | SFP+ with TN A or B                                               | 1/10G(1)                   |
| TN_IDL_A_1                      | Baseband 6648                              | QSFP+ or QSFP28 with TN/IDL A                                     | 10/25G                     |
| TN_IDL_A_2                      | Baseband 6648                              | QSFP+ or QSFP28 with TN/IDL A                                     | 10/25G                     |
| TN_IDL_A_3                      | Baseband 6648                              | QSFP+ or QSFP28 with TN/IDL A                                     | 10/25G                     |
| TN_IDL_A_4                      | Baseband 6648                              | QSFP+ or QSFP28 with TN/IDL A                                     | 10/25G                     |
| TN_IDL_B, TN_IDL_C, or TN_IDL_D | Baseband 6648                              | SFP, SFP+, or SFP28 with TN/IDL B, C, or D                        | 1/10/25G(1)                |

(1) E5 link requires minimum 10G.

Cable Models

- Direct Attach Copper (DAC) IDLe electrical cable: from Baseband IDLe ports with Xcede Connector directly to E-RAN Switch 10G port with SFP+ Connector

The following figures show some typical DAC cable models.

![Image](../images/292_22112-IPM10141_100Uen.DS/additional_3_CP.png)

Figure 9   Direct Attach Copper Cable RPM 777 543

![Image](../images/292_22112-IPM10141_100Uen.DS/additional_3_CP.png)

Figure 10   Direct Attach Copper Cable RPM 777 544

![Image](../images/292_22112-IPM10141_100Uen.DS/additional_3_CP.png)

Figure 11   Direct Attach Copper Cable RPM 777 579

![Image](../images/292_22112-IPM10141_100Uen.DS/additional_3_CP.png)

Figure 12   Direct Attach Copper Cable RPM 777 052

![Image](../images/292_22112-IPM10141_100Uen.DS/additional_3_CP.png)

Figure 13   Direct Attach Copper Cable RPM 777 053

![Image](../images/292_22112-IPM10141_100Uen.DS/additional_3_CP.png)

Figure 14   Direct Attach Copper Cable RPM 777 054

![Image](../images/292_22112-IPM10141_100Uen.DS/additional_3_CP.png)

Figure 15   Direct Attach Copper Cable RPM 777 417

Below shows the RPM 777 098, which can be used in the following ways:

- Between the QSFP+ port of the Baseband 6648 and the Xcede IDLe A or IDLe B ports of the Baseband 6630 unit.
- Between one Xcede port of two Baseband 6630 units, if it has a direct connection between one Baseband 6648 and two Baseband 6630 units.

![Image](../images/292_22112-IPM10141_100Uen.DS/additional_3_CP.png)

Figure 16   Direct Attach Copper Cable RPM 777 098

Active Optical Cable (AOC) is used for E-RAN and Advanced RAN Coordination. The below figure shows the RPM 777 811, which has one Xcede connector on one side, and has two Duplex LC connectors on the other side.

![Image](../images/292_22112-IPM10141_100Uen.DS/additional_3_CP.png)

Figure 17   Active Optical Cable RPM 777 811

When connecting a Baseband unit to an E-RAN Switch, the following cases can be used:

- Indoor E-RAN site case
- Outdoor E-RAN site case

Indoor E-RAN Site Case

![Image](../images/292_22112-IPM10141_100Uen.DS/additional_3_CP.png)

Figure 18   E-RAN Cables (Indoor Site)

Below table shows the cables that can be used, depending on the distance between the Baseband unit and the E-RAN Switch.

Note: Table 4, Table 5, Table 6, and Table 7 are used as examples, for details, see Baseband Connections.

| From                                   | To                     | Product                                     | Product Number                              | Length (m)                  | Connectors                                                          | Comments                                                                                                                  |
|----------------------------------------|------------------------|---------------------------------------------|---------------------------------------------|-----------------------------|---------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------|
| Baseband 5216 or 6630 IDLe A or IDLe B | E-RAN Switch 10GE Port | Optical cable, Multi-mode                   | RPM 777 811                                 | 3 or 5                      | One Xcede with electrical to optical converter to two LC            | Remote Elastic RAN connection, CA, and, uplink CoMP extend length up to 100 m with multi-mode optical cable if necessary. |
| Baseband 5216 or 6630 IDLe A or IDLe B | E-RAN Switch 10GE Port | LC Multi-mode Adapter                       | Example: Molex 1061260310(1)                | Not Applicable              | LC multi-mode adapter to connect two male multi-mode LC connectors. | Not Applicable                                                                                                            |
| Baseband 5216 or 6630 IDLe A or IDLe B | E-RAN Switch 10GE Port | Optical cable, Multi-mode                   | RPM 253 3209(2), RPM 253 4801, RPM 253 4980 | Various lengths up to 100 m | Two LC to two LC                                                    | Remote Elastic RAN connection, CA, and uplink CoMP                                                                        |
| Baseband 5216 or 6630 IDLe A or IDLe B | E-RAN Switch 10GE Port | Direct Attach Copper (DAC) Electrical cable | RPM 777 544/L                               | Max 3                       | One Xcede to two SFP+ form factor connectors                        | Local Elastic RAN connection, CA, and uplink CoMP                                                                         |
| Baseband 5216 or 6630 IDLe A or IDLe B | E-RAN Switch 10GE Port | Electrical cable                            | RPM 777 543/L                               | Max 3                       | One Xcede to one SFP+ form factor connector                         | Local Elastic RAN connection, CA, or uplink CoMP. Can be used between Baseband 6630 and Baseband 6648 inter-connection.   |

(1) Molex is 3PP, which is used only as an example.

(2) At Baseband side, RPM 253 3209 connects to the RPM 777 811 by the LC Duplex Coupler, at E-RAN switch side, RPM 253 3209 connects to SFP+ port.

Note: The maximum 100 m E5 link length of the multi-mode extension cable which is shown in the above table is restricted by the multi-mode SFP+ module and the high optical dispersion of the multi-mode optical cable. Longer E5 links are supported with duplex, bidirectional, DWDM, and CWDM SFPs, all of which use single-mode fiber.

For more information, see SFP Module Selector Guide, and Transceivers in the Ericsson R6000 library.

Outdoor E-RAN Site Case

![Image](../images/292_22112-IPM10141_100Uen.DS/additional_3_CP.png)

Figure 19   E-RAN Cables - Outdoor Site Small Cell

Optical TN cables are between the outdoor small cell Baseband TN port and an E-RAN Switch port, carrying both TN and E5 carrier aggregation.

Any supported type of 10G TN Backhaul Fiber cable and SFP+ can be used. For more information on supported SFPs, see SFP Module Selector Guide, and Transceivers in the Ericsson R6000 library.

For the local Baseband E-RAN connections with intra-site connectivity, a Baseband unit can be connected to another Baseband unit with the following options, which is shown in the below figure.

- Direct IDLe cables
- Extended optical IDLe cables

![Image](../images/292_22112-IPM10141_100Uen.DS/additional_3_CP.png)

Figure 20   Local Baseband-to-Baseband E-RAN Connection

Depending on the distance between directly connected Baseband units, the cables listed in the below table can be used. For more information, see Baseband Connections.

| From                                   | To                                     | Product                                                                         | Product Number   | Length (m)                  | Connectors                                                                                                     | Comments                            |
|----------------------------------------|----------------------------------------|---------------------------------------------------------------------------------|------------------|-----------------------------|----------------------------------------------------------------------------------------------------------------|-------------------------------------|
| Baseband 5216 or 6630 IDLe A or IDLe B | Baseband 5216 or 6630 IDLe A or IDLe B | Direct Attach Copper (DAC) Electrical cable (Option A,C in the above figure)    | RPM 777 417/L    | 3                           | One Xcede to one Xcede                                                                                         | Local Elastic RAN or ARC connection |
| Baseband 5216 or 6630 IDLe A or IDLe B | Baseband 5216 or 6630 IDLe A or IDLe B | Direct Attach Copper (DAC) Electrical cable (Option A,C in the above figure)    | RPM 777 417/L    | 1.8                         | One Xcede to one Xcede                                                                                         | Local Elastic RAN or ARC connection |
| Baseband 6318 IDLe A or IDLe B         | Baseband 6318 IDLe A or IDLe B         | Direct Attach Copper (DAC) Electrical cable (Option A or C in the above figure) | RPM 901 807      | 1                           | One Xcede to one Xcede                                                                                         | Local Elastic RAN or ARC connection |
| Baseband 5216 or 6630 IDLe A or IDLe B | Baseband 5216 or 6630 IDLe A or IDLe B | Optical cable, multi-mode (Option B in the above figure)                        | RPM 777 811      | 3 or 5                      | One Xcede to two LC, (connected to RDH10265/1 multi-mode SFP+ or by LC adapters to multi-mode Extension cable) | Local Elastic RAN or ARC connection |
| Baseband 5216 IDLe A or IDLe B         | Baseband 5216 IDLe A or IDLe B         | Optical cable, multi-mode (Option B in the below figure)                        | RPM 253 3209     | Various lengths up to 100 m | Two LC to two LC (connect to multi-mode RPM 777 811 IDLe cable with LC-to-LC adapters)                         | Local Elastic RAN or ARC connection |
| Baseband 5216 IDLe A or IDLe B         | Baseband 5216 IDLe A or IDLe B         | Optical cable, multi-mode (Option B in the below figure)                        | RPM 253 4801     | Various lengths up to 100 m | Two LC to two LC (connect to multi-mode RPM 777 811 IDLe cable with LC-to-LC adapters)                         | Local Elastic RAN or ARC connection |
| Baseband 6630 IDLe A or IDLe B         | Baseband 6630 IDLe A or IDLe B         | Optical cable, multi-mode (Option B in the below figure)                        | RPM 253 4980     | Various lengths up to 100 m | Two LC to two LC (connect to multi-mode RPM 777 811 IDLe cable with LC-to-LC adapters)                         | Local Elastic RAN or ARC connection |

Note: The maximum 100 m E5 link length of the multi-mode extension cable shown in the above table is restricted by the multi-mode SFP+ module and the high optical dispersion of the multi-mode optical cable. Longer E5 links are supported with duplex, bidirectional, DWDM, and CWDM SFPs, all of which use single-mode fiber.

For more information, see SFP Module Selector Guide, and Transceivers in the Ericsson R6000 library.

Below table shows the recommended SFP+ and SFP28 Elastic RAN and Advanced RAN Coordination cabling with direct cable connection.

| From                                                                                                                 | To                                                                                                                   | Product                                     | Product Number   | Length (m)                                                  | Connectors                                   | Comments                                          |
|----------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------|---------------------------------------------|------------------|-------------------------------------------------------------|----------------------------------------------|---------------------------------------------------|
| RAN Compute unit (for example, Baseband 6648) TN/IDL A                                                               | RAN Compute unit (for example, Baseband 6648) TN/IDL A                                                               | Optical cable                               | RPM 253 3512/L   | Max length limited by selected SFP and supported E5 latency | QSFP28 to QSFP28                             | For both E-RAN and ARC Cabling                    |
| RAN Compute unit (for example, Baseband 6648) TN/IDL A                                                               | RAN Compute unit (for example, Baseband 6648) TN/IDL B,C, or D                                                       | Direct Attach Copper (DAC) Electrical cable | RPM 777 054      | Max 3                                                       | QSFP28 to 4 × SFP28                          | For both E-RAN and ARC Cabling                    |
| RAN Compute unit (for example, Baseband 6630) IDLe A or IDLe B                                                       | E-RAN Switch 10GE Port                                                                                               | Direct Attach Copper (DAC) Electrical cable | RPM 777 544/L    | Max 3                                                       | One Xcede to two SFP+ form factor connectors | Local Elastic RAN connection, CA, and uplink CoMP |
| RAN Compute unit (for example Baseband 6648, Baseband 6631, RAN Processor 6647, or RAN Processor 6651) TN B, C, or D | RAN Compute unit (for example Baseband 6648, Baseband 6631, RAN Processor 6647, or RAN Processor 6651) TN B, C, or D | Direct Attach Copper (DAC) Electrical cable | RPM 777 579/L    | Max 3                                                       | SFP+ to SFP+                                 | Elastic RAN and Advanced RAN Coordination Cabling |
| RAN Compute unit (for example Baseband 6648, Baseband 6631, RAN Processor 6647, or RAN Processor 6651) TN B, C, or D | RAN Compute unit (for example Baseband 6648, Baseband 6631, RAN Processor 6647, or RAN Processor 6651) TN B, C, or D | Direct Attach Copper (DAC) Electrical cable | RPM 777 052/L    | Max 3                                                       | SFP28 to SFP28                               | Elastic RAN and Advanced RAN Coordination Cabling |

Below table shows the recommended QSFP+ and QSFP28 Elastic RAN and Advanced RAN Coordination cabling with direct cable connection.

| From                                                           | To                                                              | Product                                     | Product Number   | Length (m)                                                  | Connectors           | Comments                       |
|----------------------------------------------------------------|-----------------------------------------------------------------|---------------------------------------------|------------------|-------------------------------------------------------------|----------------------|--------------------------------|
| RAN Compute unit (for example, Baseband 6648) TN/IDL A         | RAN Compute unit (for example, Baseband 6648) TN/IDL A          | Electrical cable                            | RPM 777 053      | Max 3                                                       | QSFP28 to QSFP28     | For both E-RAN and ARC Cabling |
| RAN Compute unit (for example, Baseband 6648) TN/IDL A         | RAN Compute unit (for example, Baseband 6648) TN/IDL A          | Optical cable                               | RPM 253 3512/L   | Max length limited by selected SFP and supported E5 latency | QSFP28 to QSFP28     | For both E-RAN and ARC Cabling |
| RAN Compute unit (for example, Baseband 6630) IDLe A or IDLe B | RAN Compute unit (for example, Baseband 6648) TN/IDL B, C, or D | Direct Attach Copper (DAC) Electrical cable | RPM 777 098      | Max 3                                                       | QSFP+ to two Xcede   | For both E-RAN and ARC Cabling |
| RAN Compute unit (for example, Baseband 6648) TN/IDL A         | RAN Compute unit (for example, Baseband 6648) TN/IDL B, C, or D | Direct Attach Copper (DAC) Electrical cable | RPM 777 054      | Max 3                                                       | QSFP28 to four SFP28 | For both E-RAN and ARC Cabling |

Note: The maximum 100 m E5 link length of the multi-mode extension cable shown in the above table is restricted by the multi-mode SFP+ module and the high optical dispersion of the multi-mode optical cable. Longer E5 links are supported with duplex, bidirectional, DWDM, and CWDM SFPs, all of which use single-mode fiber.

For more information, see SFP Module Selector Guide, and Transceivers in the Ericsson R6000 library.

Related concepts

E-RAN LTE Carrier Aggregation and LTE Uplink CoMP Connectivity

### 4.2.2 E-RAN LTE Carrier Aggregation and LTE Uplink CoMP
      Connectivity

The following cable types can be used for LTE Carrier Aggregation and LTE Uplink CoMP:

- Typical Direct Cable Connection
- Y-cable Connection

Typical Direct Cable Connections

Connection 1: LTE Carrier Aggregation and LTE Uplink CoMP between Baseband 6630 and Baseband 6648

The below figure shows LTE Carrier Aggregation and LTE Uplink CoMP coexisting between Baseband 6630 and Baseband 6648 using two RPM 777 543/L DAC cables. In this example, two separate IDLe ports are used for each E5 traffic flow.

![Image](../images/292_22112-IPM10141_100Uen.DS/additional_3_CP.png)

Figure 21   LTE CA and LTE UL CoMP between Baseband 6630 and Baseband 6648

Note: the above figure shows the typical direct cable connection only for simplicity, the connection can also be made through an E-RAN switch. The Carrier Aggregation feature and the Coordinated Multi-Point features must be configured on two different IDLe, TN/IDL, or TN ports. For more information, see Elastic RAN Uplink Coordinated Multi-Point Reception.

Connection 2: LTE Carrier Aggregation and LTE Uplink CoMP between two Baseband 6648 units

The below figure shows the typical connection between Baseband 6648 units, where LTE Carrier Aggregation and LTE Uplink CoMP traffic flows are sent by separate TN/IDL ports. RPM 777 579 with SFP+ or RPM 777 052 with SFP28 can be used with all the TN/IDL ports. The below figure shows TN/IDL B and TN/IDL C as an example.

![Image](../images/292_22112-IPM10141_100Uen.DS/additional_3_CP.png)

Figure 22   LTE CA and LTE Uplink CoMP between Two Baseband 6648 Units

Note: the above figure shows a normal direct cable connection only for simplicity, it is also applicable for the E-RAN switch-based connection. The Carrier Aggregation feature and the Coordinated Multi-Point features must be configured on two different IDLe, TN/IDL, or TN ports. For more information, see Elastic RAN Uplink Coordinated Multi-Point Reception.

In the intended cases with direct DAC cable, the maximum supported length is 3 m. It can be applied between two Baseband units. Two ports are used, each port is for LTE Carrier Aggregation and LTE Uplink CoMP respectively, no E-RAN switch is needed.

Y-Cable Connections

Connection 1: Y-cable connection through E-RAN switch

The below figure shows the DAC RPM 777 544/L Y-cable through an E-RAN switch. Y-cable has two sides, one side has an Xcede connector to the Baseband 6630 IDLe port, and the other side has two SFP+ form factor connectors that plug into the router. LTE Carrier Aggregation and LTE Uplink CoMP share the IDLe port, but have separate IDLe links. IDLe A1 is for LTE Carrier Aggregation, while IDLe A2 is for LTE Uplink CoMP.

![Image](../images/292_22112-IPM10141_100Uen.DS/additional_3_CP.png)

Figure 23   Y-Cable Connection through E-RAN Switch

For the intended cases with Y-cable through an E-RAN switch, multiple Baseband units can be inter-connected by a switch. The above Figure shows two Baseband units for simplicity.

Connection 2: Y-cable direct connection with LC Duplex Coupler

The below figure shows the direct connection with an Active Optical Cable RPM 777 811 Y-cable, which has one Xcede connector and two duplex LC connectors. The Xcede connector plugs into the IDLe port, while the duplex LC connectors are inter-connected by a multimode LC duplex coupler. RPM 777 811 has four fibers at one side, and every two fibers need one LC Duplex Coupler to be connected, therefore, two LC Duplex Couplers are needed.

The optical transmit fiber of each RPM 777 811 fiber pair to be connected to the optical receive fiber of the corresponding fiber pair, is the other RPM 777 811.

![Image](../images/292_22112-IPM10141_100Uen.DS/additional_3_CP.png)

Figure 24   Y-Cable Direct Connection

Note: The multi-mode LC duplex coupler in the above figure is shown as an example, which is a Third Party Product.

The maximum supported length of the RPM 777 811 cable is 10 m, which means this configuration supports maximum 10 m and 10 m, which equals to 20-m length. If a longer length is expected, it can be extended by the multi-mode extension cable RPM 253 3209, which can be the maximum 100 m long. Then four LC Duplex Couplers are needed, so the maximum length is 10 m and 10 m and 100 m, which equals to 120-m length. The below figure shows the direct Y-cable connection with an RPM 253 3209 cable.

![Image](../images/292_22112-IPM10141_100Uen.DS/additional_3_CP.png)

Figure 25   Y-Cable Direct Connection with RPM 253 3209

Cases with Y-cable direct connection can be applied just between two Baseband units with maximum 120-m length, and only one port is used for both LTE Carrier Aggregation and LTE Uplink CoMP. No E-RAN switch is needed.

Connection 3: Y-cable direct connection

The below figure shows the typical Direct Attach Copper (DAC) RPM 777 417/L electrical IDLe connection. The LTE Carrier Aggregation and LTE Uplink CoMP features are configured on two separate 10G IDLe links of the same IDLe port. LTE Carrier Aggregation uses IDLe A1 link, while LTE Uplink CoMP uses IDLe A2 link.

On the surface, the RPM 777 417 looks like a direct cable, but actually it is a Y-cable, because two 10G lanes are bundled in the same cable sheath.

![Image](../images/292_22112-IPM10141_100Uen.DS/additional_3_CP.png)

Figure 26   Normal Direct Cable Connection between Two Baseband 6630 Units

Note: The maximum supported length is 3 m.

## 4.3 Baseband Features

### 4.3.1 IEEE 1588 Time and Phase Synchronization

As Elastic RAN (E-RAN) Carrier Aggregation (and legacy inter-baseband carrier aggregation) require that the coordinating eNodeB units are time and phase synchronized to each other. Therefore, the feature IEEE 1588 Time and Phase Synchronization must be activated in the Baseband.

For more information, see IEEE 1588 Time and Phase Synchronization in the LTE RAN library.

## 4.4 E-RAN Switch

The Elastic RAN (E-RAN) or Advanced RAN Coordination (ARC) switch function can also be implemented using 3PP solutions, but this has not been verified with 3PP switches. It is important that the 3PP switch meets the requirements imposed by the Elastic RAN application. The certified solution for E-RAN or ARC switches are Router 6000 series products, like Router 6676.

For more information about the Router 6000 series products, see the Technical Product Description in the Ericsson R6000 library.

Related concepts

Elastic RAN Considerations

# 5 E-RAN and Advanced RAN Coordination Principles

The eNodeB coordination features introduced by LTE Advanced impose more requirements for eNodeB to eNodeB connections, mainly regarding latency. It has been recognized that a more optimal solution for eNodeB coordination is to build a low latency, switched network between the baseband clusters. This is called Elastic RAN (E-RAN), and is available on various Baseband models of RAN Compute Group 3, 4, and 5.

E-RAN does not replace the need for S1 and X2 connectivity, and all Baseband units connected in an E-RAN network still require transport network connectivity to the normal backhaul network. The E-RAN network is a new, separate network to the traditional backhaul (Baseband to EPC/OAM network) and fronthaul (Baseband to radio, CPRI network).

The CSR router and E-RAN Switch can be combined as the same one Router or two separate Routers.

The Backhaul and E-RAN network can be deployed in different network infrastructure as the following diagram shown CSR for Backhaul and Switch for E-RAN network.

![Image](../images/292_22112-IPM10141_100Uen.DS/additional_3_CP.png)

Figure 27   Generic E-RAN Site Connectivity

## 5.1 E-RAN Architecture

Elastic RAN (E-RAN) is based on building an Ethernet switched network between Baseband units. At the simplest level, the E-RAN network is implemented by connecting multiple Baseband units together through IDLe or TN/IDL ports, implementing the E5 interface between them. This is suitable for a small D-RAN site, and allows coordination between the Baseband units on the site.

![Image](../images/292_22112-IPM10141_100Uen.DS/additional_3_CP.png)

Figure 28   Small E-RAN Cluster - No Inter-Site E-RAN

Note: When connecting locally, without E-RAN switch, one or both of the Baseband units in RAN Compute Group 3, 4, 5 are as the follows:

- A single IDLe or TN/IDL port can be used to connect only two Baseband units directly.
- Both of the IDLe or TN/IDL ports are used in every Baseband unit, resulting in three Baseband units directly connected, as shown in the above figure.

For larger sites, such as C-RAN sites with a larger number of Baseband units in the same location, the E5 network can be expanded. For example, a C-RAN site with more than two Baseband units can be enhanced by connecting the Baseband units to an external switch. This setup builds an E-RAN network. Additionally, situations where the radio network performance can benefit from larger coordination sets can also use this expansion approach.

![Image](../images/292_22112-IPM10141_100Uen.DS/additional_3_CP.png)

Figure 29   Typical E-RAN Architecture

The above figure shows an example where the E-RAN network spans two switches, SW1 and SW2, with a single VLAN spanning both switches.

If there is a requirement to have coordination between D-RAN sites, it is possible to do this by installing E-RAN switching equipment on each D-RAN site, and creating a Distributed E-RAN between multiple small hubs. As long as the Baseband to Baseband delay requirements are met, Baseband units on different physical sites can coordinate using the E5 interface.

This is represented in the below figure, where the addition of an E-RAN switch allows the extension of the E-RAN network out to remote D-RAN and C-RAN sites.

With a few Baseband units, it is possible to share the E-RAN switch between E-RAN carrier aggregation and E-RAN CoMP.

![Image](../images/292_22112-IPM10141_100Uen.DS/additional_3_CP.png)

Figure 30   Distributed E-RAN

Routing options for E-RAN topology

- Bridging

Bridging is a legacy method to transport Ethernet traffic, it uses MAC learning and flooding to synchronize forwarding database across the network, it is simple and good at inter-operability, as it is designed for corporate network originally, but with limitations in scalability and convergence.

It is suitable for small scale or intra site connectivity network.

- MPLS Ethernet VPN (EVPN)

IP/MPLS is known as the default telecom packet transport technology.

In an MPLS network, labels are assigned to data packets. Packet-forwarding decisions are made solely on the contents of the label instead of the target IP address. Label can be stacked for different purpose, it helps MPLS network to achieve great flexibility to support different kind of overlay services, also with benefits like redundancy and load balance.

EVPN is a Layer 2 VPN service which is provided by IP/MPLS network, it moves MAC address learning into the MP-BGP control plane, it simplifies the operation, also optimizes traffic forwarding, and minimizes network recovery time.

It is not a replacement of bridging, bridging function is still required for local MAC learning and forwarding. It is suitable for large-sale and inter-site connectivity network

## 5.2 E-RAN Terminology

### 5.2.1 Coordination Groups and Sets

The coordination group is the total group of Baseband units that can become coordination partners. It is defined by the physical connectivity, and the use of a common VLAN. In that example, the coordination group consists of BB\_1 to BB\_N+M across both switches. Once the Baseband to Baseband latency requirements for E-RAN are met, any Baseband could become a coordination partner with any other in the coordination group. For more information regarding latency requirements, see  Elastic RAN Considerations.

The coordination set is defined regarding a specific Baseband. It is based on the existence of the logical fast inter-baseband links between a set of fast coordination partners. These logical fast links are established once the decision to perform Elastic RAN Carrier Aggregation for a particular UE is made by the primary eNodeB with an external eNodeB in the same coordination group, and are set up using X2-AP signaling between the eNodeB units.

To illustrate how the Coordination Set follows the UE within a coordination group, consider the below figure, which shows an example of a C-RAN site with multiple racks of Baseband units. Each rack has a top of rack Ethernet switch, which provides the E-RAN connectivity between Baseband units in a rack, and also provides the inter-switch links between racks. Each hexagon in the below figure represents all cells controlled by a specific Baseband. The coordination group consists of all the Baseband units in Rack 1 to Rack N, that is, they are all in the same VLAN.

![Image](../images/292_22112-IPM10141_100Uen.DS/additional_3_CP.png)

Figure 31   Coordination Sets 1

In the above figure, the Baseband units that are part of the initial coordination set are shown in orange. As the UE moves from cell to cell, the coordination set that it connects to changes. In the below figure, this is represented in green.

![Image](../images/292_22112-IPM10141_100Uen.DS/additional_3_CP.png)

Figure 32   Coordination Sets 2

## 5.3 E-RAN Operation

### 5.3.1 Elastic RAN Considerations

Prerequisites

For Elastic RAN to operate between coordination partners, several prerequisites need to be met.

- X2 connectivity between baseband is required.
- With the Supplemental Downlink with License-Assisted Access feature, LAA cells can be used as ESCells.
    - LAA ESCells can be used for carrier aggregation only when the Elastic RAN and the License-Assisted Access licenses are activated on the primary eNodeB and the external eNodeB Elastic RAN partners.
    - For more information, see Elastic RAN.
- Each Baseband must have the correct licenses (Carrier Aggregation, Elastic RAN, and so on).
- The maximum port-to-port RTT latency (as elaborated in Supported Capacity and Configurations for LTE RAN and Massive IoT RAN depends on the following elements:
    - Baseband hardware type, and if configured in single or mixed mode
    - If only Elastic RAN Carrier Aggregation is enabled, or also Elastic RAN uplink CoMP
    - The maximum desired Inter-eNodeB E5 link throughput
- Coordination partners must be connected to the same VLAN through the IDLe or TN ports.
- The coordination partners must be time and phase synchronized.

Note: GNSS or IEEE1588 Time and Phase Synchronization is required.

- For one Baseband unit, the maximum number of coordination partners is 12 or 6, with a maximum of 144 or 54 ESCells, for more information, see Elastic RAN.
- Elastic RAN Uplink CoMP requirements:
    - The maximum number of external eNodeB partners is 12, but only six out of 12 are usable for Elastic RAN Uplink CoMP.
    - External eNodeB units must be in time or phase synchronization with the serving eNodeB. Separate IDLe links must be used for Elastic RAN Carrier Aggregation and Elastic RAN Uplink Coordinated Multi-Point Reception on the Baseband node. The same link cannot be used for both.
    - All cells must have the same frameStartOffset value.
    - Elastic RAN Uplink CoMP is supported both on FDD and TDD.
    - UL CoMP can be implemented only between multi-intra-frequency cells.
- Elastic RAN Carrier Aggregation traffic can also be configured to use the same 10GE TN port on the Baseband node as the Backhaul (S1/X2) traffic.
    - This is a supported use case for small cell deployment.
    - Elastic RAN Uplink Coordinated Multi-Point Reception requires separate IDLe port, for example, TN port cannot be used for both Carrier Aggregation and Uplink Coordinated Multi-Point Reception.

Benefits

When using the Baseband TN Ports for carrying combined traffic, such as Elastic RAN Carrier Aggregation and S1 or X2, there is a significant benefit. There is no need to use a dedicated Elastic RAN Switch for the Small Cell use case. The same Fiber Cable connected to the TN port can be used, as it can be equipped with any supported SFP+. This configuration allows for reaching longer distances compared to the IDLe Multimode optics. The distance is longer than the 100-200 m range for IDLe. It extends to Small Cell connected CSR or Switch node, where the Elastic RAN Carrier Aggregation traffic is switched and Backhaul (S1 or X2) traffic is routed.

Note:

- If the Elastic RAN Uplink Coordinated Multi-Point Reception is required in the Small Cell use case, then an Elastic RAN Switch is a must for longer reach.
- Separate IDLe links must be used for Elastic RAN Carrier Aggregation and Co-existence of Elastic RAN and Inter-eNodeB Carrier Aggregation on the same Baseband

This enhancement allows the simultaneous use of both Elastic RAN and Inter-eNodeB Carrier Aggregation on the same eNodeB by removing the restriction of coexistence of Elastic RAN and Inter-eNodeB features on the same eNodeB. Parallel use of both of those features enables more carrier aggregation partners and improves Carrier Aggregation on border areas between two networks. This enhancement also allows it to use a single Cell as Elastic RAN and Inter-eNodeB Carrier Aggregation partner at the same time.

Latency Requirements

The port-to-port round-trip latency that can be supported for the Elastic RAN operation between Baseband units varies 20-160 μs, depending on the following elements:

- Baseband hardware type
- Configured with Elastic RAN Carrier Aggregation only, or with Elastic RAN Carrier Aggregation and Elastic RAN Uplink CoMP. For Elastic RAN links between Baseband units to operate, all Baseband units in a coordination group need to be time and phase synchronized to each other.
- Configured as single or mixed mode

The E5 latency is dynamically measured and automatically configured instead of configuring the fixed values (like 20 μs, 160 μs), which allows operators to avoid unnecessary configuration effort and benefit from higher Carrier Aggregation throughput. For details, see Elastic RAN.

For more details, see Supported Capacity and Configurations for LTE RAN and Massive IoT RAN.

The low latency is required to allow Baseband units to exchange coordination information between them, and make radio scheduling decisions within the same 1 ms TTI.

The maximum Elastic RAN inter-node throughput can be achieved for Baseband 5216, Baseband 6318, and Baseband 6630 with a maximum RTT of 20 μs. This requirement results in an intra-site to handle the short distance enforced by the low latency.

The maximum capacity of Elastic RAN or ARC throughput over the E5 links depends on hardware and RTT. In LTE E-RAN configuration, the maximum supported port-to-port RTT latency is 160 μs. While in NR ARC configuration, there are different configurations, like three or two Component Carriers (CC), refer to Feature Description of Advanced RAN Coordination. If the E-RAN and ARC are deployed on C-RAN configuration, the Baseband to radio unit latency also needs to be considered, that is, the delay over CPRI or eCPRI fronthaul. The maximum RTT delay for this Segment is 150 μs.

The E5 latency for Elastic RAN is dynamically measured and automatically configured instead of configuring the fixed values of 20us, 60us, 160us. It allows operators to avoid unnecessary configuration effort and benefit from higher E-RAN /ARC throughput. For details, see Elastic RAN.

The below figure shows an example of a latency budget calculation, with certain assumptions on attach and serialization latencies, this example applies to both E-RAN and ARC configuration.

![Image](../images/292_22112-IPM10141_100Uen.DS/additional_3_CP.png)

Figure 33   Elastic RAN or ARC Latency Budget

Synchronization Requirements

The recommended solution is to combine GNSS and PTP synchronization. Providing a GNSS reference to all Elastic RAN nodes is not cost effective. The recommendation is to provide GNSS synchronization to several geographically separated nodes. For example, GNSS synchronization can be provided on each Elastic RAN hub. These nodes can implement the PTP Boundary Clock. Baseband 5216 or Baseband 6630 units with an operational GNSS synchronization reference can take the role of the PTP grandmaster.

Each geographical site has PTP grandmasters, which have a reference to a primary reference clock, meaning a GNSS receiver unit. The preferred implementation for these PTP grandmasters is in the Baseband 5216 or Baseband 6630 units as this case. The CSR can also be worked as PTP grandmaster, for details, see the Network Synchronization Solution Guideline in NR RAN library. The Baseband units can get their synchronization reference directly from the grandmaster, or from a Class C Boundary Clock (as defined by the G.8275.1 telecom profile) in the timing chain. The below figure represents a case where the PTP grandmaster is implemented in the Baseband 5216 or Baseband 6630 unit. In this case, the Elastic RAN switch implements the PTP Boundary Clock, it gets the PTP synchronization from the IDLe or TN port of the Baseband grandmaster. The switch then relays this timing reference to the other Baseband units in the hub through their IDLe or TN connections.

![Image](../images/292_22112-IPM10141_100Uen.DS/additional_3_CP.png)

Figure 34   Elastic RAN Synchronization - GNSS and PTP

The above figure shows the logical separation of the switch functions (Synchronization, TN, and IDLe); however, these can be handled in the same or different physical switches, depending on the switch capabilities and centralized site design.

For FDD-based networks, NGS can be used to give a tight time alignment (well within the required 3 µs). This is required between the Baseband units in a site, when running Carrier Aggregation or uplink CoMP over Elastic RAN.

![Image](../images/292_22112-IPM10141_100Uen.DS/additional_3_CP.png)

Figure 35   Elastic RAN Using NGS and Synchronization Reference from PTS with Relaxed Limits

The above figure shows a case with Carrier Aggregation between two Baseband units in one site over Elastic RAN. PTS with relaxed network limits is providing an external time reference. PTS with relaxed network limits gives a time accuracy of 0.5 ms, which by itself is not enough for Elastic RAN Carrier Aggregation. NGS is used between the two Baseband units through one Radio Unit. It is required that both Baseband unit are connected to the same radio and CPRI connection is used. For NGS, an extra CPRI connection is used, connecting LTE Baseband to the same Radio Unit. This CPRI link does not need to carry traffic. The NGS gives tight time alignment (well within the required 3 µs), which is needed between the Baseband units when running Carrier Aggregation.

For more information, see the following documents:

- Network Synchronization Solution Guideline
- Elastic RAN
- Carrier Aggregation

Elastic RAN Switch Requirements

There are several requirements imposed by Elastic RAN on the switches that are used to transport the E5 interface.

The signaling and user traffic that are carried over the E5 interface between Baseband for Elastic RAN Carrier Aggregation requires high-bandwidth links. A single IDLe port on Baseband 5216 or 6630 can support two 10 GE links, but only a single 10 GE is used to connect to the external Elastic RAN switch. Based on the limit of carrier aggregation traffic per eNodeB, this is deemed sufficient.

The Elastic RAN switch needs at least a single 10 GE port per Baseband (for carrier aggregation).

The tight port-to-port latency requirements of the E5 interface impose restrictions on the choice of Elastic RAN switch. Every microsecond of latency introduced by the switch results in less allowable fiber length between coordinating Baseband units. Elastic RAN CoMP uses a separate IDLe link, so if the same switch is used for Coordinated Multi-Point Reception, two 10 GE ports are required per connected Baseband.

The latency requirements are also drive requirement on the traffic handling within the Elastic RAN switch, in that E5 traffic must be treated with Strict-Priority Queuing at the highest priority. Any queuing latency or head of line blocking reduces the maximum fiber distance between switches.

For situations where multiple links are used between switches for trunk links, it is recommended that Link Aggregation Group (LAG) is not used. The normal algorithm for LAG usually hashes multiple E5 flows to a single link. This could lead to unnecessary blocking if several high traffic flows are put on the same link, while other links in the group are used. If multiple links are used, it is recommended to control the load sharing using VLANs to distribute traffic between the sites. As presented in the below figure, multiple VLANs are supported on the IDLe port, this allows the operator to steer the traffic.

![Image](../images/292_22112-IPM10141_100Uen.DS/additional_3_CP.png)

Figure 36   Inter-Switch Traffic Steering with Multiple VLANs

### 5.3.2 E-RAN Carrier Aggregation Establishment

For the E-RAN to operate between coordination partners, there needs to be X2, and E5/E-RAN connectivity between them.

Once the PCell initiates Carrier Aggregation with an external eNodeB SCell, the two eNodeB units exchange the relevant E-RAN carrier aggregation information.

This enables the Baseband to automatically set up Fast Baseband Links over the E5 interface between them through the IDLe port. Once these links are established, the high-bandwidth E-RAN traffic between the Baseband units enables the Primary Cell on one Baseband to send transport blocks to the Secondary Cell on the other Baseband. These transport blocks are then transmitted to the UE within the same TTI.

![Image](../images/292_22112-IPM10141_100Uen.DS/additional_3_CP.png)

Figure 37   Elastic RAN Operation

The Fast Baseband Link setup has the following preconditions:

- The Baseband unit must be physically connected to the E-RAN switch through IDLe.
- The Baseband must be on the same VLAN.

The IDLe port on each Baseband must also be configured with the required VLAN IDs. The decision on which VLANs need to be configured on the IDLe port need to be based on the clustering model or the definition of the coordination group. Multiple VLAN IDs are supported on the IDLe port.

### 5.3.3 E-RAN Configuration on Baseband 5216, and Baseband
      6630

While the coordination set follows the UE, and the fast inter-baseband links are established dynamically, the configuration of the IDLe port and the relations from a Baseband to the external Baseband must be configured manually.

In a Baseband 5216 or Baseband 6630, the information on an external Baseband (possible coordination partner for E-RAN) is defined in the ExternalENodeBFunction MO. Settings on this MO define what type of inter-eNodeB carrier aggregation is allowed to cells on the external Baseband, that is, Elastic RAN carrier aggregation (fast), X2 carrier aggregation (slow), or none (carrier aggregation disabled).

To configure the E5 interface on the IDLe port, it is necessary to define the VLAN used for IDLe traffic (VlanPort MO). Then map this to an EthernetPort MO, referring to the TnPort MO, which defines the physical port used, IDLe\_A or IDLe\_B.

It is possible to configure multiple VLANs on the IDLe port. If multiple VLANs are used for E-RAN traffic, it is necessary to define which VLAN is used for communication with which external Baseband, under the relevant ExternalENodeBFunction MO.

When connecting three Baseband units directly without an Ethernet switch, an additional E5 interface is configured on the additional IDLe port to connect the three Baseband units. It is necessary to define an additional VlanPort MO and maps this to an EthernetPort MO referring to the TnPort MO, which defines additional port used IDLe\_A1 or IDLe\_A2 or IDLe\_B1 or IDLe\_B2.

Note: Both Baseband 5216 and Baseband 6630 can be directly connected (without Ethernet switch) with up to three Baseband units, otherwise an Ethernet switch is required.

### 5.3.4 IDLe Signaling

For the E-RAN carrier aggregation to provide the same performance as Inter-eNodeB Carrier Aggregation, the PCell in one baseband must communicate with the SCell in another baseband to get information on the resources available in the SCell, and transfer the transport blocks, all within a single 1 ms TTI. This signaling sequence is broken into several Burst Periods within the TTI, which defines the usage of the IDLe links. The signaling and user data transfer is implemented in a three message sequence, consisting of Schedule Request, Schedule Response, and User Data messages.

In a single TTI, a baseband sends Schedule Request for PCells, and receives Schedule Requests for the SCells. The ratio of Tx/Rx messages is 1:2, a baseband can send 12 Schedule Request, and receive 24 in the same TTI.

The ratio of Schedule Response is the opposite, 2:1. In a TTI, a baseband can receive 12 and send 24.

The IDLe signaling for the E-RAN carrier aggregation sequence, where the coordination set for a UE (UE1) consists of cells controlled by multiple Baseband units, is shown in the below figure.

The requirement for a 10-Gbps link to transfer the E-RAN traffic is based on the speed needed to transfer the three bursts within the same TTI.

As all Baseband units in a coordination group are time synchronized, all the IDLe links burst together, which imposes the requirements on the E-RAN network in relation of delay and jitter.

![Image](../images/292_22112-IPM10141_100Uen.DS/additional_3_CP.png)

Figure 38   IDLe Signaling

## 5.4 E-RAN Security

The user data carried on the E-RAN links for carrier aggregation is integrably protected at the PDCP layer. The in-band control plane (IDLe signaling) is not protected in the same way.

The low latency requirements for E-RAN traffic impose certain restrictions on the security measures applied to the traffic. IPsec protection cannot be used, as this can impose unacceptable delays.

It is recommended to use trusted networks for E-RAN connection.

## 5.5 E-RAN Performance Tracking

### 5.5.1 E-RAN Carrier Aggregation Tracking

The tracking of the performance of E-RAN carrier aggregation on a Baseband 5216 or Baseband 6630 is based on the counters described in the below table.

| PM Name                                     | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | Behavior with E-RAN                                                                                                                                                                      |
|---------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| EUtranCellTDD.pmRadioThpVolTxDlSCellExt     | Total of successfully transferred data volume on MAC level in the downlink for ESCell traffic as measured and reported on the PCell.                                                                                                                                                                                                                                                                                                                                                            | Use of external SCells is indicated by the value of this PM being nonzero. A larger PM value indicates greater ESCell usage.                                                             |
| EUtranCellTDD.pmRadioThpVolDlSCellExt       | Total of assumed successfully transferred data volume on MAC level in the downlink for ESCell traffic as measured and reported on the ESCell.                                                                                                                                                                                                                                                                                                                                                   | Use of external SCells is indicated by the value of this PM being nonzero. A larger PM value indicates greater ESCell usage.                                                             |
| EUtranCellTDD.pmCaConfiguredDlIeNbSum       | For carrier aggregation interactions, records the number of configured downlink ESCells of any duplex mode, for UEs that use this cell as their PCell. carrier aggregation interactions can be through the Inter-eNodeB Carrier Aggregation feature or the Elastic RAN feature.                                                                                                                                                                                                                 | Use of external SCells is indicated by the value of this PM being nonzero. A larger PM value indicates greater ESCell usage.                                                             |
| EUtranCellTDD.pmCaActDlIeNbSum              | Number of activated downlink ESCells of any duplex mode, for UEs that use this cell as their PCell. Inter-eNodeB Carrier Aggregation interactions can be through the Inter-eNodeB Carrier Aggregation feature or the Elastic RAN feature.                                                                                                                                                                                                                                                       | Use of external SCells is indicated by the value of this PM being nonzero. A larger PM value indicates greater ESCell usage.                                                             |
| EUtranCellTDD.pmCaScheduledDlIeNbSum        | For carrier aggregation interactions, records the mean number of UEs that have data scheduled on a downlink ESCell, counted by the number of component carriers hosted on external eNodeB units and simultaneously scheduled. UE is considered scheduled for carrier aggregation if the eNodeB has sent a PDCCH assignment indicating a PDSCH assignment. Inter-eNodeB Carrier Aggregation interactions can be through the Inter-eNodeB Carrier Aggregation feature or the Elastic RAN feature. | Use of external SCells is indicated by the value of this PM being nonzero. A larger PM value indicates greater ESCell usage.                                                             |
| ExternalENodeBFunction.pmCaCrntiUnavail     | Counts each occurrence of C-RNTI unavailability at the external eNodeB when configuration of ESCell takes place.                                                                                                                                                                                                                                                                                                                                                                                | Can be used to track the occurrence of C-RNTI collision when ESCell is being activated.                                                                                                  |
| ExternalENodeBFunction.pmEranCaPartnerBlock | Counts the number of TTIs where this partner was blocked by UPC because of link delay or missed deadlines.                                                                                                                                                                                                                                                                                                                                                                                      | Can be used to track the usage of eNodeB partners in E-RAN carrier aggregation. It can be used as an indicator of long link delay when the E-RAN carrier aggregation is underperforming. |
| ExternalENodeBFunction.pmEenbPktTransDlCa   | Counts the number of packets transmitted by this eNodeB to an external eNodeB for carrier aggregation.                                                                                                                                                                                                                                                                                                                                                                                          | Accumulates for transmission of both control and data packets over the IDLe interface.                                                                                                   |
| ExternalENodeBFunction.pmEenbPktRecDlCa     | Counts the number of packets successfully received by an eNodeB from a remote master eNodeB for carrier aggregation.                                                                                                                                                                                                                                                                                                                                                                            | Accumulates upon receiving of both control and data packets over the IDLe interface.                                                                                                     |
| ExternalENodeBFunction.pmEenbPktDiscDlCa    | Counts the number of packets for carrier aggregation discarded, such as packets received out of order.                                                                                                                                                                                                                                                                                                                                                                                          | Accumulates upon discarding of both control and data packets received over the IDLe interface. Out of order packets are not counted as discarded in E-RAN.                               |

Note: TDD is used in the above table, the same applies to FDD.

### 5.5.2 E-RAN Uplink CoMP Tracking

The tracking of the performance of E-RAN Uplink CoMP on a Baseband 5216 or Baseband 6630 is based on the counters described in the below table.

| PM Name                                       | Description                                                                                                            | Behavior with E-RAN UL CoMP                                                              |
|-----------------------------------------------|------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------|
| EUtranCellTDD.pmEranCompUlDeltaSinrPuschDistr | Distribution of the DeltaSINR for PUSCH with E-RAN UL CoMP enabled.                                                    | Stepped when DeltaSinr is within certain bounds.                                         |
| EUtranCellTDD.pmEranCompUlNack                | The number of NACK subframes before combining for E-RAN ulComp users at serving cell with E-RAN UL COMP enabled.       | Stepped when NACK is received for Elastic RAN UL CoMP serving cell.                      |
| EUtranCellTDD.pmEranCompUlAvoidedNack         | The number of NACK to ACK subframes after combining for E-RAN ulComp users at serving cell with E-RAN UL COMP enabled. | Stepped when NACK is received but changes to ACK because of combination at serving cell. |
| EUtranCellTDD.pmUeThpVolUl                    | Increased, but it is only obvious for cell edge users.                                                                 | When the load is low, there are enough Baseband resources for UL CoMP assistance.        |
| EUtranCellTDD.pmUeThp2UlDistr                 | Increased. Cell edge throughput is increased.                                                                          | When the load is low, there are enough Baseband resources for UL CoMP assistance.        |
| EUtranCellTDD.pmMacUeThpUlDistr               | Increased. Cell edge throughput is increased.                                                                          | When the load is low, there are enough Baseband resources for UL CoMP assistance.        |

Note: TDD is used for example in the above table, the same applies to FDD.

### 5.5.3 E-RAN Transport Observability

Given the strict Baseband to Baseband Round Trip Time requirements for E-RAN, there is a mechanism for tracking the availability status of the inter-baseband link between coordination partner Baseband units. This is based on a ping pong response from the PCell Baseband to the SCell Baseband. It operates periodically to ensure that the latency is within the E-RAN requirements, once the remote cell for a given partner is set up.

The results of the latency measurements can be displayed on the Baseband 5216 or Baseband 6630 under the EranInterMeLink MO. This MO can display the availability status of the link, and the following:

- The highest latency was measured during the last completed 15-minute period.
- The average latency was measured during the last 1-minute period.
- The highest latency was measured during the last 24 hours.

If three ping messages in a row are lost, the link to the external eNodeB is disabled.

## 5.6 Advanced RAN Coordination

The feature enables inter-gNodeB NR CA over E5 interface between two Baseband nodes. The gNodeB nodes are connected by E5 link over IDLe or TN/IDL port.

In an LTE + NR Mixed Mode Baseband unit, the Elastic RAN and the Advanced RAN Coordination features can coexist.

In low volume traffic nodes, Elastic RAN LTE Carrier Aggregation and ARC NR DL Carrier Aggregation can be configured to use the same TnPort, these two traffic applications can share the same 10-Gbps E5 link. This can be considered a short-term, cost optimized solution for fast NW deployment and it is not recommended. 10-Gbps E5 link sharing between Elastic RAN LTE DL Carrier Aggregation and ARC NR DL Carrier Aggregation has the potential to degrade Carrier Aggregation performance at high traffic load or at high component carrier bandwidths. A high enough E5 link capacity is needed for high traffic load and volumes so that E5 link capacity does not cause performance degradation by introducing buffer build-ups or queue delays.

For best performance, a minimum of 10-Gbps E5 link capacity is recommended for each E5 service (LTE CA, LTE CoMP, NR CA). Using separate IDLe links provides separate E5 link capacity, signaling, and data transfer speeds for LTE CA, LTE CoMP, and NR CA traffic. For all E5 services (LTE CA, LTE CoMP, NR CA) except LTE Uplink CoMP, it is recommended to use one single 25 Gbps E5 link.

In Advanced RAN Coordination, one primary gNodeB can connect to a maximum of six external partner gNodeB units.

The Supplemental Downlink band and unpaired spectrum in FDD can be used as a component carrier for downlink-only carrier aggregation, enhancing UE peak throughput by providing no uplink traffic. For more information, see Supplemental Downlink Support for NR Downlink Carrier Aggregation.

For the E-RAN or ARC switch connection, the Baseband units can connect to separate switch for ARC traffic and separate CSR for backhaul traffic. Or can be connected to the same CSR for both ARC and backhaul traffic. For details, see the  LTE Inter-C-RAN Site E-RAN Design and the  LTE Inter-C-RAN Site E-RAN Design chapters.

# 6 Reference Network Design

This section outlines the high-level design for LTE and NR C-RAN and E-RAN deployment, based on several cases. It uses the principles and guidelines defined in previous sections of this document.

The cases and configurations described are not intended to be exhaustive, and can act as a reference solution that can be adapted for specific deployments.

In this high-level reference network design, the generic terms CSR and E-RAN or ARC switch are used. The actual equipment that can be used to implement these functions are described in  Network Elements.

## 6.1 Common Aspects for All Cases

The aspects presented in  Backhaul Connectivity,  Fronthaul Connectivity,  Synchronization, and  Quality of Service are common to all cases.

### 6.1.1 Backhaul Connectivity

Physical Connectivity

References are made to the S1 or X2 architecture of the cases described.

The S1 connections to the core network, and the X2 connections between Baseband (both internal to a hub, and external between Baseband on other sites), are through the CSR. Each Baseband is connected to the CSR by 1/10 GE links, connected by one of the TN ports (TN A, B, or C). In this example, TN B is used on each Baseband. The decision on whether to use 1 GE or 10 GE for this connection needs to be based on the expected S1 or X2 traffic, and the port density on the CSR.

![Image](../images/292_22112-IPM10141_100Uen.DS/additional_3_CP.png)

Figure 39   Typical C-RAN or E-RAN Hub Physical Architecture

The more Baseband units are connected to a single CSR, the greater the impact the failure of that CSR has. With this in mind, it is recommended to implement physical redundancy by adding connections from each Baseband to an additional CSR chassis, as shown in the above figure.

The E-RAN or ARC switch needs connectivity to the Network Management System (NMS) for OAM traffic. For the case in the above figure, with the CSR and E-RAN functions implemented in separate physical devices. This OAM connectivity is provided by connecting the E-RAN or ARC switch to the CSR by a GE link and configuring the CSR to route the traffic on this link to the NMS (ENM), similar to OAM traffic from the Baseband units (if IPsec is not used).

Logical Connectivity

The logical configuration of the CSR to the Baseband is beyond the scope of this design, as is the OAM connectivity design.

### 6.1.2 Fronthaul Connectivity

The Baseband to radio unit connectivity is built using CPRI or eCPRI connections to the fronthaul network.

### 6.1.3 Synchronization

All Baseband units implementing coordination features (such as, Carrier Aggregation) require time and phase synchronization.

In the cases in this section, this is provided using IEEE1588v2/PTP. For more information regarding the synchronization configuration of the Baseband units, see Manage Network Synchronization.

Baseband as PTP Grandmaster

In the following cases, the nodes implementing E-RAN or ARC switch are part of a local Layer 2 network. With full timing support (implementing G.8275.1 profile), meaning that the CSR connected to the Baseband implements the Boundary Clock functionality. In addition, all Baseband units in the hub are configured as a Boundary Clocks.

Time synchronization for the E-RAN or ARC switch hub is provided by a GNSS source connected to a Baseband by a GNSS receiver unit. While this Baseband is configured as a Boundary Clock, because it has an operational GNSS reference, it takes the PTP grandmaster role. The Baseband supports PTP on the IDLe port, and can provide PTP timing over the IDLe link to the E-RAN or ARC switch. The E-RAN or ARC switch implements the PTP Boundary Clock role, secondary to the PTP grandmaster, receiving the PTP timing frames through the 1GE/10GE link from the Baseband IDLe port. This Boundary Clock can then distribute PTP time and phase synchronization to the other connected Baseband units through their connected IDLe ports.

This is shown in the below figure, which represents an E-RAN or ARC switch hub with eight Baseband units. The GNSS receiver unit is connected to BB\_1, which is implementing PTP grandmaster. During normal operation, the PTP Boundary Clock on the E-RAN or ARC switch is a secondary to the timing reference from BB\_1. The other connected Baseband units are secondary to the Boundary Clock in the E-RAN or ARC switch.

![Image](../images/292_22112-IPM10141_100Uen.DS/additional_3_CP.png)

Figure 40   Baseband as PTP Grandmaster

Given that loss of time and phase synchronization for a Baseband means that E-RAN carrier aggregation is no longer possible. It is recommended that a Baseband E-RAN hub is configured with multiple Baseband units implementing the PTP grandmaster functionality.

This is shown in the below figure, where there are two Baseband units implementing the PTP grandmaster functionality. The PTP Best Master Clock Algorithm (BMCA) elects the grandmaster that the E-RAN nodes lock onto. If this grandmaster becomes unavailable, then the nodes (including the failed grandmaster) use BMCA to lock onto the alternative grandmaster.

![Image](../images/292_22112-IPM10141_100Uen.DS/additional_3_CP.png)

Figure 41   PTP Grandmaster Redundancy

The below figure represents three directly connected Baseband units without using an Ethernet switch. The GNSS receiver unit is connected to BB\_1, which is implementing PTP grandmaster. During normal operation, the PTP Boundary Clock on the other connected Baseband units is secondary to the timing reference from BB\_1.

![Image](../images/292_22112-IPM10141_100Uen.DS/additional_3_CP.png)

Figure 42   Small E-RAN Cluster - No Inter-Site Elastic RAN

### 6.1.4 Quality of Service

For E-RAN traffic, because of the strict delay budget, there is a requirement that there be no buffering or reordering of the E-RAN traffic flows. If an E-RAN or ARC switch also handles non E-RAN traffic, the E-RAN traffic must be logically separate from other traffic.

## 6.2 LTE Intra-C-RAN Site E-RAN Design

This section describes cases for E-RAN configuration within a single C-RAN site.

### 6.2.1 Case - Single E-RAN Switch, Single VLAN

This case is suitable for a small hub, that is, where fewer than 10 Baseband units are used, with no requirement for coordination with other hubs.

E-RAN Physical Connectivity

This case considers a cluster of Baseband 5216 or Baseband 6630 units connected to a single E-RAN switch. This is represented in the below figure, where the Baseband 5216 or Baseband 6630 units, the CSRs and the E-RAN switch are all in the same rack.

The verified E-RAN architecture recommends that the CSR and the E-RAN switch are in separate physical devices. If large E-RAN site (more than 10 Baseband units), it is recommended to have a dedicated device for E-RAN carrier aggregation traffic, and a dedicated device for E-RAN CoMP traffic.

The E-RAN network within the cluster is implemented by connecting an IDLe port on each Baseband to a 10 GE port on the E-RAN switch using the proprietary cable.

![Image](../images/292_22112-IPM10141_100Uen.DS/additional_3_CP.png)

Figure 43   Single E-RAN Switch, Single VLAN Physical Connectivity

E-RAN Logical Connectivity

For this example, given the small size of this hub, and the fact there is no coordination required with other hubs, there is a single VLAN configured on the E-RAN network. All Baseband units use this VLAN for carrier aggregation traffic.

This is represented in the below figure, where VLAN 100 is used for all E-RAN carrier aggregation traffic.

![Image](../images/292_22112-IPM10141_100Uen.DS/additional_3_CP.png)

Figure 44   Single E-RAN Switch, Single VLAN Logical Connectivity

Once the VLAN has been configured on all ports, self-learning of the MAC addresses is used within the E-RAN switch to determine which MAC addresses are connected to which ports.

The inter-baseband links that carry the E-RAN carrier aggregation traffic are established dynamically between the PCell Baseband and the ESCell Baseband.

### 6.2.2 Case - Multiple Switches, Single VLAN

This case describes a situation where there is a requirement for a larger coordination group of Baseband units, that is, a larger hub site with multiple switches.

In this case there are greater numbers of Baseband units in the hub site than in  Case - Single E-RAN Switch, Single VLAN, implying that multiple E-RAN switches are required.

It is assumed in this case that the allocation of cells to Baseband follows the coordination requirements. The coordinated cells are controlled by a Baseband connected to the same switch, which can reduce the amount of inter-switch E-RAN carrier aggregation traffic. Based on this, it is assumed that a single 10 GE inter-switch link is required between each E-RAN switch.

Given that the number of Baseband units in this case is relatively low (less than 64), and the assumption that a single inter-switch link is required. It is considered that only a single VLAN on the E-RAN network is required.

Physical Connectivity

The connectivity from Baseband to backhaul (through CSR) and from Baseband to fronthaul (through CPRI or eCPRI) are omitted for simplicity. Each Baseband is connected to its respective E-RAN switch through 10 GE IDLe cable, and between each E-RAN switch there is a single 10 GE link. Given that there is a single VLAN in this hub, it is necessary to avoid a physical loop, so the E-RAN switches are connected in star topology.

![Image](../images/292_22112-IPM10141_100Uen.DS/additional_3_CP.png)

Figure 45   Multiple Switches, Single VLAN Physical Connectivity

Logical Connectivity

Given that the number of Baseband units in this case is relatively low (less than 64), and the assumption is that a single inter-switch link is required. it is considered that only a single VLAN on the E5 interface is required.

This is represented in the below figure, where VLAN 100 is used for all E-RAN CA traffic. This VLAN is configured on all IDLe ports on the Baseband units, and can also be configured on the inter-switch links between all Router 6675 units.

![Image](../images/292_22112-IPM10141_100Uen.DS/additional_3_CP.png)

Figure 46   Multiple Switches, Single VLAN Logical Connectivity

### 6.2.3 Case - Single Inter-Site Link

This case considers a situation where there are multiple C-RAN hubs on geographically separated sites with a single inter-site link required for E-RAN carrier aggregation traffic.

Physical Connectivity

The connectivity from Baseband to backhaul (through CSR) and from Baseband to fronthaul (through CPRI or eCPRI) is omitted for simplicity. Each Baseband is connected to its respective E-RAN switch through 10 GE IDLe cable.

On Site A, there are three E-RAN switches connected in star topology. On Site B there are two E-RAN switches, cascaded. It is recommended that any Baseband in Site A that need to coordinate with a Baseband in Site B can be connected to the top-level switch, labeled E-RAN SW2. Similarly, any Baseband in Site B which coordinate with Baseband in Site B can be connected to E-RAN SW4. This keeps the number of switches between these Baseband units to a minimum, and leave more of the E-RAN latency budget for the inter-site fiber link.

![Image](../images/292_22112-IPM10141_100Uen.DS/additional_3_CP.png)

Figure 47   Single Inter-Site Link Physical Connectivity

Logical Connectivity

In this case, there is a single VLAN for all intra-site E-RAN traffic on each site. All Baseband units in the respective site have this VLAN configured on their IDLe ports.

The Baseband units that require inter-site coordination can also have an inter-site VLAN configured on their IDLe port. Given that these are connected to the top-level switches, it is possible to confine this VLAN to the top-level switches, and to the inter-site link.

The VLANs used in this case are the following:

- VLAN 100 - Intra-site VLAN site A
- VLAN 101 - Intra-site VLAN site B
- VLAN 1001 - Inter-site VLAN

![Image](../images/292_22112-IPM10141_100Uen.DS/additional_3_CP.png)

Figure 48   Single Inter-Site Link Logical Connectivity

The existing bridging in both Site A and Site B are kept, the inter-connected SW2 and SW4 can be migrated to MPLS PE routers and enable MPLS in Link between SW2 and SW4.

MP-BGP peer is established between two PE router, the EVPN route in SW2 is sent to SW4 through MP-BGP, and vice versa for SW4, the EVPN route have Layer 2 connectivity information obtained through bridging within each site.

When SW1 (Site-A) sends data to SW5 (Site-B), the data is sent to SW2 in physical Bridging methods, and encapsulated to MPLS packet in SW2. When it is received in SW4, the decapsulation is proceed in SW4 and forward to SW5 with Bridging.

### 6.2.4 Case - Multiple Sites, Multiple VLANs

This case considers a situation where there are multiple E-RAN hubs on geographically separated sites, and with multiple inter-site E-RAN links. It is designed to demonstrate how the VLAN allocation can be used to remove to the impact of physical loops in a multi-E-RAN hub architecture.

Physical Connectivity

The connectivity from Baseband to backhaul (through CSR) and from Baseband to fronthaul (through CPRI or eCPRI) are omitted for simplicity. Each Baseband is connected to its respective E-RAN switch through a 10 GE IDLe cable.

On each site, there is a single E-RAN switch, with links to two other sites. Between sites A and B, there are two 10 GE inter-site links required. This is because of a high-level of carrier aggregation traffic between these sites. There is a single 10 GE link between site A and C, C and D, and D and B, as shown in the below figure.

![Image](../images/292_22112-IPM10141_100Uen.DS/additional_3_CP.png)

Figure 49   Physical Connectivity of Multiple Sites, Multiple Links, Loop Avoidance

Logical Connectivity

In this case, there are multiple VLANs across multiple nodes. All nodes are acting as PE role, each node maintains one local MAC database for each VLAN through local bridging. The information is communicated to peer PE node as EVPN is routed through MP-BGP, with import/export operation in MP-BGP, it is flexible to control the VLAN which can be grouped together.

Unlike bridging, the physical topology can be ignored when planning VLAN, and the underlay MPLS network ensures the redundant in MPLS level, the Layer 2 traffic is rerouted to the underly backup tunnel. In the above figure, the four Switches make up a ring, if the link between SW1 and SW3 is broken, then VLAN100 traffic travels on the backup tunnel through SW2 and SW4.

![Image](../images/292_22112-IPM10141_100Uen.DS/additional_3_CP.png)

Figure 50   Logical Connectivity of Multiple Sites, Multiple Links, Loop Avoidance

## 6.3 Advanced RAN Coordination Design

This section describes Advanced RAN Coordination MOM structure and scenarios for NR Carrier Aggregation through E5 with different configurations. The maximum number of E5 tunnels (links) per source Capacity Module for RAN Compute Group 5, and RAN Compute Group 6: six incoming and six outgoing. The partner nodes are interconnected through switch or direct cable through E5 link.

For SCell candidates on an Advanced RAN Coordination partner, RTT delay is checked at candidate selection time. If the RTT delay from an Advanced RAN Coordination partner is larger than the maximum supported value, SCells on that partner are not considered for carrier aggregation. If the RTT delay goes over the maximum supported value, this does not trigger a reconfiguration or deconfiguration of already configured SCells in an ongoing connection. For details of RTT values, see Advanced RAN Coordination.

Interaction between NR CA, RAN Sharing, Network Slicing, NR Radio Resource Partitioning, Automatic Carrier Aggregation, NR CA SCell optimization, and Hardware-based switching are as following items:

- The SCell selection algorithm is agnostic of NR SA slice configuration (S-NSSAI).
- In RAN sharing cases, the SCell selection algorithm checks and ensures that the PLMN ID and TAC of the selected SCells are allowed.
- With NR Radio Resource Partitioning feature implementation, for each SCell, there can be a CA-specific resource partition (caPartition) defined with static downlink spectrum share (spectrumShareDl). For more information, see NR SA Network Slicing Guideline.
- QoS aware traffic differentiation can be applied for the external traffic in SCells. The QoS related parameters (Priory Domain and Relative Priority) for incoming CA traffic, which are used to compete with local traffic in SCell can be fixed or dynamically configurable per congestion status of SCell. For more information, see NR QoS-Aware Downlink Carrier Aggregation.
- In NR CA, SCell candidate can be detected and configured automatically when Automated Carrier Aggregation feature is enabled.
- If E5 RTT latency is below 35 µs, the NR Carrier Aggregation Scheduling Optimization for External SCells feature can be enabled to enhance the peak throughput in ESCells.
- Hardware-Based Switching provides lower latency and higher switching capacity over E5 link in cascaded configurations. See NR Carrier Aggregation with Hardware-Based Switching

User plane traffic separation per operator or slice is not supported over E5/IDLe links.

For the limitations of Advanced RAN Coordination, see Advanced RAN Coordination.

The following examples cover both Downlink and Uplink Carrier Aggregation. NR Uplink Carrier Aggregation enables aggregation of two uplink component carriers between Low-Band FDD and Mid-Band TDD cells. PCell can be either in FDD or TDD mode. These UL component carriers can belong to different gNodeB DU or different capacity modules. Uplink Carrier Aggregation requires the SCell to be configured for both uplink and downlink. A UE can support more CCs in DL than UL and therefore can be configured with a mix of DL only SCells and UL/DL SCells.

### 6.3.1 Advanced RAN Coordination Configuration for NR Carrier
      Aggregation

The NR Carrier Aggregation relation can be configured in manual way or in automatic way, below figure shows the MOM structure and steps of NR Carrier Aggregation relation creation through external E5 link.

![Image](../images/292_22112-IPM10141_100Uen.DS/additional_3_CP.png)

Figure 51   MOM structure for NR CA

Prerequisites: For inter-Baseband configurations, the Xn connection must be established between the partner gNodeB units. See Xn Configuration for details.

1. Under Equipment branch create the TnPort MO on the IDLe or TN port that is used to connect to the partner gNodeB.
2. Under Transport branch, create the EthernetPort MO that maps to TnPort created in Step 1.
3. Under Transport branch, create a VlanPort MO that maps to EthernetPort created in Step 2, and configure the VlanPort.vlanId attribute with the correct VLAN ID intended for carrier aggregation. If more VLAN IDs are used for different purposes, a VlanPort MO instance must be created for each VLAN ID to be used. Partner nodes must be connected to the same VLAN with the IDLe or TN port.
4. Set the GNBDUFunction.caVlanPortRef attribute to reference the VlanPort MO created in step 3.
5. The system automatically creates the ExtGNBDUPartnerFunction MO when a carrier aggregation neighbor relation is detected. If the operator wants to use a different VLAN port configuration for carrier aggregation than the default in step 4, the operator can create this MO and set the ExtGNBDUPartnerFunction.caVlanPortRef attribute.
6. ExternalGNBCUCPFunction MO is created manually or through ANR on the gNodeB that hosts the SpCell.
7. NRCellRelation MO is created manually or through ANR.
8. NRCellRelation.nRCellRef attribute is referenced to the ExternalNRCellCU MO that represents the cell located on the partner gNodeB manually or through ANR.
9. NRCellRelation.sCellCandidate attribute is configured to ALLOWED or ONLY\_ALLOWED\_FOR\_DL in either manual or automatic way as following:
    1. Manual way: operator configures the SCell candidate manually per static NR CA partner planning.
    2. Automatic way: When Automated Carrier Aggregation feature is enabled and NRCellRelation.acaMode is set to AUTO, sCellCandidates and E5 links are configured automatically. Functionalities configure sCellCandidates for both uplink and downlink Carrier Aggregation. See Automated Carrier Aggregation for details.
10. Once gNodeB hosting Spcell detects any NR CA scell candidate in another gNodeB and Xn connection is already existing in between, the value of the ExternalNRCellCU.serviceState attribute becomes IN\_SERVICE for such candidate cell. The establishment of the E5 link towards the partner gNodeB-DU is triggered. For more details of ARC configuration, see Advanced RAN Coordination.

### 6.3.2 Advanced RAN Coordination Connections

There are two connections for Advanced RAN Coordination: direct cable-based connection or switch-based connection. The VlanPort configuration is different based on different connections.

Direct cable-based connection: VlanPort is configured on External GNodeB-DU Partner level, under ExtGNBDUPartnerFunction.caVlanPortRef.

![Image](../images/292_22112-IPM10141_100Uen.DS/additional_3_CP.png)

Figure 52   MOM Attributes for direct cable-based connection

Above figure shows two Baseband 6648 units and one Baseband 6630:

- VlanPort on the left Baseband 6648: TnPort = TN\_IDLx
- VlanPort on Baseband 6630: TnPort = IDLx
- In the middle Baseband 6648, two partner nodes are configured, maximum partners nodes can be supported as six.

Switch-based connection: VlanPort is configured on gNodeB-DU level, under GNBDUFunction.caVlanPortRef. The below figure shows MOM connection for switch-based connection, all the Baseband units are connected to the same Switch.

![Image](../images/292_22112-IPM10141_100Uen.DS/additional_3_CP.png)

Figure 53   MOM Attributes for switch-based connection

### 6.3.3 Advanced RAN Coordination Examples with Direct Cable
      Connection

In the following cases, Baseband 6630 or Baseband 6648 is used as examples. More Baseband models can be applied from a connectivity perspective. For more information about the Baseband models, see DU and Baseband Configurations and Capacity.

#### 6.3.3.1 NR Carrier Aggregation between Two Baseband Units

NR Carrier Aggregation between Two Baseband 6630 Units

This case shows that the NR Carrier Aggregation is set up between two Baseband 6630 units. IDLe B port is used for the NR Carrier Aggregation traffic, while the TN B is used for the backhaul traffic. The IDLe B and TN B ports are used as examples. RPM 777 417 is used to connect the Baseband units. The below figure shows the connectivity.

![Image](../images/292_22112-IPM10141_100Uen.DS/additional_3_CP.png)

Figure 54   NR Carrier Aggregation between Two Baseband 6630 Units

| Example                            | NR Carrier Aggregation Combinations   | Traffic Type   | Ports   | RPM Cable   |
|------------------------------------|---------------------------------------|----------------|---------|-------------|
| Baseband 6630 and Baseband 6630(1) | NR 2CC/3CC/4CC CA for DL and UL       | ARC            | IDLe    | RPM 777 417 |

(1)Baseband 6630 supports the maximum 3 SCells per Capacity Module per UE, CA between two Baseband 6630 units supports up to 4CC Combinations.

This example covers two Baseband 6630 units, each Baseband 6630 supports up to one NR Capacity Modules. Therefore, there are up to two Capacity Modules that can be configured for NR 3CC Carrier Aggregation. For example, TDD-TDD-FDD, where two TDD component carriers are in the same Capacity Module, and FDD is in the other Capacity Module.

Uplink CA supports two component carriers, for details of Downlink CA, see NR 3CC DL Carrier Aggregation, and NR 4CC DL Carrier Aggregation.

NR Carrier Aggregation between Baseband 6630 and Baseband 6648

Baseband 6630 and Baseband 6648 are connected through a 10G IDLe port and 25G TN/IDL port. The backhaul traffic is sent through the router in separate TN ports. The IDL-SFP cable RPM 777 543 is used between Baseband 6630 and Baseband 6648.

The below figure shows the logical connectivity, in which Baseband 6630 and Baseband 6648 use the same VLAN on IDLe port and TN/IDL port.

![Image](../images/292_22112-IPM10141_100Uen.DS/additional_3_CP.png)

Figure 55   NR Carrier Aggregation between Baseband 6630 and Baseband 6648

| Example                            | NR Carrier Aggregation Combinations     | Traffic Type   | Ports        | RPM Cable   |
|------------------------------------|-----------------------------------------|----------------|--------------|-------------|
| Baseband 6630 and Baseband 6648(1) | NR 2CC/3CC/4CC/5CC/6CC CA for DL and UL | ARC            | IDLe, TN/IDL | RPM 777 543 |

(1)Baseband 6630 supports the maximum 3 SCells per Capacity Module per UE, in the NR CA combinations of 5CC and 6CC, only Baseband 6648 can provide PCell. Take 5CC (1xTDD PCell + 4xFDD SCell) as example, Baseband 6648 provides one TDD PCell and 1 FDD SCell, and Baseband 6630 provides three external FDD SCells. If 4 external SCells are required in the same Capacity Module, Baseband 6630 is not supported.

Uplink CA supports two component carriers, for details of Downlink CA, see NR 3CC DL Carrier Aggregation, NR 4CC DL Carrier Aggregation, NR 5CC DL Carrier Aggregation, and NR 6CC DL Carrier Aggregation.

NR Carrier Aggregation between Two Baseband 6648 Units

The two Baseband 6648 units are connected with a direct cable over the E5 interface. Different TN/IDL ports are used for the NR Carrier Aggregation traffic and the backhaul, which means the S1-U, X2, NG, and Xn, traffic respectively. As shown in the below figure, TN/IDL C port is used for NR Carrier Aggregation traffic, while TN/IDL B port is used for backhaul traffic. One VLAN is configured for Advanced RAN Coordination NR Carrier Aggregation traffic.

There are three configurations for NR Carrier Aggregation with TN/IDL A using four times 10-Gbps or four times 25-Gbps or TN/B, C, D using 1 Gbps, 10-Gbps, or 25-Gbps ports. The below figure shows the TN/IDL C ports connection for simplicity. The configurations are the following:

- TN/IDL A port is used in each Baseband with RPM 777 053.
- TN/IDL A port is used in one Baseband and TN/IDL B, TN/IDL C, or TN/IDL D is used in the other Baseband with RPM 777 054.
- TN/IDL B, C, or D port is used in each Baseband with RPM 777 052.

![Image](../images/292_22112-IPM10141_100Uen.DS/additional_3_CP.png)

Figure 56   NR Carrier Aggregation between Two Baseband 6648 Units

| Example                         | NR Carrier Aggregation Combinations     | Traffic Type   | Ports        | RPM Cable                             |
|---------------------------------|-----------------------------------------|----------------|--------------|---------------------------------------|
| Baseband 6648 and Baseband 6648 | NR 2CC/3CC/4CC/5CC/6CC CA for DL and UL | ARC            | IDLe, TN/IDL | RPM 777 052, RPM 777 053, RPM 777 054 |

Uplink CA supports two component carriers, for details of Downlink CA, see NR 3CC DL Carrier Aggregation, NR 4CC DL Carrier Aggregation, NR 5CC DL Carrier Aggregation, and NR 6CC DL Carrier Aggregation.

NR Carrier Aggregation between Two RAN Processor 6672 Units

Two RAN Processor 6672 units are connected through the TN C port with RPM 777 052. TN C is an SFP56 connector which supports 25G and 50G. The backhaul traffic is sent through the router with separate TN ports.

The below figure shows the logical connectivity, in which RAN Processor 6672 uses the same VLAN on TN port.

![Image](../images/292_22112-IPM10141_100Uen.DS/additional_3_CP.png)

Figure 57   NR Carrier Aggregation between two RAN Processor 6672 units

| Example                                   | NR Carrier Aggregation Combinations     | Traffic Type   | Ports   | RPM Cable   |
|-------------------------------------------|-----------------------------------------|----------------|---------|-------------|
| RAN Processor 6672 and RAN Processor 6672 | NR 2CC/3CC/4CC/5CC/6CC CA for DL and UL | ARC            | TN      | RPM 777 052 |

This example shows NR Carrier Aggregation traffic between two RAN Processor 6672 units, LTE Carrier Aggregation and LTE Uplink CoMP traffic can be sent through separate TN/IDL ports.

Uplink CA supports two component carriers, for details of Downlink CA, see NR 3CC DL Carrier Aggregation, NR 4CC DL Carrier Aggregation, NR 5CC DL Carrier Aggregation, and NR 6CC DL Carrier Aggregation.

NR Carrier Aggregation between RAN Processor 6672 and Baseband 6631

In this case, TN A in RAN Processor 6672 is used to connect to TN/IDL C in Baseband 6631. TN A in RAN Processor 6672 is QSFP56 connector and TN/IDL C in Baseband 6631 is an SFP+ connector, breakout fiber RPM 777 054 is applied. RPM 777 054 has one QSFP28 connector at one end and four SFP28 connectors at the other end. This case shows the connection between one RAN Processor 6672 and one Baseband 6631 for simplicity.

The below figure shows the logical connectivity.

![Image](../images/292_22112-IPM10141_100Uen.DS/additional_3_CP.png)

Figure 58   NR Carrier Aggregation between RAN Processor 6672 and Baseband 6631

| Example                              | NR Carrier Aggregation Combinations     | Traffic Type   | Ports   | RPM Cable   |
|--------------------------------------|-----------------------------------------|----------------|---------|-------------|
| RAN Processor 6672 and Baseband 6631 | NR 2CC/3CC/4CC/5CC/6CC CA for DL and UL | ARC            | TN/IDL  | RPM 777 054 |

Uplink CA supports two component carriers, for details of Downlink CA, see NR 3CC DL Carrier Aggregation, NR 4CC DL Carrier Aggregation, NR 5CC DL Carrier Aggregation, and NR 6CC DL Carrier Aggregation.

#### 6.3.3.2 NR Carrier Aggregation Among Three Baseband Units

NR Carrier Aggregation Among Three Baseband 6630 Units

The Baseband units are connected through a 10G IDLe RPM 777 417 cable, and all the NR Carrier Aggregation traffic is sent through the IDLe link. The NR backhaul traffic, which means S1-U, X2, NG, and Xn traffic, is transmitted through the TN port. In this case, E-RAN switch is also applicable instead of the direct cable connection.

The below figure shows the logical connectivity. All the Baseband units must be in the same VLAN since the VLAN is used for NR Carrier Aggregation traffic.

![Image](../images/292_22112-IPM10141_100Uen.DS/additional_3_CP.png)

Figure 59   NR Carrier Aggregation among Three Baseband 6630 Units

| Example                                              | NR Carrier Aggregation Combinations   | Traffic Type   | Ports   | RPM Cable   |
|------------------------------------------------------|---------------------------------------|----------------|---------|-------------|
| Baseband 6630 and Baseband 6630 and Baseband 6630(1) | NR 2CC/3CC/4CC CA for DL and UL       | ARC            | IDLe    | RPM 777 417 |

(1)Baseband 6630 supports the maximum 3 SCells per Capacity Module per UE, CA between each two Baseband 6630 units supports up to 4CC Combinations.

Uplink CA supports two component carriers, for details of Downlink CA, see NR 3CC DL Carrier Aggregation, and NR 4CC DL Carrier Aggregation.

LTE Carrier Aggregation and NR Carrier Aggregation among Baseband 6630, Baseband 6631, and Baseband 6648

In this case, the three Baseband units are cascaded connected, and all three are in LTE and NR mixed mode. RPM 777 543 is used between Baseband 6631 or Baseband 6648, and Baseband 6630. RPM 777 052 is used between Baseband 6631 and Baseband 6648. The two Carrier Aggregation modes have the following specifications:

LTE Carrier Aggregation: The three Baseband units are connected in ring topology, where the maximum three LTE Component Carriers can be configured. The PCell locates in Baseband 6631, while Escell1 and Escell2 are located in Baseband 6648 and Baseband 6630.

NR Carrier Aggregation: The three Baseband units are in star topology, where every two Baseband unit sets up the two Component Carrier NR CA configurations.

![Image](../images/292_22112-IPM10141_100Uen.DS/additional_3_CP.png)

Figure 60   LTE Carrier Aggregation and NR Carrier Aggregation among Baseband 6630, Baseband 6631, and Baseband 6648

| Example                                              | NR Carrier Aggregation Combinations     | Traffic Type   | Ports        | RPM Cable                |
|------------------------------------------------------|-----------------------------------------|----------------|--------------|--------------------------|
| Baseband 6631 and Baseband 6648 and Baseband 6630(1) | NR 2CC/3CC/4CC/5CC/6CC CA for DL and UL | ARC, E-RAN     | IDLe, TN/IDL | RPM 777 052, RPM 777 543 |

(1)Baseband 6630 supports the maximum 3 SCells per Capacity Module per UE, in the combinations of 5CC and 6CC CA, only baseband 6648, or Baseband 6631 can provide PCell. Take 5CC (1xTDD PCell + 4xFDD SCell) as example, baseband 6648, or Baseband 6631 provides one TDD PCell and one FDD SCell, and Baseband 6630 provides three external FDD SCells. If 4 SCells are required on the same Capacity Module, Baseband 6630 is not supported.

Uplink CA supports two component carriers, for details of Downlink CA, see NR 3CC DL Carrier Aggregation, NR 4CC DL Carrier Aggregation, NR 5CC DL Carrier Aggregation, and NR 6CC DL Carrier Aggregation.

LTE Carrier Aggregation and NR Carrier Aggregation among Two Baseband 6630 Units and One Baseband 6648

This case covers LTE Carrier Aggregation and NR Carrier Aggregation through the E5 link, where all the three Baseband units are in LTE and NR mixed mode.

The specifications between the two Baseband 6630 units are the following:

Physical cable: RPM 777 417 is plugged in port IDLe A of each Baseband.

Logical links: 10-Gbps IDLe A1 of each Baseband is used for LTE Carrier Aggregation, while 10-Gbps IDLe A2 is used for NR Carrier Aggregation.

The specifications among two Baseband 6630 units and one Baseband 6648 are the following:

Physical cable: RPM 777 098 is used between the Baseband 6648 unit and the two Baseband 6630 units. The QSFP+ connector with four times 10-Gbps plugs into the TN/IDL A port of Baseband 6648. The two Xcede connectors plug into the IDLe B port of each Baseband 6630 unit.

Logical links: TN/IDL A1 and TN/IDL A2 ports connect to the IDLe B1 and IDLe B2 of the upper Baseband 6630 unit for both NR and LTE Carrier Aggregation. TN/IDL A3 and TN/IDL A4 ports connect to the IDLe B1 and IDLe B2 of the lower Baseband 6630 unit for both NR and LTE Carrier Aggregation.

![Image](../images/292_22112-IPM10141_100Uen.DS/additional_3_CP.png)

Figure 61   Three Baseband Units Direct Inter-Connected

| Example                                              | NR Carrier Aggregation Combinations     | Traffic Type   | Ports        | RPM Cable                |
|------------------------------------------------------|-----------------------------------------|----------------|--------------|--------------------------|
| Baseband 6630 and Baseband 6648 and Baseband 6630(1) | NR 2CC/3CC/4CC/5CC/6CC CA for DL and UL | ARC, E-RAN     | IDLe, TN/IDL | RPM 777 417, RPM 777 098 |

(1)Baseband 6630 supports the maximum 3 SCells per Capacity Module per UE, in the combinations of 5CC and 6CC CA, only Baseband 6648 can provide PCell. Take 5CC (1xTDD PCell + 4xFDD SCell) as example, Baseband 6648 provides one TDD PCell and 1 FDD SCell, and Baseband 6630 provides three external FDD SCells. If 4 SCells are required on the same Capacity Module, Baseband 6630 is not supported.

Uplink CA supports two component carriers, for details of Downlink CA, see NR 3CC DL Carrier Aggregation, NR 4CC DL Carrier Aggregation, NR 5CC DL Carrier Aggregation, and NR 6CC DL Carrier Aggregation.

NR Carrier Aggregation among Three Baseband 6648 Units

This case includes two LTE and NR mixed mode Baseband units and one single mode Baseband unit in NR mode. All the Baseband units can be baseband 6648, or Radio Processor 6347. The upper Baseband and the middle Baseband are in cascading connection.

Between the mixed mode Baseband units, the TN/IDL B port of the upper mixed mode Baseband is used for backhaul traffic. The TN/IDL C port sends the following traffic:

- LTE Carrier Aggregation traffic
- NR Carrier Aggregation traffic
- Backhaul traffic of the middle Baseband
- PTP and Synchronous Ethernet signals

Note: In case there is radio sharing between the FDD mode Baseband units, it is recommended to include an NGS as the primary source. Otherwise PTP BC or GNSS are used. For more information on NGS, see Network Synchronization Solution Guideline.

![Image](../images/292_22112-IPM10141_100Uen.DS/additional_3_CP.png)

Figure 62   LTE Carrier Aggregation and NR Carrier Aggregation on Cascaded Baseband Units

| Example                                                                                                             | NR Carrier Aggregation Combinations     | Traffic Type   | Ports   | RPM Cable   |
|---------------------------------------------------------------------------------------------------------------------|-----------------------------------------|----------------|---------|-------------|
| Baseband 6648(Radio Processor 6347) and Baseband 6648(Radio Processor 6347) and Baseband 6648(Radio Processor 6347) | NR 2CC/3CC/4CC/5CC/6CC CA for DL and UL | ARC            | TN/IDL  | RPM 777 052 |

Uplink CA supports two component carriers, for details of Downlink CA, see NR 3CC DL Carrier Aggregation, NR 4CC DL Carrier Aggregation, NR 5CC DL Carrier Aggregation, and NR 6CC DL Carrier Aggregation.

#### 6.3.3.3 Intra-Baseband and Inter-Baseband NR Carrier
        Aggregation

This case covers both intra-baseband and inter-baseband NR Carrier Aggregation, where both Baseband units are in NR FDD and NR TDD mode. Each Baseband has two capacity modules, one is in TDD mode and the other is in FDD mode. The intra-baseband Carrier Aggregation indicates intra-baseband inter-Capacity Module Carrier Aggregation.

Note: One Advanced RAN Coordination (ARC) partner relation is also consumed when intra-gNodeB inter-Capacity Module Carrier Aggregation is enabled. For more information about the feature interaction, see the following feature descriptions:

- Advanced RAN Coordination
- NR DL Carrier Aggregation
- NR DL Carrier Aggregation for Coverage Extension
- TDD PCell Support for DL Carrier Aggregation Low/Mid-Band

Intra-Baseband Inter-Capacity Module Carrier Aggregation

In the upper Baseband 6648, one capacity module is in FDD mode, and the other is in TDD mode. The Intra-Baseband Inter-Capacity Module Carrier Aggregation is FDD-TDD, where the FDD cell is the PCell. For the lower Baseband, which can be baseband 6648, or RAN Processor 6651, the intra-Baseband Carrier Aggregation configuration is TDD-FDD, where the PCell is in TDD mode. The intra-Baseband Carrier Aggregation configurations are shown in dotted lines in the below figure.

Inter-Baseband Carrier Aggregation

The two inter-Baseband CA configurations are shown in solid line in the below figure, where the PCell is in FDD mode in both configurations:

- Inter-Baseband FDD-TDD Carrier Aggregation
- Inter-Baseband FDD-FDD Carrier Aggregation

Inter-Baseband Carrier Aggregation traffic of both configurations is sent through the same TN/IDL C port, while the backhaul traffic goes through the TN/IDL B port.

![Image](../images/292_22112-IPM10141_100Uen.DS/additional_3_CP.png)

Figure 63   Intra-Baseband and Inter-Baseband NR Carrier Aggregation

| Example                         | NR Carrier Aggregation Combinations     | Traffic Type   | Ports   | RPM Cable   |
|---------------------------------|-----------------------------------------|----------------|---------|-------------|
| Baseband 6648 and Baseband 6648 | NR 2CC/3CC/4CC/5CC/6CC CA for DL and UL | ARC            | TN/IDL  | RPM 777 052 |

Uplink CA supports two component carriers, for details of Downlink CA, see NR 3CC DL Carrier Aggregation, NR 4CC DL Carrier Aggregation, NR 5CC DL Carrier Aggregation, and NR 6CC DL Carrier Aggregation.

#### 6.3.3.4 NR Carrier Aggregation with Hardware-Based
        Switching

The Hardware-Based Switching functionality is applicable for TN/IDL ports for E5 carrier aggregation traffic and backhaul traffic. The below figure shows that three cascading Baseband units are interconnected. For two component carriers CA traffic, it can be setup between any two Baseband units.

In this case, the Baseband 2 has the functionality of Hardware-Based Switching. TN VLAN Ports, and associated Bridge.lowLatencySwitching is set to true on the intermediate node (Baseband 2) for the switching of the CA traffic between Baseband 1 and Baseband 3, which is shown in orange solid line. The green solid lines show the CA connection between Baseband 2 and Baseband 1/Baseband 3.

When lowLatencySwitching is set to true, it increases the Layer 2 switching capability for Baseband, enabling cascaded configuration, also has lower latency switching compared to Software-Based Switching for CA traffic.

Note: maximum three Baseband units can be cascaded. RAN Compute Group 4 and higher are supported.

![Image](../images/292_22112-IPM10141_100Uen.DS/additional_3_CP.png)

Figure 64   NR Carrier Aggregation with Hardware-Based Switching connection

NR CA and LTE CA can both be enabled in the cascaded configuration:

- For NR CA, caVlanPortRef is configured, for the MOM parameters, refer to the MOM structure of Advanced RAN Coordination.
- For LTE CA, eranVlanPortRef is configured, MOM parameters are shown as following.

![Image](../images/292_22112-IPM10141_100Uen.DS/additional_3_CP.png)

Figure 65   MOM for LTE Carrier Aggregation with Hardware-Based Switching

### 6.3.4 Advanced RAN Coordination Examples with Router
      Connection

#### 6.3.4.1 Switch-based ARC with NR Carrier Aggregation on IDL
        Ports

In this case, two single-mode Baseband 6630 nodes and one mixed-mode Baseband 6630 node are connected to the following:

- Cell Site Router (CSR)
- LTE backhaul
- NR backhaul

LTE Carrier Aggregation and Uplink CoMP, and NR Carrier Aggregation traffic go through CSR. The two single-mode Baseband nodes for LTE and NR respectively the following:

- In the mixed-mode Baseband, LTE Uplink Coordinated Multi-Point (CoMP), LTE Carrier Aggregation, and NR Carrier Aggregation traffic are sent through different IDLe links. LTE Carrier Aggregation goes through IDL\_A1, LTE Uplink CoMP goes through IDL\_A2, and NR Carrier Aggregation goes through IDL\_B1. LTE CA and LTE Uplink CoMP traffic flows are sent by a Y-cable.
- In the LTE single-mode Baseband, E-RAN LTE Carrier Aggregation and E-RAN LTE Uplink CoMP traffic are transmitted through different links of IDLe A port with Y-cable connection. The LTE backhaul traffic is sent through the TN port.
- In the NR single-mode Baseband, Advanced RAN Coordination NR Carrier Aggregation is sent through the IDLe A port, and NR backhaul traffic is sent through the TN port.

![Image](../images/292_22112-IPM10141_100Uen.DS/additional_3_CP.png)

Figure 66   LTE Carrier Aggregation and NR Carrier Aggregation with E-RAN Switch

In this case, the Baseband 6630 can be replaced by a Baseband 5216. Above figure shows the logical connectivity. Three VLANs on the IDLe ports of Baseband units are configured. A separate VLAN is available for LTE Carrier Aggregation, LTE Uplink CoMP, and NR Carrier Aggregation traffic respectively. One VLAN is configured on TN port for the LTE RAN traffic and the NR RAN traffic.

Configuring the IDLe cables for E-RAN LTE Carrier Aggregation and E-RAN LTE Uplink CoMP is possible with the following options:

Option 1: The cables are connected through two normal IDLe cables, and LTE Carrier Aggregation and LTE Uplink CoMP are configured on two separate ports.

Option 2: The cables are connected through one IDLe Y-cable, where LTE Carrier Aggregation and LTE Uplink CoMP can share the IDLe port, but have separate IDLe links.

RPM 777 544 is used as Y-cable, while RPM 777 579 is used to connect the TN port of the Baseband and SFP+ 10G interface of the Router.

In switch-based ARC with NR Carrier Aggregation on IDL ports the cables are used as follows:

- RPM 777 544 is used as Y-cable.
- RPM 777 579 is used to connect the TN port of the Baseband and SFP+ 10G interface of the Router.
- RPM 777 543 is used to connect the IDLe port of the Baseband and SFP+ 10G interface of the Router.

| Example                                              | NR Carrier Aggregation Combinations   | Traffic Type            | Ports    | RPM Cable                             |
|------------------------------------------------------|---------------------------------------|-------------------------|----------|---------------------------------------|
| Baseband 6630 and Baseband 6630 and Baseband 6630(1) | NR 2CC/3CC/4CC CA for DL and UL       | ARC, E-RAN, LTE UL CoMP | IDLe, TN | RPM 777 544, RPM 777 679, RPM 777 543 |

(1)Baseband 6630 supports the maximum 3 SCells per Capacity Module per UE, CA between two Baseband 6630 units supports up to 4CC Combinations.

Uplink CA supports two component carriers, for details of Downlink CA, see NR 3CC DL Carrier Aggregation, and NR 4CC DL Carrier Aggregation.

Related Concepts

E-RAN and ARC Cables

E-RAN LTE Carrier Aggregation and LTE Uplink CoMP Connectivity

#### 6.3.4.2 Switch-based ARC with NR Carrier Aggregation on TN
        Ports

In this case, the Baseband 6630, Baseband 6648, and RAN Processor 6672 are connected through the Cell Site Router (CSR).

- For Baseband 6630, NR RAN traffic and OAM are transferred through one TN port, ARC CA traffic is transferred through another separate TN port.
- For Baseband 6648, all the types of traffic are on the same port.
- For RAN Processor 6672, the NR RAN traffic and ARC CA traffic can be transferred through two separate 25G ports, or shared with one 100G port, depending on requirements. The below figure shows two ports for RAN Processor 6672.

Three VLANs are configured in each case for the following traffics:

- NR RAN traffic
- OAM
- NR Carrier Aggregation traffic

![Image](../images/292_22112-IPM10141_100Uen.DS/additional_3_CP.png)

Figure 67   NR Carrier Aggregation with E-RAN Switch

| Example                                                 | NR Carrier Aggregation Combinations     | Traffic Type   | Ports      | RPM Cable                |
|---------------------------------------------------------|-----------------------------------------|----------------|------------|--------------------------|
| Baseband 6630(1), Baseband 6648, and RAN Processor 6672 | NR 2CC/3CC/4CC/5CC/6CC CA for DL and UL | ARC            | TN, TN/IDL | RPM 777 579, RPM 777 052 |

(1)Baseband 6630 supports the maximum 3 SCells per Capacity Module per UE, CA between two Baseband 6630 units supports up to 4CC Combinations.

Uplink CA supports two component carriers, for details of Downlink CA, see NR 3CC DL Carrier Aggregation, and NR 4CC DL Carrier Aggregation.

#### 6.3.4.3 Switch-based ARC with NR Carrier Aggregation and LTE
        Carrier Aggregation Traffic

In this case, the following are connected to the Router 6675:

- one LTE and NR mixed mode Baseband 6648
- one LTE single mode Baseband 6630
- one NR single mode Baseband 5216

The following configurations can be applied for this case:

- Configuration 1
    - In Baseband 6648, all the traffic is transferred through the TN/IDL B port including the following types:
        - OAM traffic
        - NR backhaul traffic
        - LTE backhaul traffic
        - E-RAN LTE Carrier Aggregation
        - Advanced RAN Coordination NR Carrier Aggregation
    - In Baseband 6630, OAM traffic, and LTE backhaul traffic are sent through one TN port, while the E-RAN LTE Carrier Aggregation traffic is sent through a separate TN port.
    - In Baseband 5216, OAM traffic, and NR RAN traffic are sent through one TN port, while Advanced RAN Coordination NR Carrier Aggregation traffic is sent through IDL link A1 of IDL A port.

In configuration 1, the following VLANs are configured:

- VLAN 1 for OAM traffic
- VLAN 2 for LTE backhaul traffic
- VLAN 3 for NR backhaul traffic
- VLAN 4 for E-RAN LTE Carrier Aggregation
- VLAN 5 for Advanced RAN Coordination NR Carrier Aggregation

The below figure shows the logical connectivity of Configuration 1.

![Image](../images/292_22112-IPM10141_100Uen.DS/additional_3_CP.png)

Figure 68   Logical Connectivity of Configuration 1

- Configuration 2
    - In Baseband 6648, all the traffic is transferred through the TN/IDL B port including the following types:
        - OAM traffic
        - NR backhaul traffic
        - LTE backhaul traffic
        - E-RAN LTE Carrier Aggregation
        - Advanced RAN Coordination NR Carrier Aggregation
    - In Baseband 6630, OAM traffic, LTE backhaul traffic, and E-RAN LTE Carrier Aggregation traffic are sent through the same TN port.
    - In Baseband 5216, OAM traffic, NR backhaul traffic are sent through one TN port, Advanced RAN Coordination NR Carrier Aggregation traffic is sent through the IDL link A1 of IDL A port.

In configuration 2, the following VLANs are configured:

- VLAN 1 for OAM traffic
- VLAN 2 for LTE backhaul traffic
- VLAN 3 for NR backhaul traffic
- VLAN 4 for E-RAN LTE Carrier Aggregation
- VLAN 5 for Advanced RAN Coordination NR Carrier Aggregation

The below figure shows the logical connectivity of Configuration 2.

![Image](../images/292_22112-IPM10141_100Uen.DS/additional_3_CP.png)

Figure 69   Logical Connectivity of Configuration 2

- Configuration 3
    - In Baseband 6648, all the traffic is transferred through the TN/IDL B port including the following types:
        - OAM traffic
        - NR backhaul traffic
        - LTE backhaul traffic
        - E-RAN LTE Carrier Aggregation
        - Advanced RAN Coordination NR Carrier Aggregation
    - In Baseband 6630, OAM traffic, LTE backhaul traffic, and E-RAN LTE Carrier Aggregation traffic are sent through the same TN port.
    - In Baseband 5216, OAM traffic, NR backhaul traffic are sent by one TN port, Advanced RAN Coordination NR Carrier Aggregation traffic is sent through IDL link A1 of IDL A port.

In configuration 3, the following VLANs are configured:

- VLAN 1 for OAM traffic
- VLAN 2 for LTE backhaul traffic and NR backhaul traffic
- VLAN 3 for E-RAN LTE Carrier Aggregation
- VLAN 4 for Advanced RAN Coordination NR Carrier Aggregation

Note: The LTE IP address and the NR IP address are both IPv4 based, under the same IP interface, and belongs to the same subnet.

The below figure shows the logical connectivity of Configuration 3.

![Image](../images/292_22112-IPM10141_100Uen.DS/additional_3_CP.png)

Figure 70   Logical Connectivity of Configuration 3

In all the three configurations, RPM products are used as follows:

- RPM 777 052 is used to connect the TN/IDL port of the Baseband 6648 unit and the SFP28 25G interface of the Router.
- RPM 777 579 is used to connect the TN port of the Baseband 6630/5216 unit and the SFP+ 10G interface of the Router.
- RPM 777 543 is used to connect the IDLe port of the Baseband 5216 unit and the SFP+ 10G interface of the Router.

| Example                                              | NR Carrier Aggregation Combinations     | Traffic Type   | Ports            | RPM Cable                             |
|------------------------------------------------------|-----------------------------------------|----------------|------------------|---------------------------------------|
| Baseband 6630 and Baseband 6648 and Baseband 5216(1) | NR 2CC/3CC/4CC/5CC/6CC CA for DL and UL | ARC, E-RAN     | TN, IDLe, TN/IDL | RPM 777 052, RPM 777 579, RPM 777 543 |

(1)Baseband 6630 or Baseband 5216 supports the maximum 3 SCells per Capacity Module per UE, in the combinations of 5CC and 6CC CA, only Baseband 6648 can provide PCell. Take 5CC (1xTDD PCell + 4xFDD SCell) as example, Baseband 6648 provides one TDD PCell and 1 FDD SCell, and Baseband 6630 or Baseband 5216 provides three external FDD SCells. If 4 SCells are required on the same Capacity Module, Baseband 6630 or Baseband 5216 is not supported.

Uplink CA supports two component carriers, for details of Downlink CA, see NR 3CC DL Carrier Aggregation, NR 4CC DL Carrier Aggregation, NR 5CC DL Carrier Aggregation, and NR 6CC DL Carrier Aggregation.

#### 6.3.4.4 Mixed Centralized-RAN and Distributed-RAN for NR Carrier
        Aggregation

This case is mixed for Centralized RAN (C-RAN) and Distributed RAN (D-RAN), which is deployed on the hub site and the remote site. The hub site means the area to deploy Baseband units for C-RAN. The remote site means the area to deploy Radio units for C-RAN. D-RAN can be deployed on either the hub site or the remote site.

![Image](../images/292_22112-IPM10141_100Uen.DS/additional_3_CP.png)

Figure 71   CA Deployment in C-RAN and D-RAN Configuration

Above figure shows the mixed deployment of C-RAN and D-RAN. Baseband 6630 and Radio 4449 are in D-RAN configuration. They are located in the remote site with Router 6673/6675-1 and AIR 6449. Baseband 6648, Router 6673/6675-2, Router 6673/6675-3, and Router 6673/6675-4 are located in the hub site. Baseband 6648 and AIR 6449 are in C-RAN configuration. The eCPRI traffic is sent by the Router. Between Router 6673/6675-1 and Router 6673/6675-2, a 100G capacity port is used, where the maximum distance is 10 km, and the average one-way latency is about 0.055 ms.

Synchronization

In the hub site, Baseband 6648 connects to two Routers 6673/6675 for redundance. The Clock is synchronized to the Primary Reference Time Clock (PRTC). PTP time and phrase synchronization sources are provided to Baseband 6648 by the Router 6673/6675. One works as a primary reference and the other works as a second reference. Sync1 indicates the PTP synchronization flows from Router 6673/675 to Baseband 6648.

Baseband 6630 has one GNSS connected as a primary time synchronization reference because the Baseband 6630 unit cannot use the PTP synchronization which is provided by the Baseband 6648. For more information, see the Network Synchronization Solution Guideline.

The Advanced RAN Coordination NR Carrier traffic is marked as the solid green line. The blue and red dotted lines represent the backhaul traffic flows of Baseband 6630. The blue dotted line is the default flow, red dotted line is the backup flow in case the link between Router 6673/6675-1 and Core Router is down.

- The blue dotted line, the backhaul traffic is sent to the core Router by the Router 6673/6675-1.
- Red dotted line, the backhaul traffic goes through Router 6673/6675-1, Router 6673/6675-2, then send to the core router.

Note: Router 6673 or Router 6675 can be replaced by Router 6676.

In this case, different types of traffic are combined in one link, and QoS priorities are set for each traffic if network congestion, the priorities are set on the router. The higher the number, the higher the priority.

- Priority 7: PTP traffic (queue 0)
- Priority 6: Routing protocol traffic (queue 1)
- Priority 5: eCPRI traffic (queue 2)
- Priority 4: Advanced RAN Coordination traffic (queue 3)
- Priority 3: Backhaul traffic (queue 4)

# 7 Solution Guideline Change History

This section summarizes the major changes introduced in each document release.

| Release   | Major changes                                                                                                   |
|-----------|-----------------------------------------------------------------------------------------------------------------|
| 25.Q2     | Add Automated Carrier Aggregation, Uplink Tx Switching                                                          |
| 25.Q1     | Add RAN Processor in switch-based connection, UL CA improvement, and supplemental Downlink support for NR DL CA |
| 24.Q4     | Add NR DL 6CC CA, and limitations with Baseband 6630 and Baseband 5216                                          |
| 24.Q3     | Add Hardware-Based Switching example, and CA example with RAN Processor 6672                                    |
| 24.Q2     | Add NR UL 2CC CA, FDD+TDD, and TDD+FDD                                                                          |
| 24.Q1     | Add NR DL 5CC CA for all NR CA examples                                                                         |
| 23.Q4     | Add two Uplink Component Carriers CA examples, and NR QoS-Aware feature                                         |
| 23.Q3     | Add four Downlink Component Carriers CA examples                                                                |
| 23.Q1     | Add three Downlink Component Carriers CA examples                                                               |