---
complexity_score: 18.5
converted_at: '2025-08-13T06:57:49.906977Z'
file_type: html
format: html
image_processing_enhanced: true
images_extracted: 5
images_saved: 3
original_path: 1_22104-LZA7016017_1Uen.CU.html
pictures_extracted: 5
processing_method: docling_multimodal
quality_score: 9.0
source_file: 1_22104-LZA7016017_1Uen.CU.html
source_zip: en_lzn7931071_r38f.zip
tables_extracted: 20
zip_image_types:
- .svg
- .png
- .gif
- .jpg
- .bmp
zip_images_total: 2796
---

# 

X2 Configuration

EN-DC

Contents

![Image](../images/1_22104-LZA7016017_1Uen.CU/additional_3_CP.png)

![Image](../images/1_22104-LZA7016017_1Uen.CU/additional_3_CP.png)

- X2 Configuration Overview
- Dependencies of X2 Configuration
- Feature Operation
    - EN-DC X2 Setup
    - Automatic X2 Re-establishment
    - Automatic Update of X2 Connection
    - Removal of X2 Connection by Locking
    - X2 Setup Configuration at Radio Node Integration
    - Removal of TermPointToENodeB MO
    - Blocking X2 Connections
- Parameters of X2 Configuration
- Performance of X2 Configuration
- Engineering Guidelines for X2 Configuration
    - SCTP Endpoint Setup for X2 Configuration
    - Prevention of Configuration Reset of the ExternalGNodeBFunction.dirDataPathAvail Attribute
- Appendix: Feature Change History
    - Appendix: 21.Q2: EN-DC Traffic Separation for MOCN

# 1 X2 Configuration Overview

The X2 Configuration feature supports operators in the management of neighbor relations

in the following aspects:

- X2 links between an eNodeB and a gNodeB.
- Data about the eNodeB, including the eNodeB physical and global cell identities.
- Data about the gNodeB, including the following: The global gNodeB identity. gNodeB physical and global cell identities. Frequency and transmission band information, including the synchronization signal.

Figure 1   X2 Link between an eNodeB and a gNodeB

The X2 Configuration feature manages automatic reestablishment in the event of an X2 link

failure.

The X2 Configuration feature cannot be deactivated if X2 links are used in the network.

However, if no X2 links are created manually, or automatically by the Automated Neighbor Relations feature, the feature can be

deactivated.

Related Information

3GPP TS 36.423, Evolved Universal Terrestrial Radio Access Network (E-UTRAN);

X2 Application Protocol (X2AP)

3GPP TS 37.340, NR; Multi-connectivity; Overall description;

Stage-2

Automated Neighbor Relations

NR Automated Neighbor Relations

Manage Bearers and Services LTE

Manage IPsec

Manage Radio Network LTE

Manage Radio Network NR

Multiple IP Addresses for S1 and X2

1X2 Configuration Overview

# 2 Dependencies of X2 Configuration

The X2 configuration feature has dependencies to other features.

Features

Table 1   Feature Dependencies

![Image](../images/1_22104-LZA7016017_1Uen.CU/additional_3_CP.png)

![Image](../images/1_22104-LZA7016017_1Uen.CU/additional_3_CP.png)

| Feature Name                                                            | Feature Identity   | Access Type   | Relationship   | Relationship Scope   | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
|-------------------------------------------------------------------------|--------------------|---------------|----------------|----------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| LTE-NR Dual Connectivity                                                | FAJ 121 4908       | NR            | Related        |                      | The X2 Configuration feature must be activated for the LTE-NR                                     Dual Connectivity feature to be functional.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| Basic Intelligent Connectivity                                          | FAJ 121 4843       | LTE           | Related        |                      | The X2 Configuration feature must be activated for the Basic                                     Intelligent Connectivity feature to achieve EN-DC                                     functionality.   EN-DC setup for the UE is blocked if the candidate gNodeB is included in the gNodeB                 blocklist.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| Automated Neighbor Relations                                            | FAJ 121 0497       | LTE           | Related        |                      | The Automated Neighbor Relations feature can trigger the setup                                     and removal of X2 connections. Together with the X2                                     Configuration feature, this feature allows NR neighbor cell                                     information to be sent to neighbor gNodeBs in the EN-DC                                         CONFIGURATION UPDATE message.  The NR neighbor cell information is corrected if the Automated                                     Neighbor Relation feature creates an inconsistent cell                                     configuration to a detected NR cell with MORAN configuration.                                     This way, up-to-date NR neighbor configuration can be maintained                                     over the EN-DC X2-C interface to a gNodeB with MORAN                                     configuration.  The creation of the TermPointToGNB MO                         instance by the Automated Neighbor Relations feature is blocked if the                         gNodeB is included in the gNodeB blocklist. |
| Incoming NR IRAT                                         Handover       | FAJ 121 5118       | LTE           | Related        |                      | During incoming NR IRAT Handover, direct packet forwarding             can be blocked if the source gNodeB is included in the gNodeB blocklist and the                 ExternalGNodeBFunction.dirDataPathAvail attribute is set to                 FALSE.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| NR Automated Neighbor Relations                                         | FAJ 121 5218       | NR            | Related        |                      | The NR Automated Neighbor Relations feature can trigger the setup                                     and removal of X2 connections. Together with the X2                                     Configuration feature, this feature allows NR neighbor cell                                     information to be sent to neighbor gNodeBs in the EN-DC                                         CONFIGURATION UPDATE message.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| PCI Conflict Reporting                                                  | FAJ 121 1898       | LTE           | Related        |                      | NR PCI conflict or conflict resolving can be reported if the                                     Served NR Cell Information IE in EN-DC X2 messages reports a                                     change in the PCI or the frequency of an existing cell relation                                     to an NR neighbor cell.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| Multiple IP Addresses for S1 and                                     X2 | FAJ 121 4697       | LTE           | Related        |                      | Multiple IP Addresses for S1 and X2 makes it possible to separate                                     X2 traffic for each operator sharing the node.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| Shared LTE RAN                                                          | FAJ 121 0860       | LTE           | Related        |                      | If the Cell-Defined Primary PLMN ID enhancement is configured, up                                     to three TermPointToENB MO instances can be                                     created under the same ExternalENodeBFunction MO instance representing a shared external eNodeB.  The                                         TermPointToGNB.additionalCnRef attribute                                     is used to differentiate the local SCTP endpoint based on the                                     primary PLMN ID.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |

Hardware

No specific hardware requirements.

Limitations

No known limitations.

Network Requirements

No specific network requirements.

2Dependencies of X2 Configuration

# 3 Feature Operation

The X2 interface connects an eNodeB and a gNodeB. When the gNodeB receives an X2

setup request, it responds with gNodeB cell configuration

information, and configures itself based on eNodeB cell

configuration information sent by the eNodeB. The eNodeB configures itself based on gNodeB cell configuration information sent by the gNodeB.

When

ESS cell or non-ESS PSCell capable cell configuration information changes on the gNodeB, the X2AP EN-DC CONFIGURATION UPDATE

message is sent to eNodeBs to which the gNodeB has established X2 links. When the X2AP EN-DC

CONFIGURATION UPDATE message is received, the eNodeBs reconfigure resources as specified in the Information Elements sent in the

message.

The configuration managed by the X2 Configuration feature is represented in the MO structure of

the following MO classes:

- ENodeBFunction in the eNodeB
- GNBCUCPFunction in the gNodeB

Table 2   MO Class Functions for X2 Setup Configuration

| MO Class           | Description                                                                                                                        |
|--------------------|------------------------------------------------------------------------------------------------------------------------------------|
| TermPointToGNB     | The MO class that models a gNodeB termination point of an X2 link between                                 an eNodeB and a gNodeB.  |
| ExternalGUtranCell | The MO class that models an external NR cell in the neighboring gNodeB.                                                            |
| TermPointToENodeB  | The MO class that models an eNodeB termination point of an X2 link                                 between a gNodeB and an eNodeB. |
| GUtranCellRelation | The MO class represents the relationship between an LTE cell and an                                 NR cell.                       |

## 3.1 EN-DC X2 Setup

The feature can establish a connection between an eNodeB and a gNodeB through the X2

interface.

The X2 Configuration feature includes the procedure of setting up an X2 link between an

eNodeB and a gNodeB. The procedure

involves the external configuration of both the eNodeB and the

gNodeB. The EN-DC X2 setup can be initiated in the following

ways:

- Changing the value of the TermPointToGNB.administrativeState attribute, which represents the termination of the X2 interface on the eNodeB, to LOCKED or UNLOCKED, either automatically by the Automated Neighbor Relations feature, or manually Note: The use of this method is recommended.
- Requesting a configuration update from the Operations Support System (OSS)
- Automatically setting up the X2 connection for an unknown gNodeB using the X2 TNL address discovery procedure by the NR Automated Neighbor Relations feature Note: For more information on the procedure, see NR Automated Neighbor Relations.

The EN-DC X2 setup procedure must be preceded by the creation of the

TermPointToGNB MO class on the eNodeB.

When activating a planned area, the creation of this MO can be initiated in one of the

following ways:

- Automatically by the Automated Neighbor Relations feature on the eNodeB
- Manually by an operator
- Requested from the OSS

Figure 2   EN-DC X2 Setup Procedure

1. The EN-DC X2 setup is initiated by unlocking the TermPointToGNB MO on the eNodeB. The MO is unlocked in one of the following ways:
    - Automatically by the Automated Neighbor Relations feature
    - Manually by an operator
    - Requested from the OSS
2. The eNodeB uses a Stream Control Transmission Protocol (SCTP) to set up a connection to the gNodeB. For the SCTP association to be established, create the following MO instances: The LocalSctpEndpoint MO under the EndpointResource MO that is referred by the GNBCUCPFuntion.endpointResourceRef attribute, with the LocalSctpEndpoint.interfaceUsed attribute set to X2 The LocalSctpEndpoint.sctpEndpointRef attribute under EndpointResource MO that is referred by the GNBCUCPFunction MO . The local SCTP endpoint IP address of the gNodeB is supplied in one of the following ways: The TermPointToGNB.ipAddress attribute or the TermPointToGNB.ipv6Address attribute is defined when the TermPointToGNB MO instance is created. The IP address is received from the target gNodeB through an MME if the ENodeBFunction.endcX2IpAddrViaS1Active attribute is set to true. The IP address of the source RBS can be different depending on the configuration. For details on multiple configurations, check Multiple IP Addresses for S1 and X2.
3. The eNodeB sends an X2AP EN-DC X2 SETUP REQUEST message that contains a Served Cell Information IE to the gNodeB.
4. The gNodeB configures resources according to the information received in the X2AP EN-DC X2 SETUP REQUEST message in the following way: The gNodeB creates the TermPointToENodeB MO and sets it to ENABLED. If the name for the newly created ExternalENodeBFunction or ExternalEutranCell MO instance is already reserved, the MO cannot be created. The naming must follow the following format: ExternalENodeBFunction=auto&lt;mcc&gt;\_&lt;mnc&gt;\_&lt;mncLength&gt;\_&lt;eNodeBId&gt; TermPointToENodeB=auto1 The gNodeB creates the ExternalENodeBFunction MO if it does not exist. The gNodeB removes existing ExternalEUtranCell MO instances if they are not included in the Served Cell Information IE. Note: Existing ExternalEUtranCell MO instances are not removed if they are referred to by an EUtranCellRelation MO in which the EUtranCellRelation.essEnabled attribute is set to true. When a neighbor cell changes frequency according to the NR Neighbour Information IE, the existing NRCellRelation is maintained if the new frequency has a corresponding NRFreqRelation attribute configured in the cell. If the relation does not exist, the NRCellRelation is lost, and have to be re-created by ANR if active. To maintain the NRCellRelation in neighboring cells, the following sequence must be performed: Create the NRFrequency MO for the cell frequency if the MO does not exist. Create the NRFreqRelation MO for all NR cells in which the NRCellRelation MOs are to be maintained. The NRFreqRelation.nRFrequencyRef attribute must refer to the previously created NRFrequency MO. Change the cell frequency. Once the cell frequency information is propagated, the neighbors can update the value of the NRCellRelation.nRFreqRelationRef attribute toward the previously created NRFreqRelation MO created before. Note: If the gNodeB is not able to create MOs based on the information sent in the X2AP EN-DC X2 SETUP REQUEST message, the gNodeB sends an X2AP EN-DC X2 FAILURE message to the eNodeB and ends the SCTP connection. The eNodeB reattempts to set up a connection to the gNodeB using SCTP after a time period specified by the ENodeBFunction.x2retryTimerStart timer. If the TermPointToENodeB MO is set to LOCKED, the gNodeB sends an X2AP EN-DC X2 FAILURE message to the eNodeB and cancels the SCTP connection. The eNodeB then attempts X2 automatic re-establishment.
5. The gNodeB sends the X2AP EN-DC X2 SETUP RESPONSE message to the eNodeB, which indicates that the value of the TermPointToENodeB.operationalState attribute is set to ENABLED. Note: The gNodeB only includes cell information in the Served NR Cell Information IE of the X2AP EN-DC X2 SETUP RESPONSE message about served NR cells that are successfully unlocked at least once after cell creation.
6. The eNodeB configures resources according to the information received in the X2AP EN-DC X2 SETUP RESPONSE message in the following way: The eNodeB creates the ExternalGUtranCell MO instance for each unknown cell indicated in the received Served NR Cell Information IE. When the ExternalGUtranCell MO instance for each unknown cell is created, the eNodeB configures resources in the following way: The eNodeB modifies existing instances of the ExternalGUtranCell MO if the cell information differs from the received Served NR Cell Information IE. The eNodeB removes existing instances of the ExternalGUtranCell MO if the cell information is not included in the received Served NR Cell Information IE. The eNodeB checks the number of Broadcast PLMN Identify Info List NR IEs received in the Served NR Cell Information IE and configures further resources depending on the number of IEs in the following way: If no Broadcast PLMN Identify Info List NR IEs are included in the Served NR Cell Information IE the eNodeB removes all existing ExternalBroadcastPLMNInfo MO instances. If one Broadcast PLMN Identify Info List NR IE is included in the Served NR Cell Information IE, the eNodeB removes all existing ExternalBroadcastPLMNInfo MO instances. If two or more Broadcast PLMN Identify Info List NR IEs are included in the Served NR Cell Information IE, the eNodeB creates the respective ExternalBroadcastPLMNInfo MO instances, and sets the ExternalBroadcastPLMNInfo.createdBy attribute to X2. Any existing ExternalBroadcastPLMNInfo MO instances are updated. Note: If the ExternalGUtranCell MO instances are deleted, all GUtranCellRelation MOs that refer to those instances are also removed, except for the MO where the GUtranCellRelation.essEnabled attribute set to true. The relation and the ExternalGUtranCell MO are kept for ESS. If there is no GUtranSyncSignalFrequency MO instance for the ExternalGUtranCell MO instance, a GUtranSyncSignalFrequency instance is created. When the NR frequency is changed for an existing ExternalGUtranCell MO instance, and the AnrFunctionNR.supportNrFreqChange attribute is set to ADD\_FREQREL or ADD\_FREQREL\_IF\_CELLREL\_EXIST, existing GUtranFreqRelation and GUtranCellRelation MO instances are updated for the changed frequency. For more information, see Automated Neighbor Relations. If the frequency of the NR cell is changed, and the AnrFunctionNR.supportNrFreqChange attribute is set to OFF, all relevant NR cell relations are removed. Note: When the system creates GUtranSyncSignalFrequency MO instances, the number of instances might exceed the cardinality of the MO class. MO instances created after the cardinality of the MO class is exceeded cannot be handled by this feature. Therefore, it is recommended to monitor the number of GUtranSyncSignalFrequency MO instances and to delete excess instances if there are more than the MO class cardinality. If the eNodeB is unable to create MOs based on the information received in the X2AP EN-DC X2 SETUP RESPONSE message, the eNodeB shuts down the SCTP connection and attempts X2 automatic re-establishment. If a shared gNodeB is hosting a cell with MORAN configuration, the global gNodeB ID in the X2AP EN-DC X2 SETUP RESPONSE message might be different than the global gNodeB ID configured in the ExtrnalGNodeBFunction MO instance. The mismatch between the global gNodeB IDs can change the configuration of the TermPointToGNB.operationalState attribute to DISABLED. When this is detected, the eNodeB corrects the inconsistent configuration. If the TermPointToGNB MO instance is created during the correction, the value of the TermPointToGNB.administrativeState attribute is set to UNLOCKED, and the EN-DC X2 Setup procedure is triggered again with the correct configuration. The repeated EN-DC X2 Setup is triggered if the Automated Neighbor Relations feature is activated.
7. The eNodeB sets the TermPointToGNB MO to ENABLED.

Related Information

Automatic X2 Re-establishment

Engineering Guidelines for X2 Configuration

3.1EN-DC X2 Setup

## 3.2 Automatic X2 Re-establishment

Automatic X2 re-establishment occurs after the eNodeB receives

the X2AP EN-DC X2 FAILURE message from the gNodeB, or when the SCTP connection between the eNodeB and the gNodeB is terminated. Automatic X2 re-establishment does not

occur when the operator or the OSS terminates the SCTP connection by locking the

TermPointToGNB MO on the eNodeB.

The automatic X2 re-establishment process involves the following steps:

1. The underlying SCTP connection is terminated between the eNodeB and the gNodeB.
2. The following MOs are set to DISABLED on the disconnected nodes:The TermPointToGNB MO on the eNodeB The TermPointToENodeB MO on the gNodeB
3. The disconnected eNodeB reattempts to set up a connection to the gNodeB using SCTP after a time period specified in ENodeBFunction.x2retryTimerStart.

3.2Automatic X2 Re-establishment

## 3.3 Automatic Update of X2 Connection

If the configuration of the NR cell changes, the EN-DC X2 connection is automatically

updated.

With EN-DC, the X2 connection is automatically updated if the configuration of the NR

cell changes.

The automatic update of X2 connection process involves the following steps:

1. If the configuration of the NR cell changes, the EN-DC CONFIGURATION UPDATE message is sent to the eNodeB. The EN-DC CONFIGURATION UPDATE message contains the following information: Served Cells To Add Served Cells To Modify Served Cells To Delete If the Automated Neighbor Relations for NR Mobility for EN-DC function of the Automated Neighbor Relations feature is active, NR neighbor object information is sent to neighbor gNodeBs in the EN-DC CONFIGURATION UPDATE message.
2. The eNodeB updates the configuration of the resources according to the information received in the EN-DC CONFIGURATION UPDATE message as follows: New instances of the ExternalGUtranCell MO are created according to the Served Cells To Add cell information. The existing instances of the ExternalGUtranCell MOs are modified or deleted according to the Served Cells To Modify and Served Cells To Delete cell information. Note: If the ExternalGUtranCell MO instances are deleted, all referring GUtranCellRelation MOs are also removed except the MO with the GUtranCellRelation.essEnabled attribute set to true. That relation and the ExternalGUtranCell MO are kept for ESS. The eNodeB checks the number of Broadcast PLMN Identify Info List NR IEs that are received in the Served NR Cell Information IE, and configures further resources depending on the number of IEs in the following way: If no Broadcast PLMN Identify Info List NR IEs are included in the Served NR Cell Information IE, the eNodeB removes all existing ExternalBroadcastPLMNInfo MO instances. If one Broadcast PLMN Identify Info List NR IE is included in the Served NR Cell Information IE, the eNodeB removes all existing ExternalBroadcastPLMNInfo MO instances. If two or more Broadcast PLMN Identify Info List NR IEs are included in the Served NR Cell Information IE, the eNodeB creates the corresponding ExternalBroadcastPLMNInfo MO instances, and sets the value of the ExternalBroadcastPLMNInfo.createdBy attribute to X2. Any existing ExternalBroadcastPLMNInfo MO instances are updated accordingly. If there is no GUtranSyncSignalFrequency MO instance for the ExternalGUtranCell MO instance, a GUtranSyncSignalFrequency instance is created. When the NR frequency is changed for an existing ExternalGUtranCell MO instance and the AnrFunctionNR.supportNrFreqChange attribute is set to ADD\_FREQREL or ADD\_FREQREL\_IF\_CELLREL\_EXIST, existing GUtranFreqRelation and GUtranCellRelation MO instances are updated for the changed frequency. For more information, see Automated Neighbor Relations. Note: When the system creates GUtranSyncSignalFrequency MO instances, the number of instances might exceed the cardinality of the MO class. MO instances created after the cardinality of the MO class is exceeded cannot be handled by this feature. Therefore, it is recommended to monitor the number of GUtranSyncSignalFrequency MO instances and to delete excess instances if there are more than the MO class cardinality. If the frequency of the NR cell is changed, and the AnrFunctionNR.supportNrFreqChange attribute is set to OFF all referring NR cell relations are removed.
3. The eNodeB confirms the automatic update of the X2 connection by sending an EN-DC CONFIGURATION UPDATE ACKNOWLEDGE message.
4. The eNodeB sends the EN-DC CONFIGURATION UPDATE message with the NR Neighbor Information IE to the other gNodeBs if there is a relationship of PCell and PSCell and there is a change in an existing ExtenalGUtranCell MO instance.
5. The gNodeB updates the configuration of resources according to the received NR Neighbour Information IE in the EN-DC CONFIGURATION UPDATE message. When the received NR Neighbour Information IE contains changed frequency information for a neighboring NR cell, the existing NRCellRelation is maintained if the new frequency has a corresponding NRFreqRelation attribute configured in the cell. If the relation does not exist, the NRCellRelation is lost, and have to be re-created by ANR if active. To maintain the NRCellRelation MO instances on the gNodeBs of neighboring cells, the following sequence must be performed: Create the NRFrequency MO for the new cell frequency, if it does not exist. Create the NRFreqRelation MO, with the value of nRFrequencyRef created previously for all the neighboring cells in which NRCellRelation are to be maintained. Change the cell frequency. Once the new cell frequency information is propagated, the neighbors are able to update the NRCellRelation.nRFreqRelationRef toward the NRFreqRelation created before.

## 3.4 Removal of X2 Connection by Locking

X2 connections can be removed by locking the

TermPointToGNBMO instance in the eNodeB or the

TermPointToENodeB MO instance in the gNodeB. The MO instances can

be locked with one of the following options:

- Manually by the operator
- Adding a gNodeB to the gNodeB blocklist by configuring the ENodeBFunction.blockedGNodeBListMO attribute
- Automatically by the Automated Neighbor Relations feature
- With the OSS when activating a planned area

The X2 link is removed if one of the following MO classes is disabled in one of the

above mentioned ways:

- If the TermPointToENodeB MO on the gNodeB is LOCKED, the removal of X2 connection process involves the following steps: The X2 link removal is initiated when the TermPointToENodeB MO is disabled on the gNodeB. The gNodeB either shuts down or aborts the SCTP connection to the eNodeB. The eNodeB proceeds according to automatic X2 re-establishment. Note: Disabling the TermPointToENodeB can result in the gNodeB receiving a new X2AP EN-DC X2 SETUP REQUEST message from a remote eNodeB. The gNodeB responds to the X2AP EN-DC X2 SETUP REQUEST message with an X2AP EN-DC X2 SETUP FAILURE message sent to the eNodeB.
- If the TermPointToGNB MO on the eNodeB is LOCKED, the removal of X2 connection process involves the following steps: The X2 link removal is initiated when the TermPointToGNB MO is disabled on the eNodeB. The eNodeB either shuts down or aborts the SCTP connection to the gNodeB. The gNodeB automatically removes the TermPointToENodeB MO as described in Removal of TermPointToENodeB MO in X2 Configuration. Figure 3 X2 Removal Process by Locking the TermPointToGNB MO on the eNodeB

3.4Removal of X2 Connection by Locking

## 3.5 X2 Setup Configuration at Radio Node Integration

Radio Node Identity Configuration

To set up an X2 connection between the eNodeB and the gNodeB, the global gNodeB IDs on the

gNodeB have to be equal to the global gNodeB IDs on the

eNodeB. If the global values are not matching, the X2

link is not operational.

The global gNodeB IDs on the gNodeB

are the following:

- GNBCUCPFunction.gNBId
- GNBCUCPFunction.gNBIdLength
- GNBCUCPFunction.pLMNId
- NRCellCU.pLMNIdList

The global gNodeB IDs on the eNodeB are the following:

- ExternalGNodeBFunction.gNodeBId
- ExternalGNodeBFunction.gNodeBIdLength
- ExternalGNodeBFunction.gNodeBPlmnId

As the ExternalGNodeBFunction MO is created manually before X2

setup, at integration, the manual method is used for providing the global gNodeB ID

values. The values are adjusted in the Radio Network Configuration File when it is

populated with site-specific values.

The ExternalENodeBFunction MO is created automatically during X2

setup. The value of ExternalENodeBFunction.eNodeBId is set

automatically.

X2 IP Address Configuration

The remote IP address used for X2 connection must be defined manually or obtained

over S1 or X2 through X2 TNL Address discovery in the gNodeB.

An IP address with the same IP version as the IP address of the configured SCTP

endpoint must be defined. The SCTP endpoint IP address is defined by one of the

following MO attributes:

- AdditionalCoreNetwork.sctpEndcX2Ref
- ENodeBFunction.sctpEndcX2Ref
- ENodeBFunction.sctpX2Ref
- ENodeBFunction.sctpRef

The TermPointToENodeB MO on the gNodeB is configured automatically at X2

connection setup.

Related Information

Engineering Guidelines for X2 Configuration

3.5X2 Setup Configuration at Radio Node Integration

## 3.6 Removal of TermPointToENodeB MO

The gNodeB automatically deletes instances of the

TermPointToENodeB MO if the following conditions are met:

- The RDN follows the default formatting.
- The TermPointToENodeB.operationalState attribute is set to DISABLED.
- The administrativeState attribute is set to UNLOCKED.

The instances are deleted when

the time duration specified in the

GNBCUCPFunction.extEnbRemoveTime attribute has passed.

When

the system automatically deletes instances of the

TermPointToENodeB MO, the

ExternalENodeBFunction

MO is also removed if the following conditions are met:

- The RDN follows the default formatting.
- ExternalENodeBFunction.isRemoveAllowed attribute is set to TRUE.
- No ExternalEUtranCell MO is referred by the EUtranCellRelation.neighborCellRef attribute.

## 3.7 Blocking X2 Connections

When a gNodeB is included in the gNodeB blocklist, new X2 connections are blocked or

existing X2 connections are removed for the blocklisted gNodeB.

Selected gNodeBs can be added to the gNodeB blocklist by configuring the

ENodeBFunction.blockedGNodeBList attribute.

The selection of blocked gNodeBs can be configured with the combination of the following

MO attributes:

- blockedGNodeBList.mcc
- blockedGNodeBList.mnc
- blockedGNodeBList.mncLength
- blockedGNodeBList.gNodeBId
- blockedGNodeBList.gNodeBIdLength

The configured attributes are compared with the following MO attributes under the

ExternalGNodeBFunction MO instance to find the designated

gNodeB:

- gNodeBPlmnId.mcc
- gNodeBPlmnId.mnc
- gNodeBPlmnId.mncLength
- ExternalGNodeBFunction.gNodeBId
- ExternalGNodeBFunction.gNodeBIdLength

If the blockedGNodeBList.gNodeBId attribute is set to

-1, EN-DC X2 connections can be blocked to every gNodeB with the

specific PLMN ID.

If a gNodeB is added to the gNodeB blocklist, automatic creation of the EN-DC X2

connection by the Automated Neighbor Relation feature is prevented. Manual creation of

an EN-DC X2 connection to a blocklisted gNodeB is rejected.

Existing EN-DC X2 connections are disconnected and the TermPointToGNB

MO instances are removed.

Related concepts

Prevention of Configuration Reset of the ExternalGNodeBFunction.dirDataPathAvail Attribute

Related Information

Removal of X2 Connection by Locking

3Feature Operation

# 4 Parameters of X2 Configuration

This feature is affected by existing configuration parameters.

Table 3

| Parameter                             | Type      | Description                                                                                                                                                    |
|---------------------------------------|-----------|----------------------------------------------------------------------------------------------------------------------------------------------------------------|
| AdditionalCoreNetwork.sctpEndcX2Ref   | Affecting | References an SCTP endpoint.                                                                                                                                   |
| ENodeBFunction.sctpEndcX2Ref          | Affecting | References an SCTP endpoint.                                                                                                                                   |
| ENodeBFunction.x2retryTimerStart      | Affecting | Controls the time to wait before attempting to reestablish the X2                                 connection after an X2 link break.                           |
| GNBCUCPFunction.gNBId                 | Affecting | The identifier of the gNodeB in a PLMN. Has to be the same as the                                 eNodeB to set up an X2 connection.                           |
| ExternalGNodeBFunction.gNodeBId       | Affecting | The identifier of the gNodeB in a PLMN. Has to be the same as the                                 eNodeB to set up an X2 connection.                           |
| GNBCUCPFunction.gNBIdLength           | Affecting | Length of the identifier of the gNodeB. Has to be the same as the                                 eNodeB to set up an X2 connection.                           |
| ExternalGNodeBFunction.gNodeBIdLength | Affecting | Length of the identifier of the gNodeB. Has to be the same as the                                 eNodeB to set up an X2 connection.                           |
| GNBCUCPFunction.pLMNId                | Affecting | The PLMN identifier of the gNodeB. Has to be the same as the eNodeB                                 to set up an X2 connection.                                |
| ExternalGNodeBFunction.gNodeBPlmnId   | Affecting | The PLMN identifier of the gNodeB. Has to be the same as the eNodeB                                 to set up an X2 connection.                                |
| GNBCUCPFunction.extEnbRemoveTime      | Affecting | Determines the time after which the                                     TermPointToENodeB MO is removed after it was                                 disabled. |
| ENodeBFunction.blockedGNodeBList      | Affecting | See MOM description.                                                                                                                                           |

4Parameters of X2 Configuration

# 5 Performance of X2 Configuration

KPIs

This feature has no associated KPIs.

Counters

This feature has no directly associated counters.

Events

Table 4   eNodeB Events for EN-DC

| Event                                    | Event Parameter   | Description                                                                                                                                                                                                                                                                            |
|------------------------------------------|-------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| INTERNAL_EVENT_ENDC_X2_CONN_RELEASE      | N/A               | Event triggered when the EN-DC X2 connection to a gNodeB is lost or released by a local or                                     remote node.                                                                                                                                            |
| INTERNAL_PROC_ENDC_X2_SETUP              | N/A               | Event triggered by an EN-DC X2 Connection Setup procedure. Event                                     contains information about the request and result.                                                                                                                                |
| X2_ENDC_X2_SETUP_REQUEST                 | N/A               | Event triggered in the source RBS, when an EN-DC X2 setup request                                     is sent.                                                                                                                                                                         |
| X2_ENDC_X2_SETUP_RESPONSE                | N/A               | Event triggered in the source RBS, when an EN-DC X2 setup                                     response is received.                                                                                                                                                                    |
| X2_ENDC_X2_SETUP_FAILURE                 | N/A               | Event triggered in the source RBS, when an EN-DC X2 setup failure                                     is received.                                                                                                                                                                     |
| X2_ENDC_CONFIGURATION_UPDATE             | N/A               | Event triggered:   in the source RBS, when an EN-DC configuration update                                                 is sent.     in the target RBS, when an EN-DC configuration update                                                 is received.                               |
| X2_ENDC_CONFIGURATION_UPDATE_ACKNOWLEDGE | N/A               | Event triggered:   in the source RBS, when an EN-DC configuration update                                                 acknowledgment is received.     in the target RBS, when an EN-DC configuration update                                                 acknowledgment is sent. |
| X2_ENDC_CONFIGURATION_UPDATE_FAILURE     | N/A               | Event triggered:   in the source RBS, when an EN-DC configuration update                                                 failure is received.     in the target RBS, when an EN-DC configuration update                                                 failure is sent.               |

5Performance of X2 Configuration

# 6 Engineering Guidelines for X2 Configuration

## 6.1 SCTP Endpoint Setup for X2 Configuration

X2 communication uses SCTP to set up connection between the nodes. An SCTP endpoint

reference can be set up for EN-DC X2 control messaging in the

LocalSctpEndpoint MO under the

EndpointResource MO which is the child of the

GNBCUCPFunction MO.

To set up an SCTP endpoint for X2 communication, the

LocalSctpEndpoint.interfaceUsed attribute must be set to

X2.

If the Shared LTE RAN feature is activated and cell-defined primary PLMN

ID is configured, X2 links can be established for each primary PLMN. The

TermPointToENB.additionalCnRef attribute is used to differentiate

the local SCTP endpoint based on primary PLMN ID.

In case cell-defined primary PLMN ID is configured, the handling of

EN-DC X2 connections is different. For more information, see Shared LTE

RAN.

## 6.2 Prevention of Configuration Reset of the ExternalGNodeBFunction.dirDataPathAvail Attribute

If the ExternalGNodeBFunction MO instance is removed and recreated by

the Automated Neighbor Relations feature, the configuration of the

ExternalGNodeBFunction.dirDataPathAvail is reset and direct

packet forwarding is enabled. The operation of the following features can be

affected:

- Automated Neighbor Relations
- X2 Configuration EN-DC
- Incoming NR IRAT Handover

To keep the configuration of the

ExternalGNodeBFunction.dirDataPathAvail MO attribute, the removal

of the ExternalGNodeBFunction MO instance can be prevented, by

setting the ExternalGUtranCell.isRemoveAllowed attribute to

false.

6Engineering Guidelines for X2 Configuration

# Appendix A: Feature Change History

## Appendix A.a: 21.Q2: EN-DC Traffic Separation for MOCN

The enhancement introduces the configuration of a separate EN-DC X2 IP address in

shared Baseband nodes for each operator.

| Feature Name:           | Multiple IP Addresses for S1 and X2   |
|-------------------------|---------------------------------------|
| Feature Identity:       | FAJ 121 4697                          |
| Value Package Name:     | Shared Networks                       |
| Value Package Identity: | FAJ 801 0434                          |
| Node Type:              | Baseband Radio Node                   |
| Access Type:            | LTE                                   |

Benefits

The enhancement allows for complete traffic separation between different operator

networks even if parts of the network are shared with other operators.

Each operator of a shared LTE node can configure separate local IP addresses for X2

connections with remote NR nodes owned by this operator. After the initial

configuration of the feature, X2 connections are managed automatically by the

eNodeB.

Capacity and Performance

No impact.

Operation

The enhancement introduces the AdditionalCoreNetwork.sctpEndcX2Ref

and the AdditionalCoreNetwork.upX2EndcIPAddressRef attributes.

These attributes must be configured to enable traffic separation over the EN-DC X2-C

and the EN-DC X2-U interfaces. The enhancement also requires the license for the

Multiple IP Addresses for S1 and X2 feature to be activated. After the initial

configuration of the feature, EN-DC X2 connections are managed automatically by the

eNodeB.

Interfaces

This enhancement affects the following interfaces:

- X2-C The enhancement enables the configuration of dedicated EN-DC SCTP endpoints for different PLMN IDs for this interface.
- X2-U The enhancement enables the configuration of dedicated EN-DC local IP addresses for different PLMN IDs for this interface.

Hardware

No special hardware requirements.

Other Network Elements

ENM version 20.4 or later is required for this

enhancement.