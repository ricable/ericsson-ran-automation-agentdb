---
complexity_score: 12.5
converted_at: '2025-08-13T06:59:04.570214Z'
file_type: html
format: html
image_processing_enhanced: true
images_extracted: 6
images_saved: 3
original_path: 325_22104-LZA7016014_1Uen.AH.html
pictures_extracted: 6
processing_method: docling_multimodal
quality_score: 9.0
source_file: 325_22104-LZA7016014_1Uen.AH.html
source_zip: en_lzn7931040_r50f.zip
tables_extracted: 7
zip_image_types:
- .svg
- .png
- .gif
- .jpg
- .bmp
zip_images_total: 1893
---

# 

HARQ-ACK Format Selection for Single Carrier

Contents

![Image](../images/325_22104-LZA7016014_1Uen.AH/additional_3_CP.png)

![Image](../images/325_22104-LZA7016014_1Uen.AH/additional_3_CP.png)

- Overview
- Dependencies
- Feature Operation
    - RRC Connection Setup and HARQ-ACK Format Selection
    - RRC Connection Re-Establishment and HARQ-ACK Format Selection
    - Intra-LTE Incoming Handover and HARQ-ACK Format Selection
    - Carrier Aggregation SCell Deconfiguration and HARQ-ACK Format Selection
- Network Impact
- Parameters
- Performance
- Activate Non-License-Controlled Features
- Engineering Guidelines
- Configure HARQ-ACK Format Selection for Single Carrier

# 1 HARQ-ACK Format Selection for Single Carrier Overview

The feature enables multiplexing and PUCCH format 3 as the HARQ ACK-NACK feedback

mode.

| Feature Name           | HARQ-ACK Format Selection for Single Carrier             |
|------------------------|----------------------------------------------------------|
| Feature Identity       | Part of LTE Basic                                        |
| Value Package Name     | LTE Base Package                                         |
| Value Package Identity | FAJ 801 0400                                             |
| Node Type              | Baseband Radio Node                                      |
| Access Type            | LTE                                                      |
| Licensing              | Non-license-controlled function. No license is required. |

Summary

The feature enables support for multiplexing and PUCCH format 3 as the HARQ ACK-NACK feedback

mode for non-carrier aggregation TDD UEs. This can improve downlink cell throughput.

The performance gain achieved by the different HARQ-ACK feedback modes depends on

multiple factors. The following factors can increase the performance:

- TDD uplink subframe configuration
- TDD downlink subframe configuration
- Transmission mode
- Network load
- Traffic type

# 2 Dependencies of HARQ-ACK Format Selection for Single Carrier

The feature is limited to UEs capable of carrier aggregation in TDD without

configured SCells.

Feature Dependencies

There are no dependencies to other features.

Hardware

No specific hardware requirements.

Limitations

This feature is only applicable for TDD and carrier aggregation-capable UEs but

without any SCells configured. UEs need to be capable of carrier aggregation to

support PUCCH format 3. This is applicable for HARQ-ACK using PUCCH format 3 for

single-carrier TDD.

Network Requirements

No specific network requirements.

# 3 Feature Operation of HARQ-ACK Format Selection for Single Carrier

The feature works by selecting UE ACK-NACK feedback mode, multiplexing, and PUCCH format

3 mode.

- The eNodeB chooses the UE ACK-NACK feedback mode based on the following examples: Carrier aggregation configuration Non-carrier aggregation ACK-NACK feedback mode configuration UE access stratum release Transmission mode
- Multiplexing and PUCCH format 3 mode is selected at certain events. The exact behavior differs between the new and the legacy functions. Table 1 Multiplexing and PUCCH Format 3 Mode Selection Case Legacy Function New Function RRC connection setup Bundling is always set. R8 or R10 multiplexing can be set. RRC connection re-establishment Incoming handover ACK-NACK feedback mode is determined by the MO configuration and UE access stratum release. ACK-NACK feedback mode is determined by the following criteria: MO configuration Transmission mode PUCCH format 3 resource collision Number of active UEs in downlink UE access stratum release Carrier aggregation SCell deconfiguration to PCell only ACK-NACK feedback mode is determined by the MO configuration. ACK-NACK feedback mode is determined by the following criteria: MO configuration Transmission mode PUCCH format 3 resource collision Number of active UEs in downlink

## 3.1 RRC Connection Setup and HARQ-ACK Format Selection

ACK-NACK feedback mode is set to bundling or multiplexing based on different sets of

conditions.

Figure 1   RRC Connection Setup with Feedback Mode Selection

1. At RRC connection setup, the eNodeB sets the ACK-NACK feedback mode to bundling or multiplexing. Which one it chooses is determined by the following factors: The value of the EUtranCellTDD.nonCaAnModeMuxEnable attribute The number of active UEs in downlink Transmission mode
2. The eNodeB sets the feedback mode after UE capability information is acquired from the UE or the MME. The selected ACK-NACK feedback mode depends/based on meeting different sets of the following conditions: The value of the EUtranCellTDD.nonCaAnModeMuxEnable attribute The value of the EUtranCellTDD.nonCaAnModeF3Enable attribute UE access stratum release The number of active UEs in downlink Transmission mode PUCCH format 3 resource collision rate Table 2 ACK-NACK Feedback Mode Selection Feedback Mode Conditions PUCCH format 3 The EUtranCellTDD.nonCaAnModeF3Enable attribute is set to true. The PUCCH format 3 resource collision rate is less than the collision threshold. The UE is carrier aggregation-capable. R10 multiplexing The EUtranCellTDD.nonCaAnModeMuxEnable attribute is set to true. UE access stratum release is R10 or higher. There are less active UEs in downlink than the value of the EUtranCellTDD.nonCaHarqAnModeMuxThresh attribute. Transmission mode is TM3 or TM7. R8 multiplexing The EUtranCellTDD.nonCaAnModeMuxEnable attribute is set to true. UE access stratum release is R8 or R9. There are less active UEs in downlink than the value of the EUtranCellTDD.nonCaHarqAnModeMuxThresh attribute. Transmission mode is TM3 or TM7. Bundling If none of the above is applicable.

## 3.2 RRC Connection Re-Establishment and HARQ-ACK Format Selection

At RRC Connection Re-Establishment, feedback mode is set to bundling or R8

multiplexing.

Figure 2   RRC Connection Re-establishment with Feedback Mode Selection

1. At RRC connection re-establishment, feedback mode is set to bundling or R8 multiplexing based on the following factors: The EUtranCellTDD.nonCaAnModeMuxEnable attribute The number active UEs in downlink Transmission mode If there are no SCells configured, R10 multiplexing, PUCCH format 3, or bundling is to be reconfigured based on the following factors: The EUtranCellTDD.nonCaAnModeMuxEnable or the EUtranCellTDD.nonCaAnModeF3Enable attribute UE access stratum release The number of active UEs in downlink PUCCH format 3 resource collision rate Transmission mode

## 3.3 Intra-LTE Incoming Handover and HARQ-ACK Format Selection

At this event, reconfiguration can be necessary if there are no SCells

configured.

Figure 3   Intra-LTE Incoming Handover with Feedback Mode Selection

1. If there are no SCells configured, R10 multiplexing, PUCCH format 3, or bundling is to be reconfigured based on the following factors: The EUtranCellTDD.nonCaAnModeMuxEnable or the EUtranCellTDD.nonCaAnModeF3Enable attribute UE access stratum release The number of active UEs in downlink PUCCH format 3 resource collision rate Transmission mode

## 3.4 Carrier Aggregation SCell Deconfiguration and HARQ-ACK Format Selection

At this event, reconfiguration can be necessary if there are no SCells

configured.

Figure 4   Carrier Aggregation SCell Deconfiguration

1. If there are no SCells configured, R10 multiplexing, PUCCH format 3, or bundling is to be reconfigured based on the following factors: The EUtranCellTDD.nonCaAnModeMuxEnable or the EUtranCellTDD.nonCaAnModeF3Enable attribute UE access stratum release The number of active UEs in downlink PUCCH format 3 resource collision rate Transmission mode
2. If a carrier aggregation-capable UE that is configured with PUCCH format 3 is reconfigured to PCell only, the UE can continue to use PUCCH format 3 if the EUtranCellTDD.nonCaAnModeF3Enable attribute is set to true.
3. The new ACK-NACK feedback mode is sent to UE in the RRC connection reconfiguration message.

# 4 Network Impact of HARQ-ACK Format Selection for Single Carrier

The feature improves downlink cell throughput.

Capacity and Performance

When Multiplexing or PUCCH format 3 is used, more HARQ feedback bits (up to 4 bits

and 8 bits respectively) are required compared to bundling. When HARQ feedback is

sent on PUSCH, a lower MCS for PUSCH can be selected to achieve the same target

BLER. The uplink data rate and thus the uplink cell throughput can be affected.

Multiplexing is expected to provide downlink throughput improvement compared to

bundling in a single user scenario with a full buffer type of traffic. However, in a

multi-user and multi-cell scenario, when a UE is only scheduled in one subframe of a

bundling window, throughput with multiplexing can be slightly worse than with

bundling. Limiting the number of multiplexing UEs based on the number of active UEs

in downlink is aimed to minimize such throughput degradation.

PUCCH format 3 resource competition is possible between non-carrier aggregation, 3CC,

4CC and 5CC carrier aggregation-capable UEs at scheduling. This can affect carrier

aggregation-capable UE throughput if the number of non-carrier aggregation UEs using

PUCCH format 3 is not limited. Limiting the number of non-carrier aggregation UEs

using PUCCH format 3, based on PUCCH format 3 collision rate is aimed to minimize

such impact on carrier aggregation-capable UEs.

Interfaces

No impact.

Other Network Elements

No impact.

# 5 Parameters for HARQ-ACK Format Selection for Single Carrier

The feature introduces parameters with multiplexing and PUCCH format 3 can be supported

to achieve optimal performance.

Table 3   Parameters

| Parameter                               | Type       | Description          |
|-----------------------------------------|------------|----------------------|
| EUtranCellTDD.nonCaAnModeMuxEnable      | Introduced | See MOM description. |
| EUtranCellTDD.nonCaAnModeF3Enable       | Introduced | See MOM description. |
| EUtranCellTDD.nonCaF3ResCollisionThresh | Introduced | See MOM description. |
| EUtranCellTDD.nonCaHarqAnModeMuxThresh  | Introduced | See MOM description. |

# 6 Performance of HARQ-ACK Format Selection for Single Carrier

The feature updates events related to cell traffic, and has PM counters related to

feedback modes.

KPIs

Table 4   Key Performance Indicators

| KPI       | Description                                                                                                                                      |
|-----------|--------------------------------------------------------------------------------------------------------------------------------------------------|
| Integrity | Uplink and downlink cell throughput, downlink UE throughput, and                                 handover success ratio are expected to improve. |

Counters

- EUtranCellTDD.pmMacHarqDlAckNackModeConfig
- EUtranCellTDD.pmMacHarqNonCaDlAnModePf3Distr
- EUtranCellTDD.pmMacHarqNonCaDlAnModeMuxDistr
- EUtranCellTDD.pmNonCaPf3ResCollision
- EUtranCellTDD.pmNonCaAssignedPf3ResDistr

Events

Table 5   Updated Events

| Event                               | Event Parameters                                                                                                                                                                                                                                                                                                                                                                                                                 | Description                                                                                                                                                                                                            |
|-------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| INTERNAL_EVENT_DLHARQ_ANMODE_CONFIG | EVENT_PARAM_DLHARQ_ANMODE_CONFIG_BUNDLING                                 EVENT_PARAM_DLHARQ_ANMODE_CONFIG_REL8MUX                                 EVENT_PARAM_DLHARQ_ANMODE_CONFIG_REL10MUX                                 EVENT_PARAM_DLHARQ_ANMODE_CONFIG_FORMAT3                                 EVENT_PARAM_DLHARQ_ANMODE_CONFIG_FORMAT3_CA                                 EVENT_PARAM_DLHARQ_ANMODE_CONFIG_FORMAT1BCS_CA | Number of times UEs are configured with a certain downlink HARQ                                 ACK-NACK feedback mode.                                                                                                |
| INTERNAL_PER_CELL_TRAFFIC_REPORT    | EVENT_PARAM_NONCA_PF3_ASSIGNED_1...12                                                                                                                                                                                                                                                                                                                                                                                            | Number of PUCCH format 3 resource sets assigned to non-carrier                                 aggregation configured UEs within the HARQ bundling window.                                                             |
| INTERNAL_PER_UE _TRAFFIC_REP        | EVENT_PARAM_DLHARQ_ANMODE_USED_FORMAT3_0...3                                                                                                                                                                                                                                                                                                                                                                                     | Number of subframes scheduled in a bundling window for a                                 non-carrier aggregation UE configured with PUCCH format 3 as the                                 downlink HARQ feedback mode. |
| INTERNAL_PER_UE _TRAFFIC_REP        | EVENT_PARAM_FORMAT3_RES_COLLISION                                                                                                                                                                                                                                                                                                                                                                                                | Number of non-carrier aggregation configured UEs that cannot be                                 scheduled in a subframe due to format 3 resource collision.                                                            |
| INTERNAL_PER_UE _TRAFFIC_REP        | EVENT_PARAM_DLHARQ_ANMODE_USED_MUX_0...3                                                                                                                                                                                                                                                                                                                                                                                         | Number of subframes scheduled in a bundling window for a                                 non-carrier aggregation UE configured with multiplexing as the                                 downlink HARQ feedback mode.   |

# 7 Activate Non-License-Controlled Features

Non-license-controlled features do not require manual activation and cannot be

deactivated.

While license-controlled features need to be activated, non-license-controlled features

are activated automatically during node integration. They also do not

have

a software license key associated, which means that they have no

entries in the LKF that is installed on the node.

In some cases, non-license-controlled features need to be configured

manually or have some of

their

subfunctions enabled to work properly.

# 8 Engineering Guidelines for HARQ-ACK Format Selection for Single Carrier

The feature can be configured as needed through parameters related to the thresholds

of PUCCH format 3 resource collision and multiplexing.

nonCaF3ResCollisionThresh

PUCCH format 3 resource competition can exist for the following UE types at

scheduling:

- Non-carrier aggregation UEs
- 3CC-capable UEs
- 4CC-capable UEs
- 5CC-capable UEs

The EUtranCellTDD.nonCaF3ResCollisionThresh attribute

defines, in percentages, the upper threshold for PUCCH format 3 resource collision.

This limits the number of non-carrier aggregation TDD UEs that are configured with

PUCCH format 3 as the HARQ feedback mode.

The default value of 20 ensures minimum impact on carrier aggregation-capable UEs and

allows for some non-carrier aggregation UEs to be configured with PUCCH format

3.

nonCaHarqAnModeMuxThresh

If the number of UEs in downlink is high, there is less chance that the same UE gets

scheduled in more than one subframe in a bundling window. The

EUtranCellTDD.nonCaHarqAnModeMuxThresh attribute can stop the

configuration of new non-carrier aggregation UEs with multiplexing if the number of

UEs in downlink exceeds the set threshold. By defining the upper threshold for the

number of UEs in downlink, the attribute limits the number of TDD non-carrier

aggregation UEs configured with multiplexing as HARQ feedback mode.

The default value of 2 ensures minimal impact on KPIs. It also allows for some

non-carrier aggregation UEs to be configured with multiplexing.

# 9 Configure HARQ-ACK Format Selection for Single Carrier

This feature is only applicable for TDD and a UE without any SCells configured. The

UE needs to be CA capable to support PUCCH format 3. To configure HARQ-ACK Format

Selection for Single Carrier, do the following:

Steps

1. Enable one or both of the following:
    - Set the EUtranCellTDD.nonCaAnModeMuxEnable attribute to true to enable TDD HARQ-ACK multiplexing support. The changes take effect immediately, locking and unlocking the cell is not required.
    - Set the EUtranCellTDD.nonCaAnModeF3Enableattribute to true to enable TDD PUCCH format 3 support. Lock and unlock the cell for the changes to take effect.