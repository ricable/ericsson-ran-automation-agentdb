---
complexity_score: 39.5
converted_at: '2025-08-13T06:59:16.174832Z'
file_type: html
format: html
image_processing_enhanced: true
images_extracted: 9
images_saved: 3
original_path: 36_1553-LZA7016014_1Uen.EL33B.html
pictures_extracted: 9
processing_method: docling_multimodal
quality_score: 9.0
source_file: 36_1553-LZA7016014_1Uen.EL33B.html
source_zip: en_lzn7931020_r50f.zip
tables_extracted: 58
zip_image_types:
- .svg
- .png
- .gif
- .jpg
- .bmp
zip_images_total: 1244
---

# 

Manage Transport Network

Baseband Radio Node

Contents

![Image](../images/36_1553-LZA7016014_1Uen.EL33B/additional_3_CP.png)

![Image](../images/36_1553-LZA7016014_1Uen.EL33B/additional_3_CP.png)

- Description
    - Transport Network Overview
    - Concepts
        - Virtual Routers
        - Virtual IP Interface
        - Bridge
        - Bridged Virtual Interface
        - IPv4 and IPv6 Dual-Stack for X2
    - Managed Object Model Overview
- Transport Configuration Procedures
    - Configuration Flow
        - Description of Transport Configuration with the Basic Configuration Method
    - Typical Transport Configurations
        - RAN Traffic and OAM Traffic on Different VLANs
        - RAN Traffic and OAM Traffic on the Same VLAN
        - RAN Traffic and OAM Traffic on Different VLANs with the Separation of IP Domains between User Plane,X2 Control Plane and S1 Control Plane
        - RAN Traffic and OAM Traffic on the Same VLAN, but on Different IP Versions
        - RAN Traffic and OAM Traffic on Different VLANs with the Separation of IP Domains among Common CP for (X2 and S1)/S1 UP/DNS, Common X2 UP, Additional S1 CP, Additional S1 UP, Additional X2 UP and Additional DNS on a Baseband Node for LTE
        - EN-DC X2 Connectivity with Mixed Mode Baseband Nodes
    - Additional Functions
        - Traffic Aggregation
        - Configure Ethernet Link Aggregation
        - Configuring EthernetPort MO for FEC on 25G, 50G, or 100G Ports
        - TN Port Configuration for Ports with QSFP, SFP, and RJ-45 Connectors
        - Configure Access Control Lists
            - Configure ACL to Block ICMP Packets
        - Configure Link Redundancy
            - Configure Routing Resilience with Static Routes
            - Configure Routing Resilience with BFD on Interface Level
            - Configure Routing Resilience with BFD for a NextHop
        - Separate DNS Server for a Specific DNS Domain
        - Configure Ethernet OAM Service
        - Configure Path MTU Discovery
        - Jumbo Frames and IP MTU
        - Configure Dynamic IPv4 Address Allocation
            - DHCPv4 Client Identifier Option
        - Configure Dynamic IPv6 Address Allocation
            - DHCPv6 Client Identifier Option
        - LLDP Operation
            - Configure LLDP RX
            - Configure LLDP TX
            - LLDP Monitoring
        - Transport Automation Agent
            - Configure Transport Automation Agent
        - Port-Based Authentication
        - Multiple IP Addresses on the Same VLAN
        - Backhaul Turn Up Testing
        - Separate DNS Server for a Specific Operator in Shared RAN
        - Disable Processing of Packets with IP Options
    - Reconfigure Transport Network
    - Migration from IPv4 to IPv6 for Baseband Radio Node
    - Migration from Single-Stack to IPv4 and IPv6 Dual-Stack for X2 Configuration
        - Migrate from Single-Stack to IPv4 and IPv6 Dual-Stack for X2 by Configuring X2-C First
        - Migrate from Single-Stack to IPv4 and IPv6 Dual-Stack for X2 by Configuring X2-U First
        - Migrate from IPv4 and IPv6 Dual-Stack to IPv6 Single-Stack for X2
        - Migration from IPv4 to IPv6 for X2 in Neighbor eNodeB
    - Migration from IPv4 to IPv6 for Abis Interface
- Troubleshoot Transport Network
    - Log Handling
        - TnNetworkLog
        - TnApplicationLog
        - PacketCaptureLog
    - Duplicate IPv6 address
    - Fault Management
    - Performance Management
    - License Management

# 1 Description

## 1.1 Transport Network Overview

The Transport Network provides functions for routing, bridging and terminating IP traffic.

Network resilience and observability for these functions are provided as well. This document

describes how to configure these functions and troubleshoot them.

Certain functions related to the configuration of Transport Network are described in separate

documents:

- Quality of Service is described in Manage Quality of Service.
- SCTP is described in Manage SCTP.
- Policy Based Routing is described in Manage Routing Features.
- Network Synchronization is described in Manage Network Synchronization.
- TWAMP is described in Manage Active Measurement in Transport Network.

## 1.2 Concepts

The Transport Network supports standard industry functions and

concepts. A few concepts are described in the following sections for

clarity.

### 1.2.1 Virtual Routers

Virtual routers make it possible to configure multiple routers

in a node. Each virtual router has its own routing and forwarding

table. Each virtual router has a separate IP configuration that includes

routing information and interfaces. As a result, the network topology

is divided into separate IP networks.

### 1.2.2 Virtual IP Interface

A virtual IP interface is a logical IP interface not associated with a physical port. A

virtual IP interface is also known as a loopback interface.

If the node has multiple physical interfaces, the virtual IP interface can be used as a

resilient IP endpoint. The endpoint is reachable by traffic from remote networks through an

alternative physical port.

The IP address of a virtual IP interface cannot be resolved with address resolution through

the physical interfaces of the node. To use a virtual IP interface, neighboring routers need

to install one or more routes. These routes use the physical interfaces of the node as

nexthops for the virtual IP interfaces.

IPv4 and IPv6 addressing is supported for virtual (loopback) IP interfaces. For more

information, see the IP Loopback Interface and IPv6 feature

descriptions.

### 1.2.3 Bridge

A bridge creates a single broadcast domain by connecting two or more network segments to each

other. A network segment connected to an Ethernet or LAG port of the bridge is identified by a

VLAN ID. Normally, all network segments in the same broadcast domain, or VLAN, have the same

VLAN ID. The bridge connects the network segments with the same VLAN ID between the Ethernet

or LAG ports. A bridge

can be configured to provide the Low Latency Switching functionality.

Additionally, network segments with different VLAN IDs can be connected between the Ethernet

or LAG ports. This makes the bridge responsible for retagging the received frames.

### 1.2.4 Bridged Virtual Interface

BVI is an IP interface connected to a bridge. It allows IP traffic from the node to enter or

exit through a bridge.

A BVI uses the bridge as its link layer, and performs the following roles:

- A gateway between a switched and a routed network
- An endpoint for terminating IP traffic coming from the switched network

### 1.2.5 IPv4 and IPv6 Dual-Stack for X2

The IPv4 and IPv6 Dual-Stack feature enables the configuration of both IPv4 and IPv6

addresses for X2-C and X2-U interfaces. The eNodeB with dual-stack configured on X2

interfaces can keep the connections with both IPv4 and IPv6 neighbor nodes at the same

time. The IPv4 and IPv6 Dual-Stack feature can be used to migrate a large LTE network

from IPv4 to IPv6 without losing the X2 interface support.

For more information about the IPv4 and IPv6 Dual-Stack for X2 feature, see IPv4 and IPv6 Dual-Stack for X2.

## 1.3 Managed Object Model Overview

Figure 1   MOM Overview of Transport Branch in Radio Node

The Transport MO has two access roles on the LDAP server:

| Transport_Application_Administrator         |    | A user with this role can configure the Transport 						MO.   |
|---------------------------------------------|----|---------------------------------------------------------------|
|                                             |    |                                                               |
| Transport_Application_SecurityAdministrator |    | A user with this role can access privacy-related data.        |

The MOs under Transport can be divided into the following groups:

Configuration Options

The following configuration options are available under the Transport MO class:

- If the node is acting as a router, it is possible to configure the node to relay DHCP messages to a DHCP server. The DhcpRelayIPv4 MO is used for this purpose. It specifies, among other configuration, the address of the DHCP server.
- It is possible to enable the bridging function in the node. The Bridge MO represents this function. It refers to the VlanPort MOs that are part of the bridge.
- Mapping between the DSCP and PCP values is done by configuring a DscpPcpMap MO, and associating it with an InterfaceIPv4 or InterfaceIPv6 MO instance. The node creates a default mapping if no mapping is explicitly configured. For details, see Manage Quality of Service.
- It is possible to enable a TWAMP responder and initiator in the node. For more information, see Manage Active Measurement in Transport Network.
- It is possible to configure IPsec, for example, to transport traffic between two inner networks over an outer, untrusted network. This is done through an IPsec VPN connection. For more information, see Manage IPsec.
- Ethernet OAM Services can be enabled to detect, verify, and isolate connectivity failures in large Layer 2 networks. The EthernetOamLocalMep MO represents an MEP that is local to the node. The EthernetOamRemoteMep MO represents an MEP in another node.

# 2 Transport Configuration Procedures

## 2.1 Configuration Flow

The configuration flow consists of creating the following files:

- A configuration template file that can be reused for multiple nodes
- A site-specific configuration file, which is created by populating the template file with site-specific parameters

Template files can be created in one of the following ways:

- Using the Configuration Generator for automatic template creation with the ECT or a plug-in in the Auto Provisioning application of the ENM.
- Creating new XML NETCONF files.

The preferred procedure is to use the Configuration Generator. Only edit the template file

with an XML editor if the required configuration is not supported by the tool.

When the preferred configuration procedure is used, it is not necessary to understand the MO

structure. However, for maintenance and troubleshooting, the MO structure must be

understood.

For more information on configuration methods, see Manage Equipment Configuration Tool. For more information on

configuration files, see Manage Configuration Files.

### 2.1.1 Description of Transport Configuration with the Basic Configuration Method

When creating template files with the basic configuration method, the ECT generates the

required MO structure based on GUI input parameters.

The ECT generates an MO structure with the following elements:

Global Settings

These parameters affect the reference settings between the

OamAccessPoint MO and a correct

AddressIPvx MO instance in the transport configuration.

Port Settings

Figure 2   MO Structure of Port Settings

For each port in the GUI, one TnPort and one

EthernetPort MO instance is created.

Table 1   Port Instance Names

| MO Class     | Instance Name                  |
|--------------|--------------------------------|
| TnPort       | Port_Identity parameter in GUI |
| EthernetPort | Port_Identity parameter in GUI |

Router Settings

Figure 3   MO Structure of Router Settings with a Single IP Interface and a Single

Address

Each Router defined in the GUI can have multiple InterfaceIPvX

created. Physical InterfaceIPvX can have multiple

AddressIPvX created. User can also modify the

RoutingTableIPvXStatic by using Advanced static

routing option (which will trigger creation of multiple

Dst and NextHop instances with IDs

different than the default ones). This example describes simple case when there is

just one instance of InterfaceIPvX, and one instance of

AddressIPvX created. Moreover Advanced static

routing is not used. The created configuration is as shown on Figure 3.

If mixed IPv4 and IPv6 interface is selected, an IPv4 interface and an IPv6 interface

can use the same router and the same VLAN. For this case, one instance of the MO

elements shown in Figure 4 is created.

Multiple interfaces can be configured in a single Router MO unless

the total number of interfaces in all Router MOs does not exceed

the limit of

120

interfaces.

Figure 4   MO Structure of Router Settings with Mixed IPv4 and IPv6 Interface

For more information about configurations that include a router with an IPsec

interface, see Manage IPsec.

Table 2   Router Instance Names for the Configuration with a Single IP Interface and a

Single IP Address

| MO Class             | Instance Name                                                             |
|----------------------|---------------------------------------------------------------------------|
| VlanPort             | <Router_Identity>.IF<Interface_Identity>   Both parameters set in ECT GUI |
| Router               | <Router_Identity>  Parameter set in ECT GUII                              |
| InterfaceIPvX        | <Interface_Identity>  Parameter set in ECT GUI                            |
| AddressIPvX          | <Address_Identity>  Parameter set in ECT GUI                              |
| RouteTableIPvXStatic | 1(1)                                                                      |
| Dst                  | default                                                                   |
| NextHop              | 1                                                                         |
| DnsClient            | 1                                                                         |

(1)

The instance name 1 is for the default configuration.

Operators can configure advanced static routing with

different IDs for the RouteTable,

Dst and

NextHop MO.

Table 3   Router Instance Names for the Configuration with Mixed IPv4 and IPv6

Interface

| MO Class             | Instance Name                                                             |
|----------------------|---------------------------------------------------------------------------|
| VlanPort             | <Router_Identity>.IF<Interface_Identity>   Both parameters set in ECT GUI |
| Router               | <Router_Identity>  Parameter set in ECT GUII                              |
| InterfaceIPv4        | <Interface_Identity>  Parameter set in ECT GUI                            |
| AddressIPv4          | <Address_Identity>  Parameter set in ECT GUI                              |
| RouteTableIPv4Static | 1                                                                         |
| Dst                  | default                                                                   |
| NextHop              | 1                                                                         |
| DnsClient            | 1                                                                         |
| InterfaceIPv6        | <Interface_Identity>  Parameter set in ECT GUI                            |
| AddressIPv6          | <Address_Identity>  Parameter set in ECT GUI                              |
| RouteTableIPv6Static | 1                                                                         |
| Dst                  | default                                                                   |
| NextHop              | 1                                                                         |
| DnsClient            | 1                                                                         |

## 2.2 Typical Transport Configurations

The following examples of typical transport configurations can be used as guidelines, to

prepare site-specific configuration files. They include the basic transport network

infrastructure that is required to set up node traffic. Additional functions or features

can also be added to extend the configuration.

### 2.2.1 RAN Traffic and OAM Traffic on Different VLANs

In this node the RAN traffic and the OAM traffic uses different VLANs. This scenario is

valid for RANs with 1, 2 or 3 different RATs. Figure 5 represents a network scenario

where three different radio standards are simultaneously configured on the Baseband

node.

Figure 5   RAN Traffic and OAM Traffic for Three Radio Access Technologies on

Different

VLANs

The node uses one Ethernet interface but separates OAM and RAN traffic using VLANs and

virtual routers. One local IPv4 address is configured in each router. Control and user

plane for the first radio standard is using VLAN ID = V1, control and user plane for the

second radio standard is using VLAN ID = V2, control and user plane for the third radio

standard is using VLAN ID = V3 and OAM is using VLAN ID = V4.

Traffic sent in the uplink direction on the different VLANs and belonging to different

standards or OAM is by default prioritized using the configured DSCP values. See Manage Quality of Service for details.

For the first radio standard the node local IP address is A1 and is on a subnet with a

prefix length of P1. The node uses a default route to reach the default router and the

IP address of the default router is A5.

For the second radio standard the node local IP address is A2 and is on a subnet with a

prefix length of P2. The node uses a default route to reach the default router and the

IP address of the default router is A6.

For the third radio standard the node local IP address is A3 and is on a subnet with a

prefix length of P3. The node uses a default route to reach the default router and the

IP address of the default router is A7.

For the OAM network, the local IP address of the node is A4 and is on a subnet with a

prefix length of P4. The node uses a default route to reach the default router and the

IP address of the default router is A8. Finally, the address of the DNS server reachable

in the OAM network is A9.

This scenario is also valid for

one

or

two

RATs. See Figure 6 for

the scenario with

one

RAT.

Figure 6   RAN Traffic and OAM Traffic for One  Radio Access Technology on Different

VLANs

Parameter Settings with the Basic Configuration Method

If this configuration is created with the basic configuration method in ECT, the

following parameters are used:

Table 4   Global Settings

| Parameter           | Value   |
|---------------------|---------|
| Router used for OAM | OAM     |

Table 5   Port Settings

| Parameter        | Value                    |
|------------------|--------------------------|
| Port Identity    | TN_A (or any other port) |
| Auto-negotiation | Enabled                  |

Table 6   Router Settings

| Parameter             | Value Instance 1   | Value Instance 2   | Value Instance 3   | Value Instance 4   |
|-----------------------|--------------------|--------------------|--------------------|--------------------|
| Router identity       | OAM                | UP_1               | UP_2               | UP_3               |
| IP version            | IPv4               | IPv4               | IPv4               | IPv4               |
| Number of DNS servers | 1                  | N/A                | N/A                | N/A                |
| Interface type        | Physical interface | Physical interface | Physical interface | Physical interface |
| Physical connector    | TN_A               | TN_A               | TN_A               | TN_A               |
| Use Vlan              | Enabled            | Enabled            | Enabled            | Enabled            |

MO Configurations

The following figure specifies the MOM configuration for this network scenario. The

MOs created for this configuration are specified in the table below. The table also

lists the MOs that are included in the configuration file, and their preferred

sequence.

Figure 7   MOM View of RAN Traffic and OAM Traffic for Three Radio Access Technologies

on Different VLANs

For SCTP configuration for LTE or WCDMA, additional SCTP-specific configuration is

needed. See Manage SCTP for details.

Table 7   MOM Configuration of RAN Traffic and OAM Traffic on Different VLANs

|   Part | MO Class             | Specific Attribute Value                                                                                                                                                                                                                                                   |
|--------|----------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|      1 | TnPort               |                                                                                                                                                                                                                                                                            |
|      1 | EthernetPort         | encapsulation contains a valid reference to                                 the  MO instance representing the connector                                 that is used.                                                                                                      |
|      2 | VlanPort             | encapsulation contains a reference to the                                 EthernetPort instance created                                         previously.vlanId specifies the VLAN                                     identity used for OAM traffic, that is, V4.       |
|      2 | Router               |                                                                                                                                                                                                                                                                            |
|      2 | InterfaceIPv4        | encapsulation contains a reference to the                                     VlanPort created previously for OAM                                 traffic.                                                                                                                 |
|      2 | AddressIPv4          | address is set to A4/P4.                                                                                                                                                                                                                                                   |
|      2 | RouteTableIPv4Static |                                                                                                                                                                                                                                                                            |
|      2 | Dst                  | dst is set to 0.0.0.0/0 (that is, a default                                 route).                                                                                                                                                                                        |
|      2 | NextHop              | address is set to A8.                                                                                                                                                                                                                                                      |
|      2 | DnsClient            | serverAddress is set to A9.                                                                                                                                                                                                                                                |
|      2 | OamAccessPoint       | accessPoint contains a reference to the                                     AddressIPv4 MO instance created previously                                 for OAM traffic.                                                                                                    |
|      3 | VlanPort             | encapsulation contains a reference to the                                     EthernetPort MO instance created                                         previously.vlanId specifies the VLAN                                     identity used for user plane, that is, V3. |
|      3 | Router               |                                                                                                                                                                                                                                                                            |
|      3 | InterfaceIPv4        | encapsulation contains a reference to the                                     VlanPort created previously for RAN traffic                                 associated with the first radio standard.                                                                        |
|      3 | AddressIPv4          | address is set to A3/P3.                                                                                                                                                                                                                                                   |
|      3 | RouteTableIPv4Static |                                                                                                                                                                                                                                                                            |
|      3 | Dst                  | dst contains a reference to 0.0.0.0/0 (that                                 is, a default route).                                                                                                                                                                          |
|      3 | NextHop              | address is set to A7.                                                                                                                                                                                                                                                      |
|      4 | VlanPort             | encapsulation contains a reference to the                                     EthernetPort instance created                                         previously.vlanId specifies the VLAN                                     identity used for user plane, that is, V2.    |
|      4 | Router               |                                                                                                                                                                                                                                                                            |
|      4 | InterfaceIPv4        | encapsulation contains a reference to the                                     VlanPort created previously for RAN traffic                                 associated with the second radio standard.                                                                       |
|      4 | AddressIPv4          | address is set to A2/P2.                                                                                                                                                                                                                                                   |
|      4 | RouteTableIPv4Static |                                                                                                                                                                                                                                                                            |
|      4 | Dst                  | dst contains a reference to 0.0.0.0/0 (that                                 is, a default route).                                                                                                                                                                          |
|      4 | NextHop              | address is set to A6.                                                                                                                                                                                                                                                      |
|      5 | VlanPort             | encapsulation contains a reference to the                                     EthernetPort instance created                                         previously.vlanId specifies the VLAN                                     identity used for user plane, that is, V1.    |
|      5 | Router               |                                                                                                                                                                                                                                                                            |
|      5 | InterfaceIPv4        | encapsulation contains a reference to the                                     VlanPort created previously for RAN traffic                                 associated with the first radio standard.                                                                        |
|      5 | AddressIPv4          | address is set to A1/P1.                                                                                                                                                                                                                                                   |
|      5 | RouteTableIPv4Static |                                                                                                                                                                                                                                                                            |
|      5 | Dst                  | dst contains a reference to 0.0.0.0/0 (that                                 is, a default route).                                                                                                                                                                          |
|      5 | NextHop              | address is set to A5.                                                                                                                                                                                                                                                      |

### 2.2.2 RAN Traffic and OAM Traffic on the Same VLAN

In this node the RAN traffic and the OAM traffic uses the same VLAN.

This scenario is valid for RANs with one, two or three different RATs. Figure 8 represents a network scenario

where three different radio standards are simultaneously configured on the Baseband

node.

Figure 8   RAN Traffic and OAM Traffic on the Same VLAN for Mixed Mode Baseband with Three

Standards

Figure 8 represents a

network scenario where the OAM traffic and user planes for three different standards use

the same network. The node has one local IP address used for both OAM traffic and user

plane traffic. The node uses a VLAN ID of V1.

The node local IP address is A1 and is on a network with a prefix length of P1. The node

uses a default route to reach the default router and the IP address of the default

router is A3. Finally, the address of the DNS server is A5.

Parameter Settings with the Basic Configuration Method

If this configuration is created with the basic configuration method in ECT, the

following parameters are used:

Table 8   Global Settings

| Parameter           |   Value |
|---------------------|---------|
| Router used for OAM |       1 |

Table 9   Port Settings

| Parameter        | Value                |
|------------------|----------------------|
| Port Identity    | TN_A (or other port) |
| Auto-negotiation | Enabled              |

Table 10   Router Settings

| Parameter             | Value              |
|-----------------------|--------------------|
| Router Identity       | 1                  |
| IP version            | IPv4               |
| Number of DNS servers | 1                  |
| Interface type        | Physical interface |
| Physical connector    | TN_A               |
| Use VLAN              | Enabled            |

MO Configurations

Figure 9   MOM Configuration of RAN Traffic and OAM Traffic on the

Same

VLAN with IPv4

Figure 9 specifies the MOM configuration for

this network scenario.

The MOs created for this configuration are specified in Table 11. The table also lists the

MOs in the preferred sequence in the configuration file.

Table 11   MOM Configuration of RAN Traffic and OAM Traffic on the

Same

VLAN with IPv4

|   Part | MO Class             | Specific Attribute Value                                                                                                                                                                                                                                       |
|--------|----------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|      1 | EthernetPort         | encapsulation contains a valid reference to                                     the TnPort MO instance representing the used                                     physical connector.                                                                           |
|      2 | VlanPort             | encapsulation contains a reference to the                                         EthernetPort instance created previously.                                     VLAN ID specifies the VLAN identity used, that is,                                         V1. |
|      2 | Router               |                                                                                                                                                                                                                                                                |
|      2 | InterfaceIPv4        | encapsulation contains a reference to the                                         VlanPort created previously for OAM                                     traffic.                                                                                             |
|      2 | AddressIPv4          | address is set to A1/P1.                                                                                                                                                                                                                                       |
|      2 | OamAccessPoint       | accessPoint contains a reference to the                                     AddressIPv4 MO instance created previously                                 for OAM traffic.                                                                                        |
|      2 | RouteTableIPv4Static |                                                                                                                                                                                                                                                                |
|      2 | Dst                  | dst is set to 0.0.0.0/0, that is, a default                                     route.                                                                                                                                                                         |
|      2 | NextHop              | address is set to A3.                                                                                                                                                                                                                                          |
|      2 | DnsClient            | serverAddress is set to A5.                                                                                                                                                                                                                                    |

### 2.2.3 RAN Traffic and OAM Traffic on Different VLANs with the Separation of IP Domains between User Plane,X2 Control Plane and S1 Control Plane

Figure 10   RAN Traffic and OAM Traffic on Different VLANs with the Separation of IP Domains

between User Plane, X2 Control Plane and S1 Control Plane on a Baseband Node for LTE

Figure 10 represents a network scenario where

OAM, user plane (UP)/X2 control plane (CP) and S1 CP are separated into different networks on

a Baseband node. The node uses one Ethernet interface but separates OAM, user plane/X2 CP and

S1 CP using VLAN. User plane/X2 CP is using VLAN ID = V1, OAM is using VLAN

ID = V2, and S1 CP is using VLAN ID = V3.

For the OAM network, the local IP address of the node is A2 and is on a network with a prefix

length of P2. The node uses a default route to reach the default router and the IP address of

the default router is A5. Finally, the address of the DNS server is A7.

For the user plane/X2 CP network, the node local IP address is A1 and is on a network with a

prefix length of P1. The node uses a default route to reach the default router and the IP

address of the default router is A4.

For the S1 CP network, the node local IP address is A3 and is on a network with a prefix

length of P3. The node uses a default route to reach the default router and the IP address of

the default router is A6.

Figure 11   MOM View of RAN Traffic and OAM Traffic on Different VLANs with the Separation of IP

Domains between UP, X2 CP and S1 CP for LTE, with IPv4 and IPv6

Figure 11 specifies the MOM configurations

for this network scenario.

The configuration file can be divided into four different parts:

- Part 1 covers the configuration of the Ethernet interfaces.
- Part 2 covers the configuration of IP transport for OAM traffic.
- Part 3 covers the configuration of IP transport for user plane/X2 CP traffic.
- Part 4 covers the configuration of IP transport for S1 CP traffic.

The MO configuration for each part is specified in the following tables. The tables list the

MOs in the preferred sequence in the configuration file.

Table 12   MOM Configuration of RAN Traffic and OAM Traffic on Different VLANs with the Separation

of IP Domains between UP, X2 CP and S1 CP for LTE, with IPv4

|   Part | MO Class             | Specific Attribute Value                                                                                                                                                                                                                                              |
|--------|----------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|      1 | TnPort               |                                                                                                                                                                                                                                                                       |
|      1 | EthernetPort         | encapsulation contains a valid reference to the                   TnPort MO instance representing the connector that is used.                                                                                                                                         |
|      2 | VlanPort             | encapsulation contains a reference to the                   EthernetPort instance created previously.   vlanId specifies the VLAN identity used for OAM traffic, that is,                   V2.                                                                       |
|      2 | Router               |                                                                                                                                                                                                                                                                       |
|      2 | InterfaceIPv4        | encapsulation contains a reference to the                   VlanPort created previously for OAM traffic.                                                                                                                                                              |
|      2 | AddressIPv4          | address is set to A2/P2.                                                                                                                                                                                                                                              |
|      2 | RouteTableIPv4Static |                                                                                                                                                                                                                                                                       |
|      2 | Dst                  | dst is set to 0.0.0.0/0 (that is, a default                 route).                                                                                                                                                                                                   |
|      2 | NextHop              | address is set to A5.                                                                                                                                                                                                                                                 |
|      2 | DnsClient            | serverAddress is set to A7.                                                                                                                                                                                                                                           |
|      2 | OamAccessPoint       | accessPoint contains a reference to the                   AddressIPv4 MO instance created previously for OAM                 traffic.                                                                                                                                 |
|      3 | VlanPort             | encapsulation contains a reference to the                   EthernetPort instance created previously.   vlanId specifies the VLAN identity used for user plane/X2 CP,                 that is, V1.                                                                    |
|      3 | Router               |                                                                                                                                                                                                                                                                       |
|      3 | InterfaceIPv4        | encapsulation contains a reference to the                   VlanPort created previously for user plane/X2 CP.                                                                                                                                                         |
|      3 | AddressIPv4          | address is set to A1/P1.                                                                                                                                                                                                                                              |
|      3 | RouteTableIPv4Static |                                                                                                                                                                                                                                                                       |
|      3 | Dst                  | dst contains a reference to 0.0.0.0/0 (that                 is, a default route).                                                                                                                                                                                     |
|      3 | NextHop              | address is set to A4.                                                                                                                                                                                                                                                 |
|      3 | SctpProfile          | See Manage SCTP                                                                                                                                                                                                                                                       |
|      3 | SctpEndPoint         | localIpaddress contains a reference to the                   AddressIPv4 instance created earlier for user plane/X2 CP.(1)                                                                                                                                            |
|      3 | ENodeBFunction       | upIpAddressRef is set to the AddressIPv4                 instance created previously for user plane/X2 CP. sctpX2Ref is                 set to refer to the SctpEndPoint MO instance created previously                 for X2 CP. (2)   This MO is specific for LTE. |
|      4 | VlanPort             | encapsulation contains a reference to the                   EthernetPort instance created previously.                   vlanId specifies the VLAN identity used for S1 CP, that is, V3.                                                                               |
|      4 | Router               |                                                                                                                                                                                                                                                                       |
|      4 | InterfaceIPv4        | encapsulation contains a reference to the                   VlanPort created previously for S1 CP.                                                                                                                                                                    |
|      4 | AddressIPv4          | address is set to A3/P3.                                                                                                                                                                                                                                              |
|      4 | RouteTableIPv4Static |                                                                                                                                                                                                                                                                       |
|      4 | Dst                  | dst contains a reference to 0.0.0.0/0 (that                 is, a default route).                                                                                                                                                                                     |
|      4 | NextHop              | address is set to A6.                                                                                                                                                                                                                                                 |
|      4 | SctpProfile          | See Manage SCTP.                                                                                                                                                                                                                                                      |
|      4 | SctpEndPoint         | localIpaddress contains a reference to the                   AddressIPv4 instance created earlier for S1 CP. (1)                                                                                                                                                      |
|      4 | ENodeBFunction       | sctpRef is set to the SctpEndPoint instance                 created previously for S1 CP. (2)   This MO is specific for LTE.                                                                                                                                          |

(1)   This MO contains many other attributes. They are explained

in Manage SCTP, as this is outside the scope of this document.(2)   This MO contains many other

attributes. They are explained in Manage Bearers and Services, as this is outside the

scope of this document.

### 2.2.4 RAN Traffic and OAM Traffic on the Same VLAN, but on Different IP Versions

Figure 12   RAN Traffic and OAM Traffic on the Same VLAN with IPv4 for OAM Traffic and IPv6 for RAN

Traffic

Figure 12 represents a network

scenario where the OAM traffic and user plane traffic use the same network, but different IP

versions. The node has one local IPv4 address used for OAM traffic and one IPv6 address for

user plane traffic. The node uses a VLAN ID of V1.

The node local IPv4 address is A1\_4 and is on a network with a prefix length of P1. The node

uses a default route to reach the default router and the IP address of the default router is

A3\_4. Finally, the address of the DNS server is A6\_4.

The node local IPv6 address used for RAN traffic is A1\_6. The node uses a default route to

reach the default router and the IP address of the default router is A3\_6.

Figure 13   MOM View of RAN

Traffic

and OAM

Traffic

on the Same VLAN with IPv4 for OAM

Traffic

and IPv6 for RAN

Traffic

The MOs created for this configuration are specified in Table 13. The table also lists the MOs in the

preferred sequence in the configuration file.

Table 13   MOM Configuration of RAN Traffic and OAM Traffic on the Same VLAN with IPv4 for OAM

Traffic and IPv6 for RAN Traffic

|   Part | MO Class             | Specific Attribute Value                                                                                                                                                     |
|--------|----------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|      1 | EthernetPort         | encapsulation contains a valid reference to the                   TnPort MO instance representing the used physical                 connector.                               |
|      2 | VlanPort             | encapsulation contains a reference to the                   EthernetPort instance created previously. VLAN ID specifies the                 VLAN identity used, that is, V1. |
|      2 | Router               |                                                                                                                                                                              |
|      2 | InterfaceIPv4        | encapsulation contains a reference to the                   VlanPort created previously for RAN traffic.                                                                     |
|      2 | AddressIPv4          | address is set to A1/P1.                                                                                                                                                     |
|      2 | RouteTableIPv4Static |                                                                                                                                                                              |
|      2 | Dst                  | dst is set to 0.0.0.0/0, that is, a default route.                                                                                                                           |
|      2 | NextHop              | address is set to A3_4.                                                                                                                                                      |
|      2 | DnsClient            | serverAddress is set to A6_4.                                                                                                                                                |
|      3 | Router               |                                                                                                                                                                              |
|      3 | InterfaceIPv6        | encapsulation contains a reference to the                   VlanPort created previously for RAN traffic.                                                                     |
|      3 | AddressIPv6          | address is set to A1_6.                                                                                                                                                      |
|      3 | RouteTableIPv6Static |                                                                                                                                                                              |
|      3 | Dst                  | dst is set to ::/0, that is, a default route.                                                                                                                                |
|      3 | NextHop              | address is set to A3_6.                                                                                                                                                      |

### 2.2.5 RAN Traffic and OAM Traffic on Different VLANs with the Separation of IP Domains among Common CP for (X2 and S1)/S1 UP/DNS, Common X2 UP, Additional S1 CP, Additional S1 UP, Additional X2 UP and Additional DNS on a Baseband Node for LTE

Figure 14   RAN Traffic and OAM Traffic on Different VLANs with the Separation of IP Domains

among Common CP (X2 and S1) /S1 UP/DNS, Common X2 UP, Additional S1 CP, Additional S1 UP,

Additional X2 UP and Additional DNS

Figure 14 represents a network scenario where OAM, common CP

(X2 and S1)/S1 UP/DNS, common X2 UP, additional S1 CP, additional S1 UP, additional X2 UP and

additional DNS are separated into different networks on a Baseband node. The node uses one

Ethernet interface but can separate above domains using VLAN. OAM is using VLAN ID = V1, CP

(X2 and S1)/S1 UP/DNS(Common) is using VLAN ID = V2, X2 UP(Common) is using VLAN ID = V3, S1

CP(Additional) is using VLAN ID = V4, S1 UP(Additional) is using VLAN ID = V5, X2

UP(Additional) is using VLAN ID = V6 and DNS(Additional) is using VLAN ID = V7.

For the OAM network, the local IP address of the node is A1 and is on a network with a

prefix length of P1. The node uses a default route to reach the default router and the IP

address of the default router is A8.

For the CP(X2,S1)/S1 UP/DNS(Common) network, the node local IP address is A2 and is on a

network with a prefix length of P2. The node uses a default route to reach the default

router and the IP address of the default router is A9.

For the X2 UP(Common) network, the node local IP address is A3 and is on a network with a

prefix length of P3. The node uses a default route to reach the default router and the

IP address of the default router is A10.

For the S1 CP(Additional), S1 UP(Additional), X2 UP(Additional) and DNS(Additional)

network, the node local IP address is A4, A5, A6 and A7. They are on a network with a

prefix length of P4, P5, P6 and P7. The node uses a default route to reach the default

router and the IP address of the default router is A11.

Each interfaces of a core network will use the same router due to the limitation of the

number of router if core networks are added by shared LTE RAN.

Figure 15   MOM View of RAN

Traffic

and OAM

Traffic

on Different VLANs with the

Separation

of IP

Domains

among Common CP(X2,S1)/S1 UP/DNS, Common X2 UP, Additional S1 CP, Additional S1 UP,

Additional X2 UP and Additional DNS with IPv4 as

Example.

Figure 15 specifies the MOM configurations for this network scenario.

The configuration file can be divided into six different parts:

- Part 1 covers the configuration of the Ethernet interfaces.
- Part 2 covers the configuration of IP transport for OAM traffic.
- Part 3 covers the configuration of IP transport for CP(X2,S1)/S1UP/DNS(Common) traffic.
- Part 4 covers the configuration of IP transport for X2 UP(Common) traffic.
- Part 5 covers the configuration of IP transport for S1 CP(Additional) traffic.
- Part 6 covers the configuration of IP transport for S1 UP(Additional) traffic.
- Part 7 covers the configuration of IP transport for X2 UP(Additional) traffic.
- Part 8 covers the configuration of IP transport for DNS(Additional) traffic.

Table 14    MOM Configuration of RAN Traffic and OAM Traffic on Different VLANs with

the

Separation

of IP Domains among Common CP(X2,S1)/S1 UP/DNS, Common X2 UP, Additional S1 CP, Additional

S1 UP, Additional X2 UP and Additional DNS with IPv4 as

Example

(1)  This MO contains many other attributes. They are explained in Manage SCTP, as this is outside the scope of this

document.(2)   This MO contains many other attributes.

They are explained in Manage Bearers and Services, as this is outside the

scope of this document.

### 2.2.6 EN-DC X2 Connectivity with Mixed Mode Baseband Nodes

In mixed mode Baseband nodes EN-DC X2 traffic between local NR and LTE can be routed in

the following ways:

- External routing
- Local routing with shared VR
- Local routing with separate VRs

External Routing

- NR and LTE in the mixed mode Baseband node use separate virtual routers for their respective S1 and X2 interfaces.
- NR and LTE must use separate IP addresses.
- The use of IPsec for X2 traffic is expected.
- It is generally recommended to use local routing instead of external routing for EN-DC X2 between NR and LTE on the mixed mode Baseband node.

Local Routing with Shared VR

NR and LTE in the mixed mode Baseband node use shared virtual routers for EN-DC X2.

NR and LTE must use separate IP addresses in the shared VR.

In a trusted network, separate IP addresses for NR and LTE in the mixed mode Baseband

node can be configured in different ways. The following deployment options are

possible:

- NR and LTE use separate physical IP interfaces. Each interface has different non-loopback encapsulation.
- NR and LTE use separate loopback IP interfaces. Traffic for both NR and LTE can share a single physical IP interface with non-loopback encapsulation.
- LTE uses a loopback IP interface. NR uses the shared physical IP interface.
- NR uses a loopback IP interface. LTE uses the shared physical IP interface.

When loopback IP interfaces are used for NR, LTE, or both, additional IP routes must

be added in the backhaul network to ensure that these interfaces can be reached.

In an untrusted network, IPsec and direct X2 are not applicable for EN-DC X2

connectivity between NR and LTE in the mixed mode Baseband node. IPsec and direct X2

can be used for external EN-DC X2 connectivity with local routing for EN-DC X2. For

more information, see Manage IPsec.

Local Routing with Separate VRs

NR and LTE in the mixed mode Baseband node use separate virtual routers for EN-DC X2.

NR and LTE must use separate IP addresses, which are configured on physical IP

interfaces in the two virtual routers.

Local routing with separate VRs can be configured using the inter-VR static route in

both VRs. An inter-VR static route allows a match on a host route (/32) with the

nexthop being a different VR on the node. The host route must correspond to an IP

interface used as X2 interface in the destination VR.

In an untrusted network, IPsec and direct X2 are not applicable for the EN-DC X2

connectivity between NR and LTE in the Mixed Mode Baseband node. IPsec or direct X2

can be used for external EN-DC X2 connectivity with local routing for EN-DC X2. For

more information, see Manage IPsec.

## 2.3 Additional Functions

### 2.3.1 Traffic Aggregation

A combination of several features can be used to configure traffic aggregation on a single

interface with bridging from other units connected to the node. This can be used to

connect external equipment on the site or to aggregate multiple IP traffic flows to the

transport network.

Bridging provides the aggregation function without creating an additional IP-subnetwork.

BVI makes it possible to have IP host functionality on an L2 bridge. The IP host can be

used for remote connectivity to the node, for example by OAM configuration management,

and as an IP host for other internal applications.

Prerequisites. The Multiple Ethernet Ports feature must be

activated. More information is available in Multiple Ethernet Ports.

Configuration of a BVI uses the following MO classes:

- InterfaceIPv4 or InterfaceIPv6
- AddressIPv4 or AddressIPv6
- Bridge

Configuration of a bridge uses the Bridge MO and the bridge can be

configured using either tagged or untagged VLAN ports.

A BVI is an InterfaceIPv4 or InterfaceIPv6 MO

instance where the encapsulation attribute contains a reference to a

Bridge instance. Only one InterfaceIPv4 and

one InterfaceIPv6 instance can refer to a given

Bridge instance.

An existing InterfaceIPv4 or InterfaceIPv6 MO

instance can be modified to become a BVI by reconfiguring its

encapsulation attribute to refer to a Bridge

MO instance, instead of an EthernetPort or

VlanPort. Reconfiguration from Bridge to

EthernetPort or VlanPort is also possible.

The routing functionality can be used as a an alternative to bridging.

### 2.3.2 Configure Ethernet Link Aggregation

The example commands of this procedure assume a hardware setup scenario where two 1

Gbps Ethernet links are aggregated, so they can be used as a single link.

Figure 16   Example Hardware Setup Scenario for Ethernet Link Aggregation

Prerequisites

- The feature is activated.
- LACP is configured on the Baseband radio node side.
- The additional cables from the Baseband radio node to the switch are available.
- The switch has free Ethernet ports and LACP is configured on the switch side.

Steps

1. Create a number of additional TnPort MO instances needed for the LAG. Example cr Equipment=1,FieldReplaceableUnit=1,TnPort=TN\_B
![Image](../images/36_1553-LZA7016014_1Uen.EL33B/additional_3_CP.png)
3. For each TnPort created, create an EthernetPort MO instance that encapsulates the previously created TnPort. Example crn Transport=1,EthernetPort=2 encapsulation Equipment=1,FieldReplaceableUnit=1,TnPort=TN\_B admOperatingMode 1 userLabel TN\_B end
![Image](../images/36_1553-LZA7016014_1Uen.EL33B/additional_3_CP.png)
5. Create a LagPort MO instance and encapsulate the previously created EthernetPort MO instances. Example crn Transport=1,LagPort=1 encapsulation Transport=1,EthernetPort=1 Transport=1,EthernetPort=2 userLabel 1,2 end
![Image](../images/36_1553-LZA7016014_1Uen.EL33B/additional_3_CP.png)

Results

The LAG is set up, and it is logically observed as a single Ethernet link.

### 2.3.3 Configuring EthernetPort MO for FEC on 25G, 50G, or 100G Ports

FEC is supported for 25G, 50G, or 100G ports. To configure FEC mode, the values of

EthernetPort.admOperatingMode attribute are used. Which FEC mode

to select depends on the physical medium and the capabilities of the Ethernet link

end-points. If both end-points supports FEC, it is recommended to use FEC to reduce the

bit error rate as much as possible.

The selected FEC mode must be configured in both end-points. Different configurations

result in a disabled Ethernet link.

See the relevant Product Description for supported FEC modes for an Ethernet

port.

Each

hardware needs to set which FEC mode to use.

The selected FEC mode can be checked on the

EthernetPort.operOperatingMode attribute.

Table 15    Attribute Values for 25G Ports

| EthernetPort.admOperatingMode Attribute                                     Values for Different FEC Modes   | Description                                                                                                                                         |
|--------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------|
| 25G_NO_FEC                                                                                                   | This value can be used if FEC is not supported by any of the                                     end-points.                                        |
| 25G_RS_FEC                                                                                                   | This value can be used to reduce the number of bit errors if an                                     Ethernet port has optical or electrical medium. |
| 25G_BASER_FEC                                                                                                | This value can be used to reduce the number of bit errors if an                                     Ethernet port has electrical medium.            |

Table 16    Attribute Values for 50G Ports

| EthernetPort.admOperatingMode Attribute                                     Values for Different FEC Modes   | Description                             |
|--------------------------------------------------------------------------------------------------------------|-----------------------------------------|
| 50G_RS_FEC                                                                                                   | 50G with Reed-Solomon (RS) FEC enabled. |

Table 17    Attribute Values for 100G Ports

| EthernetPort.admOperatingMode Attribute                                     Values for Different FEC Modes   | Description                              |
|--------------------------------------------------------------------------------------------------------------|------------------------------------------|
| 100G_NO_FEC                                                                                                  | 100G with FEC disabled.                  |
| 100G_RS_FEC                                                                                                  | 100G with Reed-Solomon (RS) FEC enabled. |

### 2.3.4 TN Port Configuration for Ports with QSFP, SFP, and RJ-45 Connectors

QSFP ports consist of 4x10 Gbps or 4x25 Gbps channels. A TnPort MO can either refer to

one of the four channels and an aggregate of all channels. The supported configurations

and port speeds depends on the product.

The TnPort with QSFP connector has the following configuration

alternatives:

- The TnPort refers to one of the four channels and can be configured as 10 Gbps, 25 Gbps, or 50 Gbps port.
- The TnPort includes all four channels by omitting channel ID and can be configured as 100 Gbps port.

The QSFP56 module consists of the following channels:

- 1x100Gbpsx4
- 4x50Gbps
- 4x25Gbps
- 4x10Gbps

Depending on the QSFP56 module capacity, it is possible to configure the 10, 25, or

50 Gbps channel on a single lane and the 100Gbps channel on four lanes. The QSFP56

module is only used for cascaded RAN Compute units.

Ports with SFP connectors have one channel and can be configured as 1, 10, 25, or 50

Gbps, depending on the Baseband product.

Ports with RJ-45 connectors do not have channels.

See the relevant Baseband Product Description for which Baseband units have QSFP, SFP,

and RJ-45 ports and supported port speeds.

Port speed is configured by the EthernetPort MO encapsulating a

TnPort MO.

See TnPort MO description for additional information on

TnPort configuration.

See EthernetPort MO description for additional information of port

configuration.

Table 18   TN Port Naming Recommendations for QSFP, SFP, or RJ-45 Connectors

Table 19   TN Port Labels to tnPortId Map for RAN Compute Group 6 Units

| TN Port Name   | TN Port Name   | Aggregate Case from tnPortId MO   |
|----------------|----------------|-----------------------------------|
| TN/IDL         | TN A           | TN_IDL_A                          |
| TN/IDL         | TN B           | TN_IDL_B                          |
| TN/IDL         | TN C           | TN_IDL_C                          |
| TN/IDL         | TN D           | TN_IDL_D                          |
| TN/IDL         | TN E           | TN_IDL_E                          |
| TN F           | TN F           | TN_F                              |

### 2.3.5 Configure Access Control Lists

ACL configuration uses the following MOs:

- InterfaceIPv4 or InterfaceIPv6
- AclIPv4 or AclIPv6
- AclEntryIPv4 or AclEntryIPv6

When ACL processes a packet, the entries in the ACL are evaluated

against the packet in sequential priority order. If an entry matches,

the action specified in the entry is applied to the packet, and evaluation

ends. The action is either permit or deny. If a packet does not match

any of the ACL entries, it is denied.

A working ACL requires two types of configuration:

- Create and configure an ACL.
- Associate the ACL with one or more IPv4/IPv6 interfaces.

An ACL without an association to an IPv4/IPv6 interface remains unused and has no effect on

traffic filtration. An ACL only filters traffic on its associated IPv4 or IPv6 interfaces.

Traffic on other IPv4 or IPv6 interfaces is not affected.

For more information about Interface, see Node Hardening Guidelines.

#### 2.3.5.1 Configure ACL to Block ICMP Packets

ACL configuration uses the following MOs:

- InterfaceIPv4
- InterfaceIPv6
- AclIpv4
- AclIpv6
- AclEntryIpv4 (for filtering ICMP packets)
- AclEntryIpv4 (default rule for IPv4)
- AclEntryIpv6 (for filtering ICMP packets)
- AclEntryIpv6 (default rule for IPv6)

Prerequisites

Target IPv4 or IPv6 interface is created.

Steps

1. Create an AclIpv4 or AclIpv6 MO instance.
2. Create an AclEntryIpv4 or AclEntryIpv6 MO instance.
3. Set AclEntryIpv4.action or AclEntryIpv6.action attribute to DENY.
4. Set AclEntryIpv4.ipProtocol or AclEntryIpv6.ipProtocol attribute to 1 to define an ICMP protocol entry.
5. Set AclEntryIpv4.icmpType or AclEntryIpv6.icmpType attribute with the required ICMP type numbers. Multiple ICMP type numbers are allowed. If icmpType contains no values, all ICMP type numbers match the entry.
6. Set AclEntryIpv4.priority or AclEntryIpv6.priority attribute to set the priority of the ACL entry relative to the other entries on the list.
7. Create a second AclEntryIpv4 or AclEntryIpv6 MO instance for the default rule.
8. To permit any other type of traffic, set AclEntryIpv4.action or AclEntryIpv6.action attribute to PERMIT for the default rule.
9. Chose ACL filtering direction by associating AclIpv4 or AclIpv6 MO instance to an IPv4 or IPv6 interface:
    - IPv4: InterfaceIPv4.aclEgress or InterfaceIPv4.aclIngress
    - IPv6: InterfaceIPv6.aclEgress or InterfaceIPv6.aclIngress

### 2.3.6 Configure Link Redundancy

Rerouting takes place when connectivity is lost to one of the neighboring

routers.

When configuring resilient routes, a virtual IP interface must be used as the IP endpoint,

not an IP interface associated with a physical port. This is because a virtual IP interface is

reachable independently of physical interface status.

Two or more alternative routes to the destination network must

be configured. Only one route at a time is in use, that is, the route

with the lowest administrative distance. When loss of connectivity

is detected, this triggers failover from the lower-cost route to a

higher-cost alternative route.

Routing resilience can be achieved by using configured static routes

or by using a dynamic routing protocol like OSPF. Many variations

are possible. The example in Configure Routing Resilience with Static Routes describes the first

of these alternatives.

The configuration described in Configure Routing Resilience with Static Routes detects loss of connectivity

only when loss of signal or other fault is detected on the physical

interface of the node.

BFD can be used to enable end-to-end detection of connectivity loss, and for fast failover.

BFD monitors end-to-end connectivity to the next-hop router. This is described in Configure Routing Resilience with BFD on Interface Level and  Configure Routing Resilience with BFD for a NextHop.

#### 2.3.6.1 Configure Routing Resilience with Static Routes

Configuration involves the following MO classes:

- Route
- RouteTableIPv4Static
- InterfaceIPv4
- InterfaceIPv6
- Dst
- NextHop

Prerequisites

Neighboring routers must have a route to the virtual IP interface address, using a physical

interface on the node as the nexthop of the route.

Steps

1. Configure a virtual IP Interface including an IP address for rerouting traffic by using an InterfaceIPv4 or InterfaceIPv6. Use this as the endpoint for the traffic that it is possible to reroute.
2. Configure at least two static routes by configuring two NextHop Mo one primary and one secondary for the same destination using Dst Mo instances. The primary route to a given destination network must have the lowest administrative distance.

#### 2.3.6.2 Configure Routing Resilience with BFD on Interface Level

Configuration involves the following MO classes:

- InterfaceIPv4
- InterfaceIPv6
- bfdProfile
- BfdSessionIPv4
- BfdSessionIPv6
- NextHop (for RtnRoutesStaticRouteIPv4)
- NextHop (for RtnRoutesStaticRouteIPv6)

Prerequisites

BFD monitoring must be enabled on the neighboring routers.

Steps

1. Create a BFD Profile with a BfdProfile MO instance.
2. Associate the BFD Profile with the IP Interface to enable BFD monitoring of all static routing nexthops reachable on a given IP interface. This automatically creates the needed BFD sessions. Each BFD session is represented by a BfdSession MO instance created by the system.

#### 2.3.6.3 Configure Routing Resilience with BFD for a NextHop

Configuration involves the following MO classes:

- InterfaceIPv4
- InterfaceIPv6
- bfdProfile
- BfdSessionIPv4
- BfdSessionIPv6
- NextHop (for RtnRoutesStaticRouteIPv4)
- NextHop (for RtnRoutesStaticRouteIPv6)
- PeerIPv4
- PeerIPv6

Prerequisites

BFD monitoring must be enabled on the neighboring routers.

Steps

1. Create a BFD Profile with a BfdProfile MO instance.
2. Enable BFD monitoring for an individual nexthop router with a PeerIPv4 or PeerIPv6 MO instance. This enables monitoring enabled towards the nexthop router with an address that corresponds the address of the Peer MO. Each BFD session is represented by a BfdSession MO instance created by the system. Even when a NextHop is monitored by BFD, to determine the availability of a particular route, each individual route has to be monitored separately in the BFD session. This is controlled by the attribute bfdMonitoring under each individual route of the NextHop MO instance.

### 2.3.7 Separate DNS Server for a Specific DNS Domain

This configuration involves the DnsClient and

DomainFilter MO classes.

It is possible to filter out DNS requests for specific domains and send them to different

servers based on the domain. This is done by configuring the DomainFilter

MO as a child to the DnsClient MO, with a list of domains and a list of DNS

servers.

The recommended solution is to have one DNS server or a group of DNS servers that provide all

DNS resolution in the network, that is, all DNS servers can resolve all relevant DNS

requests.

However, sometimes this is not feasible, and a solution where DNS requests for some DNS

domains need to be sent to a specific DNS server. For example, one group of DNS servers needs

to provide DNS lookup and reverse lookup for the 3gppnetwork.org domain. Another group has to

handle DNS lookups for the operator.org domain, where there is no need to support reverse

lookups.

If a request matches a domain in the domain attribute of the

DomainFilter MO, the request is sent to the servers in the

serverAddress

list of the

DomainFilter MO, otherwise it is sent to

serverAddress list of the DnsClient MO.

For the example above, a solution is to configure the DNS servers for 3gppnetwork.org and

reverse lookups in the serverAddress list of the

DnsClient MO. Then a DomainFilter is created with the

domain attribute set to operator.org and the serverAddress with the address

to the DNS servers handling that domain.

### 2.3.8 Configure Ethernet OAM Service

Configuration involves the following MO classes:

- EthernetOamLocalMep
- EthernetOamRemoteMep

To implement this configuration, do the following:

Steps

1. Configure Ethernet OAM Service by creating one or more EthernetOamLocalMep referring to an EthernetPort or a VlanPort.
2. Configure zero or more EthernetOamRemoteMep connected to an EthernetOamLocalMep.

### 2.3.9 Configure Path MTU Discovery

Path MTU Discovery (PMTUD) is enabled for IPv6 traffic. The Path MTU (PMTU) is equal to

the smallest MTU existing on a path from the source to the destination. If the PMTU is

smaller than the MTU of the outgoing IP interface of the source node, this is detected

by MTU information received in ICMP Packet Too Big

messages. These messages are triggered when a packet is dropped because of being larger

than the MTU anywhere on the path. After receiving such a message, the PMTU information

stored in the source node is updated to reflect the MTU in the ICMP Packet

Too Big message.

After a certain time, the PMTU information in the source node is initialized again with

the MTU of the outgoing interface. A potential increase of the PMTU in the network can

therefore be detected in this way. This procedure is known as PMTU probing. The

pathMtuExpiresIPv6 attribute controls the time from when an

ICMP Packet Too Big message is received to the removal

of this information in the node resulting in the initialization of the interface MTU.

The default attribute value is 86400 (given in seconds, which equals 24 hours).

This configuration involves the Router MO class.

When configuring pathMtuExpiresIPv6, consider the following

guidelines:

- A larger value of the probing timer means longer time to detect an increased PMTU value.
- A smaller value of the probing timer increases the frequency of packet drops if the PMTU value has not changed.
- A configuration change affects new entries. Existing entries can behave as follows: The pre-existing entries are discarded. The pre-existing entries remain until time-out, according to previous timer settings. The pre-existing entries use a new time-out value.

The CLI command show pmtu-cache displays the information in the PMTU

cache table.

### 2.3.10 Jumbo Frames and IP MTU

The Jumbo Frames feature allows Ethernet frames with a maximum payload length of 9000

bytes. An Ethernet jumbo frame is defined as having a payload larger than 1500 bytes.

The maximum payload size can be configured in the InterfaceIPv4.mtu

and InterfaceIPv6.mtu attributes. Using a larger MTU size for the IP

interfaces can have a negative effect on the performance.

Related Information

Jumbo Frames

### 2.3.11 Configure Dynamic IPv4 Address Allocation

For the autoconfiguration of the IP address, the

AddressIPv4.configurationMode attribute must be set to

DHCP.

If this option is selected, the IP configuration parameters are obtained from the DHCPv4

server available on the connected network.

The configuration parameters include the following information:

- IP address
- Prefix length
- Default route
- DNS server address
- Domain name

When the node is configured through DHCP, the

InterfaceIPv4.operationalState becomes ENABLED.

Then the IP configuration can be used for sending or receiving traffic.

The IP address can be used as local IP address for one of the following:

- Synchronization of NTP or PTP
- TWAMP
- OAM access point

This configuration is not applicable for the loopback interface. For IPsec, this

configuration is only applicable for the outer IP interface.

This configuration is not supported on the following RAN interfaces:

- S1
- X2
- NG
- Xn

#### 2.3.11.1 DHCPv4 Client Identifier Option

When the AddressIPv4.configurationMode attribute is set to

DHCP, the Client Identifier option in the DHCPv4

messages is set depending on the value of the

AddressIPv4.dhcpClientIdentifierType attribute. The attribute can

be set by the following values:

- AUTOMATIC
- AUTOMATIC\_MAC
- AUTOMATIC\_SERIAL\_NUMBER
- MANUAL
- NO\_CLIENT\_IDENTIFIER

### 2.3.12 Configure Dynamic IPv6 Address Allocation

For the autoconfiguration of the IP address, the

AddressIPv6.Ipv6ConfigMode attribute must be set to one of the

following values:

- AUTO
- AUTO\_DHCPV6
- AUTO\_NO\_DHCPV6

If one of these options is selected, the IP configuration parameters are obtained from

the following sources:

- NDP Router Advertisement messages from routers
- DHCPv6 server available on the connected network

The configuration parameters include the following information:

- IP address
- Prefix length
- Default route
- DNS server address
- Domain name

The selected source depends on the content of the received NDP RA messages and the

selected configuration mode. The client listens for the messages on UDP port 546.

When the node is configured through IPv6 autoconfiguration protocols (SLAAC or DHCPv6),

the InterfaceIPv6.operationalState attribute becomes

ENABLED. Then, the IP configuration can be used for sending or

receiving traffic. The autoconfiguration protocol can be SLAAC or DHCPv6.

The IP address can be used as local IP address for one of the following:

- Synchronization of NTP or PTP
- TWAMP
- OAM access point

This configuration is not applicable for the loopback interface. For IPsec, this

configuration is only applicable for the outer IP interface.

This configuration is not supported on the following RAN interfaces:

- S1
- X2
- NG
- Xn

#### 2.3.12.1 DHCPv6 Client Identifier Option

When the AddressIPv6.configurationMode attribute is set to

AUTO or AUTO\_DHCPV6, the DUID part of the

Client Identifier option in the DHCPv6 messages is set depending on

the value of the AddressIPv6.duidType attribute. The attribute can be

set by the following values:

- DUID\_LLT
- DUID\_EN
- DUID\_EN\_SERIAL\_NUMBER

### 2.3.13 LLDP Operation

The support of the Link Layer Discovery Protocol (LLDP) is based on the IEEE 802.1AB

specification. LLDP is a layer 2 protocol that allows nodes on a LAN to advertise

identity information to other directly attached nodes. LLDP RX mode is available in the

Baseband Radio Node to gather information about neighbor devices. LLDP TX mode allows the Baseband Radio Node to send its

own corresponding information to its neighbors. When LLDP RX is enabled, the

Baseband Radio Node receives LLDP frames on any Ethernet port from any other directly

connected node . LLDP frames are

transmitted on the Ethernet ports where LLDP TX is enabled.

The information fields in each LLDP frame are contained in variable length information

elements, that each include type, length and value fields (TLVs). The Baseband Radio

Node transmits the following LLDP TLVs and information through the interfaces where LLDP

TX is enabled:

Table 20   LLDP Information Sent in LLDP TX Mode

| LLDP TLV           | Description                                                                                                                                                      |
|--------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Chassis ID         | The MAC address of the node.                                                                                                                                     |
| Port ID            | The MAC address of the transmitting port.                                                                                                                        |
| TTL                | A value of 120 seconds and a refresh cycle of 30 seconds are                                 used.                                                               |
| Port description   | The name of the transmitting port.                                                                                                                               |
| System Name        | The Baseband Radio Node name is set in the                                     ManagedElement.networkManagedElementId                                 attribute. |
| System Description | The Baseband Radio Node model name.                                                                                                                              |

In LLDP RX mode, the Baseband Radio Node receives the LLDP TLV information depending on

the information transmitted from the neighbor.

The LLDP protocol uses Ethertype 0x88CC. The Baseband Radio Node supports LLDP frames

containing the LLDP protocol and using the destination group MAC address. The address is

named the nearest bridge (01-80-C2-00-00-0E), as specified in the IEEE standard. Frames

received with this multicast address are terminated by the Baseband Radio Node. The

Baseband Radio Node also terminates frames that are received on an Ethernet port in

bridging mode. LLDP frames are not forwarded by the bridge.

#### 2.3.13.1 Configure LLDP RX

LLDP RX is enabled by creating the LLDP MO.

Prerequisites

- The EthernetPort MO is created.

Steps

1. Create the LLDP MO.

Results

The LLDP RX mode is enabled.

#### 2.3.13.2 Configure LLDP TX

LLDP TX mode can be enabled and disabled on each port separately where LLDP RX is

enabled.

Prerequisites

- The LLDP MO is created.
- The EthernetPort MO is created.
- The Baseband Radio Node name is set in the ManagedElement.networkManagedElementId attribute.

Steps

1. Set the EthernetPort.LldpTransmit attribute to ENABLED.

Results

LLDP TX mode is enabled on the configured ports.

#### 2.3.13.3 LLDP Monitoring

LLDP is monitored by the following ECLI commands:

- show lldp
- show lldp neighbors
- show lldp statistics

Show LLDP

The show lldp command is used to show the status of the LLDP

global configuration, including LLDP operational mode and the ports enabled for

LLDP.

Show LLDP Neighbors

The show lldp neighbors command is used to list the information

available in the LLDP neighbor database for each port. The available information

includes the local port and the information received in the type-length values

(TLVs) from the neighbor on the local port. The included information depends on the

type of information the neighbor sends out.

Show LLDP Statistics

The show lldp statistics ECLI command is used to display LLDP

statistics such as packets, errors and neighbor changes.

### 2.3.14 Transport Automation Agent

The Transport Network Agent in the Baseband Radio Node is the enabler for automation

services in the transport network. The agent communicates with an automation server, the

TIF node. The TIF has a connection to and knowledge of the transport network through an

SDN Controller.

The Elastic RAN Transport Automation service is supported, enabling automation of E-RAN

transport network connectivity between Baseband units.

The Transport Network Agent In the Baseband Radio Node communicates with TIF over the Ni1

interface using the TCP port 5670. TLS-based authentication, encryption, and decryption

mechanism is available on the Ni1 interface. The information exchanged over Ni1 includes

Baseband Radio Node neighbor topology information and E-RAN path requests. The Baseband

Radio Node neighbor topology contains the names and ports of connected nodes. The

topology is collected through received neighbor information from the LLDP function. The

E-RAN path request contains the source and destination addresses of the Baseband Radio

Nodes and the VLAN to be used.

When the TIF receives topology and path information from the Baseband Radio Node, the TIF

determines the configuration needs in the transport network and creates paths by

provisioning overlay L2VPN services through the SDN Controller.

For more information on Elastic RAN Transport Automation, see the following documents:

- Elastic RAN Transport Automation
- Elastic RAN Transport Automation Solution Guideline

#### 2.3.14.1 Configure Transport Automation Agent

Prerequisites

- The Baseband Radio Node name is set in the ManagedElement.networkManagedElementId attribute.

Steps

1. To enable the Transport Automation Agent operation in the Baseband Radio Node, create the following attributes: TransportAutomationAgent.localIpAddress TransportAutomationAgent.serverAddress Result: After the configuration, the Baseband Radio Node attempts to connect to the TIF.
    - To secure the communication over Ni1 with TLS, set the following attributes: TransportAutomationAgent.nodeCredential TransportAutomationAgent.trustCategory
2. To activate the Elastic Ran Transport Automation feature, set the TransportAutomationAgent.elasticRan attribute to ENABLED. Result: After the configuration, a request is sent to TIF to enable the Elastic RAN Transport Automation feature for the Baseband Radio Node.
3. To monitor the connection between the Baseband Radio Node and TIF, use the following attributes: TransportAutomationAgent.operationalState TransportAutomationAgent.availabilityStatus

### 2.3.15 Port-Based Authentication

Port-Based Authentication is a way of authenticating one or

several cascaded Baseband Radio Nodes that request connection to the inner secure

network. The nodes are authenticated through an 802.1X Authenticator connected to an

Authentication Server.

802.1X Supplicant functionality enables the authentication

towards an external Authenticator. Baseband Radio Node works as 802.1X Supplicant on

transport network ports for autointegration as well as for normal operation.

802.1x Authenticator functionality enables the authentication

of cascaded Baseband Radio Nodes or other site equipments. In this case, the first

authenticated Baseband Radio Node acts as Authenticator towards the connected other

Supplicants.

Authentication Server must be configured to enable EAP-TLS port authentication. It must

accept Ericsson certificates, used for Vendor Credential signing. Authenticator is to be

configured to support Port-Based Authentication, used by a Supplicant, irrespectively of

source and destination MAC address or VLAN.

If Port-Based Authentication fails, troubleshooting is performed on the Authentication

Server and on the Authenticator. Information about authentication attempts is stored in

the security log.

If the authentication fails, the Port-Based Authentication Failure alarm is raised.

Port-Based Authentication provides authentication, but no

encryption, or authentication of user data. This can be used together with IPsec, or

without IPsec as well.

### 2.3.16 Multiple IP Addresses on the Same VLAN

A maximum of four IP addresses can be set manually under the same

InterfaceIPv4 MO.

Multiple IPv4 Address Configuration

The IPv4 addresses set under the same InterfaceIPv4 MO can belong

to different, non-overlapping or identical subnets. One IPv4 address must be set as

the primary address.

1. Up to four AddressIPv4 MOs are created.
2. The AddressIPv4.configurationMode attribute is set to MANUAL for each AddressIPv4 MO.
3. The AddressIPv4.primaryAddress attribute is set to false for all except one AddressIPv4 MOs.

Table 21   Parameters

| Parameter                     | Type       | Description                                                                                                            |
|-------------------------------|------------|------------------------------------------------------------------------------------------------------------------------|
| InterfaceIPv4.AddressIPv4     | Affected   | Up to 4 AddressIPv4 MOs can be created under                                     one instance of the InterfaceIPv4 MO. |
| AddressIPv4.configurationMode | Affected   | The attribute has to be set to MANUAL for each                                         AddressIPv4 MO.                 |
| AddressIPv4.primaryAddress    | Introduced | The attribute has to be set to false for all                                     except one AddressIPv4 MOs.           |

Multiple IPv6 Address Configuration

The IPv6 addresses set under the same InterfaceIPv6 MO can belong

to different, non-overlapping or identical subnets. One IPv6 address must be set as

the primary address.

1. Up to four AddressIPv6 MOs are created.
2. The AddressIPv6.configurationMode attribute is set to MANUAL for each AddressIPv6 MO.
3. The AddressIPv6.primaryAddress attribute is set to false for all except one AddressIPv6 MOs.

If the IP application does not provide source IPv6 address, and if the IPv6 addresses

configured for a VLAN do not belong to the same subnet, the source address might not

belong to the same subnet as the next hop address.

Table 22   Parameters

| Parameter                     | Type       | Description                                                                                                            |
|-------------------------------|------------|------------------------------------------------------------------------------------------------------------------------|
| InterfaceIPv6.AddressIPv6     | Affected   | Up to 4 AddressIPv6 MOs can be created under                                     one instance of the InterfaceIPv6 MO. |
| AddressIPv6.configurationMode | Affected   | The attribute has to be set to MANUAL for each                                         AddressIPv6 MO.                 |
| AddressIPv6.primaryAddress    | Introduced | The attribute has to be set to false for all                                     except one AddressIPv6 MOs.           |

### 2.3.17 Backhaul Turn Up Testing

The Backhaul Turn Up Testing can verify if the transport network provides the expected

bandwidth before putting a new RBS into service.

This feature is enabled and controlled by using the ranperf Ericsson

CLI command.

It is required to use an external iPerf3 server to perform the throughput measurement.

The performance of the network is measured between the RBS and another network location

chosen by the operator. Because of this, the iPerf3 server must be located at that

network location.

### 2.3.18 Separate DNS Server for a Specific Operator in Shared RAN

A

separate DNS server for a specific operator in shared RAN involves the configuration of

the DnsClient MO in the dedicated RAN traffic

Router MO for that operator.

The DnsClient.serverAddress attribute is set to the IPv4 or IPv6

address of a specific DNS server.

One DNS server or a group of DNS servers that provide all DNS resolution can be in the

same network for a specific operator, which means that all DNS servers can resolve all

relevant DNS requests. For LTE, see transport configuration examples in RAN Traffic and OAM Traffic on Different VLANs with the

Separation of IP Domains among Common CP for (X2 and S1)/S1 UP/DNS, Common X2 UP,

Additional S1 CP, Additional S1 UP, Additional X2 UP and Additional DNS on a

Baseband Node for LTE. For NR, see NR SA Connectivity Guideline with Option

2.

### 2.3.19 Disable Processing of Packets with IP Options

IP options can be used in a harmful way to circumvent routing tables and firewalls. For

node security hardening, it is recommended to disable processing of IP packets with IP

options, that effects IP packets including one or more IP options in the IP header are

dropped.

The InterfaceIPv4.ipIfStatsIpOptDroppedPkts PM counter can be used to

count all dropped packets which contain IP options in IP header.

Packets dropped because of disabling processing of IP options and packets dropped with

unsupported IP options are logged in TnNetworkLog with rate limit

applied to log entries.

Disable Processing of Packets with IPv4 Options

The IP options processing is enabled by default. It is recommended to set the

InterfaceIPv4.ipOptionsDisabled to true, the

only exception is for maintenance or troubleshooting purposes, the

InterfaceIPv4.ipOptionsDisabled can be set to

false for a limited time.

When the InterfaceIPv4.ipOptionsDisabled attribute is set to

true, all IP packets with IPv4 options are dropped.

When the InterfaceIPv4.ipOptionsDisabled attribute is set to

false, only IP packets with the supported IPv4 options are

allowed. The supported IPv4 options are as follows:

- End-of-Option-List
- No Operation
- Router Alert

Table 23   IPv4 Elements

## 2.4 Reconfigure Transport Network

It is possible to reconfigure the transport network. To avoid loss of contact with the node

caused by configuration mistakes, it is recommended to activate the failsafe backup before the

reconfigurations. For more details, see Manage

Software.

If an attribute is changed that causes a traffic disturbance such as the IP address in

attribute address on MO AddressIPv4 or

AddressIPv6, the following apply:

- For LTE, if the configuration change causes a traffic disturbance for the IP address used by S1/X2: A reconfiguration or dynamic change of the IP address on S1/X2 can cause the release of the UEs. By default no eNodeB restart is performed in case of an IP address update. A dynamic change of IP address can occur if the IP address is retrieved from a network using IKEv2 configuration payload. The usage of DHCP and SLAAC is not supported on LTE RAN interfaces.
- For WCDMA, if the configuration change causes a traffic disturbance for the IP address used by Iub: The local cells have to be locked before changing the attribute. For instructions on how to lock a cell, see Manage Radio Network. The node must be restarted to allow the reconfiguration to take effect. Note: A local cell is created in the NodeB and represents the equipment in the NodeB used by a cell. Local Cell has no state over Iub, it is either in state Existing or Non existing. Identified by the Local Cell Id.
- For NR, it depends on which interface: For S1 and NG-U, the IP address change causes a traffic disturbance: A reconfiguration or dynamic change of the IP address can cause the release of the UEs. By default no gNodeB restart is performed in case of an IP address update. A dynamic change of IP address can occur if the IP address is retrieved from a network using IKEv2 configuration payload. The usage of DHCP and SLAAC is not supported on NR RAN interfaces. For NG-C, Xn, and X2, the IP address cannot change without restarting the gNodeB.
- For GSM, if the configuration change causes a traffic disturbance for the IP address used by Abis: The Trxs have to be locked before changing the attribute. For instructions on how to lock a Trx, see Manage Radio Network GSM. By default no BtsFunction restart is performed in case of an IP address update.

Traffic disturbance for the above scenarios happens when for instance changing attributes in

MO InterfaceIPv4, InterfaceIPv6,

VlanPort, AddressIPv4 and

AddressIPv6, but can also occur for other attributes as per details in

Managed Object Model (MOM).

If the IP address used by OAM traffic is changed in attribute address on

MO AddressIPv4 or AddressIPv6, the following

prerequisites apply:

- The reconfiguration process has to be coordinated with the NOC.

## 2.5 Migration from IPv4 to IPv6 for Baseband Radio Node

This section describes the main steps in the migration process of IPv6 deployment for

Baseband Radio Node.

Prerequisites

The following prerequisites must be fulfilled:

- The EPC supports dual stack.
- The transport network is IPv6-capable.
- eNodeB is operational with IPv4 transport connectivity.

Steps

1. Note: The SctpProfile attribute maxSctpPduSize must be set to 1460 if IPv6 is used, see Manage SCTP. Create the MOs SctpProfile, InterfaceIPv6 and AddressIPv6, and the default route.
2. Create SctpEndpoint for IPv6.
3. Update the attribute sctpRef in MO ENodeBFunction with a reference to the newly created SctpEndpoint holding the IPv6 address.
4. Create additional SctpEndpoint for IPv6 for X2AP if SctpEndpoint has been separated between S1AP and X2AP.
5. Update the attribute sctpX2Ref in MO ENodeBFunction with the reference to the newly created SctpEndpoint holding the IPv6 address for X2AP if SctpEndpoint has been separated between S1AP and X2AP.
6. Update the attribute upIpAddressRef or upIpAddress2Ref in MO ENodeBFunction with references to the newly created AddressIPv6 holding the IPv6 address.
7. For each MO of type TermPointToMme, set the following attributes: ipv6Address1: set a valid IPv6 address to the MME. ipv6Address2: set this to a valid MME address if multi-homing is used. ipAddress1: set to 0.0.0.0 ipAddress2: set to 0.0.0.0
8. For each MO of type TermPointToENB, set the following attributes: ipv6Address: a valid IPv6 address to the remote eNodeB. ipAddress: the IPv4 address field should be set to 0.0.0.0
9. Create a backup and restart the node. The traffic is not moved to IPv6 until after the restart.

Results

Verify that the node functions properly by ensuring the following:

- The operationalState for the TermPointToMme MO is ENABLED.
- The SctpAssociation MO is created.
- The EUtranCellFDD MOs are ENABLED.
- There are no alarms.
- The operationalState of InterfaceIPv6 MO is ENABLED.
- Verify the IPv6 connectivity by pinging the IPv6 address of one of the MMEs. Use the CLI command ping6 for IPv6.
- If possible, also make a test call or verify with performance counters that the eNodeB performs as expected (no service degradation compared to the IPv4 case).

When the node has been restarted and the node functions properly, the following

MOs can be removed:

- SctpEndpoint used by AddressIPv4 (the one containing the IPv4 address)
- AddressIPv4
- SctpProfile used by AddressIPv4
- InterfaceIPv4

The node is operational in IPv6 mode on the control and user plane traffic

interface.

## 2.6 Migration from Single-Stack to IPv4 and IPv6 Dual-Stack for X2 Configuration

The IPv4 and IPv6 Dual-Stack for X2 feature can be used to migrate a large LTE

network from IPv4 to IPv6 without losing the X2 interface support.

The migration can be done in two steps. They are the following:

- Migration from IPv4 single-stack to IPv4 and IPv6 dual-stack for X2
- Migration from IPv4 and IPv6 dual-stack to IPv6 single-stack for X2

It is possible to migrate from single-stack to IPv4 and IPv6 dual-stack for X2

configuration in the following orders:

- It can be done by first configuring the X2-C interface and then the X2-U interface.
- It can be done by first configuring the X2-U interface and then the X2-C interface.

To have full X2 dual-stack function, both X2-C and X2-U must be migrated. Control plane

and user plane separation is also supported. It is possible to migrate only the X2-C or

only the X2-U interface. If X2-C is migrated only, X2-U uses IPv4 for packet forwarding.

If X2-U is migrated only, X2 connections are established with IPv4.

Related concepts

Migration from IPv4 to IPv6 for X2 in Neighbor eNodeB

Related tasks

Migrate from Single-Stack to IPv4 and IPv6 Dual-Stack for X2 by Configuring X2-C First

Migrate from Single-Stack to IPv4 and IPv6 Dual-Stack for X2 by Configuring X2-U First

Migrate from IPv4 and IPv6 Dual-Stack to IPv6 Single-Stack for X2

### 2.6.1 Migrate from Single-Stack to IPv4 and IPv6 Dual-Stack for X2 by Configuring X2-C First

The configuration of the local IP addresses must be performed manually by OSS.

Prerequisites

- The EPC supports 160-bit coding of Transport Layer Address according to 3GPP TS 36.414.
- The neighbor eNodeB supports 160-bit coding of Transport Layer Address according to 3GPP TS 36.424.
- The transport network is IPv6-capable.
- The eNodeB is operational with IPv4 transport connectivity.
- The InterfaceIPv6 MO is configured for direct X2 IPsec outer address and theoperationalState attribute has the ENABLED value.

Steps

1. Configure the local SctpEndpoint MO. The SctpEndpoint.localIpAddress attribute must contain the list of two IP addresses, where one is IPv4 and other is IPv6. The order of occurrence in the list is not relevant.
2. Commit the changes. All X2-C connections with IPv4 nodes or dual-stack eNodeBs are closed and then restored. Primary IP address for X2 connections with dual-stack eNodeBs can be IPv4 or IPv6. Packet forwarding and inter-eNodeB carrier aggregation are possible with all IPv4 neighbor eNodeBs (with active X2 connection). Note: Packet forwarding and inter-eNodeB carrier aggregation with new IPv6 neighbors is not possible until local X2-U is reconfigured.
3. Configure the X2-U addresses with the ENodeBFunction.upX2IpAddressRef and the ENodeBFunction.upX2IpAddress2Ref attributes. The attributes must be set to reference IPv4 and IPv6 addresses. It is irrelevant which reference is used for which IP version.
4. Commit the changes.
5. Restart the node. The update takes effect after node restart.

If direct X2 IPsec is configured:

6. Configure the direct X2 IPsec outer addresses with the ENodeBFunction.ipsecEpAddressRef and ENodeBFunction.ipsecEpAddress2Ref attributes. The attributes must be set to reference IPv4 and IPv6 addresses. It is irrelevant which reference is used for which IP version.
7. Commit the changes.

Results

- Dual-stack configuration is enabled.
- Packet forwarding and inter-eNodeB carrier aggregation are possible with all neighbor EnodeBs (with active X2 connection).
- Direct X2 IPsec VPN connections with IPv4 and IPv6 neighbor eNodeBs are enabled.
- Existing X2 connections with neighbors are reestablished.
- The eNodeB is ready to establish new X2 connections with neighbor eNodeBs that use IPv4 or IPv6.

### 2.6.2 Migrate from Single-Stack to IPv4 and IPv6 Dual-Stack for X2 by Configuring X2-U First

The configuration of the local IP addresses must be performed manually by OSS.

Prerequisites

- The EPC supports 160-bit coding of Transport Layer Address according to 3GPP TS 36.414.
- The neighbor eNodeB supports 160-bit coding of Transport Layer Address according to 3GPP TS 36.424.
- The transport network is IPv6-capable.
- The eNodeB is operational with IPv4 transport connectivity.
- TheInterfaceIPv6 MO is configured for direct X2 IPsec outer address and the operationalState attribute has the ENABLED value.

Steps

1. Configure X2-U addresses with the ENodeBFunction.upX2IpAddressRef and the ENodeBFunction.upX2IpAddress2Ref attributes. They must be set to reference IPv4 and IPv6 addresses. It is irrelevant, which reference is used for which IP version.
2. Commit the changes.
3. Restart the node. Note: X2 connection with new IPv6 neighbors is not possible until local X2-C is reconfigured. All X2 connections with IPv4 neighbor eNodeBs are established again. Packet forwarding and inter-eNodeB carrier aggregation are possible with all IPv4 and IPv6 neighbor eNodeBs (with active X2 connection).

If Direct X2 IPsec is configured:

4. Configure the direct X2 IPsec outer addresses with the ENodeBFunction.ipsecEpAddressRef and ENodeBFunction.ipsecEpAddress2Ref attributes. The attributes must be set to reference IPv4 and IPv6 addresses. It is irrelevant which reference is used for which IP version.
5. Commit the changes. Result: Direct X2 IPsec VPN connections with IPv4 and IPv6 neighbor eNodeBs are established again.
6. Configure the local SctpEndpoint MO. The SctpEndpoint.localIpAddress attribute can contain the list of two IP addresses, where one is IPv4 and other is IPv6. The order of occurrence in the list is not relevant.
7. Commit the changes.

Results

- Dual-stack configuration is enabled.
- Packet forwarding and inter-eNodeB carrier aggregation are possible with all IPv4 and IPv6 neighbor eNodeBs (with active X2 connection).
- Direct X2 IPsec VPN connections with IPv4 and IPv6 neighbor eNodeBs are possible.
- Existing X2 connections with neighbor eNodeBs are reestablished.
- The node is ready to establish new X2 connections with neighbor eNodeBs that use IPv4 or IPv6.

### 2.6.3 Migrate from IPv4 and IPv6 Dual-Stack to IPv6 Single-Stack for X2

Prerequisites

- The node is configured with IPv4 and IPv6 Dual-Stack X2 interface (X2-C and X2-U).
- X2 connections are established between the dual-stack eNodeB and neighboring eNodeBs that use IPv6 or dual-stack X2 configuration.

Steps

1. Configure the local SctpEndpoint MO. The SctpEndpoint.localIpAddress attribute can contain one or two IPv6 addresses.
2. Commit the changes. Result: All connections with IPv6 and dual-stack neighbor eNodeBs are restored. IPv6 address is used for all SCTP associations. Packet forwarding and inter-eNodeB carrier aggregation are possible with all IPv4 and IPv6 neighbor eNodeBs (with active X2 connection). The node is ready to establish new X2 connections with IPv6 neighbor eNodeBs.
3. Set the ENodeBFunction.upX2IpAddress2Ref attribute to NULL pointer.
4. Set the ENodeBFunction.upX2IpAddressRef or any equivalent attribute to refer to the IPv6 address.
5. Commit the changes.
6. Restart the node. The update takes effect after node restart.

If direct X2 IPsec is configured:

7. Configure the direct X2 IPsec outer addresses by setting the ENodeBFunction.ipsecEpAddress2Ref attribute to NULL and the ENodeBFunction.ipsecEpAddressRef attribute to refer to the IPv6 address.
8. Commit the changes.

Results

- Packet forwarding and inter-eNodeB carrier aggregation are possible with IPv6 neighbor eNodeBs (with active X2 connection).
- The eNodeB is configured with an IPv6-only X2 interface.
- The existing X2 connections with neighbor eNodeBs using IPv6, or IPv4 and IPv6 dual-stack are reestablished.
- X2 connections with IPv4-only neighbor eNodeBs are removed.
- The eNodeB is ready to establish new X2 connections with IPv6-capable neighbor eNodeBs.

### 2.6.4 Migration from IPv4 to IPv6 for X2 in Neighbor eNodeB

Neighbor eNodeB migration is possible if the local eNodeB is configured with X2

dual-stack and the remote eNodeB is configured with IPv4, and X2 connection is

established between nodes.

1. If direct X2 IPsec is configured, the peer node changes the references for direct X2 IPsec outer address from IPv4 to IPv6 and commits the changes. The direct X2 IPsec VPN connection is established again with IPv6, direct X2 IPsec outer address.
2. The peer eNodeB changes the references for X2-C and X2-U from IPv4 to IPv6 and restarts node for the changes to take effect.
3. After peer node restart, new IPv6 SCTP association is established between the peer nodes. Old IPv4 association and GTP-U tunnels are removed.
4. Packet forwarding is possible between nodes, IPv6 is used.

The local node is dual-stack and the remote node is IPv6, reconfigured from IPv4. X2

connection is established between nodes.

## 2.7 Migration from IPv4 to IPv6 for Abis Interface

This section describes the main steps in the migration process of IPv6 deployment for

Abis interface.

Prerequisites

The following prerequisites must be fulfilled:

- The transport network is IPv6-capable.
- Abis is operational with IPv4 transport connectivity.

Steps

1. Check if the baseband software supports IPv6 for GSM. If not, upgrade the software to the required version.
2. Install the GSM IPv6 for Baseband feature license.
3. Lock all AbisIp instances.
4. Reconfigure all AbisIp instances to IPv6.
5. Unlock the AbisIp instances.
6. Check that all GSM sectors can connect to BSC and carry traffic.
7. Manually delete all older software backups not supporting IPv6 for GSM. Note: This step is optional but necessary for GSM to avoid rollback to legacy software version only supporting IPv4 which might happen in some special cases. If this rollback happens, the Baseband nodes will not be able to connect with BSC without manual intervention. If the operators keep the older software backups, there will be the risk of rollback to IPv4 configuration and GSM service lost.
8. Make an additional software upgrade to newer software supporting IPv6 for GSM. Note: This step is optional but useful for GSM to have a backup IPv6 software. If the operators don't make an additional software upgrade, there will be the risk of no IPv6 software backup on the baseband.

# 3 Troubleshoot Transport Network

For detailed information about troubleshooting the transport network, see Transport Network Troubleshooting Guideline.

## 3.1 Log Handling

This section describes the logs available in the Transport Network

log. Refer to Manage Software for how to collect the TnNetworkLog and the

TnApplicationLog.

### 3.1.1 TnNetworkLog

This log contains the following information:

- Downlink and uplink events on the Physical Link
- Cache alerts of events, when the IPv4 ARP or IPv6 NDP caches are full.
- Duplicate address detection events, if a link-configured or a locally configured IPv6 address is detected on the connected link.
- Information regarding CCMs that cause defects
- DHCP events
- GTP-U events
- Packets dropped because of utilizing unsupported IP options
- Packets dropped because of disabling processing of IP options

### 3.1.2 TnApplicationLog

This log contains the following information:

- BFD session events, such as INIT, UP, DOWN, ADMIN\_DOWN, and information related to when the BFD session is created, deleted, or updated.

### 3.1.3 PacketCaptureLog

This log is used for the Packet Capture feature, which allows remote packet capturing at

an interface level and remote frame capturing at a port level. The log can be exported

to a remote SFTP server with CLI command export under the

PacketCapture MO.

The log file is encrypted with the passphrase parameter of the CLI

command, and can be decrypted using the openssl command openssl enc

-aes-256-ctr -d -in &lt;encrypted\_file&gt; -out &lt;decrypted\_file&gt; -k

&lt;passphrase&gt; -md md5.

## 3.2 Duplicate IPv6 address

When a duplicate address is detected on the connected link, it must be resolved by performing

a new DAD procedure after the fault has been corrected on the connected link.

- If the global address on the node is changed, the DAD procedure will be performed automatically.
- The link-local address on this node can only be changed by replacing the board, the DAD procedure will be run again after board start-up.
- If the global address or link-local address on the other node is changed, a DAD procedure must be initiated on this node. This is done by reconfiguring the mtu attribute of the InterfaceIPv6 MO instance that contains the global address.

## 3.3 Fault Management

For information on fault management, see Manage

Faults and the respective alarm OPIs.

## 3.4 Performance Management

For information on performance management, see Manage Performance and Transport Network Performance

Indicators.

## 3.5 License Management

For information on license management, see Manage Licenses and Hardware Activation Codes.