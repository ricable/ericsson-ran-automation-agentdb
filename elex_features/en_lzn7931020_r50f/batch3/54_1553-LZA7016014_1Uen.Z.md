---
complexity_score: 9.5
converted_at: '2025-08-13T06:59:10.540908Z'
file_type: html
format: html
image_processing_enhanced: true
images_extracted: 3
images_saved: 3
original_path: 54_1553-LZA7016014_1Uen.Z.html
pictures_extracted: 3
processing_method: docling_multimodal
quality_score: 9.0
source_file: 54_1553-LZA7016014_1Uen.Z.html
source_zip: en_lzn7931020_r50f.zip
tables_extracted: 4
zip_image_types:
- .svg
- .png
- .gif
- .jpg
- .bmp
zip_images_total: 1244
---

# 

Manage Routing Features

Contents

![Image](../images/54_1553-LZA7016014_1Uen.Z/additional_3_CP.png)

![Image](../images/54_1553-LZA7016014_1Uen.Z/additional_3_CP.png)

- Description
    - Overview
    - Static Routing Overview
    - OSPF Overview
    - PBR Overview
    - Managed Object Model Overview
- Procedures
    - Configuration of OSPFv2 in the Baseband
    - Configuration of PBR in the Outer Router
    - Configuration of PBR in the Inner Router
- Troubleshoot
    - Useful Troubleshooting for OSPFv2
    - Useful Troubleshooting for PBR

# 1 Description

## 1.1 Overview

This document supplements Manage Transport Network and it describes additional routing features:

Destination-Based Routing based on the OSPF Dynamic Routing Protocol, as well as Policy-Based

Routing. It also describes the management model and concepts for routing features. It provides

a description of the routing features; how they are modeled, the functions that are related to

them, and how they are managed.

The document Manage Transport Network describes principles for configuration of the network as

well as basic routing using configured static routes.

## 1.2 Static Routing Overview

For information regarding static routing, see Manage Transport Network.

## 1.3 OSPF Overview

In destination-based routing, the routing decision is based on the destination address of a

packet. The information used for selecting next-hop router is stored in the routing table.

There are two basic methods for creating the routing table:

- Static routing
- Dynamic routing

When using static routing, the administrator manually configures

the route for each IP prefix.

OSPFv2 provides dynamic routing, the routing information is created

and updated by a routing protocol running on the router. When dynamic

routing is used, the network automatically adapts to changes in the

network topology. This includes the breaking of links and the introduction

of new links and routers.

OSPFv2 is a licensed feature that requires a license.

## 1.4 PBR Overview

The Policy-Based Routing feature is a supplement to destination-based routing. PBR is used in

scenarios, where a more specific routing decision is needed.

The PBR routing decision is based on both source and destination addresses of the IP packet,

while destination-based routing is based on the destination IP address only.

PBR can be deployed both for ingress traffic and for traffic originating from the routers in

the node. Traffic for which PBR does not make a routing decision is routed by

destination-based routing.

The following PBR functions are supported for both IPv4 and IPv6:

- PBR for ingress traffic and traffic originated in an outer router
- PBR for traffic originated in an inner router with IPsec

## 1.5 Managed Object Model Overview

See Managed Object Model (MOM) for information about all MO classes.

### 1.5.1 OSPFv2 Managed Object Overview

OSPFv2 is configured using MO classes under the

Router

MO.

Figure 1   OSPFv2 MOM Overview

These MO classes are used to configure OSPFv2. The configuration is done top down, starting

with the settings for the OSPFv2 process, followed by the area configuration, and finally the

configuration of the interfaces

- OSPFv2 TOOLTIPFLAG contains the general settings for the OSPFv2 TOOLTIPFLAG process. Multiple processes can be created in a single virtual router by creating more than one OSPFv2 TOOLTIPFLAG instance. The MO contains the routerId, the administrative distances for different types of routes from OSPFv2, and other settings for the process.
- Area TOOLTIPFLAG MO contains the area specific settings. It contains the areaId.
- Redistribute MO contains the routes to be redistributed by OSPFv2 TOOLTIPFLAG specific setting. It contains the metric, metricType, and routeType.
- The Interface TOOLTIPFLAG MO points out an IPv4 address that is included in the OSPFv2 TOOLTIPFLAG routing. It also contains the OSPFv2 TOOLTIPFLAG specific settings that is used for that interface.
- The NSSA TOOLTIPFLAG MO does not contain any attributes. If it is created in the Area TOOLTIPFLAG, it sets the area to type NSSA (RFC 3101).
- The Stub TOOLTIPFLAG MO does not contain any attributes either. If it is created in the Area TOOLTIPFLAG, it sets the area to a stub area.
- The Md5 MO contains password and key-id used in MD5 algorithm to authenticate OSPF messages.

### 1.5.2 PBR Managed Object Overview

Policy-Based Routing is configured using a Managed Object Class placed under the

Router MO.

Figure 2   PBR MOM Overview

The following MO classes are used to configure PBR:

- The RoutingPolicyIpv4 MO and the RoutingPolicyIpv6 MO represents a policy that can classify traffic and route traffic flows according to the different classification rules. Each policy can have up to 16 classification rules.
- The RoutingRuleIpv4 MO and the RoutingRuleIpv6 MO represents one classification rule. It holds the configuration of the classification criteria. The RoutingRuleIpv4 MO and the RoutingRuleIpv6 MO has one or two NextHop MOs.
- The NextHop MOs represent the route for the classification rule. In case of two NextHop MOs, one is primary, and one is secondary based on the adminDistance attribute.

# 2 Procedures

## 2.1 Configuration of OSPFv2 in the Baseband

Planning and coordination is needed before configuring OSPFv2. This document does not

describe how to introduce dynamic routing into a network, the scope is only to describe how to

configure OSPFv2 in the

Baseband

in a network with OSPFv2.

OSPFv2

is supported only in one

Router

MO instance on the node.

Prerequisite. Next-hop routers must also be running OSPFv2.

For more information, see feature description OSPFv2.

Configuration of OSPFv2 uses the MO Classes shown in Table 1.

Table 1   MOM Configuration of OSPFv2

|   Part | MO Class                                                                                                                                                                                                                                                                                                                                                                                                     | Specific Attribute Value                                                                                                                                                                                                                                                                                                                                                 |
|--------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|      1 | TnPort                 TOOLTIPFLAG,                    EthernetPort                 TOOLTIPFLAG,                    VlanPort                 TOOLTIPFLAG,                    Router                 TOOLTIPFLAG,                    InterfaceIPv4                 TOOLTIPFLAG,                    AddressIPv4                 TOOLTIPFLAG, and                    OamAccessPoint                 TOOLTIPFLAG | To configure these MO classes, see Manage Transport Network.                                                                                                                                                                                                                                                                                                             |
|      2 | Ospfv2                 TOOLTIPFLAG                                                                                                                                                                                                                                                                                                                                                                           | For a basic configuration, the default values can be used and                    routerId                 TOOLTIPFLAG can be left empty. This lets OSPFv2 calculate the router ID.                                                                                                                                                                                       |
|      3 | Area                 TOOLTIPFLAG                                                                                                                                                                                                                                                                                                                                                                             | areaId                 TOOLTIPFLAG must be the same for all routers in the area. Use the area ID specified in the network plan.                                                                                                                                                                                                                                          |
|      4 | Redistribute                                                                                                                                                                                                                                                                                                                                                                                                 | metric, metricType, and                   routeType can be configured for external route to be                 redistributed.                                                                                                                                                                                                                                            |
|      5 | Interface                 TOOLTIPFLAG                                                                                                                                                                                                                                                                                                                                                                        | Create one                    Interface                 TOOLTIPFLAG instance for each                    AddressIPv4                 TOOLTIPFLAG, and set the                    interfaceAddress                 TOOLTIPFLAG attribute to the corresponding                    AddressIPv4                 TOOLTIPFLAG.                                                 |
|      6 | Nssa                 TOOLTIPFLAG                       Stub                 TOOLTIPFLAG                                                                                                                                                                                                                                                                                                                      | All routers in an area must have the same setting for                    Nssa                 TOOLTIPFLAG and                    Stub                 TOOLTIPFLAG. Create an                    Nssa                 TOOLTIPFLAG or                    Stub                 TOOLTIPFLAG instance if the network plan specifies that the area must be one of these types. |
|      7 | Md5                                                                                                                                                                                                                                                                                                                                                                                                          | All routers in an area must have the same md5Key and password                 when MD5 authentication is to be used.                                                                                                                                                                                                                                                     |

## 2.2 Configuration of PBR in the Outer Router

PBR in the outer router can be used for ingress traffic or for traffic originating in the

router. This can be applied in the outer router when using IPsec, or not using IPsec.

The following process shows the configuration of PBR in the outer router:

1. One or more RoutingPolicyIpv4 or RoutingPolicyIpv6 MOs are created in the Router MO. Up to 64 RoutingPolicyIpv4 or RoutingPolicyIpv6 MOs can be in the Router MO.
2. One or more RoutingRuleIpv4 MOs are created for each RoutingPolicyIpv4 MO. One or more RoutingRuleIpv6 MOs are created for each RoutingPolicyIpv6 MO. Each RoutingRuleIpv4 or RoutingRuleIpv6 MO can have one or two NextHop MOs. A routing policy can have up to 16 routing rules. The RoutingRuleIpv4 MO or RoutingRuleIpv6 defines the source and destination address or subnet, and the priority for each rule, while the NextHop MO defines the next hop router address for the rule. Route redundancy for a rule is configured using two NextHop MOs that have different adminDistance. The route defined by the NextHop MO with the lowest adminDistance is active if this next hop is reachable. The state of each NextHop MO is reflected in the nextHopState and depends on the state of the interface that is used to reach the next hop router. The reachability of the next hop router can be monitored by BFD monitoring. For the configuration of BFD monitoring, see Manage Transport Network.
3. PBR is applied for incoming traffic, traffic originated in the Router, or both. PBR for incoming traffic is applied by referring to an RoutingRuleIpv4 MO in the relevant InterfaceIPv4.routingPolicyIngress or an RoutingRuleIpv6 MO in the relevant InterfaceIPv6.routingPolicyIngress. PBR for traffic originated in the Router is applied by configuring Router.routingPolicyLocal.

## 2.3 Configuration of PBR in the Inner Router

PBR in the inner router route traffic to the IPsec VPNs and can be used for traffic

originated in the router.

Figure 3   PBR MOM in the Inner Router

The following process shows the configuration of PBR in the inner router:

1. The RoutingPolicyIpv4 MO, the RoutingPolicyIpv6 MO, or both are created in the Router MO. There can be one of each in the Router MO.
2. One or more RoutingRuleIpv4 MOs are configured for the RoutingPolicyIpv4 MO, one or more RoutingRuleIpv6 MOs are configured for the RoutingPolicyIpv6 MO, or both. Each RoutingRuleIpv4 or RoutingRuleIpv6 MO has one NextHop MO. A routing policy can have up to 16 routing rules. The RoutingRuleIpv4 MO and RoutingRuleIpv6 MO define the source and destination address or subnet, and the priority for each rule. The NextHop MO defines which IPsec VPN to be used by a reference to the IPsec tunnel interface. The state of the NextHop MO is reflected in the nextHopState and depends on the state of the referred IPsec tunnel interface.
3. To apply PBR to traffic originated in the router, Router.routingPolicyLocal, Router.routingPolicyLocalIPv6, or both are configured.

# 3 Troubleshoot

## 3.1 Useful Troubleshooting for OSPFv2

The following CLI commands can be useful while troubleshooting.

Table 2   Commands Useful to Troubleshoot

| Command                | MO Class                           | Description                                                           | Use                                                                                                                      |
|------------------------|------------------------------------|-----------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------|
| show ip ospf interface | Ospfv2                 TOOLTIPFLAG | Shows information about the interface status for the OSPFv2 instance. | When troubleshooting problems with neighbor status or routing information that seems to be out of sync with the network. |
| show ip ospf neighbor  | Ospfv2                 TOOLTIPFLAG | Shows information about the neighbors status for the OSPFv2 instance. | When troubleshooting problems with neighbor status or routing information that seems to be out of sync with the network. |
| show ip ospf route     | Ospfv2                 TOOLTIPFLAG | Shows information about the route status for the OSPFv2 instance.     | When troubleshooting problems with neighbor status or routing information that seems to be out of sync with the network. |
| show ip ospf database  | Ospfv2                 TOOLTIPFLAG | Shows information about the database status for the OSPFv2 instance.  | When troubleshooting problems with neighbor status or routing information that seems to be out of sync with the network. |

## 3.2 Useful Troubleshooting for PBR

The nextHopState attribute in the NextHop MO is updated

to display which route is currently active for each RoutingRuleIpv4 or

RoutingRuleIpv6 MO instance.