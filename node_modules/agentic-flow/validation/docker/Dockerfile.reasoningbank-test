# Dockerfile for validating agentic-flow ReasoningBank in clean environment
FROM node:20-slim

# Install necessary dependencies
RUN apt-get update && apt-get install -y \
    git \
    curl \
    && rm -rf /var/lib/apt/lists/*

# Create working directory
WORKDIR /test

# Copy validation scripts
COPY validation/docker/test-reasoningbank-npx.mjs /test/

# Set environment variables
ENV NODE_ENV=production
ENV NPM_CONFIG_UPDATE_NOTIFIER=false

# Default command runs validation
CMD ["node", "--experimental-wasm-modules", "/test/test-reasoningbank-npx.mjs"]
